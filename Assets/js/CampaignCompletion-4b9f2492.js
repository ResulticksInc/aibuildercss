var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{j as s}from"./pdf-editor-be9d2bd2.js";import{r as a,w as i,i as r,R as l}from"./react-vendor-379f659a.js";import{L as n}from"./LayoutPageWrapper-c659fc07.js";import{L as o,R as c,a as d,c as p,A as m,C as h,d as u,e as g,M as v}from"./ui-a5a97ebf.js";import{R as b}from"./RTabbar-119e28fb.js";import{U as k,dE as x,aj as S,ax as C,dF as j,az as I,ar as f,aL as y,dG as N,z as w,aC as M,dH as A,dh as L,dI as T,cb as U,c7 as D,dJ as P,dK as E,dL as O,a8 as F,ck as R,dM as W,a$ as q,M as B,dp as _,dq as $,dN as V,da as K,dO as G,dP as z,dQ as Y,dR as J,F as H,dS as Q,dT as X,dU as Z,av as ee,a0 as te,dD as se,Y as ae,aS as ie,bv as re,dV as le,bm as ne,aJ as oe,aa as ce,B as de,E as pe,am as me,dW as he,dX as ue,b6 as ge,a2 as ve,dY as be,dZ as ke,d_ as xe,d$ as Se,e0 as Ce,e1 as je,e2 as Ie,e3 as fe,e4 as ye,e5 as Ne,e6 as we,e7 as Me,e8 as Ae,e9 as Le,ah as Te,ea as Ue,eb as De}from"./index-75225e0a.js";import{R as Pe}from"./RSDropdowns-9012b9eb.js";import{R as Ee}from"./RSIcon-40715e67.js";import{S as Oe}from"./kendo-5d73125a.js";import{R as Fe,d as Re}from"./RSKendoDropdown-89bac735.js";import{R as We,a as qe}from"./RSCheckbox-6c51a528.js";import"./style-a86a43a5.js";import{i as Be,m as _e,n as $e,o as Ve,p as Ke}from"./inputLimit-ce03b0f6.js";import{q as Ge}from"./utils-16c7e021.js";import{R as ze}from"./RSFormGroup-2e23951f.js";import{F as Ye}from"./FormFieldIcon-388bc468.js";import{F as Je}from"./FormLabel-7c8c6237.js";import{F as He}from"./FormListWrapper-0cd539ec.js";import{RSErrorPopup as Qe,RSConfirmAlert as Xe}from"./RSConfirmAlert-c9e1da8b.js";import{R as Ze}from"./RSSwitch-b5eda9e2.js";import{B as et}from"./BootstrapDropdown-f79019e1.js";import{_ as tt}from"./index-c56b47e9.js";import{C as st}from"./index-ea0ef9a3.js";import"./constants-82903eb8.js";import{S as at}from"./SkeletonTable-f73684ed.js";const it=e=>{const t=e.progressSteps.map(((t,a)=>s.jsxs(o.Item,{className:`${t.status} ${"tick"===e.progressType?"tick-mark":""}`,children:[t.steps?s.jsx("span",{className:"step",children:""!==t.steps?t.steps:a+1}):"",t.icons?s.jsx("span",{className:"step",children:s.jsx("i",{className:t.icons})}):"",s.jsx("span",{className:"title",children:t.steps_title})]},a)));return s.jsx(s.Fragment,{children:s.jsx("div",{className:`justify-content-center ${e.className?e.className:""}`,children:s.jsx(o,{variant:"steps",children:t})})})},rt=e=>{const t=e.progressSteps.map(((t,a)=>s.jsxs(o.Item,{className:`${t.status} ${"tick"===e.progressType?"tick-mark":""}`,children:[t.steps?s.jsx("span",{className:"step",children:""!==t.steps?t.steps:a+1}):"",t.icons?s.jsx("span",{className:"step",children:s.jsx("i",{className:t.icons})}):"",s.jsx("span",{className:"title",children:t.steps_title})]},a)));return s.jsx(s.Fragment,{children:s.jsx("div",{className:`justify-content-center progress-quality-check ${e.className?e.className:""}`,children:s.jsx(o,{variant:"steps",children:t})})})},lt=e=>{var t,a,i,r,l,n,o,c,d,p,m,h,u,g,v,b;return s.jsxs(s.Fragment,{children:[s.jsx(it,{progressSteps:e.progressSteps}),s.jsxs("div",{className:`progress-steps-box ${e.progressStepsClass?e.progressStepsClass:""}`,children:[s.jsx(k,{text:null==(t=null==e?void 0:e.header)?void 0:t.name,position:"top",children:s.jsxs("div",{className:"steps-label",children:[s.jsx("small",{children:"Name:"}),s.jsx("label",{className:"label-row",children:(null==(a=null==e?void 0:e.header)?void 0:a.name)||""})]})}),s.jsx(k,{text:(null==(i=null==e?void 0:e.header)?void 0:i.startDate)?`${x(null==(r=null==e?void 0:e.header)?void 0:r.startDate)} - ${x(null==(l=null==e?void 0:e.header)?void 0:l.endDate)}`:"",position:"top",children:s.jsxs("div",{className:"steps-label",children:[s.jsx("small",{children:"Period:"}),s.jsx("label",{className:"label-row",children:(null==(n=null==e?void 0:e.header)?void 0:n.startDate)?`${x(null==(o=null==e?void 0:e.header)?void 0:o.startDate)} - ${x(null==(c=null==e?void 0:e.header)?void 0:c.endDate)}`:""})]})}),s.jsx(k,{text:(null==(d=null==e?void 0:e.header)?void 0:d.type)||"",position:"top",children:s.jsxs("div",{className:"steps-label",children:[s.jsx("small",{children:"Type:"}),s.jsx("label",{className:"label-row",children:(null==(p=null==e?void 0:e.header)?void 0:p.type)||""})]})}),s.jsx(k,{text:(null==(h=null==(m=null==e?void 0:e.header)?void 0:m.goal)?void 0:h.toLowerCase().includes("select"))?"Reach":(null==(u=null==e?void 0:e.header)?void 0:u.goal)||"",position:"top",children:s.jsxs("div",{className:"steps-label",children:[s.jsx("small",{children:"Primary communication goal:"}),s.jsx("label",{className:"label-row",children:(null==(v=null==(g=null==e?void 0:e.header)?void 0:g.goal)?void 0:v.toLowerCase().includes("select"))?"Reach":(null==(b=null==e?void 0:e.header)?void 0:b.goal)||""})]})}),s.jsxs("div",{className:"steps-label-row-icon d-flex align-items-center justify-content-end",children:["editplan"===e.type?s.jsx(k,{text:"Edit plan",position:"top",children:s.jsx("i",{className:"icon-rs-form-edit-large icons-lg white large-icon cp "+("editplan"===e.type?"bgBlue":"bgGreen-medium"),onClick:()=>{e.buttonClicked(1)}})}):null,!0===e.editsmart?s.jsx(k,{text:"Smart link",position:"top",children:s.jsx("i",{className:"icon-rs-smart-link-large icons-lg white large-icon cp padding0 "+(!0===e.isSmartlinkCreate?"bgGreen-medium":"bgGrey"),onClick:()=>{e.buttonClicked(2)}})}):null]})]})]})};class nt extends a.Component{constructor(e){super(e),t(this,"state",{utmArray:this.props.data,errMsg:this.props.errMsg,item:this.props.item,cmasterutmList:[]}),t(this,"componentDidMount",(()=>{let e=S().utmParametersList;e.push({attributeName:"Custom tag/parameter",dataAttributeId:2e3,dataAttributeValue:""}),this.setState({cmasterutmList:e}),this.setState({utmArray:this.props.data,errMsg:this.props.errMsg,item:this.props.item})})),t(this,"componentDidUpdate",(e=>{e!==this.props&&this.setState({utmArray:this.props.data,errMsg:this.props.errMsg,item:this.props.item})})),t(this,"getUtmListData",(()=>{let e=this.state.cmasterutmList,t=[];if(e.map((e=>{0===this.props.data.filter((t=>e.attributeName===t.key)).length&&t.push(e)})),0===t.length){let e={attributeName:"Custom tag/parameter",dataAttributeId:2e3,dataAttributeValue:""};t.push(e)}else if(0===t.filter((e=>"Custom tag/parameter"===e.attributeName)).length){let e={attributeName:"Custom tag/parameter",dataAttributeId:2e3,dataAttributeValue:""};t.push(e)}return t}))}getTags(e){var t="";return void 0!==e&&""!==e&&void 0===(t=this.props.json.customParameterTags.find((t=>t.includes(e.toLowerCase()))))&&(t=""),t}render(){return s.jsx(ze,{children:s.jsx(c,{children:s.jsx(d,{md:{span:8,offset:3},children:s.jsxs(c,{children:[s.jsx(d,{md:5,children:"Custom tag/parameter"===this.state.item.key?s.jsx(We,{style:{paddingRight:25,backgroundColor:"orange",width:300},required:!0,placeholder:"Enter tag",val:this.state.item.text,iconPlaceholder:!0,iconName:C,iconColor:"red",iconSize:"sm",errorMessage:this.state.item.keyErrMsg,handleOnchange:e=>{if(e.length>100)return;let t={...this.state.item};t.text=e,t.keyErrMsg=e.length>0?null:"Enter tag",this.setState({item:t}),this.props.item.text=e,this.props.item.keyErrMsg=e.length>0?null:"Enter tag"},handleOnBlur:e=>{let t={...this.state.item};t.keyErrMsg=e.length>0?null:"Enter tag",this.setState({item:t}),this.props.item.keyErrMsg=e.length>0?null:"Enter tag",this.props.onChange(this.state.utmArray)},iconOnClick:()=>{let e={...this.state.item};e.key="",e.value="",this.props.item.key="",this.props.item.value="",this.props.item.text="",this.setState({item:e}),this.props.onChange(this.state.utmArray)}}):s.jsx(Fe,{required:!0,label:"Tag",className:"required",data:this.getUtmListData(),textField:"attributeName",dataItemKey:"dataAttributeId",value:void 0!==this.state.item.key&&""!==this.state.item.key?{attributeName:this.state.item.key,dataAttributeId:0}:{attributeName:"-- Select --",dataAttributeId:0},errorMessage:this.state.item.keyErrMsg,onChange:e=>{let t={...this.state.item};t.display=e.target.value,t.key=e.target.value.attributeName,t.value=e.target.value.dataAttributeValue,t.keyErrMsg=e.target.value.attributeName.length>0?null:j,this.setState({item:t}),this.props.item.key=e.target.value.attributeName,this.props.item.keyErrMsg=e.target.value.attributeName.length>0?null:j,this.props.item.value=e.target.value.dataAttributeValue,this.props.onChange(this.state.utmArray)}})}),s.jsx(d,{md:6,children:s.jsx(We,{required:!0,placeholder:"Enter value",val:this.state.item.value,disabled:"Custom tag/parameter"!==this.state.item.key,errorMessage:this.state.item.valueErrMsg,cb:e=>{if(e.length>100)return;let t={...this.state.item};t.value=e,t.valueErrMsg=e.length>0?null:j,this.setState({item:t}),this.props.item.valueErrMsg=e.length>0?null:j,this.props.item.value=e},ob:e=>{this.props.onChange(this.state.utmArray)}})}),s.jsx(d,{md:1,children:s.jsx(Ye,{disabled:0===this.props.index&&!(this.props.data.length<5),children:s.jsx(I,{children:s.jsx(f,{icon:0===this.props.index?y:N,tooltip:0===this.props.index?"Add":"Remove",color:0===this.props.index?"blue":"red",onClick:()=>{0===this.props.index?this.props.addBtnClicked():this.props.index<5&&this.props.removeBtnClicked(this.state.item)}})})})})]})})})})}}class ot extends a.Component{constructor(){super(...arguments),t(this,"state",{webItem:{},weburl:"",adapativeUrl:!1,utmErrMessage:null,errorMessage:null,successIcon:null,isShowTick:!1,customParameter:[],weburlFocus:!1,adaptiveUrlFocus:!1,adapativeUrlBtnClicked:!1,smartlinkWebLoading:!1,smartlinkWebStatus:null,smartlinkPWALoading:!1,smartlinkPWAStatus:null,getAddAccessData:!1,getUpdateAccessData:!1,getDeleteAccessData:!1}),t(this,"componentDidMount",(()=>{if(""==this.props.item.url){let e={...this.props};e.item.url="https://",this.setState({webItem:e.item})}else this.setState({webItem:this.props.item}),this.setState({adapativeUrlBtnClicked:!!(this.props.item&&this.props.item.mobileAdaptiveUrl.length>0)});this.getPermissionData()})),t(this,"getPermissionData",(()=>{let e=!1,t=!1,s=!1;const a=M("Communications");1==(null==a?void 0:a.get_AddAccessData)&&(e=!0),t=1==(null==a?void 0:a.accessUpdateData),(null==a?void 0:a.accessDeleteData)&&(s=!0),this.setState({getAddAccessData:e,getUpdateAccessData:t,getDeleteAccessData:s})})),t(this,"componentDidUpdate",(e=>{e!==this.props&&(this.setState({utmErrMessage:this.state.utmErrMessage}),this.setState({errorMessage:this.props.errorMessage}))})),t(this,"checkWebsiteLocal",((e,t,s,a)=>{let i=new AbortController,r=!1;fetch(e,{method:"GET",signal:i.signal}).then((e=>{e.status<=226?(this.setState({smartlinkWebLoading:!1}),!1===r&&(r=!0,s({status:!0,message:"Valid"}))):(this.setState({smartlinkWebLoading:!1}),!1===r&&(r=!0,a({status:!1,isabort:!1,message:"Not Valid"})))})).catch((e=>{this.setState({smartlinkWebLoading:!1})}))})),t(this,"checkValidDomain",(e=>{if(L(e)){if(!e.includes("https://")){let e={...this.state.errorMessage};return e.errUrl="Your site is not secure",this.props.errorMessage.errUrl="Your site is not secure",this.setState({errorMessage:e,smartlinkWebStatus:!1}),!0}if(!T(e)){let e={...this.state.errorMessage};return e.errUrl=U,this.props.errorMessage.errUrl=U,this.setState({errorMessage:e,smartlinkWebStatus:!1}),!0}return this.setState({smartlinkWebLoading:!0}),this.checkWebsiteLocal(e,this.props.context,(e=>{if(this.setState({smartlinkWebLoading:!1}),!1===e.status){let e={...this.state.errorMessage};e.errUrl=U,this.props.errorMessage.errUrl=U,this.setState({errorMessage:e,smartlinkWebStatus:!1})}else this.setState({errorMessage:tempErr,smartlinkWebStatus:!0})}),(e=>{if(this.setState({smartlinkWebLoading:!1}),!0===e.isabort){let e={...this.state.errorMessage};e.errUrl=null,this.props.errorMessage.errUrl=null,this.setState({errorMessage:e,smartlinkWebStatus:!0})}else{let e={...this.state.errorMessage};e.errUrl=U,this.props.errorMessage.errUrl=U,this.setState({errorMessage:e,smartlinkWebStatus:!1})}})),!1}{let e={...this.state.errorMessage};return e.errUrl=U,this.props.errorMessage.errUrl=U,this.setState({errorMessage:e,smartlinkWebStatus:!1}),!0}})),t(this,"checkValidMobileAdaptiveDomain",(e=>{e.includes("https://")?(this.setState({smartlinkPWALoading:!0}),D(e,this.props.context,(e=>{if(this.setState({smartlinkPWALoading:!1}),!1===e.status){let e={...this.state.errorMessage};e.errAdaptive=E,this.props.errorMessage.errAdaptive=E,this.setState({errorMessage:e,smartlinkPWAStatus:!1})}else this.setState({smartlinkPWAStatus:!0})}),(e=>{this.setState({smartlinkPWALoading:!1});let t={...this.state.errorMessage};t.errAdaptive=P,this.props.errorMessage.errAdaptive=P,this.setState({errorMessage:t}),this.setState({smartlinkPWAStatus:!1})}))):this.props.errorMessage.errAdaptive="Your site is not secure"})),t(this,"tempQS",""),t(this,"getOnchangeValue",(e=>{let t=e.trim();t.replace(/^https:\/\/https:\/\//,"https://");let s={...this.state.errorMessage};s.errUrl=t.length>0?null:O,this.props.errorMessage.errUrl=t.length>0?null:O,this.setState({errorMessage:s});var a={...this.state.webItem};a.url=t,this.props.item.url=t,this.setState({webItem:a,weburl:e,smartlinkWebStatus:null})}))}getParameterList(){var e=this.props.json.defaultCustomParameters,t=[];return e.map((e=>{0===this.state.webItem.customParameters.filter((t=>t.key.toLowerCase()===e.toLowerCase())).length&&t.push(e)})),0===t.length&&t.push("Custom tag/parameter"),t}checkUTMParameter(){var e=!1,t={...this.state.webItem};return t.customParameters.map(((t,s)=>{""!==t.key?t.key.toLowerCase().includes("custom tag/parameter")?void 0!==t.text&&""!==t.text?""!==t.value?e=!0:(e=!1,t.valueErrMsg=j):(e=!1,t.keyErrMsg="Enter tag"):""!==t.value?e=!0:(e=!1,t.valueErrMsg=A):(e=!1,t.keyErrMsg=A)})),this.setState({webItem:t}),e}render(){var e,t;let a=`${this.state.webItem.url}${""!==this.state.webItem.queryString&&!1===this.state.weburlFocus?"?"+this.state.webItem.queryString:""}`,i=`${this.state.webItem.mobileAdaptiveUrl}${""!==this.state.webItem.queryString?"?"+this.state.webItem.queryString:""}`;return s.jsxs("div",{className:(!0===(null==(e=this.props)?void 0:e.clickoff)?"click-off":"click-on")+" mt30",children:[s.jsxs(s.Fragment,{children:[s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Landing page URL",right:!0})}),s.jsx(d,{id:"s_landing_url",md:8,children:s.jsx(We,{placeholder:"Landing page URL",isLoading:this.state.smartlinkWebLoading,iconPlaceholder:null===(null==(t=this.state.errorMessage)?void 0:t.errUrl),iconName:!0===this.state.isShowTick&&!1===this.state.smartlinkWebLoading?"icon-rs-circle-tick-medium icons-md green":null!==this.state.smartlinkWebStatus?!0===this.state.smartlinkWebStatus&&!1===this.state.smartlinkWebLoading?"icon-rs-circle-tick-medium icons-md green":"icon-rs-circle-close-edge-medium icons-md red":"",nocp:!0,max:Be,required:!0,val:!0===this.state.weburlFocus?this.state.webItem.url:void 0!==this.state.webItem.url&&this.state.webItem.url.length>0?a:"",errorMessage:this.state.errorMessage&&this.state.errorMessage.errUrl,handleOnchange:e=>{e.length&&this.setState({isShowTick:!1}),this.getOnchangeValue(e)},handleOnBlur:e=>{let t=e,s=e.slice(0,8);s.includes("https://")||(t="https://"+e),s.includes("http://")&&(t=e.replace("http://","https://")),this.setState({isShowTick:!1});let a={...this.state.errorMessage};a.errUrl=t.length>0?null:O,this.props.errorMessage.errUrl=t.length>0?null:O,this.setState({errorMessage:a}),this.setState({weburlFocus:!1}),localStorage.setItem("weburl",t);var i={...this.state.webItem};if(i.url=F(t),this.props.item.url=F(t),this.setState({webItem:i}),0===t.length){let e={...this.state.errorMessage};return e.errUrl="Enter website",this.props.errorMessage.errUrl="Enter website",void this.setState({errorMessage:e})}if(0===this.props.index&&this.props.data.length>1&&this.props.data[1].web.url===t){let e={...this.state.errorMessage};return e.errUrl="URL is already used for Smartlink 2",this.props.errorMessage.errUrl="URL is already used for Smartlink 2",void this.setState({errorMessage:e})}if(this.props.data.length>1&&1===this.props.index&&this.props.data[0].web.url===t){let e={...this.state.errorMessage};return e.errUrl="URL is already used for Smartlink 1",this.props.errorMessage.errUrl="URL is already used for Smartlink 1",void this.setState({errorMessage:e})}if(t.length)try{this.checkValidDomain(F(t))?this.props.onChange():this.setState({isShowTick:!0})}catch{if(t.includes("www")){let e={...this.state.errorMessage};return e.errUrl="Your site is not secure",this.props.errorMessage.errUrl="Your site is not secure",void this.setState({errorMessage:e})}{let e={...this.state.errorMessage};return e.errUrl="Enter valid website",this.props.errorMessage.errUrl="Enter valid website",void this.setState({errorMessage:e})}}},onFocus:()=>{const e={...this.state.webItem};e.url.startsWith("https://")&&(e.url=e.url.replace("https://","")),this.setState({webItem:e}),this.setState({weburlFocus:!0})}})}),s.jsx(d,{md:1,children:s.jsx(Ye,{disabled:!0===this.state.webItem.adapativeWeb,children:s.jsx(I,{children:s.jsx(f,{mainClass:this.state.getAddAccessData?"":"click-off",icon:y,tooltip:"Add",color:"blue",onClick:()=>{var e={...this.state.webItem};e.adapativeWeb=!0,this.props.item.adapativeWeb=!0,this.setState({adapativeUrlBtnClicked:!0});let t={...this.state.errorMessage};t.errAdaptive=null,this.props.errorMessage.errAdaptive=null,this.setState({errorMessage:t}),this.setState({webItem:e})}})})})})]}),s.jsx(c,{children:s.jsx(d,{md:11,className:void 0!==this.state.webItem.url&&0===this.state.webItem.url.length?"click-off":"",children:s.jsxs("div",{id:"s_web_utm",className:"d-flex justify-content-end",children:[s.jsx(qe,{lbl:"UTM parameter",className:"mr5",checked:this.props.item.utmparameter,cb:e=>{var t={...this.state.webItem};if(t.utmparameter=e,this.props.item.utmparameter=e,this.props.onChange(),t.customParameters.length<=0){var s={...this.state.webItem}.customParameters;s.push({key:"",value:""}),this.props.item.customParameters=s,this.setState({webItem:t})}!1===e&&(this.props.item.IsCheckedAll=e,this.props.item.IsCheckedIos=e,this.props.item.IsCheckedAndroid=e,this.props.item.customParameters=[],this.props.item.queryString="",t.customParameters=[],t.queryString=""),this.props.onChange("wutmparameter",e),this.setState({webItem:t})}}),s.jsx("div",{style:{marginLeft:-7,top:-3,position:"relative"},children:s.jsx(Ye,{children:s.jsx(I,{children:s.jsx(f,{icon:R,size:"md",tooltip:W})})})})]})})})]}),!0===this.state.adapativeUrlBtnClicked?s.jsx(s.Fragment,{children:s.jsx(ze,{className:"marginT35",children:s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Mobile adaptive/PWA",right:!0})}),s.jsx(d,{md:8,children:s.jsx(We,{required:!0,placeholder:"Enter your adaptive mobile URL",max:Be,isLoading:this.state.smartlinkPWALoading,iconPlaceholder:!0,iconName:null!==this.state.smartlinkPWAStatus?!0===this.state.smartlinkPWAStatus?"icon-rs-circle-tick-medium icons-md green":"icon-rs-circle-close-edge-medium icons-md red":"",val:!0===this.state.adaptiveUrlFocus?this.state.webItem.mobileAdaptiveUrl:void 0!==this.state.webItem.mobileAdaptiveUrl&&this.state.webItem.mobileAdaptiveUrl.length>0?i:"",errorMessage:this.state.errorMessage&&this.state.errorMessage.errAdaptive,handleOnchange:e=>{var t={...this.state.webItem};t.mobileAdaptiveUrl=e,this.props.item.mobileAdaptiveUrl=e;let s={...this.state.errorMessage};s.errAdaptive=e.length>0?null:E,this.props.errorMessage.errAdaptive=e.length>0?null:E,this.setState({errorMessage:s}),this.setState({webItem:t,smartlinkPWAStatus:null})},of:()=>{this.setState({adaptiveUrlFocus:!0})},handleOnBlur:e=>{var t={...this.state.webItem};if(t.mobileAdaptiveUrl=F(e),this.props.item.mobileAdaptiveUrl=F(e),this.setState({webItem:t}),e.length)try{if(new URL(e))if(e.includes("https://"))this.checkValidMobileAdaptiveDomain(F(e)),this.props.onChange();else if(e.includes("www")){let e={...this.state.errorMessage};e.errAdaptive="Your site is not secure",this.props.errorMessage.errAdaptive="Your site is not secure",this.setState({errorMessage:e,smartlinkPWAStatus:!1})}else{let e={...this.state.errorMessage};e.errAdaptive="Your site is not secure",this.props.errorMessage.errAdaptive="Your site is not secure",this.setState({errorMessage:e,smartlinkPWAStatus:!1})}}catch{if(e.includes("www")){let e={...this.state.errorMessage};e.errAdaptive="Your site is not secure",this.props.errorMessage.errAdaptive="Your site is not secure",this.setState({errorMessage:e})}else{let e={...this.state.errorMessage};e.errAdaptive=P,this.props.errorMessage.errAdaptive=P,this.setState({errorMessage:e})}}}})}),s.jsx(d,{md:1,children:s.jsx(Ye,{children:s.jsx(I,{children:s.jsx(f,{icon:q,size:"md",tooltip:"Remove",color:"color-primary-red",onClick:()=>{var e={...this.state.webItem};e.mobileAdaptiveUrl="",e.adapativeWeb=!1,this.props.item.mobileAdaptiveUrl="",this.props.item.adapativeWeb=!1,this.setState({adapativeUrlBtnClicked:!1}),this.setState({webItem:e})}})})})})]})})}):null,!0===this.state.webItem.utmparameter?s.jsxs(ze,{children:[s.jsxs(c,{className:"marginT35",children:[s.jsx(d,{md:{span:3,offset:3},children:s.jsx("h4",{className:"blue",children:"UTM parameter"})}),s.jsx(d,{md:5,style:{display:"flex",justifyContent:"end",marginBottom:30},children:s.jsxs(He,{mainClass:"w-auto",className:"utm-param",children:[s.jsx("li",{children:s.jsx(qe,{className:"marginB0",lbl:"All",checked:this.props.item.IsCheckedAll,cb:e=>{let t={...this.state.webItem};this.props.item.IsCheckedAll=e,this.props.item.IsCheckedIos=e,this.props.item.IsCheckedAndroid=e,this.props.onChange("isCheckedAll",e),this.setState({webItem:t})}})}),s.jsx("li",{children:s.jsx(qe,{className:"marginB0",lbl:"iOS",checked:this.props.item.IsCheckedIos,cb:e=>{this.props.item.IsCheckedAll=e,e&&this.props.item.IsCheckedAndroid?(this.props.item.IsCheckedAll=e,this.props.item.IsCheckedIos=e,this.props.item.IsCheckedAndroid=e):(e&&this.props.item.IsCheckedAndroid,this.props.item.IsCheckedAll=!1,this.props.item.IsCheckedIos=e),this.props.onChange("IsCheckedIos",e)}})}),s.jsx("li",{children:s.jsx(qe,{className:"marginB0 mr0",lbl:"Android",checked:this.props.item.IsCheckedAndroid,cb:e=>{let t={...this.state.webItem};e&&this.props.item.IsCheckedIos?(this.props.item.IsCheckedAll=e,this.props.item.IsCheckedIos=e,this.props.item.IsCheckedAndroid=e):(e&&this.props.item.IsCheckedIos,this.props.item.IsCheckedAll=!1,this.props.item.IsCheckedAndroid=e),this.props.onChange("IsCheckedAndroid",e),this.setState({webItem:t})}})})]})})]}),this.state.webItem.customParameters&&this.state.webItem.customParameters.map(((e,t)=>s.jsx(nt,{type:"web",data:this.state.webItem.customParameters,item:e,index:t,json:this.props.json,utmParameterValues:this.getParameterList(),errMsg:this.state.utmErrMessage,onChange:e=>{let t=new URLSearchParams;e.length>0&&e.map((e=>{let s=e.key;"Custom tag/parameter"===e.key&&(s=e.text),""!==s&&""!==e.value&&t.append(s,e.value)}));let s={...this.state.webItem};s.queryString=t.toString(),this.props.item.queryString=t.toString(),this.setState({webItem:s}),this.props.onChange("utmparameter",!0),this.props.onChange()},customTagRemoveBtn:e=>{},addBtnClicked:()=>{if(!0===this.checkUTMParameter()){let e={...this.state.webItem},t=e.customParameters;t.push({key:"",value:""}),this.props.item.customParameters=t,this.setState({webItem:e}),this.props.onChange("utmparameter",!0)}},removeBtnClicked:e=>{let t={...this.state.webItem};var s=t.customParameters.indexOf(e),a=t.customParameters;a.splice(s,1),this.props.item.customParameters=a;let i=new URLSearchParams;a.length>0&&a.map((e=>{let t=e.key;"Custom tag/parameter"===e.key&&(t=e.text),""!==t&&""!==e.value&&i.append(t,e.value)})),t.queryString=i.toString(),this.props.item.queryString=i.toString(),this.setState({webItem:t}),this.props.onChange("utmparameter",!0),this.forceUpdate()}})))]}):null]})}}t(ot,"contextType",w);const ct=i(ot);class dt extends a.Component{constructor(){super(...arguments),t(this,"state",{mobileApp:{},mobileAppList:[],errorMessage:null,accordionKey:this.props.index,appScreenList:[],appSubScreenList:[],saveError:!1,alertEnter:!1,screenName:"",errScreenName:null,screenNameLoader:!1}),t(this,"componentDidUpdate",(e=>{e!==this.props&&(this.props.data,""===this.props.item.appName.appId||this.setState({mobileApp:this.props.item}),this.setState({errorMessage:this.props.errorMessage}))})),t(this,"getMobileApps",(()=>{let e=S();null!==e&&null!==e.mobileAppsList&&this.setState({mobileAppList:e.mobileAppsList})})),t(this,"getAppScreenList",(e=>{if(""===this.props.item.deviceType||"mobile"===this.props.item.deviceType.toLowerCase())return;let t={appId:this.props.item.appName.appId,deviceType:void 0!==this.props.item.deviceType&&""!==this.props.item.deviceType?this.props.item.deviceType:"Mobile",isdeepLink:this.props.item.isDeeplinkEnabled,databaseName:"SmartDX_e7be7449_b573_4e29_a427_a46e36288409"};B({path:_,loading:"add"===this.props.mode&&this.props.context.globalStateData.setIsLoadingData,params:t,sessionOut:this.props.context.globalStateData.setSessionOutData,ok:e=>{var t;if(e.status&&(null==(t=null==e?void 0:e.data)?void 0:t.appScreensList))this.setState({appScreenList:e.data.appScreensList});else{let e={displayName:"Enter your screen name",activityName:"Enter your screen name",deepLinkUrl:"Enter your screen name"};this.setState({appScreenList:[e]})}},fail:e=>{this.setState({appScreenList:[{displayName:"Enter your screen name",activityName:"Enter your screen name",deepLinkUrl:"Enter your screen name"}]})}})})),t(this,"getAppSubScreenList",(e=>{if(""===this.props.item.deviceType||"mobile"===this.props.item.deviceType.toLowerCase())return;let t={appId:this.props.item.appName.appId,deviceType:void 0!==this.props.item.deviceType&&""!==this.props.item.deviceType?this.props.item.deviceType:"Mobile",screenName:this.props.item.mainScreenName.displayName,databaseName:"SmartDX_e7be7449_b573_4e29_a427_a46e36288409"};B({path:$,loading:"add"===this.props.mode&&this.props.context.globalStateData.setIsLoadingData,params:t,sessionOut:this.props.context.globalStateData.setSessionOutData,ok:t=>{t.status&&void 0!==t.data?(this.setState({appSubScreenList:t.data.appSubScreensList}),e(t.data.appSubScreensList)):(this.setState({appSubScreenList:[]}),e([]))},fail:t=>{this.setState({appSubScreenList:[]}),e([])}})})),t(this,"deviceDropDownChanges",((e,t)=>{let s=e.target.value;this.props.data.filter((e=>e.deviceType));let a={...this.state.mobileApp};a.deviceType=s,this.props.item.deviceType=s;var i=a.customParameters;a.customParameters=[],"1"===t&&(this.props.item.appName={appName:"-- Select --",appId:"",appGuid:""}),this.props.item.utmparameter=!1,this.props.item.customParameters=[],this.props.item.mainScreenName={displayName:"",activityName:""};let r=this.props.item;if(!0===s.includes("iPhone")||s.includes("iPad")){if(!0===r.IsCheckedAll||!0===r.IsCheckedIos)r.IsCheckedAll=!0,r.utmparameter=!0,a.customParameters=i,r.customParameters=i;else if(this.props.data.length>0){let e=this.props.data.filter((e=>e.deviceType.toLowerCase().includes("ip")));var l=[];e.map((e=>{if(e.iOSUTMClicked&&e.customParameters.length>0)return r.utmparameter=!0,r.iOSUTMClicked=!0,l=[...e.customParameters],a.customParameters=l,r.customParameters=l,void(r.IsCheckedIos=!0)}))}}else(!0===s.includes("Android phone")||s.includes("Android tablet"))&&(!0===r.IsCheckedAll||!0===r.IsCheckedAndroid?(r.utmparameter=!0,a.customParameters=i,r.customParameters=i):this.props.data.length>0&&this.props.data.filter((e=>e.deviceType.toLowerCase().includes("an"))).map((e=>{if(e.androidUTMClicked&&e.customParameters.length>0)return r.utmparameter=!0,r.androidUTMClicked=!0,a.customParameters=[...e.customParameters],r.customParameters=[...e.customParameters],void(r.IsCheckedAndroid=!0)})));this.setState({mobileApp:a,alertEnter:!1,screenName:"",errScreenName:null});let n={...this.state.errorMessage};n.errDeviceType=s.length>0?null:V,this.props.errorMessage.errDeviceType=s.length>0?null:V,this.setState({errorMessage:n}),""!==r.appName.appId&&this.getAppScreenList(),this.props.item=r,this.props.onChange()})),t(this,"mobileAppDropDownChange",(e=>{var t={...this.state.mobileApp};t.appName=e.target.value,t.mainScreenName=null,this.props.item.appName=e.target.value,this.props.item.appName.appId=e.target.value.appGuid,this.props.item.mainScreenName={displayName:"",activityName:""},this.props.item.isDeeplinkEnabled=!0,this.setState({mobileApp:t,appSubScreenList:[],alertEnter:!1,screenName:"",errScreenName:null});let s={...this.state.errorMessage};s.errMobileApp=e.target.value.appName.length>0?null:K,this.props.errorMessage.errMobileApp=e.target.value.appName.length>0?null:K,this.setState({errorMessage:s}),this.getAppScreenList(e.target.value),this.props.onChange("appName",this.props.item.appName)})),t(this,"mainScreenDropDownChanges",(e=>{var t;if("enter your screen name"===e.target.value.deepLinkUrl.toLowerCase()){this.setState({alertEnter:!0});let e={...this.state.errorMessage};return e.errMainScreen=null,this.props.errorMessage.errMainScreen=null,void this.setState({errorMessage:e})}this.props.item.mainScreenName=e.target.value;let s=this.state.mobileAppList.filter((e=>e.appGuid===this.props.item.appName.appId))[0].playstoreURL.filter((e=>parseInt(e.platformId)===G(this.props.item.deviceType)));this.props.item.mainScreenName.storeUrl=null==(t=s[0])?void 0:t.url;let a={...this.state.mobileApp};a.mainScreenName=e.target.value,this.setState({mobileApp:a}),this.props.onChange(),!0!==this.props.item.deviceType.includes("Android phone")&&!0!==this.props.item.deviceType.includes("Android tablet")||(this.props.item.subScreenName="",this.setState({screenNameLoader:!0}),this.getAppSubScreenList((e=>{this.setState({screenNameLoader:!1}),0===e.length?this.props.item.subScreenName=null:this.props.item.subScreenName=""})));let i={...this.state.errorMessage};i.errMainScreen=e.target.value.displayName.length>0?null:z,this.props.errorMessage.errMainScreen=e.target.value.displayName.length>0?null:z,this.setState({errorMessage:i})})),t(this,"subScreenDropDownChanges",(e=>{var t=e.target.value;this.props.item.subScreenName=t;let s={...this.state.mobileApp};s.subScreenName=e.target.value,this.setState({mobileApp:s}),this.props.onChange();let a={...this.state.errorMessage};a.errSubScreen=e.target.value.length>0?null:"Select sub screen",this.props.errorMessage.errSubScreen=e.target.value.length>0?null:"Select sub screen",this.setState({errorMessage:a})}))}componentDidMount(){""===this.props.item.appName.appId?this.props.item.appName={appName:"-- Select --",appId:""}:(this.props.item.appName=this.props.item.appName,this.getAppScreenList(),this.getAppSubScreenList((e=>{}))),this.setState({mobileApp:this.props.item}),this.getMobileApps()}checkUTMParameter(){var e=!1,t={...this.state.mobileApp};return t.customParameters.map(((t,s)=>{""!==t.key?t.key.toLowerCase().includes("custom tag/parameter")?void 0!==t.text&&""!==t.text?""!==t.value?e=!0:(e=!1,t.valueErrMsg=j):(e=!1,t.keyErrMsg="Enter tag"):""!==t.value?e=!0:(e=!1,t.valueErrMsg=A):(e=!1,t.keyErrMsg=A)})),this.setState({webItem:t}),e}getDeviceList(){var e=[];return pt.map((t=>{0===this.props.data.filter((e=>e.deviceType.toLowerCase()===t.toLowerCase())).length&&e.push(t)})),e}getParameterList(){var e=this.props.json.defaultCustomParameters,t=[];return e.map((e=>{0===this.state.mobileApp.customParameters.filter((t=>t.key.toLowerCase()===e.toLowerCase())).length&&t.push(e)})),0===t.filter((e=>"custom tag/parameter"===e.toLowerCase())).length&&t.push("Custom tag/parameter"),t}render(){var e,t,a,i,r,l,n,o,h,u,g,v,b;let x=window.location.pathname.includes("creation-smartlink")?"click-off":"click-on";return s.jsxs(s.Fragment,{children:[!0===this.state.saveError&&s.jsx(Qe,{headerTitle:"Sorry",para:"Please try again after sometime...",primaryButtonText:"OK",buttonClicked:e=>{this.setState({saveError:!1})}}),s.jsxs(p,{eventKey:this.props.index,children:[s.jsx(p.Header,{children:s.jsxs("div",{className:"rs-accordin-header",onClick:()=>{this.props.accordinChanges(this.props.index)},children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("i",{class:`icons-md ${this.props.index!==this.props.activationKey?"icon-rs-square-plus-fill-medium blue":"icon-rs-square-minus-fill-medium grey-medium"} marginR8`}),s.jsxs("h3",{children:[" ",void 0!==this.props.item.deviceType&&""!==this.props.item.deviceType?this.props.item.deviceType:"Mobile"," "]})]}),s.jsx(k,{text:"Remove",position:"top",children:s.jsx("i",{className:"icon-rs-circle-minus-fill-edge-medium icons-md red cursor-pointer",onClick:()=>{this.props.deleteItem(this.state.mobileApp)}})})]})}),s.jsx(m.Collapse,{eventKey:this.props.index,children:s.jsx(p.Body,{children:s.jsx("div",{className:"rs-accordin-panel",children:s.jsxs("div",{className:"rs-accordin-body",children:[s.jsx("div",{className:"theme-space-mt"}),s.jsxs(s.Fragment,{children:[s.jsx(ze,{children:s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Mobile platform",right:!0})}),s.jsx(d,{md:8,children:s.jsx(Fe,{required:!0,label:"Platform",disabled:null==(e=this.props)?void 0:e.clickoff,errorMessage:null==(a=null==(t=this.state)?void 0:t.errorMessage)?void 0:a.errDeviceType,data:this.getDeviceList(),value:""!==this.props.item.deviceType?this.props.item.deviceType:"-- Select platform --",onChange:e=>{this.deviceDropDownChanges(e,this.props.index)}})})]})}),""!==this.props.item.deviceType&&this.state.mobileAppList&&this.state.mobileAppList.length>0?s.jsxs(ze,{children:[s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Mobile app",right:!0})}),s.jsx(d,{md:8,children:s.jsx(Fe,{required:!0,label:"Mobile app",disabled:"1"!==this.props.index,data:this.state.mobileAppList,textField:"appName",dataItemKey:"appId",value:""!==this.props.item.appName?this.props.item.appName:{appName:{appName:"-- Select --",appId:""}},onChange:e=>{this.mobileAppDropDownChange(e)}})})]}),"-- Select --"!==this.props.item.appName.appName?s.jsxs(c,{children:[s.jsx(d,{md:{span:9,offset:1},style:{left:55},className:!0===this.props.item.IsCheckedAll||!0===this.props.item.deviceType.toLowerCase().includes("android")&&!0===this.props.item.IsCheckedAndroid||!0===this.props.item.deviceType.toLowerCase().includes("iphone")&&!0===this.props.item.IsCheckedIos||!0===this.props.item.deviceType.toLowerCase().includes("ipad")&&this.props.item.IsCheckedIos?"click-off":"",children:s.jsx(qe,{className:"float-end uriParameterEnable mr-2",lbl:"URI parameter",disabled:null==(i=this.props)?void 0:i.clickoff,checked:this.props.item.utmparameter,cb:e=>{var t={...this.state.mobileApp};if(t.utmparameter=e,this.props.item.utmparameter=e,this.props.onChange(),!1===e)this.props.item.IsCheckedAll=!1,this.props.item.IsCheckedIos=!1,this.props.item.IsCheckedAndroid=!1,this.props.item.customParameters=[],t.customParameters=[];else if(this.props.item.customParameters.length<=0){let e={key:"",value:""};var s=t.customParameters;s.push(e),this.props.item.customParameters=s}this.setState({mobileApp:t})}})}),s.jsx(d,{md:1,style:{display:"flex",justifyContent:"flex-end",top:-3},children:s.jsx(Ye,{children:s.jsx(I,{children:s.jsx(f,{icon:R,size:"md",tooltip:!0===this.props.type?Y:W})})})})]}):null]}):null,!0===this.props.item.utmparameter&&""!==this.props.item.deviceType?s.jsxs("div",{className:!0===this.props.item.IsCheckedAll||!0===this.props.item.deviceType.toLowerCase().includes("android")&&!0===this.props.item.IsCheckedAndroid||!0===this.props.item.deviceType.toLowerCase().includes("iphone")&&!0===this.props.item.IsCheckedIos||!0===this.props.item.deviceType.toLowerCase().includes("ipad")&&!0===this.props.item.IsCheckedIos?"click-off":"",children:[s.jsx(ze,{children:s.jsx(c,{children:s.jsx(d,{md:{span:8,offset:3},children:s.jsxs(c,{children:[s.jsx(d,{md:6,children:s.jsx("h4",{className:"blue",children:"URI parameter"})}),s.jsx(d,{md:6,children:s.jsxs("ul",{className:`checkbox-listing utm-param ${!0===this.props.item.iOSUTMClicked&&""}`,children:[!0===this.props.item.deviceType.includes("iPhone")||!0===this.props.item.deviceType.includes("iPad")?s.jsx("li",{children:s.jsx(qe,{className:"",lbl:"iOS",checked:this.props.item.iOSUTMClicked,disabled:null==(r=this.props)?void 0:r.clickoff,cb:e=>{this.props.item.iOSUTMClicked=e,this.props.onChange("ios",e)}})}):null,!0===this.props.item.deviceType.includes("Android phone")||!0===this.props.item.deviceType.includes("Android tablet")?s.jsx("li",{className:!0===this.props.item.androidUTMClicked&&"",children:s.jsx(qe,{className:"",lbl:"Android",checked:this.props.item.androidUTMClicked,disabled:null==(l=this.props)?void 0:l.clickoff,cb:e=>{this.props.item.androidUTMClicked=e,this.props.onChange("android",e)}})}):null]})})]})})})}),this.state.mobileApp.customParameters&&this.state.mobileApp.customParameters.map(((e,t)=>s.jsx(nt,{type:"mobile",data:this.state.mobileApp.customParameters,item:e,index:t,json:this.props.json,utmParameterValues:this.getParameterList(),onChange:e=>{let t=!0===this.props.item.deviceType.toLowerCase().includes("an")?"an":"ip";this.props.onChange("utmparameter",t,this.state.mobileApp.customParameters)},addBtnClicked:()=>{if(!0===this.checkUTMParameter()){let e={...this.state.mobileApp};e.customParameters.push({key:"",value:""}),this.setState({mobileApp:e});let t=!0===this.props.item.deviceType.toLowerCase().includes("an")?"an":"ip";this.props.onChange("utmparameter",t,this.state.mobileApp.customParameters)}},removeBtnClicked:e=>{let t={...this.state.mobileApp};var s=t.customParameters.indexOf(e);t.customParameters.splice(s,1),this.props.onChange(),this.setState({mobileApp:t})}})))]}):null,""!==this.props.item.deviceType&&""!==this.props.item.appName.appName&&"-- Select --"!==this.props.item.appName.appName?s.jsx(ze,{children:s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Deferred deep linking",right:!0})}),s.jsx(d,{md:3,children:s.jsxs(c,{children:[s.jsx(d,{className:x,md:3,children:s.jsx(Ze,{disabled:"click-off"===x,onChange:e=>{let t={...this.state.mobileApp};t.isDeeplinkEnabled=e.target.value,this.props.onChange(),this.props.item.isDeeplinkEnabled=e.target.value,this.props.item.mainScreenName={displayName:"",activityName:""},this.props.item.subScreenName="",this.setState({appSubScreenList:[]}),this.getAppScreenList(),this.setState({mobileApp:t})},checked:this.props.item.isDeeplinkEnabled})}),s.jsx(d,{children:s.jsx(Ye,{children:s.jsx(I,{children:s.jsx(f,{icon:R,size:"md",tooltip:J})})})})]})}),s.jsx(d,{md:3})]})}):null,""!==this.props.item.deviceType&&""!==this.props.item.appName.appName&&"-- Select --"!==this.props.item.appName.appName&&s.jsx(ze,{children:s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Landing screen",right:!0})}),!1===this.state.alertEnter?s.jsxs(s.Fragment,{children:[s.jsx(d,{md:this.state.appSubScreenList.length>0&&""!==this.props.item.mainScreenName&&(!0===this.props.item.deviceType.includes("Android phone")||!0===this.props.item.deviceType.includes("Android tablet"))?4:8,children:s.jsx(Fe,{isLoading:this.state.screenNameLoader,required:!0,label:"Screen name ",data:this.state.appScreenList,textField:"displayName",disabled:null==(n=this.props)?void 0:n.clickoff,dataItemKey:"activityName",errorMessage:null==(o=this.state.errorMessage)?void 0:o.errMainScreen,value:""!==(null==(h=this.props.item.mainScreenName)?void 0:h.displayName)?this.props.item.mainScreenName:{displayName:"-- Select screen --",activityName:"-- Select screen --"},onChange:e=>{this.mainScreenDropDownChanges(e)}})}),this.state.appSubScreenList.length>0&&""!==this.props.item.mainScreenName&&(!0===this.props.item.deviceType.includes("Android phone")||!0===this.props.item.deviceType.includes("Android tablet"))?s.jsx(d,{md:4,children:s.jsx(Fe,{required:!0,label:"Sub screen",errorMessage:this.state.errorMessage.errSubScreen,disabled:null==(u=this.props)?void 0:u.clickoff,data:this.state.appSubScreenList,value:""!==this.props.item.subScreenName?this.props.item.subScreenName:"-- Select sub screen --",onChange:e=>{this.subScreenDropDownChanges(e)}})}):null]}):s.jsx(d,{md:8,children:s.jsx(We,{style:{paddingRight:25,backgroundColor:"orange",width:300},required:!0,placeholder:"Enter screen name",iconPlaceholder:!0,iconName:C,iconColor:"red",disabled:null==(g=this.props)?void 0:g.clickoff,iconSize:"sm",val:this.state.screenName,errorMessage:null!==(null==(b=null==(v=this.state)?void 0:v.errorMessage)?void 0:b.errMainScreen)?"Enter app screen":null,cb:e=>{var t;if(e.length>50)return;let s=e.length>0?null:"Enter screen name",a={...null==(t=this.state)?void 0:t.errorMessage};a.errMainScreen=s,this.props.item.subScreenName=null;let i={...this.state.mobileApp};i.subScreenName=null,this.setState({mobileApp:i}),this.setState({errScreenName:s,screenName:e,errorMessage:a})},ob:e=>{var t;let s=e.length>0?null:"Enter screen name";this.setState({errScreenName:s,screenName:e}),this.props.item.mainScreenName={displayName:e,activityName:e};let a=this.state.mobileAppList.filter((e=>e.appGuid===this.props.item.appName.appId))[0].playstoreURL.filter((e=>parseInt(e.platformId)===G(this.props.item.deviceType)));this.props.item.mainScreenName.storeUrl=null==(t=a[0])?void 0:t.url},iconOnClick:()=>{this.setState({errScreenName:null,screenName:""}),this.props.item.mainScreenName={displayName:"",activityName:""},this.setState({alertEnter:!1,screenName:"",errScreenName:null})}})})]})})]})]})})})})]})]})}}const pt=["Android phone","Android tablet","iPhone","iPad"],mt={authuringType:"Smartlink",campaignName:"Flipkart campaign",campaignPeriod:"Wed, Oct 06, 2021 - Fri, Nov 05,",campaignType:"Awareness",campaignGoal:"Conversion",mobileApps:[{appName:"VisionBank",appId:"6036e22e-4a43-40e1-ba90-b6000917dc45"},{appName:"VisionRetail",appId:"7036e22e-4a43-40e1-ba90-b6000917dc40"}],defaultCustomParameters:["Name","Age","Custom tag/parameter"],customParameterTags:["[name]|[customer]","[age]",""],smartLinkList:["resu.io","mktg.io","smrt.io"],smartLink:{smartLinks:[{linkUrl:"mktg.io",text:"Goal 1",web:{url:"",queryString:"",mobileAdaptiveUrl:"",customParameters:[],IsCheckedAndroid:!1,IsCheckedIos:!1,IsCheckedAll:!1},mobile:[]}]}},ht=(e,t)=>{let s=!1,a=!1;if(H(e.web.url)&&(e.web.errorMessage.errUrl=Q,s=!0),void 0!==e.web.adapativeWeb&&e.web.adapativeWeb&&H(e.web.mobileAdaptiveUrl)&&(e.web.errorMessage.errAdaptive="Enter mobile adapative URL",s=!0),void 0!==e.web.customParameters&&e.web.customParameters.length>0&&(a=gt(e.web.customParameters),s=a,!0===s))return s;if(void 0!==e.mobile&&e.mobile.length>0)for(let i=0;i<e.mobile.length;i++){let t=e.mobile[i];s=ut(t)}return 0===e.channels.length&&(s=!0),s},ut=e=>{var t=!1;return H(e.deviceType)&&(e.errorMessage.errDeviceType="Select mobile platform",t=!0),(H(e.appName.appName)||!0===e.appName.appName.toLowerCase().includes("select"))&&(e.errorMessage.errMobileApp=K,t=!0),H(e.mainScreenName.displayName)&&(e.errorMessage.errMainScreen=z,t=!0),(e.deviceType.includes("Android phone")||e.deviceType.includes("Android tablet"))&&""===e.subScreenName&&e.isDeeplinkEnabled&&(t=!0,e.errorMessage.errSubScreen=X),void 0!==e.customParameters&&e.customParameters.length>0&&(t=gt(e.customParameters)),t},gt=e=>{var t=!1;return e.map(((e,s)=>{if(!0!==t){if(""===e.key)return t=!0,e.keyErrMsg=A,t;if(e.key.toLowerCase().includes("custom tag/parameter")){if(void 0===e.text||""===e.text)return t=!1,e.keyErrMsg="Enter tag",t;if(""===e.value)return t=!0,e.valueErrMsg=j,t;t=!1}else{if(""===e.value)return t=!0,e.valueErrMsg="Enter tag",t;t=!1}}})),t},vt=e=>{let t=[];return e.map((e=>{t.push({perattr:!0===e.key.toLowerCase().includes("custom tag/parameter")?e.text:e.key,perattrtype:"UTM",pertag:e.value})})),t},bt=(e,t,s)=>{let a=[];return e.map((e=>{let t=e.smartUrlJson.replace('smartUrlChannels":"','"smartUrlChannels":');t=t.replace('}]"',"}]");let i=JSON.parse(t);a.push(function(e,t){var s,a,i,r,l,n,o;(null==(s=null==e?void 0:e.smartUrlChannels)?void 0:s.length)>0&&(null==(i=null==(a=null==e?void 0:e.smartUrlChannels[0])?void 0:a.domainUrl)||i.replace("https://"));let c=null==(r=null==e?void 0:e.smartUrlChannels[0])?void 0:r.domainUrl;c=null==c?void 0:c.replace("https://",""),null==c||c.replace("/","");let d=new URL(null==(l=null==e?void 0:e.smartUrlChannels[0])?void 0:l.domainUrl);!0!==e.data.web.IsCheckedAll&&!0!==e.data.web.IsCheckedAndroid&&!0!==e.data.web.IsCheckedIos||e.data.mobilePlatform.map((t=>{t.IsCheckedAll=e.data.web.IsCheckedAll,t.IsCheckedAndroid=e.data.web.IsCheckedAndroid,t.IsCheckedIos=e.data.web.IsCheckedIos}));let p={linkUrl:d.host,isSmartlink:!1,campaignId:e.campaignId,text:"Smartlink "+e.goalNo,web:e.data.web,mobile:e.data.mobilePlatform,channels:e.smartUrlChannels};const m=Ge.parse(null==(n=window.location)?void 0:n.search);if("false"===(void 0!==m.sl?m.sl:"false")){let t=[e.smartUrlChannels[0]];t[0].channelType="Smartlink",t[0].smartCodePath=t[0].domainUrl+t[0].smartCode,p.channels=t}else if(t&&(null==(o=null==e?void 0:e.smartUrlChannels)?void 0:o.length)>0){let t=[e.smartUrlChannels[0]];t[0].channelType="Smartlink",t[0].smartCodePath=t[0].domainUrl+t[0].smartCode,p.channels=t}else p.channels.map((e=>{let t=Z(e.channelType);e.channelId=t[0],e.channelType=t[1]})),ee("BEFORE Sort",p.channels),p.channels.sort(((e,t)=>e.channelId>t.channelId?1:-1)),ee("After Sort",p.channels);return p}(i,s))})),a};let kt=[{status:"complete",steps:"1",steps_title:"Plan"},{status:"inProcess",steps:"2",steps_title:"Create"},{status:"pending",steps:"3",steps_title:"Finish"}];const xt=e=>{const t=r(),[i,l]=a.useState({}),[o,c]=a.useState(0),[d,p]=a.useState(!1),[m,u]=a.useState(null),[g,v]=a.useState(!1),[b,k]=a.useState(0),[x,S]=a.useState("add");function C(e){return s.jsx(s.Fragment,{children:s.jsx(h,{fluid:!0,className:"main-heading-wrapper mb0",children:s.jsxs(h,{className:"mhw-container",children:[s.jsx("div",{className:"mhwc-left",children:s.jsx("h1",{children:s.jsx("div",{className:"mh-wrapper",children:s.jsx("span",{className:"mh-text",children:"Create communication"})})})}),s.jsx("div",{className:"mhwc-right",children:s.jsxs("div",{className:"back-text",onClick:()=>{var e,s,a,i,r,l;return t.push({pathname:"/campaign/planning",search:`?cId=${o}&sl=${d}&cs=${b}`,state:{mode:null==(s=null==(e=null==t?void 0:t.location)?void 0:e.state)?void 0:s.mode,isSmartlinkCampaign:!0,campaignName:null==m?void 0:m.campaignName,status:null==(i=null==(a=null==t?void 0:t.location)?void 0:a.state)?void 0:i.status,campaignId:null==(l=null==(r=null==t?void 0:t.location)?void 0:r.state)?void 0:l.campaignId}})},children:[s.jsx(f,{icon:ie,size:"sm"}),"Back"]})})]})})})}function j(e){return s.jsx(s.Fragment,{children:s.jsx(lt,{progressSteps:kt,type:"editplan",header:i,buttonClicked:e=>{var s,a,i,r,l,n;t.push({pathname:"/campaign/planning",search:`?cId=${o}&sl=${d}&cs=${b}`,state:{mode:null==(a=null==(s=null==t?void 0:t.location)?void 0:s.state)?void 0:a.mode,isSmartlinkCampaign:!0,campaignName:null==m?void 0:m.campaignName,status:null==(r=null==(i=null==t?void 0:t.location)?void 0:i.state)?void 0:r.status,campaignId:null==(n=null==(l=null==t?void 0:t.location)?void 0:l.state)?void 0:n.campaignId}})}})})}return a.useEffect((()=>{var e;const s=Ge.parse(null==(e=null==t?void 0:t.location)?void 0:e.search);let a=void 0!==s.cId?parseInt(s.cId):0,i=void 0!==s.sl&&s.sl;c(a),p(i);let r=localStorage.getItem(`camp_${a}`);if(null!=r){let e=te(r);5!==e.status&&9!==e.status&&20!==e.status||(k(e.status),v(!0)),S(e.mode),l(e.plan)}}),[]),s.jsx(n,{children:s.jsxs(s.Fragment,{children:[s.jsx(C,{}),s.jsxs(h,{className:"page-header box-bottom-space",children:[s.jsx(j,{}),0!==o&&s.jsx(St,{clickoff:g,mode:x,campaignId:o,isNotification:!1})]})]})})},St=e=>{const t=r(),i=a.useContext(w),[l,n]=a.useState(0),[o,c]=a.useState(1),[d,p]=a.useState([{id:1001,text:"Smart link 1"}]),[m,h]=a.useState([]),[v,x]=a.useState([]),[C,j]=a.useState(!1),[I,f]=a.useState(!1),[y,N]=a.useState(!1),[M,A]=a.useState(!1),[L,T]=a.useState(!1);function U(){let e=re([P(1)]);h(e)}a.useEffect((()=>{if(D(),"add"===e.mode)return void U();const t={campaignId:e.campaignId};B({path:se,params:t,loading:i.globalStateData.setIsLoadingData,sessionOut:i.globalStateData.setSessionOutData,ok:t=>{var s;if(t.status&&void 0!==t.data&&null!==(null==t?void 0:t.data))if(null!==(null==(s=null==t?void 0:t.data)?void 0:s.smartUrlJson)){let s=bt(t.data,e.campaignId,e.isNotification);h(s)}else U();else U()},fail:e=>{U()}})}),[]),a.useEffect((()=>{D()}),[]);const D=()=>{var e;const t=ae();let s=!1,a=!1,i=!1,r=null==(e=null==t?void 0:t.permission)?void 0:e.filter(((e,t)=>"Communications"==(null==e?void 0:e.featureName)));null!=r&&(null==r||r.map((e=>{1===(null==e?void 0:e.addAccess)&&(s=!0),1===(null==e?void 0:e.updateAccess)?a=!0:1===(null==e?void 0:e.viewAccess)&&(a=!1),1==(null==e?void 0:e.deleteAccess)&&(i=!0)}))),N(s),A(a),T(i)};function P(t){let s="A"===Te()?Ae:Le;return S(),{linkUrl:s,isSmartlink:!1,campaignId:e.campaignId,text:"Smart Link "+t,web:{url:"",queryString:"",mobileAdaptiveUrl:"",customParameters:[],IsCheckedAndroid:!1,IsCheckedIos:!1,IsCheckedAll:!1},mobile:[],channels:[]}}return a.useEffect((()=>{}),[I]),s.jsx("div",{className:"box-design rs-box-min-height",children:s.jsxs("div",{className:"goal-tab-container",children:[s.jsxs("div",{className:"goal-tab-plus-wrapper theme-space-mb",children:[s.jsxs("div",{className:"position-relative",children:[I&&s.jsx(s.Fragment,{children:s.jsx(Xe,{para:"On the plan page, you've selected 'mobile app analytics,' but you haven't generated a smartlink for the mobile app. As a result, analytics may be affected.",secondaryButtonText:"Cancel",primaryButtonText:"Proceed",buttonClicked:s=>{f(!1),s&&t.push({pathname:"slcompletion",search:`?cId=${e.campaignId}`})}})}),C&&s.jsx(s.Fragment,{children:s.jsx(Xe,{headerTitle:"Smart Link",para:"Generate smartlink",pClass:"text-center mb0"})}),s.jsx(b,{defaultSelectedItem:l,defaultClass:"",dynamicTab:"addtab fs18 tabCount",activeClass:"active",tabData:m,onDelete:!0,type:"goal",deleteTabData:e=>{let t=[...d];t.splice(e,1),p(t);let s=[...m];ee("Deleted Item",s[e]),s.splice(e,1),h(s),c(o+1),function(e){let t={campaignId:e,goalNo:l+1};B({loading:i.globalStateData.setIsLoadingData,path:le,params:t,retry:2,retryTime:5e3,ok:e=>{if(!0===e.status){let t={...this.state.smartlink};t.channels=e.data,this.setState({smartlink:t})}},fail:e=>{}})}(s[e-1].campaignId)},callBack:(e,t)=>{n(t)}})]}),m.length<5?s.jsx(k,{text:"Add",position:"top",children:s.jsx("i",{className:`d-inline-block icon-rs-circle-plus-fill-edge-medium icons-md color-primary-blue cursor-pointer ml15 ${!0===(null==e?void 0:e.clickoff)?"click-off":"click-on"} ${y?"click-on":"click=off"}`,onClick:()=>{let e=[...m],t=!0;for(let r=0;r<e.length;r++)t=ht(e[r]);if(t)h(e),j(!0),setTimeout((()=>{j(!1)}),3e3);else{let e=[...m];e.push(P(e.length+1)),h(e);var s=d.length,a={id:s+=1,text:"Smart Link "+s},i=[...d];i.push(a),p(i);let t=parseInt(e.length-1);n(t)}}})}):null]}),(a=>{let r=[...m];return s.jsx(s.Fragment,{children:s.jsx("div",{className:"smartlink-popup-lg",children:s.jsx(u,{activeKey:"tab"+a,id:"uncontrolled-tab-example",className:"border0",children:r.map(((l,n)=>s.jsx(g,{eventKey:"tab"+n,children:r.length>0?s.jsx(Ct,{campComp:e.campComp,smartlink:l,clickoff:e.clickoff,data:r,index:n,isNotification:e.isNotification,context:i,channels:v,mode:e.mode,campaignId:e.campaignId,name:"Raja"+a,json:mt,history:t,buttonClicked:s=>{var a,i,r,l,n,o,c,d,p,h;const u=Ge.parse(null==(a=null==t?void 0:t.location)?void 0:a.search);let g=void 0!==u.cId?parseInt(u.cId):0,v=void 0!==u.sl&&u.sl,b=`cId=${g}`,k=null==(l=null==(r=null==(i=null==window?void 0:window.location)?void 0:i.search)?void 0:r.slice(1))?void 0:l.replace(b,"");if("false"!==v)if(void 0!==e.buttonClicked){let t=[...m];e.buttonClicked(t)}else{null==(o=null==(n=null==t?void 0:t.location)?void 0:n.state)||o.analyticsType;let s=[...m];var x={data:t.location.state,webAnalytics:s[0].web.url,mobileAnaltics:s[0].mobile,campaignId:null==(d=null==(c=null==t?void 0:t.location)?void 0:c.state)?void 0:d.campaignId};let a=localStorage.getItem(`camp_${e.campaignId}`),i=!1;if(null!=a){let e=te(a);if(0===(null==(p=null==e?void 0:e.analyticsType)?void 0:p.length))return void t.push({pathname:"/campaign"});null==(h=null==e?void 0:e.analyticsType)||h.map((e=>{"app"===e.toLowerCase()&&0===s[0].mobile.length&&(i=!0)})),e.webAnalytics=s[0].web.url,e.mobileAnaltics=s[0].mobile}!0===i?f(!0):t.push({pathname:"slcompletion",search:`?cId=${e.campaignId}`,state:x})}else t.push({pathname:"/campaign/creation-notification",search:`?cId=${g}&${k}`})},cancelBtnClicked:s=>{if(void 0!==e.buttonClicked){let t=[...m];e.buttonClicked(t)}else t.push("/campaign")}}):null})))})})})})(l)]})})};class Ct extends a.Component{constructor(){super(...arguments),t(this,"state",{smartlink:this.props.smartlink,index:this.props.index,isGenarate:"add"!==this.props.mode&&""!==this.props.smartlink.web.url,code:"",customParameters:[],activationKey:"0",mobileActivationKey:"-1",appName:{appName:"-- Select --",appGuid:""},errUrl:"",isCheckedAndroid:!1,isCheckediOS:!1,errAdaptive:"",weberrormessage:{errUrl:"",utmErr:"",errAdaptive:""},mobileerrormessage:{errDeviceType:"",errMobileApp:""},shortCodeDomainList:[],androidUTMClicked:!1,iOSUTMClicked:!1,isCopied:!1,isSmartLink:!0,slackList:[],slack:!1,slackItem:null,errSlackItem:null,slackEnter:!1,showSlugModal:!1,getAddAccessData:!1,getUpdateAccessData:!1,getDeleteAccessData:!1}),t(this,"getAccessData",(()=>{let e=!1,t=!1,s=!1;const a=M("Communications");1==(null==a?void 0:a.get_AddAccessData)&&(e=!0),t=1==(null==a?void 0:a.accessUpdateData),(null==a?void 0:a.accessDeleteData)&&(s=!0),this.setState({getAddAccessData:e,getUpdateAccessData:t,getDeleteAccessData:s})})),t(this,"getSlugList",(()=>{let e=[];var t;t=t=>{(null==t?void 0:t.length)>0?(e=[...t],e.push("Enter your slug")):e.push("Enter your slug"),this.setState({slackList:e})},B({path:"Campaign/GetSlackList",ok:e=>{e.status?t(e.data):t([])},fail:e=>{t([])}})})),t(this,"saveSmartLink",((e,t)=>{B({loading:this.props.context.globalStateData.setIsLoadingData,path:ne,params:e,retry:2,retryTime:5e3,ok:e=>{var s;if(!0===e.status){let a={...this.state.smartlink};a.channels=e.data;const i=Ge.parse(null==(s=null==window?void 0:window.location)?void 0:s.search);if(void 0!==i.cId&&parseInt(i.cId),"false"===(void 0!==i.sl?i.sl:"false")){let t=[e.data[0]];t[0].channelType="Smart Link",t[0].smartCodePath=t[0].domainUrl+t[0].smartCode,a.channels=t}else if(this.props.isNotification&&e.data.length>0){let t=[e.data[0]];t[0].channelType="Smart Link",t[0].smartCodePath=t[0].domainUrl+t[0].smartCode,a.channels=t}else a.channels.map((e=>{let t=Z(e.channelType);e.channelId=t[0],e.channelType=t[1]})),a.channels.sort(((e,t)=>e.channelId>t.channelId?1:-1));this.props.smartlink.channels=a.channels,this.setState({smartlink:a,isGenarate:!0}),t(a)}},fail:e=>{}})})),t(this,"copyTextToClipboard",(async e=>"clipboard"in navigator?await navigator.clipboard.writeText(e):document.execCommand("copy",!0,e))),t(this,"handleCopyClick",((e,t)=>{this.copyTextToClipboard(e).then((()=>{let e={...this.state.smartlink};e.channels[t].copied=!0,this.setState({smartlink:e}),this.setState({isCopied:!0}),setTimeout((()=>{let e={...this.state.smartlink};e.channels[t].copied=!1,this.setState({smartlink:e}),this.setState({isCopied:!1})}),1500)})).catch((e=>{}))})),t(this,"getTheButtonName",(()=>{var e;let t=localStorage.getItem(`camp_${this.props.campaignId}`);if(null!=t){let s=te(t);if((null==(e=null==s?void 0:s.analyticsType)?void 0:e.length)>0)return"Next"}return"Save"})),t(this,"_planData",oe()),t(this,"addOn",this._planData.addons.filter(((e,t)=>1===(null==e?void 0:e.addonId)))),t(this,"generateSmartLink",(()=>{var e,t,s=this.checkTheValues();if(!0===s[0]){this.setState({isGenarate:!0,code:"/Abc1234"}),this.setState({activationKey:"-1"});let e=((e,t)=>{var s,a;t.web.parameter=vt(t.web.customParameters),t.mobile.map((e=>{e.parameter=vt(e.customParameters)}));let i="https://";return(null==(s=null==t?void 0:t.linkUrl)?void 0:s.length)>0&&(i=i+(null==t?void 0:t.linkUrl)+"/"),(null==(a=null==t?void 0:t.slugUrl)?void 0:a.length)>0&&(i=i+(null==t?void 0:t.slugUrl)+"/"),{campaignId:t.campaignId,goalNo:e,smartCode:"",domainUrl:i,smartAdaptive:t.web.mobileAdaptiveUrl,smartUrl:t.web.url,data:{web:t.web,mobilePlatform:t.mobile}}})(this.props.index+1,this.state.smartlink);this.saveSmartLink(e,(e=>{this.setState({showSlugModal:!1,slackItem:null})}))}else this.setState({activationKey:s[2]});const a=Ge.parse(null==(t=null==(e=this.props.history)?void 0:e.location)?void 0:t.search);let i=void 0!==a.cId?parseInt(a.cId):0,r=localStorage.getItem(`camp_${i}`);if(null!=r){let e=te(r);e.mode="edit",localStorage.setItem(`camp_${i}`,ce(e))}})),t(this,"slugGenerate",(e=>{let t={...this.state.smartlink},s=t.channels[0],a=new URL(s.smartCodePath);t.channels=[],this.setState({smartlink:t});let i={...this.state.smartlink};i.linkUrl=a.host,i.slugUrl=e,i.channels=[],this.setState({isGenarate:!1}),this.setState({smartlink:i},(()=>{this.getSlugList(),this.generateSmartLink()}))})),t(this,"saveSlugLocal",((e,t)=>{this.props.context.globalStateData.setIsLoadingData(!0),((e,t)=>{B({path:"Campaign/SaveSlack",params:{name:e},ok:e=>{e.status?t(e.status):t(!1)},fail:e=>{t(!1)}})})(e,(s=>{s?(this.setState({slackEnter:!1}),this.slugGenerate(e),t(s)):(this.props.context.globalStateData.setIsLoadingData(!1),t(s))}))})),t(this,"SlugModalComponent",(()=>{var e,t;const a=e=>/^[a-zA-Z0-9]*$/.test(e);return s.jsxs(v,{show:this.state.showSlugModal,size:"md",centered:!0,children:[s.jsxs(v.Header,{children:[s.jsx("h2",{children:"Add slug"}),s.jsx(Ee,{icon:void 0,mainClass:"close",size:"md",handleClose:()=>this.setState({showSlugModal:!1})})]}),s.jsx(v.Body,{children:s.jsx(ze,{children:s.jsxs(c,{children:[s.jsx(d,{md:3,children:s.jsx(Je,{label:"Slug",right:!0})}),s.jsx(d,{md:8,children:s.jsxs(s.Fragment,{children:[!1===this.state.slackEnter&&s.jsx(Fe,{data:null==(e=this.state)?void 0:e.slackList,value:(null==(t=this.state)?void 0:t.slackItem)||"Select slug",onChange:e=>{this.setState({slackItem:e.target.value}),"enter your slug"!==e.target.value.toLowerCase()||this.setState({slackEnter:!0,slackItem:null})}}),!0===this.state.slackEnter&&s.jsx(We,{className:"w300",placeholder:"Enter slug",val:this.state.slackItem,iconPlaceholder:!0,iconName:C,iconColor:"red",iconSize:"sm",max:20,errorMessage:this.state.errSlackItem,onChange:e=>{const t=e.target.value.replace(/\s/g,"");if(0===t.length)return this.setState({errSlackItem:"Enter slug"}),void this.setState({slackItem:""});if(t.length>=20)return this.setState({errSlackItem:"Input must not exceed 20 characters"}),void setTimeout((()=>{this.setState({errSlackItem:null})}),2e3);if(a(t)){let e=0===t.length?"Enter slug":null;this.setState({errSlackItem:e}),this.setState({slackItem:t})}else{let e="Enter valid slug";this.setState({errSlackItem:e})}},onBlur:e=>{if(0===e.target.value.length)return this.setState({errSlackItem:"Enter slug"}),void this.setState({slackItem:""});const t=e.target.value.replace(/\s/g,"");if(a(t)){let e=0===t.length?"Enter slug":null;this.setState({errSlackItem:e}),this.setState({slackItem:t})}else{let e="Enter valid slug";this.setState({errSlackItem:e})}},iconOnClick:()=>{this.setState({slackEnter:!1,slackItem:null})}})]})})]})})}),s.jsxs(v.Footer,{children:[s.jsx(de,{id:"dl_approver_cancel_button",onClick:()=>{this.setState({showSlugModal:!1})},children:"Cancel"}),s.jsx(pe,{id:"dl_approver_save_button",className:null===this.state.slackItem||""===this.state.slackItem?"click-off":"click-on",onClick:()=>{var e;if(!0===this.state.slackEnter)return 0===(null==(e=this.state.slackItem)?void 0:e.length)?void this.setState({errSlackItem:"Enter slug url"}):void this.saveSlugLocal(this.state.slackItem,(e=>{!1!==e||this.setState({errSlackItem:"Failed to save slug url"})}));this.slugGenerate(this.state.slackItem)},children:"Submit"})]})]})}))}createWebErrobject(){return{errUrl:null,errAdaptive:null}}componentDidMount(){var e,t,s,a,i,r,n={...this.state.smartlink};n.web.errorMessage=this.createWebErrobject(),(null==(e=null==n?void 0:n.mobile)?void 0:e.length)>0&&(null==(t=null==n?void 0:n.mobile)||t.map((e=>{e.errorMessage=this.createErrobject(),this.setState({appName:{appName:e.appName.appName,appId:e.appName.appId}}),this.setState({appId:e.appName.appId})}))),this.accordionRef=l.createRef(),this.qrCodeRef=l.createRef(),(null==(s=n.channels)?void 0:s.length)>0&&this.setState({isGenarate:!0}),this.setState({smartlink:n});let o=S(),c=Te();null==(a=null==o?void 0:o.shortCodeDomainList)||a.map((e=>"A"===c?Ae:Le));const d=Ge.parse(null==(r=null==(i=this.props.history)?void 0:i.location)?void 0:r.search);let p=void 0!==d.sl&&d.sl;this.setState({shortCodeDomainList:o.shortCodeDomainList,isSmartLink:p}),this.getSlugList(),this.getAccessData()}createErrobject(){return{errDeviceType:"",errMobileApp:"",errMainScreen:"",errSubScreen:""}}createMobileObject(){var e,t,s,a,i,r,l;let n=[...null==(e=this.props)?void 0:e.data],o=void 0!==this.state.appId&&""!==this.state.appId?this.state.appId:"",c=this.state.appName;(null==n?void 0:n.length)>0&&(null==(s=null==(t=n[this.props.index])?void 0:t.mobile)?void 0:s.length)>0?(c=null==(i=null==(a=n[this.props.index])?void 0:a.mobile[0].appName)?void 0:i.appName,o=null==(l=null==(r=n[this.props.index])?void 0:r.mobile[0].appName)?void 0:l.appGuid):(c=this.state.appName.appName,o="");const{IsCheckedAll:d,IsCheckedAndroid:p,IsCheckedIos:m,customParameters:h}=this.props.smartlink.web,u=d||p||m&&h.length>0?h:[];return{deviceType:"",appId:o,appName:{appId:o,appName:c},isDeeplinkEnabled:!0,mainScreenName:"",activityDisplayName:"",subScreenName:"",IsCheckedAll:this.props.smartlink.web.IsCheckedAll,utmparameter:!0===this.props.smartlink.web.IsCheckedAll||!0===this.props.smartlink.web.IsCheckedAndroid||!0===this.props.smartlink.web.IsCheckedIos,customParameters:u,IsCheckedAndroid:!0===this.props.smartlink.web.IsCheckedAndroid,androidUTMClicked:!0===this.props.smartlink.web.IsCheckedAndroid||this.state.androidUTMClicked,iOSUTMClicked:!0===this.props.smartlink.web.IsCheckedIos||this.state.iOSUTMClicked,IsCheckedIos:!0===this.props.smartlink.web.IsCheckedIos,errorMessage:this.createErrobject()}}checkTheValues(){var e=[!1,"","0"];if(void 0!==this.state.smartlink&&void 0!==this.state.smartlink.web){var t={...this.state.smartlink};if(e=this.checkWebElements(t.web),this.setState({webItem:t}),!0===e[0]&&void 0!==this.state.smartlink&&void 0!==this.state.smartlink.mobile&&this.state.smartlink.mobile.length>0){var s={...this.state.smartlink};for(let e=0;e<s.mobile.length;e++){let t=this.checkMobileItems(s.mobile[e],e);if(0==t[0])return[!1,"",t[2]]}}}return e}checkWebElements(e,t){var s;let a={...this.state.weberrormessage};a.errUrl="",a.utmErr="",a.errAdaptive="",this.setState({weberrormessage:a});var i=[!1,"message","0"],r="";if(""!==e.url&&e.url.length>9&&null===e.errorMessage.errUrl)i=!0;else{if(!(e.url.length>9)){let t={...this.state.weberrormessage};return t.errUrl="Enter website",e.errorMessage.errUrl="Enter website",this.setState({weberrormessage:t}),i}if(!L(e.url)){let t={...this.state.weberrormessage};return t.errUrl="Enter valid website",e.errorMessage.errUrl="Enter valid website",this.setState({weberrormessage:t}),i}if(null!=(null==(s=null==e?void 0:e.errorMessage)?void 0:s.errUrl))return i;if(!e.url.includes("https://")){let t={...this.state.weberrormessage};return t.errUrl="Your site is not secure",e.errorMessage.errUrl="Your site is not secure",this.setState({weberrormessage:t}),i}}if(void 0!==e.adapativeWeb&&!0===e.adapativeWeb&&""===e.mobileAdaptiveUrl){i=!1;let t={...this.state.weberrormessage};t.errUrl="",t.errAdaptive="Mobile adaptive URL can not be empty",e.errorMessage.errAdaptive="Enter mobile adaptive URL",this.setState({weberrormessage:t}),r="Mobile adaptive URL can not be empty"}else i=!0;if(void 0!==e.customParameters&&e.customParameters.length>0&&!1===(i=this.checkUTMParameter(e.customParameters))){let e={...this.state.weberrormessage};e.errUrl="",e.utmErr="Select UTM parameter",this.setState({weberrormessage:e})}return[i,r,"0"]}checkMobileItems(e,t){var s=!1,a=t+1,i="";return""===e.deviceType?(i=V,e.errorMessage.errDeviceType=V,[!1,i,a.toString()]):(s=!0,""===e.appName.appName||!1!==e.appName.appName.toLowerCase().includes("select")?(i=K,e.errorMessage.errMobileApp=K,[!1,i,a.toString()]):(s=!0,""===e.mainScreenName.displayName?(s=!1,e.errorMessage.errMainScreen=z,[s,z,a.toString()]):(e.deviceType.includes("Android phone")||e.deviceType.includes("Android tablet"))&&null!==e.subScreenName&&""===e.subScreenName?(s=!1,e.errorMessage.errSubScreen=X,[s,X,a.toString()]):(void 0!==e.customParameters&&e.customParameters.length>0&&!1===(s=this.checkUTMParameter(e.customParameters))&&(i="Select custom parameter"),[s,i,a.toString()])))}checkUTMParameter(e){var t=!1;return e.map(((e,s)=>{""!==e.key?e.key.toLowerCase().includes("custom tag/parameter")?void 0!==e.text&&""!==e.text?""!==e.value?t=!0:(t=!1,e.valueErrMsg=j):(t=!1,e.keyErrMsg="Enter tag"):""!==e.value?t=!0:(t=!1,e.valueErrMsg=A):(t=!1,e.keyErrMsg=A)})),t}createShortCode(e){return"/"+e.substr(0,2)+"HZ34Rs"}svgToPng(e,t){const s=document.createElement("canvas"),a=s.getContext("2d"),i=new Image;i.onload=function(){s.width=i.width,s.height=i.height,a.drawImage(i,0,0);const e=s.toDataURL("image/png");t(e)},i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)}downloadPng(e,t){const s=document.createElement("a");s.href=e,s.download=t,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}downLoadQRCode(e){const t=document.getElementById("qr-gen"),s=(new XMLSerializer).serializeToString(t);this.svgToPng(s,(t=>{const s=e.split("/").slice(-1);this.downloadPng(t,s)}))}render(){var e,t,a,i,r,l,n,o,h,u,g,v,b,x,S,j,y,N;return s.jsxs("div",{className:"rs-accordin-container",children:[s.jsxs(m,{className:"rs-accordin",activeKey:this.state.activationKey,children:[s.jsxs(p,{children:[s.jsx(p.Header,{onClick:()=>{"0"===this.state.activationKey?this.setState({activationKey:"-1"}):this.setState({activationKey:"0"})},children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("i",{className:`icons-md ${"0"!==this.state.activationKey?"icon-rs-square-plus-fill-medium blue":"icon-rs-square-minus-fill-medium grey-medium"} marginR8`}),s.jsxs("h3",{className:"marginB0",children:[" ",this.state.smartlink&&void 0!==this.state.smartlink.web?"Web":"Device types"," "]})]})}),s.jsx(m.Collapse,{eventKey:"0",children:s.jsx(p.Body,{children:s.jsx("div",{className:"rs-accordin-panel",children:s.jsx("div",{className:"rs-accordin-body",children:s.jsx(ct,{clickoff:this.props.clickoff,data:this.props.data,index:this.state.index,item:this.state.smartlink.web,json:this.props.json,context:this.props.context,errorMessage:this.state.smartlink.web.errorMessage||"",onChange:(e,t)=>{let s={...this.state.smartlink};s.web[e]=t,this.setState({isGenarate:!1}),"wutmparameter"===e&&!1===t&&s.mobile.length>0?(s.mobile.map(((e,s)=>{e.IsCheckedAll=t,e.IsCheckedAndroid=t,e.IsCheckedIos=t})),this.setState({smartlink:s})):"isCheckedAll"===e&&s.mobile.length>0?(s.mobile.map(((e,a)=>{e.IsCheckedAll=t,e.IsCheckedAndroid=t,e.IsCheckedIos=t,e.androidUTMClicked=t,e.iOSUTMClicked=t,!0===t&&(e.utmparameter=t);let i=[];i=[...s.web.customParameters],e.customParameters=i})),this.setState({smartlink:s})):"IsCheckedIos"===e&&s.mobile.length>0?(s.mobile.map(((e,a)=>{if(e.IsCheckedIos=t,e.IsCheckedAll=!1,e.iOSUTMClicked=t,e.deviceType.toLowerCase().includes("iphone")||e.deviceType.toLowerCase().includes("ipad")){!0===t&&(e.utmparameter=t);let a=[];a=[...s.web.customParameters],e.customParameters=a}})),this.setState({smartlink:s})):"IsCheckedAndroid"===e&&s.mobile.length>0?(s.mobile.map(((e,a)=>{if(e.deviceType.toLowerCase().includes("an")){let a=[];a=[...s.web.customParameters],e.customParameters=a,e.IsCheckedAndroid=t,e.androidUTMClicked=t,!0===t?e.utmparameter=t:e.IsCheckedAll=!1}})),this.setState({smartlink:s})):"utmparameter"===e&&(!0===s.web.IsCheckedAndroid&&s.mobile.length>0?s.mobile.map((e=>{if(e.deviceType.toLowerCase().includes("an")){let t=[];t=[...s.web.customParameters],e.customParameters=t,e.androidUTMClicked=!0}})):!0===s.web.IsCheckedIos&&s.mobile.length>0&&s.mobile.map((e=>{if(e.deviceType.toLowerCase().includes("ip")){let t=[];t=[...s.web.customParameters],e.customParameters=t,e.iOSUTMClicked=!0}}))),this.setState({smartlink:s})}})})})})})]}),null!==(null==(t=null==(e=this.state)?void 0:e.smartlink)?void 0:t.mobile)&&(null==(r=null==(i=null==(a=this.state)?void 0:a.smartlink)?void 0:i.mobile)?void 0:r.length)>0?null==(o=null==(n=null==(l=this.state)?void 0:l.smartlink)?void 0:n.mobile)?void 0:o.map(((e,t)=>{let a=t+1;return s.jsx(dt,{type:this.props.isNotification,clickoff:this.props.clickoff,goal:this.props.index,data:this.state.smartlink.mobile,mode:this.props.mode,index:a.toString(),context:this.props.context,item:e,activationKey:this.state.activationKey,errorMessage:e.errorMessage,json:this.props.json,onChange:(e,t,s)=>{if(this.state.smartlink.channels.length>0){let e={...this.state.smartlink};e.channels=[],this.setState({smartlink:e})}if(this.setState({isGenarate:!1}),"appName"===e){this.setState({appName:t,appId:t.appId});let e={...this.state.smartlink},s=e.mobile[0];e.mobile=[],e.mobile.push(s),this.setState({smartlink:e})}else if("android"===e)if(this.setState({androidUTMClicked:t}),t){let e=[...this.state.smartlink.mobile];if(e.length>0){e.filter((e=>e.deviceType.toLowerCase().includes("an")));let t=e.filter((e=>e.deviceType.toLowerCase().includes("android phone"))),s=e.filter((e=>e.deviceType.toLowerCase().includes("android tablet")));t.length>0&&t[0].androidUTMClicked&&s.length>0?(s[0].customParameters=re(t[0].customParameters),s[0].androidUTMClicked=!0,s[0].IsCheckedAndroid=!0,s[0].utmparameter=!0,t[0].IsCheckedAndroid=!1):s.length>0&&s[0].androidUTMClicked&&t.length>0&&(t[0].customParameters=re(s[0].customParameters),t[0].androidUTMClicked=!0,t[0].utmparameter=!0,t[0].IsCheckedAndroid=!0,s[0].IsCheckedAndroid=!1),this.setState({mobile:e})}}else{let e=[...this.state.smartlink.mobile],t=e.filter((e=>e.deviceType.toLowerCase().includes("android phone"))),s=e.filter((e=>e.deviceType.toLowerCase().includes("android tablet")));t.length>0&&!1===t[0].androidUTMClicked&&s.length>0?(s[0].androidUTMClicked=!1,s[0].IsCheckedAndroid=!1):s.length>0&&!1===s[0].androidUTMClicked&&t.length>0&&(t[0].androidUTMClicked=!1,t[0].IsCheckedAndroid=!1),this.setState({mobile:e})}else if("ios"===e)if(this.setState({iOSUTMClicked:t}),t){let e=[...this.state.smartlink.mobile];if(e.length>0){e.filter((e=>e.deviceType.toLowerCase().includes("ip")));let t=e.filter((e=>e.deviceType.toLowerCase().includes("iphone"))),s=e.filter((e=>e.deviceType.toLowerCase().includes("ipad")));t.length>0&&t[0].iOSUTMClicked&&s.length>0?(s[0].customParameters=re(t[0].customParameters),s[0].iOSUTMClicked=!0,s[0].IsCheckedIos=!0,s[0].utmparameter=!0,t[0].IsCheckedIos=!1):s.length>0&&s[0].iOSUTMClicked&&t.length>0&&(t[0].customParameters=re(s[0].customParameters),t[0].iOSUTMClicked=!0,t[0].IsCheckedIos=!0,t[0].utmparameter=!0,s[0].IsCheckedIos=!1)}}else{let e=[...this.state.smartlink.mobile],t=e.filter((e=>e.deviceType.toLowerCase().includes("iphone"))),s=e.filter((e=>e.deviceType.toLowerCase().includes("ipad")));t.length>0&&!1===t[0].iOSUTMClicked&&s.length>0?(s[0].iOSUTMClicked=!1,s[0].IsCheckedIos=!1):s.length>0&&!1===s[0].iOSUTMClicked&&t.length>0&&(t[0].iOSUTMClicked=!1,t[0].IsCheckedIos=!1),this.setState({mobile:e})}else if("utmparameter"===e){let e=[...this.state.smartlink.mobile];if(e.length>0)if(e.filter((e=>e.deviceType.toLowerCase().includes(t))),"ip"===t){let s=e.filter((e=>e.deviceType.toLowerCase().includes("iphone"))),a=e.filter((e=>e.deviceType.toLowerCase().includes("ipad")));s.length>0&&s[0].iOSUTMClicked&&a.length>0?(a[0].customParameters=re(s[0].customParameters),a[0].iOSUTMClicked=!0,a[0].IsCheckediOs=!0,s[0].IsCheckediOs=!1):a.length>0&&a[0].iOSUTMClicked&&s.length>0&&(s[0].customParameters=re(a[0].customParameters),s[0].iOSUTMClicked=!0,s[0].IsCheckedIos=!0,a[0].IsCheckedIos=!1),!1===t&&(s.length>0&&!1===s[0].iOSUTMClicked&&a.length>0?(a[0].iOSUTMClicked=!1,a[0].IsCheckedIos=!1):a.length>0&&!1===a[0].iOSUTMClicked&&s.length>0&&(s[0].iOSUTMClicked=!1,s[0].IsCheckedIos=!1))}else if("an"===t){let s=e.filter((e=>e.deviceType.toLowerCase().includes("android phone"))),a=e.filter((e=>e.deviceType.toLowerCase().includes("android tablet")));s.length>0&&s[0].androidUTMClicked&&a.length>0?(a[0].customParameters=re(s[0].customParameters),a[0].androidUTMClicked=!0,a[0].IsCheckedAndroid=!0,s[0].IsCheckedAndroid=!1):a.length>0&&a[0].androidUTMClicked&&s.length>0&&(s[0].customParameters=re(a[0].customParameters),s[0].androidUTMClicked=!0,s[0].IsCheckedAndroid=!0,a[0].IsCheckedAndroid=!1),!1===t&&(s.length>0&&!1===s[0].androidUTMClicked&&a.length>0?(a[0].androidUTMClicked=!1,a[0].IsCheckedAndroid=!1):a.length>0&&!1===a[0].androidUTMClicked&&s.length>0&&(s[0].androidUTMClicked=!1,s[0].IsCheckedAndroid=!1))}}},accordinChanges:e=>{this.state.activationKey===e?this.setState({activationKey:"-1"}):this.setState({activationKey:e})},deleteItem:e=>{let t={...this.state.smartlink},s=t.mobile.indexOf(e);t.mobile.splice(s,1),0===s&&(this.props.data[0].mobile=t.mobile,this.setState({appName:{appName:"-- Select --",appGuid:""}})),this.setState({smartlink:t})}})})):null,this.state.smartlink&&this.state.smartlink.mobile&&this.state.smartlink.mobile.length<4?s.jsx("div",{className:"pos-icon-2 "+(!0===(null==(h=this.props)?void 0:h.clickoff)?"click-off":"click-on"),children:s.jsx(k,{text:"Add",position:"top",children:s.jsx("i",{className:"icon-rs-circle-plus-fill-edge-medium icons-md color-primary-blue cursor-pointer icon-shadow "+(this.state.getAddAccessData?"click-on":"click-off"),onClick:()=>{var e=this.checkTheValues();if(!0===e[0]){let e={...this.state.smartlink},t=e.mobile,s=t.length+1;this.setState({activationKey:s.toString()}),t.length>0&&(this.setState({iOSUTMClicked:t[t.length-1].iOSUTMClicked}),this.setState({androidUTMClicked:t[t.length-1].androidUTMClicked})),t.push(this.createMobileObject()),this.setState({smartlink:e}),this.setState({mobileActivationKey:s.toString()}),this.forceUpdate()}else this.setState({activationKey:e[2]})}})})}):null]}),s.jsx(this.SlugModalComponent,{}),s.jsxs("div",{className:"d-flex align-items-center justify-content-between "+(!0===(null==(u=this.props)?void 0:u.clickoff)?"click-off":"click-on"),children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("h4",{className:"blue margin0 marginR15 wsn",children:""}),"true"!==this.state.isSmartLink||3!==this._planData.planId&&4!==this._planData.planId||!this.addOn.length?"":s.jsxs(s.Fragment,{children:[s.jsx(et,{data:this.state.shortCodeDomainList,defaultItem:this.state.smartlink.linkUrl,customAlignRight:!0,className:"fs18-btn",onSelect:(e,t)=>{let s={...this.state.smartlink};s.linkUrl=e,s.channels=[],this.setState({isGenarate:!1}),this.setState({smartlink:s})}}),s.jsx("div",{className:3!==this._planData.planId&&4!==this._planData.planId||!this.addOn.length?"pl15 d-flex click-off":"pl15 d-flex",children:s.jsx(f,{tooltip:"Add domain",icon:"icon-rs-circle-plus-fill-edge-medium",size:"md",onClick:()=>{localStorage.setItem("sldomadd",!0);this.props.history.push({pathname:"/preferences/account-settings",search:`?cId=${this.props.campaignId}`,state:{settings:!0,domain:!0}})}})})]})]}),s.jsx("div",{children:s.jsxs(pe,{bgc:"#2896f0",className:this.props.smartlink.web.url.length>0&&!0===this.state.isGenarate?"click-off ram":"click-on",onClick:()=>{this.generateSmartLink()},children:[" ","Generate"," "]})})]}),this.state.smartlink&&this.state.smartlink.channels.length>0?s.jsxs("div",{className:"theme-space-mt "+(null==(g=this.props)||g.clickoff,"click-on"),children:[s.jsxs(c,{className:"mb10 d-flex align-items-center",children:[s.jsx(s.Fragment,{children:s.jsx(d,{md:2,children:s.jsxs("div",{className:"d-flex align-items-center ml14",children:[s.jsx("h4",{className:"blue",children:"true"===this.state.isSmartLink||!0===this.props.isNotification?"Smart Link":""}),s.jsx(I,{children:s.jsx(f,{mainClass:"ml5",icon:R,size:"md",tooltip:"When a push notification is clicked on a mobile device or the web, Smarlink 1 serves as the default landing page."})})]})})}),"true"===this.state.isSmartLink&&s.jsx(d,{md:13,style:{top:-30},children:s.jsx(Ye,{children:s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",gap:"20px"},children:[this.state.slack&&s.jsxs(s.Fragment,{children:[!1===this.state.slackEnter&&s.jsx(Fe,{style:{width:300},data:null==(v=this.state)?void 0:v.slackList,value:(null==(b=this.state)?void 0:b.slackItem)||"Select slack",onChange:e=>{this.setState({slackItem:e.target.value}),"enter your slag"!==e.target.value.toLowerCase()?this.slugGenerate(e.target.value):this.setState({slackEnter:!0})}}),!0===this.state.slackEnter&&s.jsx("div",{style:{width:300},children:s.jsx(We,{style:{width:300},className:"w300",placeholder:"Enter slug",value:this.state.slackItem,iconPlaceholder:!0,iconName:C,iconColor:"red",iconSize:"sm",onChange:e=>{this.setState({slackItem:e.target.value})},onBlur:e=>{0!==e.target.value.length?this.saveSlugLocal(e.target.value,(e=>{!1!==e||this.setState({errSlackItem:"Failed to save slug url"})})):this.setState({errSlackItem:e.target.value})},iconOnClick:()=>{this.setState({slackEnter:!1})}})})]}),s.jsxs("div",{className:"d-flex align-items-center ",children:[s.jsx("label",{children:"Slug"}),s.jsx(f,{mainClass:"ml5",tooltip:"Add slug",icon:"icon-rs-circle-plus-fill-edge-medium",size:"md",onClick:()=>{this.setState({showSlugModal:!0})}})]})]})})})]}),s.jsxs("ul",{className:"list-of-even",children:["true"===this.state.isSmartLink?s.jsxs("li",{className:"row m0",children:[s.jsx(d,{md:3,children:"Channel name"}),s.jsx(d,{md:7,className:"pl35",children:"Smart Link"}),s.jsx(d,{md:2,className:"text-end",children:"Clipboard"})]}):null,this.state.smartlink&&this.state.smartlink.channels&&this.state.smartlink&&this.state.smartlink.channels.map(((e,t)=>{var a,i;return s.jsx(s.Fragment,{children:s.jsxs("li",{className:"row m0",children:[!1===(null==(a=this.props)?void 0:a.isNotification)&&s.jsxs(d,{md:3,className:"smartlink-table",children:[s.jsx(f,{icon:jt[me(e.channelType)].icon,color:"white",size:"md",mainClass:`mr10 box-view-icon ${jt[me(e.channelType)].color}`}),void 0===this.props.isNotification||!1===this.props.isNotification||"true"===this.state.isSmartLink?s.jsx("label",{className:"label-row s-title",children:me(e.channelType)}):null]}),s.jsx(d,{md:7,children:s.jsx("label",{className:"pl20 label-row s-link",children:e.smartCodePath})}),s.jsx(d,{md:2,className:"d-flex justify-content-end",children:s.jsx("div",{className:"d-flex align-items-center",children:!1===(null==(i=this.props)?void 0:i.isNotification)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"copied-text",children:this.state.isCopied&&e.copied&&s.jsx("label",{className:"ml15",children:"Copied"})}),s.jsx("div",{className:"copy-text",children:s.jsx(k,{text:"Copy",position:"top",children:s.jsx("img",{src:st,alt:"CopyMedium",className:"cursor-pointer paddingL5",onClick:()=>this.handleCopyClick(e.smartCodePath,t)})})}),s.jsxs("div",{id:"qr",className:"marginL10",onClick:()=>this.downLoadQRCode(e.smartCodePath),children:[s.jsx("div",{className:"d-flex justify-content-end mr6",children:s.jsx(k,{text:"QR Download",position:"top",children:s.jsxs("div",{className:"merge-icon",children:[s.jsx(f,{icon:he,size:"md"}),s.jsx("i",{className:`merge-sm ${ue} color-secondary-blue`})]})})}),s.jsx("div",{className:"d-none",children:s.jsx(tt,{ref:this.qrCodeRef,id:"qr-gen",value:e.smartCodePath,size:230,level:"H",includeMargin:!0})})]})]})})})]})})}))]})]}):null,s.jsxs("div",{className:"btn-container d-flex justify-content-end theme-space-mt "+(null==(x=this.props)||x.clickoff,"click-on"),children:[s.jsx(de,{className:(null==(S=this.props)?void 0:S.campComp)?"click-off":"click-on",onClick:()=>{this.props.cancelBtnClicked(void 0)},children:"Cancel"}),!0===window.location.pathname.toLowerCase().includes("creation-notification")?s.jsx(pe,{className:!(null==(j=this.props)?void 0:j.campComp)&&this.state.smartlink.channels.length>0?"click-on":"click-off",onClick:()=>this.props.cancelBtnClicked(void 0),children:"Save"}):s.jsxs(s.Fragment,{children:["false"===this.state.isSmartLink&&s.jsx(ge,{className:!(null==(y=this.props)?void 0:y.campComp)&&this.state.smartlink.channels.length>0?"click-on":"click-off",onClick:()=>this.props.cancelBtnClicked(void 0),children:"Save"}),s.jsx(pe,{className:!(null==(N=this.props)?void 0:N.campComp)&&this.state.smartlink.channels.length>0?"click-on":"click-off",onClick:()=>{var e,t,s,a=this.checkTheValues();if(!0===a[0]){ee("Save Btn",this.state.smartlink);const a=Ge.parse(null==(t=null==(e=this.props.history)?void 0:e.location)?void 0:t.search);let i=void 0!==a.cId?parseInt(a.cId):0,r=localStorage.getItem(`camp_${i}`);if(null!=r){let e=te(r);null==(s=null==e?void 0:e.analyticsType)||s.map((e=>{"app"===e.toLowerCase()&&this.state.smartlink.mobile.length})),e.webAnalytics=this.state.smartlink.web.url,e.mobileAnaltics=this.state.smartlink.mobile,localStorage.setItem(`camp_${i}`,ce(e))}this.props.buttonClicked(this.state.smartlink)}else this.setState({activationKey:a[2]})},children:this.getTheButtonName()})]})]})]})}}const jt={Email:{icon:ve,color:"bg-email"},SMS:{icon:be,color:"bg-sms"},"Web push notification":{icon:ke,color:"bg-web-push"},"Mobile push notification":{icon:xe,color:"bg-mobile-push"},WhatsApp:{icon:Se,color:"bg-whatsapp"},Facebook:{icon:Ce,color:"bg-facebook"},Twitter:{icon:je,color:"bg-twitter"},LinkedIn:{icon:Ie,color:"bg-linkedin"},Pinterest:{icon:fe,color:"bg-pinterest"},Instagram:{icon:ye,color:"bg-insta"},Line:{icon:Ne,color:"bg-line"},"Google ads":{icon:we,color:"bg-google"},"Facebook ads":{icon:Me,color:"bg-facebook"},Smartlink:{icon:"",color:""}};class It extends l.Component{constructor(){super(...arguments),t(this,"state",{linkVerify:!1}),t(this,"componentDidMount",(e=>{ee("Pre campaign summary Data",this.props)}))}render(){var e,t,a,i,r,l,n,o,p,m,h,u,g,v,b,k,x,S,C,j,I,f,y,N,w,M,A,L,T;let U=0;return void 0!==(null==(t=null==(e=this.props)?void 0:e.data)?void 0:t.pushContent)&&null!==(null==(i=null==(a=this.props)?void 0:a.data)?void 0:i.pushContent)&&""!==(null==(l=null==(r=this.props)?void 0:r.data)?void 0:l.pushContent)&&(U=this.props.data.pushContent.length),s.jsxs("div",{className:`${null==(n=this.props)?void 0:n.isTab}`,children:[s.jsxs(c,{className:"mb20 split-line-col",children:[s.jsx(d,{className:"text-center split-line",children:s.jsx(ft,{value:"Content length",count:Ue(U)})}),s.jsx(d,{className:"text-center split-line",children:s.jsx(ft,{value:"Image attachment",count:null===(null==(p=null==(o=this.props)?void 0:o.data)?void 0:p.pushImageUrl)||""===(null==(h=null==(m=this.props)?void 0:m.data)?void 0:h.pushImageUrl)||void 0===(null==(g=null==(u=this.props)?void 0:u.data)?void 0:g.pushImageUrl)?"No":"Yes"})})]}),s.jsx("hr",{className:"my20"}),s.jsx("div",{className:"css-scrollbar",style:{maxHeight:222},children:(null==(k=null==(b=null==(v=this.props)?void 0:v.data)?void 0:b.links)?void 0:k.length)>0&&s.jsxs(s.Fragment,{children:[s.jsxs(c,{children:[s.jsx("div",{className:"d-flex align-items-center mb20",children:s.jsxs("p",{className:"mb0",children:["mobile"===(null==(x=this.props)?void 0:x.type)?"Mobile":"Web"," SDK status"]})}),s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("i",{className:"icon-rs-link-medium icons-lg blue-medium"}),s.jsxs("span",{className:"blue marginL10 text-underline",children:["mobile"===this.props.type?"Mobile":"Web"," analytics "]}),"web"===this.props.type?s.jsx(s.Fragment,{children:"web"===this.props.type&&null!==(null==(C=null==(S=this.props)?void 0:S.data)?void 0:C.links)&&this.props.data.links.length>0&&!0===this.props.data.links[0].isValid?s.jsx("span",{className:"icon-rs-circle-tick-medium icons-md green-medium marginL10 posr top-2"}):s.jsx("span",{className:"icon-rs-circle-close-medium icons-md maroon-medium marginL10 posr top-2"})}):s.jsx(s.Fragment,{children:!0===(null==(I=null==(j=this.props)?void 0:j.data)?void 0:I.SDKStatus)||"mobile"===this.props.type?s.jsx("span",{className:"icon-rs-circle-tick-medium icons-md green-medium marginL10 posr top-2"}):s.jsx("span",{className:"icon-rs-circle-close-medium icons-md maroon-medium marginL10 posr top-2"})})]})]}),s.jsx("p",{className:"theme-space-mt",children:"Link verification status"}),null!==(null==(y=null==(f=this.props)?void 0:f.data)?void 0:y.links)&&(null==(M=null==(w=null==(N=this.props)?void 0:N.data)?void 0:w.links)?void 0:M.map((e=>s.jsx(s.Fragment,{children:s.jsx(c,{children:s.jsxs("div",{className:"d-flex align-items-center mb20",children:[s.jsx("i",{className:"icon-rs-link-medium icons-lg orange-medium"}),s.jsx("span",{className:"marginL10 text-underline-h cp",onClick:()=>{window.open(e.link)},children:e.link}),!0===e.isValid?s.jsx("span",{className:"icon-rs-circle-tick-medium icons-md green-medium marginL10 posr top-2"}):s.jsx("span",{className:"icon-rs-circle-close-medium icons-md maroon-medium marginL10 posr top-2"})]})})})))),null===(null==(L=null==(A=this.props)?void 0:A.data)?void 0:L.links)&&s.jsx(s.Fragment,{children:s.jsx(c,{children:s.jsxs("div",{className:"d-flex align-items-center mb20",children:[s.jsx("i",{className:"icon-rs-link-medium icons-lg orange-medium"}),s.jsx("span",{className:"marginL10 text-underline-h cp",children:null==(T=this.props)?void 0:T.smartAppStore}),s.jsx("span",{className:"icon-rs-circle-tick-medium icons-md green-medium marginL10 posr top-2"})]})})})]})}),s.jsxs("div",{className:"hori-column-chart p20",children:[s.jsx("i",{class:"icon-rs-close-mini cp close-btn",onClick:()=>{this.setState({linkVerify:!1})}}),s.jsx("div",{className:"portlet-md",children:"web"===this.props.type&&s.jsxs("div",{children:[s.jsx("p",{children:"Link verification status"}),s.jsxs("div",{className:"css-scrollbar link-status-height",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("i",{className:"icon-rs-link-medium icons-lg blue-medium"}),s.jsx("span",{className:"blue marginL10 text-underline",children:" www.visionbank.com/products/ "}),s.jsx("span",{className:"icon-rs-circle-tick-medium icons-md green-medium cursor-default marginL10 posr top-2"})]}),s.jsxs("div",{className:"d-flex align-items-center marginT15 mb20",children:[s.jsx("i",{className:"icon-rs-link-medium icons-lg blue-medium"}),s.jsx("span",{className:"blue marginL10 text-underline",children:" www.visionbank.com/benefits/ "}),s.jsx("span",{className:"icon-rs-circle-close-medium icons-md maroon-medium marginL10 posr top-2"})]})]})]})})]})]})}}const ft=({value:e,count:t})=>s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mb0",children:e}),s.jsx("h1",{className:"mb0",children:t})]});class yt extends l.Component{constructor(){super(...arguments),t(this,"state",{isModalOpen:this.props.isOpen,caplistChecked:!1})}render(){return s.jsxs(v,{show:this.state.isModalOpen,centered:!0,children:[s.jsx(v.Header,{children:s.jsxs("div",{children:[s.jsx("label",{children:"Frequency cap list"}),s.jsx("div",{children:s.jsx(Oe,{onChange:()=>this.setState({caplistChecked:!this.state.caplistChecked}),checked:this.state.caplistChecked})}),s.jsx(Ee,{mainClass:"close",size:"md",handleClose:()=>{this.setState({isModalOpen:!this.state.isModalOpen}),this.props.onChangeIsOpen(!1)}})]})}),s.jsx(v.Body,{children:!0===this.state.caplistChecked?s.jsx(Pe,{data:Nt,defaultItem:"-- Select --"}):null}),s.jsx(v.Footer,{children:!0===this.state.caplistChecked?s.jsx(pe,{onClick:()=>{this.setState({isModalOpen:!this.state.isModalOpen}),this.props.onChangeIsOpen(!1)},children:"Ok"}):null})]})}}const Nt=["Corporate customer","Cash back","NRI customer"];class wt extends l.Component{constructor(){super(...arguments),t(this,"state",{audienceLimit:"",isModalOpen:!0,audienceLimitCount:"",equalsValue:"",equalsDropDownValue:"Incremental",baseVolume:"",incrementalValue:""})}render(){return s.jsxs(v,{show:!0,centered:!0,children:[s.jsxs(v.Header,{children:[s.jsx("h2",{children:"List control"}),s.jsxs("div",{className:"float-end",children:["Potential audience : ",s.jsx("span",{children:"679,500"})]}),s.jsx(Ee,{mainClass:"close",size:"md",handleClose:()=>{this.setState({isModalOpen:!this.state.isModalOpen}),this.props.onChangeIsOpen(!1)}})]}),s.jsx(v.Body,{children:s.jsxs(c,{className:"marginY30 paddingL15",children:[s.jsx(d,{md:3,children:s.jsx("label",{className:"label-row",children:"Limit audience"})}),s.jsx(d,{md:2,children:s.jsx(Re,{lbl:"One time",name:"limitAudience",labelId:"onetime",cb:e=>{this.setState({audienceLimit:e.target.value}),this.forceUpdate()}})}),s.jsx(d,{md:2,children:s.jsx(Re,{lbl:"By day",name:"limitAudience",labelId:"byday",cb:e=>{this.setState({audienceLimit:e.target.value}),this.forceUpdate()}})}),"one time"===this.state.audienceLimit.toLowerCase()?s.jsx(c,{md:2,children:s.jsx(We,{placeholder:"Enter the limit audience count",cls:"marginB0",val:this.state.audienceLimitCount,max:_e,cb:e=>{this.state.audienceLimitCount=e,this.forceUpdate()}})}):null,"by day"===this.state.audienceLimit.toLowerCase()&&"Equals"===this.state.equalsDropDownValue?s.jsxs(c,{md:2,children:[s.jsx(d,{children:s.jsx(Pe,{data:["Incremental","Equals"],defaultValue:this.state.equalsDropDownValue,onChange:e=>{this.state.equalsDropDownValue=e.target.value,this.forceUpdate()}})}),s.jsx(d,{children:s.jsx(We,{placeholder:"Enter volume per day",cls:"marginB0",val:this.state.equalsValue,max:$e,cb:e=>{this.state.equalsValue=e,this.forceUpdate()}})}),s.jsx(d,{children:s.jsx("i",{className:"grey icon-rs-circle-arrow-right-mini icons-sm"})})]}):null,"by day"===this.state.audienceLimit.toLowerCase()&&"Incremental"===this.state.equalsDropDownValue?s.jsxs(c,{md:2,children:[s.jsx(d,{children:s.jsx(Pe,{data:Mt,defaultValue:this.state.equalsDropDownValue,onChange:e=>{this.state.equalsDropDownValue=e.target.value}})}),s.jsx(d,{children:s.jsx(We,{placeholder:"Base volume",cls:"marginB0",val:this.state.baseVolume,max:Ve,cb:e=>{this.state.baseVolume=e,this.forceUpdate()}})}),s.jsx(d,{children:s.jsx(We,{placeholder:"Incremental",cls:"marginB0",val:this.state.incrementalValue,max:Ke,cb:e=>{this.state.incrementalValue=e,this.forceUpdate()}})}),s.jsx(d,{children:s.jsx("i",{className:"grey icon-rs-circle-arrow-right-mini icons-sm"})})]}):null]})}),s.jsxs(v.Footer,{children:[s.jsx(de,{onClick:()=>{this.setState({isModalOpen:!this.state.isModalOpen}),this.props.onChangeIsOpen(!1)},children:"Cancel"}),s.jsx(pe,{onClick:()=>{this.setState({isModalOpen:!this.state.isModalOpen}),this.props.onChangeIsOpen(!1)},children:"Save"})]})]})}}const Mt=["Equals","Incremental"];class At extends l.Component{constructor(){super(...arguments),t(this,"state",{isFrequencyModal:!1,isSupperssionModal:!1,isWebCustomButton:!1,isMobileCustomButton:!1,sendTime:!1})}render(){var e,t,a,i;return s.jsxs("div",{className:"portlet-container portlet-md "+(this.state.sendTime?"show-mini-chart":""),children:[s.jsx("div",{className:"portlet-header",children:s.jsx("h3",{children:"List quality"})}),s.jsxs(c,{className:"text-center split-line-col",children:[s.jsx(d,{className:"split-line mb15",children:s.jsx(Lt,{value:"Audience",count:0===this.props.dynamicListId?null==(e=this.props.data)?void 0:e.numberOfRecipients:"NA"})}),s.jsx(d,{className:"split-line mb15",children:s.jsx(Lt,{value:"Unique audience",count:0===this.props.dynamicListId?null==(t=this.props.data)?void 0:t.totalUniqAudience:"NA"})})]}),s.jsx(c,{className:"text-center split-line-col",children:s.jsx(d,{className:"split-line mb0",children:s.jsx(Lt,{value:"Unsubscribed",count:0===this.props.dynamicListId?null==(a=this.props.data)?void 0:a.unsubscribeCnt:"NA"})})}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsxs("div",{className:"text-center bottom12 position-absolute",children:[s.jsxs(c,{className:"text-center marginT0",children:[s.jsx("p",{className:"mb0",children:"Potential target audience"}),s.jsx("h1",{children:Ue(0===this.props.dynamicListId?null==(i=this.props.data)?void 0:i.potentialTarget:"NA")})]}),s.jsxs("ul",{className:"listStyle click-off",children:[s.jsx("li",{children:s.jsx("i",{className:"icon-rs-user-form-large icons-lg grey",onClick:()=>{this.setState({isFrequencyModal:!this.state.isFrequencyModal}),this.props.onChangeIsOpen(this.state.isFrequencyModal)}})}),s.jsx("li",{children:s.jsx("i",{className:"icon-rs-user-arrow-down-large icons-lg grey",onClick:()=>{this.setState({isSupperssionModal:!this.state.isSupperssionModal}),this.props.onChangeIsOpen(this.state.isSupperssionModal)}})})]})]})}),s.jsx("div",{className:"info-popup click-off",children:s.jsx("i",{className:"icon-rs-circle-info-medium icons-md color-primary-blue cp",onClick:()=>{this.setState({sendTime:!0})}})}),s.jsxs("div",{className:"hori-column-chart p20",children:[s.jsx("i",{class:"icon-rs-close-mini cp close-btn",onClick:()=>{this.setState({sendTime:!1})}}),s.jsx("div",{className:"portlet-md",children:s.jsx("h4",{children:"Send time propensity"})})]}),!0===this.state.isSupperssionModal?s.jsx(wt,{isOpen:this.state.isSupperssionModal,onChangeIsOpen:e=>{this.setState({isSupperssionModal:e})}}):null,!0===this.state.isFrequencyModal?s.jsx(yt,{isOpen:this.state.isFrequencyModal,onChangeIsOpen:e=>{this.setState({isFrequencyModal:e})}}):null]})}}const Lt=({value:e,count:t})=>s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mb0",children:e}),s.jsx("h1",{className:"mb0",children:Ue(t)})]});var Tt=[{status:"complete",steps:"1",steps_title:"Plan"},{status:"complete",steps:"2",steps_title:"Create"},{status:"inProcess",steps:"3",steps_title:"Analyze and execute"}];class Ut extends l.Component{constructor(){super(...arguments),t(this,"state",{viewedJson:null,data:null,header:null,tabIndex:0,tabData:[],isFrequencyModal:!1,isSupperssionModal:!1,smartLinkPopUp:!1,channelTabs:[],channelTabIndex:0,saveError:!1,isLoader:!1,isError:!1,appDa:null,webDa:null,appDet:null,webDet:null}),t(this,"getDataFromServer",((e,t,s,a)=>{var i,r,l,n;let o={campaignId:null==(n=null==(l=null==(r=null==(i=this.props)?void 0:i.history)?void 0:r.location)?void 0:l.state)?void 0:n.campaignId,appid:(null==e?void 0:e.appId)||(null==t?void 0:t.appId)||"",domainURL:(null==s?void 0:s.webUrl)||(null==a?void 0:a.webUrl)};this.setState({isLoader:!0}),B({path:De,params:o,loading:this.context.globalStateData.setIsLoadingData,ok:e=>{this.setState({isLoader:!1}),e.status&&void 0!==e.data?(this.prepareView(e.data),this.setState({isLoader:!1})):this.setState({saveError:!0})},fail:e=>{e.message&&this.setState({isLoader:!1,saveError:!0})}})})),t(this,"prepareView",(e=>{let t=JSON.parse(e);this.setState({viewedJson:t});let s=JSON.parse(null==t?void 0:t.campaignJson);this.headerElement(s);let a=this.prepareTabs(s.channelType);this.prepareData(t.channelDetails,0,a)})),t(this,"headerElement",(e=>{var t;const s=S(),a={name:e.campaignName,startDate:e.startDate,endDate:e.endDate,goal:(null==(t=null==e?void 0:e.goalType)?void 0:t.conversionName)||(null==e?void 0:e.goalType),type:s.campaignAttributeList.filter((t=>t.campaignAttributeId===e.campaignAttributeId))[0].attributeName};this.setState({header:a})})),t(this,"prepareTabs",(e=>{let t=[];return e.map(((e,s)=>{let a={id:s,text:e};t.push(a)})),this.setState({tabData:t}),t})),t(this,"prepareData",((e,t,s)=>{let a=s?s[t]:this.state.tabData[t],i=[];e.map((e=>{var t,s;return 8===e.channelId&&a.text.toLowerCase().includes("web")?((null==(t=e.contentDetailWebPush)?void 0:t.length)>1&&e.contentDetailWebPush.map(((t,s)=>{let a="ABCD",r="Level CRSL "+a.charAt(s);e.isSplitAB&&(r="Split "+a.charAt(s));let l=r,n={id:parseInt(s+1),text:l};i.push(n)})),void this.setState({data:e,channelTabs:i})):14===e.channelId&&a.text.toLowerCase().includes("mobile")?((null==(s=e.contentDetailMobilePush)?void 0:s.length)>1&&e.contentDetailMobilePush.map(((t,s)=>{let a="ABCD",r="Level CRSL "+a.charAt(s);e.isSplitAB&&(r="Split "+a.charAt(s));let l=r,n={id:parseInt(s+1),text:l};i.push(n)})),void this.setState({data:e,channelTabs:i})):void 0}))})),t(this,"prepareData2",((e,t,s)=>{const a=s?s[t]:this.state.tabData[t],i=[];e.forEach((e=>{const t=a.text.toLowerCase().includes("web")?e.contentDetailWebPush:a.text.toLowerCase().includes("mobile")?e.contentDetailMobilePush:null;if(t&&t.length>1)return t.forEach(((e,t)=>{const s={id:t+1,text:"Level CRSL "+(t+1)};i.push(s)})),void this.setState({data:e,channelTabs:i});this.setState({data:e})}))})),t(this,"prepareData1",((e,t,s)=>{let a=s?s[t]:this.state.tabData[t],i=[];e.map((e=>{var t,s;let r=[];return 8===e.channelId&&a.text.toLowerCase().includes("web")?(null==(t=e.contentDetailWebPush)?void 0:t.length)>1&&(r=e.contentDetailWebPush):14===e.channelId&&a.text.toLowerCase().includes("mobile")&&(null==(s=e.contentDetailMobilePush)?void 0:s.length)>1&&(r=e.contentDetailMobilePush),r.length>1?(r.map(((e,t)=>{let s="Level CRSL "+parseInt(t+1),a={id:parseInt(t+1),text:s};i.push(a)})),void this.setState({data:r[0],channelTabs:i})):void this.setState({data:e,channelTabs:i})}))}))}componentDidMount(){let e=null,t=null,s=null,a=null;window.scrollTo(0,0),null!==localStorage.getItem("appDet")&&void 0!==localStorage.getItem("appDet")&&(this.setState({appDet:te(localStorage.getItem("appDet"))}),t=te(localStorage.getItem("appDet"))),null!==localStorage.getItem("webDet")&&void 0!==localStorage.getItem("webDet")&&(this.setState({webDet:te(localStorage.getItem("webDet"))}),s=te(localStorage.getItem("webDet"))),null!==localStorage.getItem("appData")&&void 0!==localStorage.getItem("appData")&&(this.setState({appDa:JSON.parse(localStorage.getItem("appData"))}),e=JSON.parse(localStorage.getItem("appData"))),null!==localStorage.getItem("webData")&&void 0!==localStorage.getItem("webData")&&(this.setState({webDa:JSON.parse(localStorage.getItem("webData"))}),a=JSON.parse(localStorage.getItem("webData"))),this.getDataFromServer(e,t,a,s)}render(){var e,t,a,i,r,l,o,p,m,u,g,k,x,S,C,j,I,f,y,N,w,M,A,L;return s.jsx(s.Fragment,{children:s.jsxs(n,{children:[s.jsx(h,{fluid:!0,className:"main-heading-wrapper mb0",children:s.jsxs(h,{className:"mhw-container",children:[s.jsx("div",{className:"mhwc-left",children:s.jsx("h1",{children:s.jsx("div",{className:"mh-wrapper",children:s.jsx("span",{className:"mh-text",children:"Communication completion"})})})}),s.jsx("div",{className:"mhwc-right"})]})}),s.jsx(h,{className:"page-header box-bottom-space communication-completion",children:!0===this.state.saveError||this.state.isLoader?s.jsx(s.Fragment,{children:s.jsx(at,{count:6,isError:this.state.saveError})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"marginB20",children:s.jsx(lt,{progressSteps:Tt,header:this.state.header,editsmart:!0,type:"editplan",isSmartlinkCreate:!0,buttonClicked:e=>{var t,s,a,i,r,l,n;if(2===e)this.setState({smartLinkPopUp:!0});else if(1===e){let e="",o="";if(null==(s=null==(t=this.props.location)?void 0:t.state)?void 0:s.campaignId){o=null==(i=null==(a=this.props.location)?void 0:a.state)?void 0:i.campaignId;let t=te(localStorage.getItem(`camp_${null==(l=null==(r=this.props.location)?void 0:r.state)?void 0:l.campaignId}`));e=(null==(n=null==t?void 0:t.notifyData)?void 0:n.statusId)||0}this.props.history.push({pathname:"/campaign/planning",search:`?cId=${o}&sl=false&cs=${e}`})}}})}),s.jsx("div",{children:this.state.tabData.length>0&&s.jsx(b,{defaultSelectedItem:this.state.tabIndex,defaultClass:"",dynamicTab:"mini float-end",activeClass:"active",tabData:this.state.tabData,callBack:(e,t)=>{this.setState({tabIndex:t}),this.prepareData(this.state.viewedJson.channelDetails,t,null)}})}),s.jsx("div",{className:"clearfix"}),s.jsx(rt,{progressSteps:Pt}),null!=this.state.data&&s.jsx(s.Fragment,{children:s.jsxs(c,{className:"marginT30",children:[s.jsx(d,{md:6,children:s.jsx(At,{data:this.state.data,dynamicListId:null==(i=null==(a=null==(t=null==(e=this.props)?void 0:e.history)?void 0:t.location)?void 0:a.state)?void 0:i.dynamicListId,onChangeIsOpen:e=>{this.setState({isSupperssionModal:e})}})}),s.jsx(d,{md:6,children:s.jsxs("div",{className:"portlet-container portlet-md",children:[s.jsx("div",{className:"portlet-header",children:s.jsx("h3",{children:"Content"})}),this.state.channelTabs.length>1&&s.jsx(c,{children:s.jsx(d,{children:s.jsx(b,{defaultSelectedItem:this.state.channelTabIndex,defaultClass:"",dynamicTab:"mini float-start fs16-btn "+(this.state.channelTabs.length>1?"is-tab-head":""),activeClass:"active",tabData:this.state.channelTabs,callBack:(e,t)=>{this.setState({channelTabIndex:t}),this.prepareData(this.state.viewedJson.channelDetails,this.state.tabIndex,null)}})})}),s.jsx(It,{isTab:this.state.channelTabs.length>1?"is-tab":"",smartAppStore:null==(p=null==(o=null==(l=null==(r=this.props)?void 0:r.history)?void 0:l.location)?void 0:o.state)?void 0:p.smartAppStore,dynamicListId:null==(k=null==(g=null==(u=null==(m=this.props)?void 0:m.history)?void 0:u.location)?void 0:g.state)?void 0:k.dynamicListId,type:14===this.state.data.channelId?"mobile":"web",data:14===this.state.data.channelId?null!==(null==(S=null==(x=this.state)?void 0:x.data)?void 0:S.contentDetailMobilePush)&&(null==(j=null==(C=this.state)?void 0:C.data)?void 0:j.contentDetailMobilePush[this.state.channelTabIndex]):null!==this.state.data.contentDetailWebPush&&this.state.data.contentDetailWebPush[this.state.channelTabIndex]})]})})]})}),s.jsx("div",{className:"btn-container d-flex justify-content-end mt0",children:s.jsx(pe,{onClick:()=>{for(var e in localStorage.removeItem("appData"),localStorage.removeItem("webData"),localStorage.removeItem("appDet"),localStorage.removeItem("webDet"),localStorage)e.includes("camp_")&&localStorage.removeItem(e);const t=new CustomEvent("myCustomEvent",{detail:{message:"Hello from custom event!"}});window.dispatchEvent(t),localStorage.removeItem("cId"),this.props.history.push("/campaign")},children:"Next"})}),s.jsxs(v,{show:this.state.smartLinkPopUp,size:"xl",centered:!0,className:"modal-top-fixed",children:[s.jsxs(v.Header,{children:[s.jsx("h2",{children:"Smart Link"}),s.jsx(Ee,{mainClass:"close",size:"md",handleClose:()=>this.setState({smartLinkPopUp:!1})})]}),s.jsx(v.Body,{children:s.jsx("div",{className:"smart-link-popup-ui",children:s.jsx(St,{clickoff:!0,campComp:!0,smartlinks:[],mode:"edit",isNotification:!0,campaignId:null==(N=null==(y=null==(f=null==(I=this.props)?void 0:I.history)?void 0:f.location)?void 0:y.state)?void 0:N.campaignId,plannerData:JSON.parse(localStorage.getItem("cpsmartlink"+(null==(L=null==(A=null==(M=null==(w=this.props)?void 0:w.history)?void 0:M.location)?void 0:A.state)?void 0:L.campaignId))),buttonClicked:e=>{}})})})]})]})})]})})}}t(Ut,"contextType",w);const Dt=i(Ut),Pt=[{status:"complete",icons:"icon-rs-tick-large icons-lg green",steps_title:"List quality"},{status:"complete",icons:"icon-rs-tick-large icons-lg green",steps_title:"Content analysis"},{status:"",icons:"icon-rs-tick-large icons-lg green",steps_title:"Pre-communication summary"}],Et=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"}));export{lt as C,it as P,St as S,xt as a,Dt as b,Et as c,bt as p};
