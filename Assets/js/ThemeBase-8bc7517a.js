import{j as e}from"./pdf-editor-be9d2bd2.js";import{r as t}from"./react-vendor-379f659a.js";import{v as o,y as r}from"./rsp-forms.es-758b4ef6.js";const a=()=>{const[a,l]=t.useState(!1),[n,s]=t.useState(null),[i,d]=t.useState(null),[u,f]=t.useState(null),[m,c]=t.useState(null);t.useEffect((()=>{p()}),[]);const p=()=>{l(!0);const e=new URLSearchParams(window.location.search);null!==e.get("formId")&&void 0!==e.get("formId")&&""!==e.get("formId")&&fetch("https://apigd.smartdx.co/Form/GetFormByShortCode",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({shortCode:e.get("formId")})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((t=>{try{const o=JSON.parse(t);if(null!==e.get("formType")&&void 0!==e.get("formType")&&""!==e.get("formType")){let t="tfa"===e.get("formType").toLowerCase()?"T":"S";f(t)}else f("S");if(!o.status||!o.data)throw l(!1),new Error(o.message||"Invalid response format");{const[e,t]=o.data.split("/"),r=e.replace("cust_","aud_");h(r,t)}}catch(o){throw l(!1),new Error("Failed to parse server response")}})).catch((e=>{l(!1)}))},h=(e,t)=>{fetch(`https://apigd.smartdx.co/Form/GetFormfieldsnew?databaseName=${e}&formId=${t}`,{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((e=>{const t=new URLSearchParams(window.location.search);let o={enabled:!1,logo:"https://app.smartdx.co/assets/smartdx-logo-white-green-9ce8fb62.svg",name:"Tell a Friend Form New Update",backgroundColor:"#00006e",color:"#ffffff"};if(c(o),null===t.get("formType")||void 0===t.get("formType")||""===t.get("formType")){if((null==e?void 0:e.status)&&null!==(null==e?void 0:e.data)&&void 0!==(null==e?void 0:e.data)){let t=JSON.parse(null==e?void 0:e.data),o=JSON.parse(null==t?void 0:t.Jsondata)||null;s(o);let r=JSON.parse(null==t?void 0:t.WelcomeNoteMailHTML);d(null==r?void 0:r.themeStyles)}l(!1),l(!1)}else{let r="tfa"===t.get("formType").toLowerCase()?"T":"S";if(f(r),"S"===r){if((null==e?void 0:e.status)&&null!==(null==e?void 0:e.data)&&void 0!==(null==e?void 0:e.data)){let t=JSON.parse(null==e?void 0:e.data),r=JSON.parse(null==t?void 0:t.Jsondata)||null;s(r);let a=JSON.parse(null==t?void 0:t.WelcomeNoteMailHTML);d(null==a?void 0:a.themeStyles),c((null==a?void 0:a.headerConfig)||o)}}else{let t=JSON.parse(null==e?void 0:e.data),r=JSON.parse(null==t?void 0:t.WelcomeNoteMailHTML);d(null==r?void 0:r.themeStyles),c((null==r?void 0:r.headerConfig)||o);let a=JSON.parse(null==t?void 0:t.Jsondata)||null;s(a)}l(!1)}})).catch((e=>{l(!1)}))},g=()=>{const t={gridArea:"1/1",margin:"15%",borderRadius:"50%",background:"inherit",animation:"inherit"},o={...t,margin:"25%",animationDuration:"3s"};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)"},children:e.jsxs("div",{style:{width:"50px",aspectRatio:"1",display:"grid",borderRadius:"50%",background:"conic-gradient(#25b09b 25%,#f03355 0 50%,#514b82 0 75%,#ffa516 0)",animation:"l22 2s infinite linear"},children:[e.jsx("div",{style:t}),e.jsx("div",{style:o}),e.jsx("style",{children:"\n          @keyframes l22 {\n            100% {transform: rotate(1turn)}\n          }\n        "})]})})};return e.jsx(e.Fragment,{children:!0===a?e.jsx(g,{}):e.jsx(e.Fragment,{children:null!==n&&null!==i&&null!==u?e.jsx(e.Fragment,{children:"T"===u?e.jsx(o,{data:n,formStyles:i,headerConfig:m,onClose:()=>{}}):e.jsx(r,{formData:n,formStyles:i,headerConfig:m,onClose:()=>{}})}):null})})};export{a as default};
