import{j as e}from"./pdf-editor-be9d2bd2.js";import{r as s}from"./react-vendor-379f659a.js";import{z as t,M as a,eH as o,aC as i,ar as r,aL as l,az as n,DG as d}from"./index-75225e0a.js";import{r as c}from"./Preference-7a793070.js";import{K as m}from"./index-44141e50.js";import{L as p}from"./LayoutPageWrapper-c659fc07.js";import{RSConfirmAlert as j}from"./RSConfirmAlert-c9e1da8b.js";import"./constants-82903eb8.js";import{S as u}from"./SkeletonTable-f73684ed.js";import{C as h}from"./ui-a5a97ebf.js";import"./utils-16c7e021.js";import"./kendo-5d73125a.js";import"./drag-drop-4af74c4a.js";import"./CompanyUserList-6f3010b3.js";import"./RSDropdowns-9012b9eb.js";import"./style-a86a43a5.js";import"./RSKendoDropdown-89bac735.js";import"./get-4aa85b1a.js";import"./RSCheckbox-6c51a528.js";import"./RSPhoneInput-a07ff6f4.js";import"./inputLimit-ce03b0f6.js";import"./RSFormGroup-2e23951f.js";import"./FormListWrapper-0cd539ec.js";import"./FormLabel-7c8c6237.js";import"./FormFieldIcon-388bc468.js";import"./RSIcon-40715e67.js";import"./RSSwitch-b5eda9e2.js";import"./constantObject-ca27cf51.js";import"./react-router-dom.min-6f8d67fa.js";import"./ChannelGoalsData-c96a6d6b.js";const x=()=>{const[x,f]=s.useState([]),[g,S]=s.useState(!0),[b,v]=s.useState(null);s.useState(null);const[y,N]=s.useState(!1),[k,w]=s.useState(null),[C,I]=s.useState(!0),D=c.useHistory(),[R,F]=s.useState(!1),[L,P]=s.useState(!1),[G,A]=s.useState(!1),z=s.useContext(t);s.useEffect((()=>{T(),a({path:o,loading:z.globalStateData.setIsLoadingData,ok:e=>{var s;!0===(null==e?void 0:e.status)?(null==(s=e.data)?void 0:s.length)>0?(f(e.data),I(!1)):I(!1):(I(!1),v("Failed to fetch roles. Invalid response.")),S(!1)},fail:e=>{v("Failed to fetch roles. Please try again later."),S(!1),I(!1)}})}),[]);const T=()=>{let e=!1,s=!1,t=!1;const a=i("Roles & permissions");1==(null==a?void 0:a.get_AddAccessData)&&(e=!0),s=1==(null==a?void 0:a.accessUpdateData),(null==a?void 0:a.accessDeleteData)&&(t=!0),P(e),F(s),A(t)};return e.jsxs(p,{children:[e.jsx(h,{fluid:!0,className:"main-heading-wrapper mb0",children:e.jsx(h,{className:"mhw-container",children:e.jsx("div",{className:"mhwc-left",children:e.jsx("h1",{children:e.jsx("div",{className:"mh-wrapper",children:e.jsx("span",{className:"mh-text",children:"Roles & Permission"})})})})})}),e.jsxs(h,{className:"page-header box-bottom-space",children:[e.jsx("div",{className:(L?"click-on":"click-off")+" mhwc-right d-flex justify-content-end marginB10",children:e.jsx(r,{id:"dl_add_button",icon:l,size:"lg",shadow:!0,tooltip:"Add new role",onClick:()=>{D.push("/preferences/newpermissions")}})}),y&&e.jsx(j,{size:"md",para:"Are you sure you want to delete this role?",pClass:"text-center mb0",secondaryButtonText:"Cancel",primaryButtonText:"OK",buttonClicked:e=>{!0===e?(k&&a({path:d,params:{id:k},loading:z.globalStateData.setIsLoadingData,method:"POST",ok:e=>{!0===e.status?f(x.filter((e=>e.securityGroupId!==k))):alert("Failed to delete the role. Please try again.")},fail:e=>{alert("Failed to delete the role. Please try again later.")}}),N(!1)):(N(!1),w(null))}}),x.length>0?e.jsx("div",{children:e.jsx(m,{config:{take:5,skip:0},data:x,pageable:!0,settings:{total:x.length},column:[{field:"securityGroupName",filter:"text",title:"Role name",width:"240",cell:s=>e.jsx("td",{children:e.jsx("span",{children:s.dataItem.securityGroupName})})},{field:"action",title:"Actions",width:"240",cell:s=>e.jsx(e.Fragment,{children:e.jsx("td",{children:e.jsxs(n,{className:"float-end",children:[e.jsx("div",{className:R?"":"click-off",children:e.jsx(r,{tooltip:"Info",icon:"icon-rs-pencil-edit-medium",onClick:()=>{var e;e=s.dataItem.securityGroupId,D.push(`/preferences/newpermissions?id=${e}`)}})}),e.jsx("div",{className:G?"":"click-off",children:e.jsx(r,{tooltip:"Users",icon:"icon-rs-delete-medium",onClick:()=>{var e;e=s.dataItem.securityGroupId,w(e),N(!0)}})})]})})})}]})}):C?e.jsx(h,{className:"page-header box-bottom-space box-design",children:e.jsx(u,{count:5,isError:!0,children:e.jsx("div",{})})}):e.jsx(h,{className:"page-header box-bottom-space box-design",children:e.jsx(u,{count:5,isError:!0,children:e.jsxs("div",{className:"nodata-bar add-func",children:[e.jsx("i",{className:"icon-rs-alert-medium icons-md orange-medium"}),e.jsx("p",{children:"No data available"})]})})})]})]})};export{x as default};
