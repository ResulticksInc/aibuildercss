import{j as e}from"./pdf-editor-5df4b936.js";import{r as t,R as i}from"./react-vendor-379f659a.js";import{z as l,M as a,cD as n,al as s,bt as r,E as d,ar as o,aL as c,cC as u}from"./index-7d59e1e4.js";import{L as p}from"./ListView-669adc45.js";import{RSConfirmAlert as m}from"./RSConfirmAlert-56ae520e.js";import"./constants-82903eb8.js";import{S as h}from"./SkeletonTable-9a18ea3e.js";import{R as x}from"./RSPAdvancedCampaignSearch-a7ce83c8.js";import{K as g}from"./IconDropdown-8a2cdc1f.js";import{a as v}from"./ui-9ddcca8e.js";import{P as y}from"./kendo-5d73125a.js";let f={cardsContainer:{display:"flex",width:"100%",margin:10,justifyContent:"space-evenly"},card:{display:"flex",width:"32%",height:"100%",borderRadius:"10px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",background:"white",overflow:"hidden",marginRight:20,padding:10},iframeContent:{color:"red",fontWeight:"bold",padding:"20px",textAlign:"center"},cardBody:{padding:"15px",width:"100%"},cardActions:{display:"flex",justifyContent:"flex-end",padding:"10px",gap:"12px"},editButton:{background:"#007bff",color:"white",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"5px"},deleteButton:{background:"red",border:"none",color:"white",fontSize:"18px",cursor:"pointer",padding:"5px 10px",borderRadius:"5px"},downloadButton:{background:"none",border:"none",fontSize:"18px",cursor:"pointer"}};const j={skip:0,take:4,type:"input",buttonCount:4,info:!1,pageSizes:!0,previousNext:!0,responsive:!0},b=b=>{t.useState(0);const[S,k]=t.useState([]),[w,C]=t.useState([]),[N,L]=t.useState(j),I=t.useContext(l),[A,D]=t.useState(""),[P,z]=t.useState(!1);t.useState(!1);const[M,R]=t.useState(0),[B,T]=t.useState(null);t.useState(null),t.useEffect((()=>{C([]),D(""),E(),L(j)}),[null==b?void 0:b.channelId]),t.useEffect((()=>{let e=(null==b?void 0:b.templateList)||[];0!==(null==e?void 0:e.length)&&(e=e.map(((e,t)=>(e.index=t,e.imageUrl=U(e.body),e))),C(e))}),[null==b?void 0:b.templateList]);const E=()=>{if(!0===(null==b?void 0:b.isAutherPage))return;let e={channelId:null==b?void 0:b.channelId};T(!0),a({path:n,params:e,loading:I.globalStateData.setIsLoadingData,ok:e=>{if(T(!1),null==e?void 0:e.status){let t=(null==e?void 0:e.data)||[];t=t.map(((e,t)=>(e.index=t,e.imageUrl=U(e.body),e))),C(t),k(t)}},fail:e=>{T(!1)}})},U=(e,t)=>{if(!e)return;const i=(new DOMParser).parseFromString(e,"text/html").querySelector(".content-wrapper");if(i){i.style.display="flex",i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",i.style.zoom=.8,i.style.justifyContent="center",i.style.border="1px solid #ccc",i.style.borderRadius="5px",i.style.padding="10px";const e=(new DOMParser).parseFromString(i.outerHTML,"text/html");return _(e.body.children[0]),H(i),i.children,i.outerHTML}};function H(e){e.style.width=300,e.style.height=300,e.style.display="",e.style.fontSize=24,e.style.left="",e.style.top="","iframe"===e.tagName.toLowerCase()&&(e.srcdoc=e.outerHTML),"audio"===e.tagName.toLowerCase()&&(e.removeAttribute("autoplay"),e.pause(),e.currentTime=0),e.id.includes("carousel")&&(e.style.width="100%",e.style.height="100%");for(let t=0;t<e.children.length;t++)e.children[t].style.width=300,e.children[t].style.height=300,e.children[t].style.display="",e.children[t].style.fontSize=24,e.children[t].style.left="",e.children[t].style.top="",H(e.children[t])}const _=e=>{e.style.zoom=.3},F=i.memo((({dataItem:i,index:l})=>{t.useState(null);const[a,n]=t.useState(null),o=({dataItem:t})=>e.jsx(e.Fragment,{children:t.imageUrl?e.jsx("div",{style:{height:230},dangerouslySetInnerHTML:{__html:t.imageUrl}}):e.jsx("label",{children:"Loading..."})});return e.jsx(v,{md:3,children:e.jsxs("div",{onMouseEnter:e=>{n(!0)},onMouseLeave:()=>{n(!1)},className:`rsp-card-list ${!0===(null==b?void 0:b.isAutherPage)&&a?"rsp-card-visible":""} `,children:[e.jsxs("div",{className:"rsp-card-header",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Created on : "}),e.jsx("span",{children:s(null==i?void 0:i.createdDate)})]}),e.jsx("div",{children:e.jsx(g,{className:"position-relative right-10",dir:"rtl",data:[{text:"Edit",id:1e3,disabled:!1},{text:"Delete",id:1001,disabled:(null==i?void 0:i.templateUsedCount)>0}],icon:` ${r} icons-md blue`,onItemClick:e=>{1e3===e.item.id?null==b||b.editButtonClick(i):1001===e.item.id&&(R(null==i?void 0:i.templateID),z(!0))}})})]}),e.jsx("div",{className:"rsp-template-name",children:e.jsx("h4",{children:i.templateName})}),e.jsxs("div",{className:"rsp-card-content",children:[null!==i.thumbnailPath?e.jsx("img",{src:`${i.thumbnailPath}`,alt:"Loading",onError:()=>e.jsx(o,{dataItem:i})}):e.jsx(o,{dataItem:i}),e.jsx("div",{style:f.cardActions,children:!0===(null==b?void 0:b.isAutherPage)&&e.jsx(d,{className:"select-btn "+(a?"visible":""),onClick:()=>null==b?void 0:b.selectBtnClick(i),children:"Select"})})]})]})},i.templateID)}));return e.jsxs("div",{children:[P&&e.jsx(m,{size:"md",headerTitle:"Alert",para:"Are you sure you want to delete?",secondaryButtonText:"Cancel",primaryButtonText:"OK",buttonClicked:e=>{z(!1),!0===e?(e=>{if(0===e)return;let t=null==b?void 0:b.channelId;a({path:u,params:{TemplateID:e,ChannelID:t},loading:I.globalStateData.setIsLoadingData,ok:t=>{if(R(0),null==t?void 0:t.status){let t=[...w];t=null==t?void 0:t.filter((t=>t.templateID!==e)),C(t),L(j)}},fail:e=>{R(0)}})})(M):R(0)}}),!0===(null==b?void 0:b.isAutherPage)?null:e.jsxs("div",{className:"pb-search-wrapper",children:[e.jsx(x,{campListing:!1,normal:!0,fullWidth:300,searchQuery:A,onPeriyaMenuChange:e=>(void 0).setState({periyaMenu:e}),onSearchDataReceived:(e,t)=>{(e=>{let t=[...S];if((null==t?void 0:t.length)>0){let i=null==t?void 0:t.filter((t=>{var i;return null==(i=null==t?void 0:t.templateName)?void 0:i.toLowerCase().includes(e.toLowerCase())}));(null==i?void 0:i.length)>0?C(i):C(""===e?S:[])}D(e),L({...N,skip:0})})(e.campaignName)}}),e.jsx("div",{style:{display:"flex",alignSelf:"center",marginLeft:10},children:e.jsx(o,{id:"tem_add_button",icon:c,size:"lg",shadow:!0,tooltip:"Add template",iconClass:"",onClick:()=>{null==b||b.addButtonClick()}})})]}),0===(null==w?void 0:w.length)&&!1===B&&e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx("div",{style:{width:"100%"},children:e.jsx("div",{className:"box-design pb10 mt20",children:e.jsx(h,{count:5,isError:!0,children:e.jsxs("div",{className:"nodata-bar add-func",children:[e.jsx("i",{className:"icon-rs-alert-medium icons-md orange-medium"}),e.jsx("p",{children:"No data available"})]})})})})}),(null==w?void 0:w.length)>0&&e.jsx("div",{children:e.jsx("div",{children:e.jsx(p,{...b,className:"gallery-grid-view",data:((e,t,i)=>{if(!(Array.isArray(e)&&t&&"skip"in t&&"take"in t))return[];const l=e.filter((e=>{var t,l;return null==(l=null==(t=null==e?void 0:e.templateName)?void 0:t.toLowerCase())?void 0:l.includes(i.toLowerCase())}));return null==b||b.isAutherPage,l.slice(t.skip,t.skip+t.take)})(w,N,A),type:"mobile",item:F})})}),e.jsx("div",{style:{display:"flex",width:"100%",marginBottom:20},className:"grid-pagenation",children:(null==w?void 0:w.length)>3?e.jsx(y,{className:"k-grid-pager",skip:N.skip,take:N.take,onPageChange:e=>{const{skip:t,take:i}=e;let l={...N};l.take=i,l.skip=t,L(l)},total:w.length,type:N.type,info:N.info,buttonCount:N.buttonCount,pageSizes:void 0,previousNext:N.previousNext}):null})]})};export{b as R};
