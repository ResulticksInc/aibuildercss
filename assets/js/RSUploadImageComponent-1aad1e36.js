import{j as e}from"./pdf-editor-5df4b936.js";import{P as s,R as a,r as t}from"./react-vendor-379f659a.js";import{U as l,dG as n,nm as o,nq as r,bQ as i}from"./index-7d59e1e4.js";const c=({props:s,className:a,newImg:c,defaultImg:d,defaultValue:p,alt:m,tooltipText:u,error:g,errorMessage:f,cb:x,text:j,icon:v,note:h,name:N,required:b,setValue:w,removeIcon:y,handleRemove:$})=>{const[I,R]=t.useState(p||null);t.useState(!1);const[T,C]=t.useState(null),[q,O]=t.useState(null);t.useEffect((()=>{R(p)}),[p]),t.useEffect((()=>{null!=c&&O(c)}),[c]);const D=e=>{C(e);const s=Math.round(e.size/1024);if(e.type.includes("video"))return g&&g("Please attach the Image"),void setTimeout((()=>{g&&g(null)}),3e3);if(s>500)return g&&g("Image size is incorrect format"),void setTimeout((()=>{g&&g(null)}),3e3);const a=new FileReader;a.readAsDataURL(e),a.onload=s=>{const a=new Image;a.src=s.target.result,a.onload=s=>{const a=e.name.split(".").at(-1);"jpg"===a.toLowerCase()||"jpeg"===a.toLowerCase()||"png"===a.toLowerCase()?i(e,(e=>{R(e),x&&x(e)}),(e=>{})):(g&&g("Can`t support the image type"),setTimeout((()=>{g&&g(null)}),3e3))}}};return e.jsxs("div",{className:"profile-image-wrapper",children:[e.jsxs("div",{className:`rs-picture ${f?"errorContainer":""} ${a||""} ${b?"required":"optional"}`,onDrop:e=>{e.preventDefault();const s=e.dataTransfer.files[0];D(s)},onDragOver:e=>{e.preventDefault()},children:[e.jsx("figure",{className:"",children:e.jsx("img",{src:null!==q?q:null!==p?`data:image/jpg;base64,${I}`:`${d}`,onError:()=>{const e=q.replace("apig.smartdx.co","apigd.smartdx.co");O(e)}})}),e.jsx("div",{className:"picture-choose-file",children:e.jsxs("span",{className:"info",children:[e.jsx(l,{text:(null==c?void 0:c.length)||(null==T?void 0:T.size)>0?`Update ${u}`:`Upload / Add ${u}`,position:"top",children:e.jsx("div",{children:e.jsx("input",{type:"file",accept:".jpg,.png,.jpeg",title:"",onChange:e=>{D(e.target.files[0]),e.target.value=null},className:"sp-input btn",name:"uploaded_file"})})}),y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"pcf-remove-icon",children:e.jsx(l,{text:`Remove ${u}`,position:"top",children:e.jsx("i",{className:`${n} color-primary-red icons-md`,onClick:e=>{C(null),O(null),$()}})})})," ",e.jsx("i",{className:`${o} color-secondary-blue icons-md`})]}):e.jsx("i",{className:`${r} color-secondary-blue icons-md`}),e.jsx("span",{className:"pcf-label",children:j})]})}),f&&e.jsx("div",{className:"validation-message",children:f})]}),h&&e.jsx("div",{className:"alert alert-warning d-block mt30 py5 text-center",children:e.jsxs("small",{children:["Allowed file formats are:",e.jsx("br",{}),"jpg, jpeg, png, svg",e.jsx("br",{}),"Max. file size: 500 Kb"]})})]})};c.defaultProps={className:"",alt:"picture",defaultValue:null,newImg:null,tooltipText:"image",text:"Edit profile picture",note:!0,removeIcon:!1,handleOnRemove:()=>{}},c.propTypes={alt:s.string,className:s.string,defaultValue:s.oneOfType([s.string,s.array]),name:s.string.isRequired,setValue:s.func.isRequired,newImg:s.oneOfType([s.string,s.oneOf([null,void 0])]),tooltipText:s.string,text:s.string,required:s.bool,note:s.bool,removeIcon:s.bool,handleOnRemove:s.func};const d=a.memo(c);export{d as R};
