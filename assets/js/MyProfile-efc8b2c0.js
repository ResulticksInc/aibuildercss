var e=Object.defineProperty,s=(s,a,r)=>(((s,a,r)=>{a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r})(s,"symbol"!=typeof a?a+"":a,r),r);import{j as a}from"./pdf-editor-e8cb7a76.js";import{w as r,r as t,R as o,i as n}from"./react-vendor-379f659a.js";import{z as l,a0 as i,M as d,C9 as c,Ca as m,pl as u,pk as h,a8 as g,eA as p,fy as w,B as b,E as f,ah as M,Y as j,bX as I,F as v,a3 as P,fe as x,ff as y,fg as C,fh as N,bM as D,ev as S,be as F,av as k,aK as O,Cb as T,aa as E,bK as L,cK as z,fm as R,Cc as Z,Cd as B,Ce as q,eB as A,ex as U,Cf as V,ar as K,aS as $,ey as _,aC as W,Cg as H,eC as J,c4 as G,ez as X,fl as Y}from"./index-23a09c37.js";import{q as Q,r as ee,b as se}from"./inputLimit-ce03b0f6.js";import{L as ae}from"./LayoutPageWrapper-ab434993.js";import{R as re}from"./RSDropdowns-e011803c.js";import{R as te}from"./RSKendoDropdown-32d89038.js";import{R as oe,a as ne}from"./RSCheckbox-b4d531b7.js";import{R as le}from"./RSPhoneInput-e88e351a.js";import{R as ie}from"./RSFormGroup-ffdfb1d7.js";import{RSPTimer as de}from"./RSPTimer-a0b464f0.js";import{RSErrorPopup as ce}from"./RSConfirmAlert-1017f59d.js";import{R as me}from"./RSUploadImageComponent-ed8ba7e0.js";import{R as ue}from"./RSIcon-d18be5d2.js";import"./style-a86a43a5.js";import{M as he,R as ge,a as pe,C as we}from"./ui-f7791cf3.js";import{M as be}from"./Skeleton-564886d3.js";import{u as fe}from"./user-fe5f9623.js";import"./utils-16c7e021.js";import"./kendo-5d73125a.js";import"./drag-drop-2020d552.js";import"./get-4aa85b1a.js";import"./constants-82903eb8.js";class Me extends t.Component{constructor(){super(...arguments),s(this,"state",{cpassword:"",newPassword:null,confirmPassword:null,errMsgCurrentPassword:null,errMsgNewPassword:null,errMsgConfirmPassword:null,errMsgPasswordMissMatch:null,pwdStrengthMeter:0,conPwdStrengthMeter:0,saveError:!1,validatePasswordLoader:!1,eyeIcon:"password",eyeIcon1:"password",eyeIcon2:"password",showPass:!1,showPass1:!1,showPass2:!1}),s(this,"componentDidMount",(()=>{})),s(this,"handleChangePassword",(()=>{var e,s,a,r,t,o,n;if(!(null==(e=this.state.cpassword)?void 0:e.length))return void this.setState({errMsgCurrentPassword:"Enter current password"});if(!(null==(s=this.state.newPassword)?void 0:s.length))return void this.setState({errMsgNewPassword:"Enter new password"});if(!(null==(a=this.state.confirmPassword)?void 0:a.length))return void this.setState({errMsgConfirmPassword:"Enter confirm password"});if((null==(r=this.state)?void 0:r.newPassword)!==(null==(t=this.state)?void 0:t.confirmPassword))return void this.setState({errMsgPasswordMissMatch:"Password mismatch",eyeIcon1:"text",eyeIcon2:"text"});if((null==(o=this.state)?void 0:o.cpassword)===(null==(n=this.state)?void 0:n.confirmPassword))return void this.setState({errMsgPasswordMissMatch:"Current password and new password should not be a same!"});if(this.state.pwdStrengthMeter<=99)return void this.setState({errMsgNewPassword:"Password strength is low enter strong password"});const l={emailId:i(localStorage.getItem("lsUserData")).emailId,oldPassword:this.state.cpassword,newPassword:this.state.newPassword};d({path:c,params:l,loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var s;e.status&&(null==(s=this.props)||s.saveBtnClicked())},fail:e=>{}})})),s(this,"validatePassword1",(e=>{let s=M();const a={emailId:i(localStorage.getItem("lsUserData")).emailId,password:e,sourceType:s};this.setState({validatePasswordLoader:!0}),d({path:m,params:a,ok:e=>{this.setState({validatePasswordLoader:!1}),e.status||this.setState({errMsgCurrentPassword:"Enter a valid password"})},fail:e=>{this.setState({validatePasswordLoader:!1}),this.setState({errMsgCurrentPassword:"Enter a valid password"})}})}))}render(){return a.jsxs(a.Fragment,{children:[a.jsxs(he.Header,{children:[a.jsx("h2",{children:"Change password"}),a.jsx(ue,{mainClass:"close",size:"md",handleClose:()=>{var e;return null==(e=this.props)?void 0:e.handleClose()}})]}),a.jsxs(he.Body,{children:[a.jsx(ie,{children:a.jsx(ge,{children:a.jsx(pe,{md:12,children:a.jsx(oe,{type:!0===this.state.showPass1?"text":"password",viewEye:!1,iconPlaceholder:!1===this.state.validatePasswordLoader,iconName:!0===this.state.showPass1?u:h,iconOnClick:()=>{this.setState({showPass1:!this.state.showPass1})},val:this.state.cpassword,placeholder:"Current password",errorMessage:this.state.errMsgCurrentPassword,isLoading:this.state.validatePasswordLoader,required:!0,handleOnchange:e=>{this.setState({cpassword:e,errMsgCurrentPassword:null})},handleOnBlur:e=>{e.length>0&&this.validatePassword1(e)}})})})}),a.jsx(ie,{children:a.jsx(ge,{children:a.jsx(pe,{md:12,children:a.jsx(oe,{type:!0===this.state.showPass?"text":"password",viewEye:!1,iconPlaceholder:!0,iconName:!0===this.state.showPass?u:h,iconOnClick:()=>{this.setState({showPass:!this.state.showPass})},meter:!0,val:this.state.newPassword,placeholder:"New password",max:16,errorMessage:this.state.errMsgNewPassword,required:!0,handleOnchange:e=>{const s=g(e);this.setState({newPassword:s,errMsgNewPassword:null,errMsgPasswordMissMatch:null,pwdStrengthMeter:p(e)})},handleOnBlur:e=>{var s;if((null==e?void 0:e.length)>0&&(null==(s=this.state.cpassword)?void 0:s.length)>0){if(this.state.cpassword===e)return void this.setState({errMsgNewPassword:"Current password and new password are same",newPassword:"",pwdStrengthMeter:0});if(this.state.pwdStrengthMeter<=99)return void this.setState({errMsgNewPassword:"Password strength is low enter strong password"})}else this.setState({errMsgNewPassword:"Enter new password"})}})})})}),a.jsx(ie,{children:a.jsx(ge,{children:a.jsx(pe,{md:12,className:null!==this.state.errMsgNewPassword?"click-off":"",children:a.jsx(oe,{type:!0===this.state.showPass2?"text":"password",viewEye:!1,iconPlaceholder:!0,iconName:!0===this.state.showPass2?u:h,iconOnClick:()=>{this.setState({showPass2:!this.state.showPass2})},meter:!0,val:this.state.confirmPassword,placeholder:w,max:16,errorMessage:this.state.errMsgPasswordMissMatch||this.state.errMsgConfirmPassword,required:!0,handleOnchange:e=>{const s=g(e);this.setState({confirmPassword:s,errMsgConfirmPassword:null,errMsgPasswordMissMatch:null,conPwdStrengthMeter:p(e),pwdView:!this.state.pwdView})},handleOnBlur:e=>{var s,a;if((null==e?void 0:e.length)>0){if((null==(s=this.state)?void 0:s.newPassword)!==(null==(a=this.state)?void 0:a.confirmPassword))return void this.setState({errMsgPasswordMissMatch:"Password mismatch",eyeIcon1:"text",eyeIcon2:"text"})}else this.setState({errMsgPasswordMissMatch:"Confirm new password"});0===this.state.newPassword.length&&this.setState({confirmPassword:""})}})})})})]}),a.jsx(he.Footer,{children:a.jsxs("div",{className:"btn-container d-flex justify-content-end",children:[a.jsx(b,{onClick:()=>{var e;return null==(e=this.props)?void 0:e.handleClose()},children:"Cancel"}),a.jsx(f,{onClick:()=>this.handleChangePassword(),children:"Save"})]})}),a.jsx("div",{})]})}}s(Me,"contextType",l);const je=r(Me),Ie=[{label:"Mr.",id:"1"},{label:"Ms.",id:"2"},{label:"Mrs.",id:"3"}],ve={in:".**..-*.*.*",at:"(...) .....-....."},Pe=()=>{const e=localStorage.getItem("bdetails");if(e){const s=i(e);return 1===parseInt(null==s?void 0:s.country_calling_code)?12:parseInt(null==s?void 0:s.country_calling_code)}return 65},xe=o.memo((()=>{var e,s;const r=t.useContext(l),o=n(),i=t.useMemo((()=>{const e=W("My profile");return{canUpdate:(null==e?void 0:e.accessUpdateData)||!1,canView:(null==e?void 0:e.accessViewData)||!1}}),[]),c=t.useMemo((()=>{var e;const s=L();return{jobFunctionDropdownData:(null==(e=null==s?void 0:s.jobFunction)?void 0:e.sort(((e,s)=>e.jobfunctionName.localeCompare(s.jobfunctionName))))||[],countryDropdownData:(null==s?void 0:s.countryMaster)||[],currencyDropdownData:(null==s?void 0:s.currencyMaster)||[],languageDropdownData:(null==s?void 0:s.languageMaster)||[],dateFormatDropdownData:(null==s?void 0:s.dateFormat)||[],timeFormatDropdownData:(null==s?void 0:s.timeFormat)||[],timeZoneDropdownData:(null==s?void 0:s.timeZone)||[]}}),[]),m=t.useMemo((()=>j()),[]),u=t.useMemo((()=>I().slice(0,-1)),[]),h=t.useMemo((()=>({firstName:"",lastName:"",emailId:"",phoneNo:"",role:"",profilePath:null,newImg:null,titleDropdownItem:Ie[0],jobFunctionDropdownItem:null,countryDropdownItem:null,currencyDropdownItem:null,languageDropdownItem:null,dateFormatDropdownItem:null,timeFormatDropdownItem:null,timeZoneDropdownItem:null,countryCodeMobile:Pe(),newCountryCodeMobile:Pe(),newCountryCode:"",newPhoneNumber:"",userOtp:"",otpToken:"",otpSuccess:!1,otpValidation:!1,isShowOTP:!1,isShowResendBtn:!1,isShowSkeleton:!0,isError:!1,saveError:!1,show:!1,mobileChangeShow:!1,passwordUpdateShow:!1,dayLightSaving:!1,myProfileData:null,myProfileServerData:null,errMsg:null,changePassWordMsg:null,errProfileImage:null,errMsgFirstName:null,errMsgLastName:null,errMsgEmailId:null,errMsgPhoneNo:null,errMsgRole:null,errMsgJobFunction:null,errMsgCurrency:null,errMsgLanguage:null,errMsgDateFormat:null,errMsgTimeFormat:null,errMsgTimeZone:null,errMsgNewPhone:null,errMsgOTP:null,isAgency:(null==m?void 0:m.isAgency)||!1,...r.globalStateData.getMyProfileData})),[r.globalStateData.getMyProfileData,null==m?void 0:m.isAgency]),[g,p]=t.useState(h),w=t.useCallback((e=>{p((s=>({...s,...e})))}),[]),M=t.useCallback((()=>{const e={};return v(g.firstName)?e.errMsgFirstName=A:g.firstName.length<3&&(e.errMsgFirstName=H),v(g.lastName)&&(e.errMsgLastName=U),v(g.emailId)?e.errMsgEmailId=J:P(g.emailId)||(e.errMsgEmailId=_),v(g.phoneNo)&&(e.errMsgPhoneNo=G),g.isAgency||(v(g.role)&&(e.errMsgRole="Enter role"),g.jobFunctionDropdownItem&&-1!==g.jobFunctionDropdownItem.jobfunctionId||(e.errMsgJobFunction=X)),[{item:g.currencyDropdownItem,field:"currencyId",error:"errMsgCurrency",message:x},{item:g.languageDropdownItem,field:"languageId",error:"errMsgLanguage",message:y},{item:g.dateFormatDropdownItem,field:"dateFormatId",error:"errMsgDateFormat",message:C},{item:g.timeFormatDropdownItem,field:"timeFormatId",error:"errMsgTimeFormat",message:N},{item:g.timeZoneDropdownItem,field:"timezoneId",error:"errMsgTimeZone",message:D}].forEach((({item:s,field:a,error:r,message:t})=>{s&&-1!==s[a]||(e[r]=t)})),!(Object.keys(e).length>0&&(w(e),1))}),[g,w]),Me=t.useCallback((()=>{w({isShowSkeleton:!0,isError:!1}),d({path:S,params:{userId:F()},sessionOut:r.globalStateData.setSessionOutData,ok:e=>{e.status?xe(e.data):w({isShowSkeleton:!1,isError:!0})},fail:e=>{w({isShowSkeleton:!1,isError:!0}),k("Profile fetch error",e.message)}})}),[r.globalStateData.setSessionOutData,w]),xe=t.useCallback((e=>{var s;const a=(e=>{let s=e||"";s.split(" ").length>1&&(s=s.split(" ")[1]);let a="";for(let r=0;r<s.length;r++){const e=r/2;a+=0===r?s.charAt(r):r<5?"*":e%1==0?s.charAt(r):"*"}return a})(e.phoneNo),r=(e=>{const s=e.split("@");let a="";for(let r=0;r<s[0].length;r++){const s=r/2;a+=0===r?e.charAt(r):r<5?"*":s%1==0?e.charAt(r):"*"}return`${a}@${s[1]}`})(e.email),t=(e,s,a,r)=>(null==e?void 0:e.find((e=>e[a]===s)))||r,o={myProfileData:e,myProfileServerData:e,isShowSkeleton:!1,isError:!1,countryCodeMobile:e.countryCodeMobile||65,emailId:r,firstName:e.firstName||"",lastName:e.lastName||"",role:e.securityGroupName||"",phoneNo:a,dayLightSaving:e.isDayLight||!1,profilePath:e.profilePath||null,newImg:e.profilePath||null,countryDropdownItem:t(c.countryDropdownData,e.countryId,"countryId",{countryId:-1,country:"-- Select country --"}),currencyDropdownItem:t(c.currencyDropdownData,e.currencyId,"currencyId",{currencyId:-1,currencyName:"-- Select currency --"}),jobFunctionDropdownItem:t(c.jobFunctionDropdownData,e.jobFunctionId,"jobfunctionId",{jobfunctionId:-1,jobfunctionName:"-- Select job function --"}),languageDropdownItem:t(c.languageDropdownData,e.languageId,"languageId",(null==(s=c.languageDropdownData)?void 0:s[0])||{languageId:-1,languageName:"-- Select language --"}),dateFormatDropdownItem:t(c.dateFormatDropdownData,e.dateFormatId,"dateFormatId",{dateFormatId:-1,dateFormat:"-- Select date format --"}),timeFormatDropdownItem:t(c.timeFormatDropdownData,e.timeFormatId,"timeFormatId",{timeFormatId:-1,timeFormat:"-- Select time format --"}),timeZoneDropdownItem:t(c.timeZoneDropdownData,e.timeZoneId,"timezoneId",{timezoneId:-1,timezoneName:"-- Select timezone --"})};w(o)}),[c,w]),ye=t.useCallback((()=>{var e,s,a,t,n,l,i,c;if(O()||r.globalStateData.getIsPrototype)return void o.push("/preferences");if(!M())return;const m={userId:F(),firstName:g.firstName,lastName:g.lastName,countryCodeMobile:g.countryCodeMobile,countryCode:g.countryCodeMobile,phoneNumber:g.phoneNo,jobFunctionId:null==(e=g.jobFunctionDropdownItem)?void 0:e.jobfunctionId,profilePath:g.profilePath,currencyId:null==(s=g.currencyDropdownItem)?void 0:s.currencyId,languageId:null==(a=g.languageDropdownItem)?void 0:a.languageId,dateFormatId:null==(t=g.dateFormatDropdownItem)?void 0:t.dateFormatId,timeFormatId:null==(n=g.timeFormatDropdownItem)?void 0:n.timeFormatId,timeZoneId:null==(l=g.timeZoneDropdownItem)?void 0:l.timezoneId,isDayLight:g.dayLightSaving,address:"Chennai",city:"Chennai",state:"Tamilnadu",countryId:-1!==(null==(i=g.countryDropdownItem)?void 0:i.countryId)?null==(c=g.countryDropdownItem)?void 0:c.countryId:79,zipCode:"600005"};d({path:T,params:m,loading:r.globalStateData.setIsLoadingData,sessionOut:r.globalStateData.setSessionOutData,ok:e=>{if(e.status){const e=j();e.isProfileCompleted=!0,e.currencyId=m.currencyId,localStorage.setItem("lsUserData",E(e));const s=L(),a=s.timeZone.find((e=>e.timezoneId===m.timeZoneId)),r=s.dateFormat.find((e=>e.dateFormatId===m.dateFormatId)),t=s.timeFormat.find((e=>e.timeFormatId===m.timeFormatId)),n={timezoneValue:null==a?void 0:a.timezoneValue,timezoneId:m.timeZoneId,timezoneName:null==a?void 0:a.timezoneName,dateFormat:null==r?void 0:r.dateFormat,timeFormat:null==t?void 0:t.timeFormat,timeFormatId:m.timeFormatId,dateFormatId:m.dateFormatId,languageId:m.languageId};localStorage.setItem("lsTimzoneData",E(n));const l=document.getElementById("pimage");if(l&&m.profilePath){let e="";e=m.profilePath.toLowerCase().includes(".jpg")?z+m.profilePath:"data:image/png;base64,"+m.profilePath,l.src=e,l.style.display="flex"}window.dispatchEvent(new CustomEvent("myCustomEvent",{detail:{message:"Profile updated successfully"}})),o.push("/preferences")}else w({saveError:!0,errMsg:e.message})},fail:e=>{k("Profile save error",e.message),o.push("/preferences")}})}),[g,r.globalStateData,o,M,w]),Ce=t.useCallback((()=>{d({path:R,params:{otpToken:g.otpToken,otp:g.userOtp},ok:e=>{e.status?w({otpValidation:!0,otpSuccess:!0,phoneNo:g.newPhoneNumber,countryCodeMobile:g.newCountryCodeMobile,errMsgOTP:null}):w({errMsgOTP:e.message,otpValidation:!1,otpSuccess:!1})},fail:()=>{w({errMsgOTP:"Something went wrong",otpValidation:!1,otpSuccess:!1})}})}),[g.otpToken,g.userOtp,g.newPhoneNumber,g.newCountryCodeMobile,w]),Ne=t.useCallback(((e,s,a,t)=>{const o={userId:F(),oldMobileNumber:e,oldCountryCodeMobile:a,newMobileNumber:s,newCountryCodeMobile:t};d({path:Z,params:o,loading:r.globalStateData.setIsLoadingData,ok:e=>{e.status?w({isShowOTP:!0,otpToken:e.otpToken,errMsgOTP:null,userOtp:""}):w({errMsgNewPhone:e.message})},fail:()=>{w({errMsgNewPhone:"Please enter a new number"})}})}),[r.globalStateData.setIsLoadingData,w]),De=t.useCallback((()=>{d({path:B,params:{otpToken:g.otpToken,otp:g.userOtp,userId:F()},loading:r.globalStateData.setIsLoadingData,ok:e=>{e.status?w({otpValidation:!0,otpSuccess:!0}):w({errMsgOTP:e.message,otpValidation:!1,otpSuccess:!1})},fail:()=>{w({errMsgOTP:"Something went wrong",otpValidation:!1,otpSuccess:!1})}})}),[g.otpToken,g.userOtp,r.globalStateData.setIsLoadingData,w]),Se=t.useCallback((e=>{d({path:Y,params:{mobileNumber:`+${e}`},ok:e=>{var s;e.status?w({otpToken:null==(s=e.data)?void 0:s.otpToken}):w({errMsgOTP:e.message})},fail:e=>{w({errMsgOTP:e.message})}})}),[w]),Fe=t.useCallback((()=>{w({show:!1,isShowOTP:!1,mobileChangeShow:!1,passwordUpdateShow:!1})}),[w]),ke=t.useCallback((()=>{w({show:!0})}),[w]),Oe=t.useCallback((()=>{w({mobileChangeShow:!0,newPhoneNumber:"",otpSuccess:!1})}),[w]),Te=t.useCallback(((e,s,a=null)=>{const r={[e]:s};a&&(r[a]=null),w(r)}),[w]),Ee=t.useCallback(((e,s,a=null)=>{const r={[e]:s};a&&(r[a]=null),w(r)}),[w]),Le=t.useCallback((e=>{if(/[^a-zA-Z0-9 ]/.test(e))return void w({errMsgFirstName:"No special character allowed"});if(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e))return;const s=e.trimStart();w({firstName:s,errMsgFirstName:null})}),[w]),ze=t.useCallback((e=>{if(e.length)if(/[a-zA-Z]/.test(e)){const s=e.length>2?null:q;w({errMsgFirstName:s})}else w({errMsgFirstName:"Need at least one alphabet character"});else w({errMsgFirstName:A})}),[w]),Re=t.useCallback((e=>{if(/[^a-zA-Z0-9 ]/.test(e))return void w({errMsgLastName:"No special character allowed"});if(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e))return;const s=e.trimStart(),a=s.length>0?null:U;w({lastName:s,errMsgLastName:a})}),[w]),Ze=t.useCallback((e=>{e.length?/[a-zA-Z]/.test(e)||w({errMsgLastName:"Need at least one alphabet character"}):w({errMsgLastName:U})}),[w]),Be=t.useCallback(((e,s)=>{var a;const r=e.slice(null==(a=null==s?void 0:s.dialCode)?void 0:a.length);w({phoneNo:r,countryCodeMobile:null==s?void 0:s.dialCode,errMsgPhoneNo:null})}),[w]),qe=t.useCallback(((e,s)=>{var a;const r=e.slice(null==(a=null==s?void 0:s.dialCode)?void 0:a.length);w({newPhoneNumber:r||"",newCountryCode:s.countryCode,newCountryCodeMobile:s.dialCode,isShowOTP:!1,errMsgNewPhone:null})}),[w]),Ae=t.useCallback(((e,s)=>{if(new RegExp(`^\\+${s.dialCode} [1-9][0-9]{4}-[0-9]{5}$`).test(e.target.value)){if(e.target.value.slice(s.dialCode.length).length<=8)return void w({errMsgNewPhone:"Enter mobile number"});if(g.phoneNo===g.newPhoneNumber&&g.countryCodeMobile===s.dialCode)return void w({errMsgNewPhone:"Please enter new number",newPhoneNumber:""});if(0===parseInt(g.newPhoneNumber))return void w({errMsgNewPhone:"Please enter valid mobile number"});Ne(g.phoneNo,g.newPhoneNumber,g.countryCodeMobile,s.dialCode),w({errMsgNewPhone:null})}else w({errMsgNewPhone:"Enter valid mobile number"})}),[g.phoneNo,g.newPhoneNumber,g.countryCodeMobile,Ne,w]),Ue=t.useCallback((e=>{(""===e||/^[0-9\b.]+$/.test(e))&&w({userOtp:e,errMsgOTP:null})}),[w]),Ve=t.useCallback((e=>{e.length?6===e.length&&(w({userOtp:e,errMsgOTP:null,otpValidation:!1}),Ce()):w({userOtp:e,errMsgOTP:V})}),[w,Ce]),Ke=t.useCallback((e=>{if(!g.myProfileData)return!1;switch(e){case"currency":return null!==g.myProfileData.currencyId;case"language":return null!==g.myProfileData.languageId;case"timezone":return null!==g.myProfileData.timeZoneId;default:return!1}}),[g.myProfileData]);t.useEffect((()=>{Me()}),[Me]),t.useEffect((()=>{r.globalStateData.getIsReloadData&&r.globalStateData.setIsReloadData(!1)}),[r.globalStateData]);const{isShowSkeleton:$e,isError:_e,firstName:We,lastName:He,emailId:Je,phoneNo:Ge,role:Xe,profilePath:Ye,newImg:Qe,titleDropdownItem:es,jobFunctionDropdownItem:ss,currencyDropdownItem:as,languageDropdownItem:rs,dateFormatDropdownItem:ts,timeFormatDropdownItem:os,timeZoneDropdownItem:ns,dayLightSaving:ls,countryCodeMobile:is,myProfileServerData:ds,isAgency:cs,saveError:ms,errMsg:us,show:hs,mobileChangeShow:gs,passwordUpdateShow:ps,changePassWordMsg:ws,newPhoneNumber:bs,newCountryCodeMobile:fs,isShowOTP:Ms,userOtp:js,otpSuccess:Is,isShowResendBtn:vs,otpValidation:Ps,errMsgFirstName:xs,errMsgLastName:ys,errMsgEmailId:Cs,errMsgPhoneNo:Ns,errMsgRole:Ds,errMsgJobFunction:Ss,errMsgCurrency:Fs,errMsgLanguage:ks,errMsgDateFormat:Os,errMsgTimeFormat:Ts,errMsgTimeZone:Es,errMsgNewPhone:Ls,errMsgOTP:zs,errProfileImage:Rs}=g;return a.jsxs(ae,{children:[a.jsx(we,{fluid:!0,className:"main-heading-wrapper mb0",children:a.jsxs(we,{className:"mhw-container",children:[a.jsx("div",{className:"mhwc-left",children:a.jsx("h1",{children:a.jsx("div",{className:"mh-wrapper",children:a.jsx("span",{className:"mh-text",children:"My profile"})})})}),a.jsx("div",{className:"mhwc-right",children:a.jsxs("div",{className:"back-text",onClick:()=>o.push("/preferences"),children:[a.jsx(K,{icon:$,size:"sm"}),"Back"]})})]})}),a.jsxs(we,{className:"page-header pc-my-profile",children:[$e?a.jsx("div",{className:"box-design rs-box-min-height py40",children:a.jsx(be,{isError:_e})}):a.jsx("div",{className:(i.canUpdate?"click-on":"click-off")+" box-design rs-box-min-height py40",children:a.jsxs(ge,{className:"res-gx-2",children:[a.jsx(pe,{md:3,sm:3,children:a.jsx("div",{className:"stricky-window my-profile",children:a.jsx(me,{className:"enable-remove",defaultImg:fe,defaultValue:Ye,newImg:Qe?`${u}${Qe}`:null,text:Qe||Ye?"Edit image":"Upload image",cb:e=>Te("profilePath",e,"errProfileImage"),error:e=>Te("errProfileImage",e),errorMessage:Rs,removeIcon:null!==Ye,handleRemove:()=>w({profilePath:null,newImg:null})})})}),a.jsxs(pe,{md:9,className:"box-left-border",children:[a.jsx("h4",{className:"marginB30",children:"Personal details"}),a.jsxs(ge,{children:[a.jsxs(pe,{children:[a.jsx(ie,{children:a.jsxs(ge,{children:[a.jsx(pe,{md:4,children:a.jsx("div",{className:"rs-kendo-dropdownmenu-wrapper",children:a.jsx(re,{className:"rs-kendo-dropdown",value:es,label:"Title",textField:"label",dataItemKey:"id",data:Ie,onChange:e=>Te("titleDropdownItem",e.target.value)})})}),a.jsx(pe,{children:a.jsx(oe,{name:"first name",placeholder:"First name",val:We,errorMessage:xs,required:!0,max:Q,cb:Le,ob:ze})})]})}),a.jsx(ie,{children:a.jsxs("div",{className:"position-relative",children:[a.jsx(le,{label:"Mobile number",required:!0,masks:Ge.length?ve:null,className:(null==(e=null==ds?void 0:ds.phoneNo)?void 0:e.length)?"disable-icon":"",disabled:!!(null==(s=null==ds?void 0:ds.phoneNo)?void 0:s.length),value:cs?is+Ge:(null==m?void 0:m.isQuickAccount)&&!m.isProfileCompleted?is.toString():is+Ge,errorMessage:Ns,onChange:Be,onBlur:()=>{}}),(null==ds?void 0:ds.phoneNo)&&a.jsx("div",{className:"input-desc text-end width100p mt5 "+(O()?"click-off":""),style:{bottom:-20},children:a.jsx("label",{className:"rs-link orange-medium",onClick:Oe,children:"Update mobile number?"})})]})}),!cs&&a.jsx(ie,{children:a.jsx(oe,{disabled:!0,name:"role",placeholder:"Role",val:Xe,required:!0,errorMessage:Ds,cb:e=>Te("role",e,"errMsgRole")})})]}),a.jsxs(pe,{children:[a.jsx(ie,{children:a.jsx(oe,{name:"last name",placeholder:"Last name",val:He,errorMessage:ys,required:!0,max:ee,cb:Re,ob:Ze})}),a.jsxs(ie,{children:[a.jsx("div",{className:"click-off1",children:a.jsx(oe,{name:"email",disabled:!!Je,placeholder:Je?"Email id":"Enter your email id",val:Je,required:!0,errorMessage:Cs,cb:e=>Te("emailId",e,"errMsgEmailId"),ob:e=>{const s=P(e)?null:_;w({emailId:e,errMsgEmailId:s})}})}),a.jsxs("small",{className:"input-desc text-end bottom-20",children:[a.jsx("label",{className:"rs-link orange-medium float-end "+(O()?"click-off":""),onClick:ke,children:"Change password?"}),"  ",ws&&a.jsx("label",{className:"rs-link green-medium fs15 mt7",children:ws})]})]}),!cs&&a.jsx(ie,{children:a.jsx(te,{required:!0,label:"Job function",errorMessage:Ss,value:ss||{jobfunctionId:-1,jobfunctionName:"-- Select job function --"},textField:"jobfunctionName",dataItemKey:"jobfunctionId",data:c.jobFunctionDropdownData,onChange:e=>Ee("jobFunctionDropdownItem",e.target.value,"errMsgJobFunction")})})]})]}),a.jsx("h4",{className:"mb30",children:"Localization details"}),a.jsxs(ge,{className:"theme-space-mt",children:[a.jsx(pe,{md:4,children:a.jsx(ie,{children:a.jsx(te,{disabled:Ke("currency"),required:!0,label:"Currency",textField:"currencyName",dataItemKey:"currencyId",errorMessage:Fs,data:c.currencyDropdownData,value:as,handleChange:e=>Ee("currencyDropdownItem",e.target.value,"errMsgCurrency")})})}),a.jsx(pe,{md:4,children:a.jsx(ie,{children:a.jsx(te,{required:!0,label:"Date format",errorMessage:Os,textField:"dateFormat",dataItemKey:"dateFormatId",data:c.dateFormatDropdownData,value:ts,handleChange:e=>Ee("dateFormatDropdownItem",e.target.value,"errMsgDateFormat")})})}),a.jsx(pe,{md:4,children:a.jsx(ie,{children:a.jsx(te,{required:!0,disabled:Ke("language"),label:"Language",textField:"languageName",dataItemKey:"languageId",errorMessage:ks,data:c.languageDropdownData,value:rs,handleChange:e=>Ee("languageDropdownItem",e.target.value,"errMsgLanguage")})})}),a.jsx(pe,{md:4,children:a.jsx(ie,{className:"mb0",children:a.jsx(te,{required:!0,label:"Time format",errorMessage:Ts,textField:"timeFormat",dataItemKey:"timeFormatId",data:c.timeFormatDropdownData,value:os,onChange:e=>Ee("timeFormatDropdownItem",e.target.value,"errMsgTimeFormat")})})}),a.jsx(pe,{md:8,children:a.jsx(ie,{className:"mb0",children:a.jsx(te,{required:!0,disabled:Ke("timezone"),label:"Time zone",errorMessage:Es,textField:"timezoneName",dataItemKey:"timezoneId",data:c.timeZoneDropdownData,value:ns,style:{overflowWrap:"break-word"},handleChange:e=>Ee("timeZoneDropdownItem",e.target.value,"errMsgTimeZone")})})}),a.jsx(pe,{md:{span:8,offset:4},children:a.jsx("div",{className:(null==ns?void 0:ns.isDayLight)?"":"click-off",children:a.jsx(ne,{checked:ls,cb:e=>Te("dayLightSaving",e),lbl:"Daylight savings"})})})]})]})]})}),ms&&a.jsx(ce,{headerTitle:"Sorry",subtitle:us,primaryButtonText:"OK",buttonClicked:()=>Te("saveError",!1)}),a.jsxs("div",{className:"btn-container d-flex justify-content-end mb10",children:[a.jsx(b,{onClick:()=>o.push("/preferences"),children:"Cancel"}),a.jsx(f,{className:i.canUpdate?"click-on":"click-off",onClick:ye,children:"Save"})]}),a.jsx(he,{show:hs,onHide:Fe,backdrop:"static",keyboard:!1,size:"md",centered:!0,children:a.jsx(je,{handleClose:Fe,saveBtnClicked:()=>{Fe(),w({changePassWordMsg:"Password updated successfully",passwordUpdateShow:!0}),setTimeout((()=>{w({changePassWordMsg:null,passwordUpdateShow:!1})}),2e3)}})}),a.jsxs(he,{show:ps,backdrop:"static",keyboard:!1,size:"md",centered:!0,children:[a.jsxs(he.Header,{children:[a.jsx("h2",{children:"Alert"}),a.jsx(ue,{mainClass:"close",size:"md",handleClose:()=>Te("passwordUpdateShow",!1)})]}),a.jsx(he.Body,{children:a.jsx("p",{children:"Password updated successfully"})})]}),a.jsxs(he,{show:gs,onHide:Fe,backdrop:"static",keyboard:!1,size:"md",centered:!0,children:[a.jsxs(he.Header,{children:[a.jsx("h2",{children:"Change mobile number"}),a.jsx(ue,{mainClass:"close",size:"md",handleClose:()=>Te("mobileChangeShow",!1)})]}),a.jsxs(he.Body,{children:[a.jsx(ie,{className:"mt15",children:a.jsx(ge,{children:a.jsx(pe,{className:"click-off",children:a.jsx(le,{label:"Current mobile number",masks:Ge.length?ve:null,required:!0,value:is+Ge,errorMessage:Ns,onChange:e=>Te("phoneNo",e,"errMsgPhoneNo"),onBlur:()=>{}})})})}),a.jsx(ie,{children:a.jsx(ge,{children:a.jsx(pe,{md:12,children:a.jsx("div",{className:"position-relative",children:a.jsx(le,{label:"New mobile number",value:fs+bs,required:!0,errorMessage:Ls,onChange:qe,onBlur:Ae})})})})}),Ms&&a.jsxs(ie,{children:[a.jsx(ge,{children:a.jsx(pe,{md:12,children:a.jsx(oe,{required:!0,disabled:Is?"click-off":"",name:"otp",success_msg:(null==zs?void 0:zs.includes("success"))?"success_msg":"",iconPlaceholder:!0,iconName:Is?"icon-rs-circle-tick-medium icons-md green":"",placeholder:0===js.length?V:"One time password",max:se,keyboardType:"number",val:js,errorMessage:zs,cb:Ue,ob:Ve})})}),a.jsx(ge,{children:a.jsxs("small",{className:"input-desc text-start",style:{bottom:-10},children:[Is||vs?!Is&&a.jsx("small",{className:"input-desc",children:"One time password Expired"}):a.jsxs("small",{className:"input-desc",children:["One time password is valid for 5 minutes"," ",a.jsx(de,{onComplete:()=>Te("isShowResendBtn",!0)})]}),!Is&&vs&&a.jsx("small",{className:"input-desc-right d-flex justify-content-end",children:a.jsx("label",{className:"rs-link orange-medium",onClick:()=>{w({isShowResendBtn:!1,userOtp:"",errMsgOTP:"One time password resent successfully"}),setTimeout((()=>{Te("errMsgOTP","")}),5e3),Se(fs+bs)},children:"Resend?"})})]})})]})]}),a.jsx(he.Footer,{children:a.jsxs("div",{className:"btn-container d-flex justify-content-end",children:[a.jsx(b,{onClick:Fe,children:"Cancel"}),a.jsx(f,{className:Ps?"":"click-off",onClick:()=>{De(),w({show:!1,mobileChangeShow:!1,isShowOTP:!1,userOtp:""})},children:"Save"})]})})]})]})]})}));export{xe as default};
