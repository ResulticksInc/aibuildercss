var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{j as a}from"./pdf-editor-e8cb7a76.js";import{R as s}from"./RTabbar-3aea29fd.js";import{w as r,r as i,i as A}from"./react-vendor-379f659a.js";import{z as l,M as o,BX as n,Y as d,BY as h,BZ as c,B_ as u,ad as g,be as m,aa as p,Bw as v,B$ as M,C0 as w,C1 as D,C2 as y,B,E as I,C3 as Y,C4 as f,ea as b}from"./index-23a09c37.js";import{q as x}from"./utils-16c7e021.js";import"./RSKendoDropdown-32d89038.js";import{R as C}from"./RSCheckbox-b4d531b7.js";import"./style-a86a43a5.js";import{RSErrorPopup as S}from"./RSConfirmAlert-1017f59d.js";import{R as N}from"./RSFormGroup-ffdfb1d7.js";import"./RSDropdowns-e011803c.js";import{R as P,a as j,s as E,C as G}from"./ui-f7791cf3.js";import{L as Q}from"./LayoutPageWrapper-ab434993.js";import"./kendo-5d73125a.js";import"./drag-drop-2020d552.js";import"./get-4aa85b1a.js";import"./RSIcon-d18be5d2.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAACuUlEQVQ4jWLkcpuswsDAcJuBHoCBQRUAAAD//2Kio2UMDAwMtwEAAAD//wJZSD/AwMAAAAAA//+ir4UMDAwAAAAA//+ir4UMDAwAAAAA//9igTHS9E4w8LH9ALM//eJgmHXJAszWUxZh8LVSArMPXXzKYKcvzfDw5WeGJbuuM9jqSTPEumkyyInzMjx6+Zlh8a7rDIcvPWXg52FniHXVANMgPSAxMGBgYAAAAAD//4JbCLLAU/EGQ5/7aQZBhrsMH39yMKy8acCQE2jAEO2qwbDl+H0Gfm52huxAfYalu28wfPzyk2FFvReK6w9dghheHWMGVgdx8H2EhQwMDAAAAAD//0IJ0u33NRguSaxg+CIUwGAs+RrsQpBlIDBl3QWwb0Hg4ctPcAM/ff3FoBW3iMEyawXD5mP3IL5z04SbCdMDBgwMDAAAAAD//8KIQ5AmSfs5DDa6UuBgAYFHrz6DXamvLAoPWpir+bjZGHb0BIJ9D/I1SA9IDBQiICAnxssgL84HMZyBgQEAAAD//8Kw8PBFiEG6ttkM2UEGYHbr4lNgl4MMAjvg5WewWNuSU2Afggzd0R0INhimB+RwmKPgvmRgYAAAAAD//8KwEBRcIB8x8euADQIZCNKspwTRBOKDACghTVl/EZxQYAAUzCA9IDCz2BmcqFAsZGBgAAAAAP//gicalGA9eg8eRyADQUEFSp0gcPHuawZfK0WGzgxbFD2X772BGwzyGQiDfAxKAzCLGRgYGAAAAAD//8JuIchHUM1T11+E+hwSj1uO3WO4ePcNODhhBoHEQCm0K8MWrCa9Zy84pEAWgrIMHDAwMAAAAAD//wIV3v+xWUoTwMDAAAAAAP//om9Jw8DAAAAAAP//oq+FDAwMAAAAAP//oq+FDAwMAAAAAP//AlmoSjfbGBhUAQAAAP//AwBuRdWby5+wNgAAAABJRU5ErkJggg==",O=[{type:"Visa",pattern:/^4/,image:H},{type:"MasterCard",pattern:/^5[1-5]/,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAAD7UlEQVQ4jWI0M01PYGBgmM9AD8DAkAgAAAD//2Kio2UMDAwM8wEAAAD//2LBJ8v59w+D5LdvDFLfvjK8Z2NneM/OzvCMixtFjZjALwYFye8MipLfGa7c52F48JyT4esPZuwGMjAwAAAAAP//wmohyCLrF88ZbF4+Z+D4+xdFDmTxaiUVhv9qrAyJXk8ZtBW+wOXCHCH0gfNCDPO2SWNazMDAAAAAAP//AsXhf3TL0m5cY5D89hWnK/9xMDGoLmFjYOJhxKnm9Qc2hrq5KgyvPrAhBBkYGAAAAAD//wLFIQoIvXcXr2UgwK3KwPCs8RfD75cobkUBogK/GMqj76MKMjAwAAAAAP//QrEQFFdaH97htQwZvFvyG6+8gsR3BkdDJPMYGBgAAAAA//9CiUOt9+8YHgeYMQgICDD8UxBn4D1wmYHpwAW4/HsDBQZ50Q8MLOKIeHv40YSBTdKeQez/Xgbm7wi1IHD4oRWDg/kbhv3noQIMDAwAAAAA//9CsVDp8ycGpYJyBj0DfQY+fn6GG55nGYTFxRjuzFvLoJAUxPD55w+Gt+v3MUhHeDOcmDiPwbm+gIGBiYnh/JlDDK+5whnE5XIZXj1/wCAlq8Lw5etvBi8LWYYz6+IZGBi4IBYwMDAAAAAA//9CCdJv//8w6EItA4Gbh04wiMrLMryQF2L4/uETg5qaGsMXDWmGnwz/GHjtjRl2rtvIwMvLy6DybwLDq2e3GWQVtBlYuGQYjhw9xcDLy8/AzMzI8OcXIjQYGBgYAAAAAP//QrHwAutfhg8fPjA8evgQ4mNXW4aPHz8yBCbFMZw5cJjh8sVLDG+3HGIQEhBgkJSTZWDbdIyhuy6bQcp5N4O0kjlYrb6+PsOjy0sYfv7+x/Do/jUGISl9hAUMDAwAAAAA//9CyRba798xxN65CZf8wvCXgYeBmeEFwy8GCQY2MC2jwMnwxeA3gxQPGwMzNyMDkysjw6evfxj4uFkY+HgQ+e7Tl79g/vzt0gxbjolCBBkYGAAAAAD//0Lx4VVBIYZ7vHxwPsgyEABZBqP/PPjLIPySFcxnV2YCGyojzo5iGQiA+N9/MjO8eMuOEGRgYAAAAAD//8LIh1vkFBh+MOMumkDg6/G/DP++MDBw6mFoh4NvP5gZaueqMJy5ifAAAwMDAwAAAP//wtABKisnauuj+BQd7JGSYVgppgw2FBsAlzLzVBjuP+dElWZgYAAAAAD//8Io2pABuCB4j8i4P1hYGM6KiDJ8Z4bkJm6Ovwxmmh8ZxAR/wdWALDl1HZLKMQADAwMAAAD//8JrIdUBAwMDAAAA//8CBWki3WxjYEgEAAAA//8DALY7DXGi5RP2AAAAAElFTkSuQmCC"},{type:"American Express",pattern:/^3[47]/,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAACuElEQVQ4jWJkKF6awMDAMJ+BHoCBIREAAAD//2Kio2UMDAwM8wEAAAD//wJZSD/AwMAAAAAA//+ir4UMDAwAAAAA//9iSTBVYmhw0wVz5AW5GQ7efcVgryzGsPHqEwYFQW4GBSEehgfvvjB8+P6bQUGIm+HD919gtoG0IAM/ByvDw/dfGQQ42eAGgtSC9MDY+lKCYDUP3n1lcJi+hwEAAAD//2ICWbbhyhOGBafvgRUtOHOPYeGZewwOyuIMDbsuM1x4+p5hwen7cAMLNp4D0xMO3WD4+OM3WB8IH7j7EmzBgbuvwHyQvgmHb4Itg5nNwMDAAAAAAP//YgLZDFJ84dl7hovP3oN9BRLbcOUxA8j3IPDhxy+ogV/hGkG+RLB/Mfhry4AdDmKDaBBIMFFCsYyBgYEBAAAA//9iefD+C8P6BDswB+QzULCBfAfSZCAlCBYHOQIGQGKgIBfgZIUGHzeDgiAPXG+8iRJDwLP3YJ86KIsxBOjIIEKIgYEBAAAA//9ibNh56T/IdzDDKAWgKAH5DB08AAXt6XsMAAAAAP//AmX8/+iSIB+CXIcMQI6i2EEMDAwAAAAA///Cmi1AloGCBwZAqRAU7MhioPgFBRcsLpHZIHUFdhqQ4EZiMzAwMAAAAAD//8KZD2EJBBKnYgyBCw4xBOjIgg0FhQBIHpZVINnlNzgUUB0uDo5fGNtAWpABAAAA///Cm/FhGkAJAOQjUEqF+JgVnHBAABTMIIfALAMbLCUITq0gR4ESJYx94el7BgAAAAD//2LBZRnIApgvQWyQYpBPQIaBxB2n72XYkAhJ3aACABSkoJBAzi4ghwVIg0LlF5hf76bLAAAAAP//wppoaAYYGBgAAAAA//+ib1nKwMAAAAAA//+ir4UMDAwAAAAA//8CWZhIN9sYGBIBAAAA//8DAK8vCEhLcTGuAAAAAElFTkSuQmCC"},{type:"Discover",pattern:/^6(?:011|5)/,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAADHklEQVQ4jWJcsWLFDFlZ2XQGOoDHjx/PBAAAAP//Yjh69Oh/eoFHjx79BwAAAP//YqKHz2BAVlaWAQAAAP//oquFDAwMDAAAAAD//6KvhQwMDAAAAAD//2IBEVHhEQx8fHwM5pYWDBYWFgxr16xhyCsoYGhpbGJwdXdj0NTSYpjUP4Hh06dPDDX1dQycO3oZfty/zMAiIMJwUtqN4cGrT2D18+fNY7h39y7D3Tt3wYZbWVkxHDt2jKG2vg4s19XTwwAAAAD//wL78NTJk2DLFsydx7ByxUqGa1evMWSkpjE8efIErDEzNY1h965dYDW/dk5j+HR6J8Ovt08Zfty/yGB8fSHDpAkTwY4B6VdWVmb4/OkTQ35hAcP3H9/BHvH18mbw9PRiYGBgYAAAAAD//4IHaWJSEkNwaAjD9WvXwHyQq0BskEHXr18H+wykRoDhGwMT838GFpb/DKzs/xiYfz1nMDM3BzsQBEChAVIfHRHJ8Pr1a4aTJ04waGpqMhibmjAwMDAwAAAAAP//glsICsa1q9cweHp5gvnz584DOwAkJi0tDQ5eULB8/v2XgZXtHwMr1z8GNt5/DNwKkmB1oFBKSE6CWKqpybB0xXIGUVFRsANAIQVyOAMDAwMAAAD//2JOTk5uePrkKcPTJ08YomKiGQwNDRnevHnNYGBkyHDh3HmGiVMmM9g72IM1gXzsntvEwPfjNgMr5x8GdnExBi73WgZtSy9wNICC8dfPnwwnTpwA+0xJUYnBzMKcQVlFGazX3MKCAQAAAP//olvG//f+8f/vK1L/AwAAAP//AqdSWoL/Pz4x/D45j+HPiXkM/39+ZgAAAAD//6KZhegWgQEDAwMAAAD//6K6hf8/PGH4dXACw98bu1AsAgMGBgYAAAAA//+iioUg3/y9uYvhz4U1DH8fnsStkIGBAQAAAP//IttCuCU3djH8vbmbOE0MDAwAAAAA//8iycK/D04w/H14guEfmMbvE2zg6ef/DAAAAAD//2IBVYrHjh3DqID/v3vI8O/9Awj97gHDv5fXSbYAw8EqrgcAAAAA//8DANHX/1srY+LpAAAAAElFTkSuQmCC"},{type:"Diners Club",pattern:/^3/,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAADQUlEQVQ4jWKMjY2NtLW1XcZAB3D48OEoAAAAAP//Ypg1a9Z/eoGTJ0/+BwAAAP//YqKHz2DAzMyMAQAAAP//oquFDAwMDAAAAAD//6KvhQwMDAAAAAD//2KBMY48+Miw6vJLBj4OFoYrL74yfPjxhyHTXJohXE+MerYxMDAAAAAA//8CJ5r1117/33z9DUraSVh97T9D5b7/yj3HwfyIsPD/nR2dYPbcuXPxprP01LT/aSkp/zdv3gzXCwb///8HAAAA//9i9vX1bXjCKc+QZCyJ4pAALVGGg/c/MJx/9oVBgIOV4caetQy8vLwMs2fNZnj39g3D0iVLGbh5uBmmT53GsGD+AobVq1YxKCoqMKSlpjG4uLkyfPr4kWH/3n0M58+dZ7h54wbDq1evGaxtrBkAAAAA//8AcQCO/wMYQlmASjYsAAEBAAChzugAOB0OAIG94ABAIhAA4e/5AMDf8AD4/P4ABti+AAYGBgDW1dUA8/LzAP8AAAC1s7MA+Pn5APr6+gDS0dEAExQUAA0NDQDd3N0A7u7vAOrp6QDl5OQACwwMAMzMywBlZmYAAAAA//9s0TEKgCAYQOE35e9k+DdVB3Dx/tcRPICBgQYJbU696dvffLjK5G93rVylEEIgpcQYL/t5oN4jYnHO8fRGzplNFVHFmIXWOtZaYowAfAAAAP//YjHl/sJw4vEnBntFAYZ8KxmwYL2zApg+cP89PHinP3/O8OjRIwYODg6GP3/+MDx9+hQsx8zMzPD3718GRkZGhosXLjD8+/eP4efPn2A+iM3KygqWFxERYXj69CkDAAAA//8Ce0tBgINhy423DD4awnDfJa65znDg3gcGA0kehgJrGYZZzMwMOrq6DN9+fGd4++o1w89fvxhYmJnBwSkgIMDAzs7O8OXLFwZhYWEGUPyAxH78+MHw+NEjsHnff/xgkJaWZgAAAAD//wJbCEr6Dz/8YMjbfAslW6yI0IZni2s3b1CeJRgYGAAAAAD//4JHnLwAB8MkXzWqGIoTMDAwAAAAAP//om9Jw8DAAAAAAP//oq+FDAwMAAAAAP//oquFp06dYgAAAAD//2IBV4oMDPSpgA8fjgIAAAD//wMA1kWvP8p+4X4AAAAASUVORK5CYII="},{type:"JCB",pattern:/^(?:2131|1800|35\d{3})/,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAAACXBIWXMAAAsSAAALEgHS3X78AAAC+ElEQVQ4jWLk85mWwMDAMJ+BHoCBIREAAAD//2Kio2UMDAwM8wEAAAD//2LBJVMZZcpgoytFtsmX771hqJh9FFWQgYEBAAAA///CaiHIsopIE4aVW84zZPXvZfjFx8/wi0+AYWeNM4P639cMG0PTGARffWWQ/M7EoF2SxiBcl8KQs7WNYef9LQxCPH8Z7BX0GfyUGjANZmBgAAAAAP//wmohyGer159iKGjbzMDAxw8X/3j/DsOsmmIGgc/fGBgYGMFiP/78YjCcmsLw+PNNBkEeiLqXX58xMIhgMZiBgQEAAAD//wLFIVZQXL0cQ/zZyaMMPz5/QRF78eUdw8UXd1HEXn17jt1QBgYGAAAAAP//wmkhTQADAwMAAAD//8KZaJDBtmYfhoXHnzBw//vNENLWyMD0/gsD69svDKx3nzPw8AgxzAssZ1h3fSuDi4oBw/V3ZxgefD6F3SAGBgYAAAAA//8iykJbHUmGA7ffMcjpeDAocf1gWGTtyyDxnRGcaERK0hgMJFQY1l1nYNAUUWX48Ospw4PPOAxiYGAAAAAA//8iGKR83Oxg+sO332D6x2dM0z78+MJw7NEFhs8/PzMYSRjhNoyBgQEAAAD//8Lpw6RYO4b3v/4zaOrIM5TPPc4w5dATBv0v1xi+vHvKYJAUySDMyQcOUlAqffDhBYOnqg1Y37kX53DbxsDAAAAAAP//wmnhvMWHGH5z8zD8OnQPnA8Z+AQYvr56yXB92TIGie9M8CD9kuLHkLRuNYMQ9x+GE88PgvOhEDcOQxkYGAAAAAD//6JvKmVgYAAAAAD//yLaQj05AQYJPkh8wgALHw/DDxd9DLVFpthLGQYGBgYAAAAA//8iysJoRzWG082uDBysCOWsfDwMettmMPzWlEVRW2tTy+Cq4Mtw5PIzTIMYGBgAAAAA//8CVU//0QU7Uq0ZdJVwlE1EAJBl7ctOY6pkYGAAAAAA///CaiHNAAMDAwAAAP//AoVRIt1sY2BIBAAAAP//AwDK8sIS5ghBgQAAAABJRU5ErkJggg=="}];class X extends i.Component{constructor(){super(...arguments),t(this,"state",{cardNumber:"",cardOriginalNumber:"",cardName:"",cardMonth:"",cardYear:"",cardCvv:"",saveError:!1,paymentErrMsg:null,errMsg:null,amount:0,cardImg:H,cardNumberFocus:!1,paymentErrorMsg:null,errorMessage:{cardNumber:null,cardName:null,cardMonth:null,cardYear:null,cardCvv:null}}),t(this,"componentDidMount",(()=>{var e,t,a,s,r,i,A,l,o,n,d,h,c,u;if(window.location.pathname.includes("consumablespay")){const t=x.parse(null==(e=null==window?void 0:window.location)?void 0:e.search);let a=void 0!==(null==t?void 0:t.month)&&null!==(null==t?void 0:t.month)?t.month:null,s=void 0!==(null==t?void 0:t.year)&&null!==(null==t?void 0:t.year)?t.year:null;null===a||null===s?this.props.history.push("/features"):(a=window.atob(a),s=window.atob(s),this.getConsuambleAmount(a,s))}else if(window.location.pathname.includes("subscriptionpay")){const e=x.parse(null==(t=null==window?void 0:window.location)?void 0:t.search);let a=void 0!==(null==e?void 0:e.clientId)&&null!==(null==e?void 0:e.clientId)?e.clientId:null,s=void 0!==(null==e?void 0:e.invoiceId)&&null!==(null==e?void 0:e.invoiceId)?e.invoiceId:null;null===a||null===s?this.props.history.push("/features"):(a=window.atob(a),s=window.atob(s),this.getSubscriptionAmount(s))}else null!==(null==(i=null==(r=null==(s=null==(a=this.props)?void 0:a.history)?void 0:s.location)?void 0:r.state)?void 0:i.amount)&&void 0!==(null==(n=null==(o=null==(l=null==(A=this.props)?void 0:A.history)?void 0:l.location)?void 0:o.state)?void 0:n.amount)?this.setState({amount:(null==(u=null==(c=null==(h=null==(d=this.props)?void 0:d.history)?void 0:h.location)?void 0:c.state)?void 0:u.amount)||0}):this.props.history.push("/features")})),t(this,"getSubscriptionAmount",(e=>{o({path:n,params:{invoiceId:parseInt(e)},loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var t,a,s;(null==e?void 0:e.status)&&(null==(t=null==e?void 0:e.data)?void 0:t.totalAmount)>0?(this.props.setTotalAmount((null==(a=null==e?void 0:e.data)?void 0:a.totalAmount)||0),this.setState({amount:(null==(s=null==e?void 0:e.data)?void 0:s.totalAmount)||0})):this.setState({saveError:!0,paymentErrMsg:"Payment already completed"})},fail:e=>{this.props.history.push("/features")}})})),t(this,"paySubscriptionInvoice",(()=>{var e;const t=x.parse(null==(e=null==window?void 0:window.location)?void 0:e.search);let a=void 0!==(null==t?void 0:t.clientId)&&null!==(null==t?void 0:t.clientId)?t.clientId:null,s=void 0!==(null==t?void 0:t.invoiceId)&&null!==(null==t?void 0:t.invoiceId)?t.invoiceId:null,r=d();if(null===a||null===s)this.props.history.push("/features");else{a=window.atob(a),s=window.atob(s);let e={clientId:parseInt(a),invoiceId:parseInt(s),cardInfo:{email:(null==r?void 0:r.email)||"",cardholderName:this.state.cardName,cardNumber:this.state.cardOriginalNumber.replaceAll("-",""),month:this.state.cardMonth,year:this.state.cardYear,cvv:this.state.cardCvv,amount:this.state.amount}};o({path:h,params:e,loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var t;(null==e?void 0:e.status)&&this.props.history.push({pathname:"thanks",state:{qas:!1,payment:!0,screenName:(null==(t=this.props)?void 0:t.screenName)||""}})},fail:e=>{}})}})),t(this,"getConsuambleAmount",((e,t)=>{o({path:c,params:{month:parseInt(e),year:parseInt(t)},loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var t,a,s;(null==e?void 0:e.status)&&(null==(t=null==e?void 0:e.data)?void 0:t.totalAmount)>0?(this.props.setTotalAmount((null==(a=null==e?void 0:e.data)?void 0:a.totalAmount)||0),this.setState({amount:(null==(s=null==e?void 0:e.data)?void 0:s.totalAmount)||0})):this.setState({saveError:!0,paymentErrMsg:"Payment already completed"})},fail:e=>{this.props.history.push("/features")}})})),t(this,"payConsumbleInvoice",(()=>{var e;const t=x.parse(null==(e=null==window?void 0:window.location)?void 0:e.search);let a=void 0!==(null==t?void 0:t.month)&&null!==(null==t?void 0:t.month)?t.month:null,s=void 0!==(null==t?void 0:t.year)&&null!==(null==t?void 0:t.year)?t.year:null,r=d();if(null===a||null===s)this.props.history.push("/features");else{a=window.atob(a),s=window.atob(s);let e={month:parseInt(a),year:parseInt(s),cardInfo:{email:(null==r?void 0:r.email)||"",cardholderName:this.state.cardName,cardNumber:this.state.cardOriginalNumber.replaceAll("-",""),month:this.state.cardMonth,year:this.state.cardYear,cvv:this.state.cardCvv,amount:this.state.amount}};o({path:u,params:e,loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var t;(null==e?void 0:e.status)&&this.props.history.push({pathname:"thanks",state:{qas:!1,payment:!0,screenName:(null==(t=this.props)?void 0:t.screenName)||""}})},fail:e=>{}})}})),t(this,"postPaymentDetailsToServer",(e=>{var t,a,s,r,i,A,l,n,h,c,u,M,w,D,y,B,I,b,C,S,N,P,j,E,G,Q,H,O,X,L,k,U,W,F,z,K,T,J,Z,R,V;this.state.cardMonth,this.state.cardYear,this.state.cardMonth,this.state.cardYear,this.state.cardCvv,null==(r=null==(s=null==(a=null==(t=this.props)?void 0:t.history)?void 0:a.location)?void 0:s.state)||r.amount,(null==(n=null==(l=null==(A=null==(i=this.props)?void 0:i.history)?void 0:A.location)?void 0:l.state)?void 0:n.clientId)||g(),(null==(M=null==(u=null==(c=null==(h=this.props)?void 0:h.history)?void 0:c.location)?void 0:u.state)?void 0:M.userId)||m(),(null==(B=null==(y=null==(D=null==(w=this.props)?void 0:w.history)?void 0:D.location)?void 0:y.state)?void 0:B.clientId)||g();let q={},$=(null==(S=null==(C=null==(b=null==(I=this.props)?void 0:I.history)?void 0:b.location)?void 0:C.state)?void 0:S.amount)||0,_=Y;const ee=x.parse(null==(N=null==window?void 0:window.location)?void 0:N.search);let te=!1,ae=!1;void 0!==(null==ee?void 0:ee.zeroPayment)&&null!==(null==ee?void 0:ee.zeroPayment)&&(te="true"===(null==ee?void 0:ee.zeroPayment)),void 0!==(null==ee?void 0:ee.isNewAccount)&&null!==(null==ee?void 0:ee.isNewAccount)&&(ae=!0),1===(null==(G=null==(E=null==(j=null==(P=this.props)?void 0:P.history)?void 0:j.location)?void 0:E.state)?void 0:G.licenseTypeId)||!0===te&&!0===ae?($=1,_=f,q={clientId:g(),invoiceId:(null==(X=null==(O=null==(H=null==(Q=this.props)?void 0:Q.history)?void 0:H.location)?void 0:O.state)?void 0:X.invoiceId)||0,cardInfo:{cardholderName:this.state.cardName,cardNumber:this.state.cardOriginalNumber.replaceAll("-",""),month:this.state.cardMonth,year:this.state.cardYear,cvv:this.state.cardCvv}}):q={clientId:g(),invoiceId:(null==(W=null==(U=null==(k=null==(L=this.props)?void 0:L.history)?void 0:k.location)?void 0:U.state)?void 0:W.invoiceId)||0,isPlanUpgrade:(null==(T=null==(K=null==(z=null==(F=this.props)?void 0:F.history)?void 0:z.location)?void 0:K.state)?void 0:T.isPlanUpgrade)||!1,isAddOnUpgrade:(null==(V=null==(R=null==(Z=null==(J=this.props)?void 0:J.history)?void 0:Z.location)?void 0:R.state)?void 0:V.isAddOnUpgrade)||!1,cardInfo:{cardholderName:this.state.cardName,cardNumber:this.state.cardOriginalNumber.replaceAll("-",""),month:this.state.cardMonth,year:this.state.cardYear,cvv:this.state.cardCvv,amount:$}},q.isNewAccount=!1,void 0!==(null==ee?void 0:ee.isNewAccount)&&null!==(null==ee?void 0:ee.isNewAccount)&&"true"===(null==ee?void 0:ee.isNewAccount)&&(q.isNewAccount=!0),o({path:_,params:q,loading:this.context.globalStateData.setIsLoadingData,ok:t=>{var a,s,r,i,A;if(t.status){let t=d();if(null!=t){let e=new Date;e.setFullYear(e.getFullYear()+1),t.nextDueDate=e.toISOString(),t.dueDate=e.toISOString(),t.nextInvoiceDate=e.toISOString(),t.paymentTerms=365,t.payStatus="C",localStorage.setItem("lsUserData",p(t))}v((null==(i=null==(r=null==(s=null==(a=this.props)?void 0:a.history)?void 0:s.location)?void 0:r.state)?void 0:i.licenseTypeId)||1),this.props.history.push({pathname:"thanks",state:{qas:!1,payment:e,screenName:(null==(A=this.props)?void 0:A.screenName)||""},search:window.location.search})}else this.setState({saveError:!0,paymentErrMsg:(null==t?void 0:t.message)||"Please try again after sometime..."})},fail:e=>{this.setState({saveError:!0,paymentErrMsg:"Please try again after sometime..."})}})})),t(this,"cardExpiryValidation",(e=>{if(!this.state.cardYear.length&&!this.state.cardMonth.length)return!1;if(this.state.cardMonth.length&&!this.state.cardYear.length)return void this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Enter year"},cardYear:""});let t=parseInt(this.state.cardYear);if(t<1950)return this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Enter valid year"},cardYear:""}),!1;let a=(new Date).getFullYear();if(t>a+10)return this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Enter valid year"},cardYear:""}),!1;if(t<a)return this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Your card expired"},cardYear:""}),!1;if(t>a)return this.setState({errorMessage:{...this.state.errorMessage,cardYear:null}}),!0;{let e=(new Date).getMonth()+1;return this.state.cardMonth<e?(this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Your card expired"}}),!1):(this.setState({errorMessage:{...this.state.errorMessage,cardYear:null}}),!0)}})),t(this,"cancelInvoice",(()=>{var e,t,a,s;let r={clientId:g(),invoiceId:(null==(s=null==(a=null==(t=null==(e=this.props)?void 0:e.history)?void 0:t.location)?void 0:a.state)?void 0:s.invoiceId)||0};o({path:M,params:r,loading:this.context.globalStateData.setIsLoadingData,ok:e=>{var t;if(e.status){let e=d();if(void 0===(null==e?void 0:e.payStatus)||null===(null==e?void 0:e.payStatus))return void this.props.history.push({pathname:"/features",search:window.location.search});if(d()){const e=x.parse(null==(t=null==window?void 0:window.location)?void 0:t.search);void 0!==(null==e?void 0:e.renew)&&null!==(null==e?void 0:e.renew)&&Boolean(null==e?void 0:e.renew)?(this.context.toggleAuth(!0),this.props.history.push({pathname:"/features",search:window.location.search})):(this.context.toggleAuth(!0),this.props.history.push("/subscription"))}else this.postPaymentDetailsToServer(!0)}},fail:e=>{}})}))}getCreditCardType(e){for(const t of O)if(t.pattern.test(parseInt(e)))return t;return O[0]}render(){return a.jsxs("div",{className:"mt10",children:[a.jsx(N,{children:a.jsx(C,{required:!0,name:"cardNumber",onpaste:!1,ondrop:!1,val:this.state.cardNumber,iconPlaceholder:!0,assetsIcon:!0,iconName:this.state.cardImg,placeholder:this.state.cardNumberFocus||this.state.cardNumber.length?"Card number":"XXXX - XXXX - XXXX - 1234",errorMessage:this.state.errorMessage.cardNumber,iconClassName:"visa-card-img",onFocus:()=>{let e=this.state.cardOriginalNumber.replaceAll("-","");e=this.state.cardOriginalNumber.replaceAll("X","");let t=w(e);this.setState({cardNumber:t,cardNumberFocus:!0})},handleOnchange:e=>{let t=e.length>0?{...this.state.errorMessage,cardNumber:null}:{...this.state.errorMessage,cardNumber:D},a=e.replaceAll("-","");a=a.replaceAll("X","");let s=w(e),r=e;r=r.replaceAll("-","");let i=this.getCreditCardType(r);this.setState({cardOriginalNumber:e,cardNumber:s,errorMessage:t,cardImg:i.image})},handleOnBlur:e=>{let t=e.length>0&&e.length<18?{...this.state.errorMessage,cardNumber:"Enter valid card number"}:0==e.length?{...this.state.errorMessage,cardNumber:D}:{...this.state.errorMessage,cardNumber:null};if(19===e.length){let a=e;[0,1,2,3,5,6,7,8,10,11,12,13].map((e=>{a=a.replace(/./g,((t,a)=>a==e?"X":t))}));let s=e;s=s.replaceAll("-","");let r=this.getCreditCardType(s);this.setState({cardOriginalNumber:s,cardNumber:a,errorMessage:t,cardImg:r.image})}else{let a=e.replaceAll("-","");a=a.replaceAll("X","");let s=w(e),r=e;r=r.replaceAll("-","");let i=this.getCreditCardType(r);this.setState({cardNumber:s,errorMessage:t,cardOriginalNumber:r,cardImg:i.image})}}})}),a.jsx(N,{children:a.jsx(C,{required:!0,max:30,name:"cardName",placeholder:"Name on card",val:this.state.cardName,iconPlaceholder:!0,errorMessage:this.state.errorMessage.cardName,handleOnBlur:e=>{let t=e.trim();this.setState({cardName:t.toUpperCase()})},handleOnchange:e=>{if(this.setState({errorMessage:{...this.state.errorMessage,cardName:null}}),""===e||/^[a-zA-Z ]{1,150}$/.test(e)){var t=e.replace(/\s+/g," ");this.setState({cardName:t.toUpperCase()})}else e.length||this.setState({errorMessage:{...this.state.errorMessage,cardName:y}})}})}),a.jsx(N,{children:a.jsxs(P,{children:[a.jsx(j,{md:4,children:a.jsx(C,{name:"month",required:!0,placeholder:"MM",val:this.state.cardMonth,errorMessage:this.state.errorMessage.cardMonth,handleOnBlur:e=>{1===e.length?this.setState({cardMonth:"01"}):2===e.length&&("00"===e.toString()?this.setState({errorMessage:{...this.state.errorMessage,cardMonth:"Enter valid month"}}):this.setState({errorMessage:{...this.state.errorMessage,cardMonth:null}})),this.state.cardYear},handleOnchange:e=>{if(this.setState({errorMessage:{...this.state.errorMessage,cardMonth:null}}),""===e||/^[0-9]{1,2}$/.test(e))if(e<=12)if(e<10&&e>1){let t=`0${parseInt(e)}`;this.setState({cardMonth:t})}else this.setState({cardMonth:e});else this.setState({errorMessage:{...this.state.errorMessage,cardMonth:"Enter valid month"}})}})}),a.jsx(j,{md:4,children:a.jsx(C,{name:"year",required:!0,placeholder:"YYYY",val:this.state.cardYear,errorMessage:this.state.errorMessage.cardYear,handleOnBlur:e=>{this.cardExpiryValidation(e)},handleOnchange:e=>{this.setState({errorMessage:{...this.state.errorMessage,cardYear:null}}),(""===e||/^[0-9]{1,4}$/.test(e))&&this.setState({cardYear:e})}})}),a.jsx(j,{md:4,children:a.jsx(C,{required:!0,name:"cvv",placeholder:"CVV",type:"password",val:this.state.cardCvv,iconPlaceholder:!0,errorMessage:this.state.errorMessage.cardCvv,handleOnchange:e=>{if(""!==e){if(""===e||/^[0-9]{1,3}$/.test(e)){let t=e.length>0?{...this.state.errorMessage,cardCvv:null}:{...this.state.errorMessage,cardCvv:"Enter card cvv"};e.length<4&&this.setState({cardCvv:e,errorMessage:t})}}else this.setState({cardCvv:""})}})})]})}),!0===this.state.saveError&&a.jsx(S,{headerTitle:"Payment",title:this.state.paymentErrMsg,primaryButtonText:"OK",buttonClicked:e=>{this.setState({saveError:!1}),(window.location.pathname.includes("consumablespay")||window.location.pathname.includes("subscriptionpay"))&&this.props.history.push("/")}}),a.jsxs("div",{className:"btn-container d-flex justify-content-end mb20",children:[a.jsx(B,{onClick:()=>{this.context.globalStateData.setBodyNameData(""),this.cancelInvoice()},children:d()?"Cancel":"Paylater"}),a.jsx(I,{onClick:()=>{if(this.context.globalStateData.getIsPrototype)this.props.history.push("thanks");else if(this.state.cardOriginalNumber.replaceAll("-","").length>=16){if(this.setState({errorMessage:{...this.state.errorMessage,cardNumber:null}}),this.state.cardName.length>0&&this.state.cardName.length>2)this.setState({errorMessage:{...this.state.errorMessage,cardName:null}});else{if(0===this.state.cardName.length)return void this.setState({errorMessage:{...this.state.errorMessage,cardName:"Enter name on card"}});if(this.state.cardName.length>0&&this.state.cardName.length<3)return void this.setState({errorMessage:{...this.state.errorMessage,cardName:"Name on card should be minimum 3 characters"}})}2===this.state.cardMonth.toString().length?"00"!==this.state.cardMonth.toString()?(this.setState({errorMessage:{...this.state.errorMessage,cardMonth:null}}),4===this.state.cardYear.toString().length?(this.setState({errorMessage:{...this.state.errorMessage,cardYear:null}}),3===this.state.cardCvv.toString().length?(this.setState({errorMessage:{...this.state.errorMessage,cardCvv:null}}),this.cardExpiryValidation()&&(window.location.pathname.includes("consumablespay")?this.payConsumbleInvoice():window.location.pathname.includes("subscriptionpay")?this.paySubscriptionInvoice():this.postPaymentDetailsToServer(!1))):this.setState({errorMessage:{...this.state.errorMessage,cardCvv:"Enter cvv"}})):this.setState({errorMessage:{...this.state.errorMessage,cardYear:"Enter year"}})):this.setState({errorMessage:{...this.state.errorMessage,cardMonth:"Enter valid month"}}):this.setState({errorMessage:{...this.state.errorMessage,cardMonth:"Enter month"}})}else{let e=0===this.state.cardOriginalNumber.replaceAll("-","").length?D:"Enter valid card number";this.setState({errorMessage:{...this.state.errorMessage,cardNumber:e}})}},children:"Pay"})]})]})}}t(X,"contextType",l);const L=r(X),k=e=>a.jsxs(U,{children:[a.jsx("p",{children:"We will redirect you to PayPal to enable you to make your payment. You will return to SmartDX to complete your order."}),a.jsx(W,{src:"https://cdn.jsdelivr.net/gh/ResulticksInc/aibuildercss/assets/png/paypal-button-fc8e0005.png",alt:"paypal"})]}),U=E.div`
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    margin-bottom: 30px;
`,W=E.img`
    align-self: flex-end;
`,F=[{licensingTypeID:1,licensingType:"Free",price:0},{licensingTypeID:2,licensingType:"Essentials",price:100},{licensingTypeID:3,licensingType:"Premier",price:300},{licensingTypeID:4,licensingType:"Ultimate",price:500}],z=e=>{var t,r,o,n,h,c,u,g,m,p,v;const[M,w]=i.useState(0),D=A(),[y,B]=i.useState(1===(null==(r=null==(t=null==D?void 0:D.location)?void 0:t.state)?void 0:r.licenseTypeId)?1:(null==(n=null==(o=null==D?void 0:D.location)?void 0:o.state)?void 0:n.amount)||0);i.useContext(l);var I="Choose the payment method to complete setting up your account";let Y=F.filter((e=>{var t,a;return e.licensingTypeID===(null==(a=null==(t=null==D?void 0:D.location)?void 0:t.state)?void 0:a.licenseTypeId)}));return Y.length&&(I=1===Y[0].licensingTypeID?"To begin your free trial, please provide your payment information":`To begin your ${Y[0].licensingType.toLowerCase()} package, please provide your payment information`),a.jsxs(Q,{children:[a.jsx(G,{fluid:!0,className:"main-heading-wrapper mb0",children:a.jsxs(G,{className:"mhw-container",children:[a.jsx("div",{className:"mhwc-left",children:a.jsx("h1",{children:a.jsx("div",{className:"mh-wrapper",children:a.jsx("span",{className:"mh-text",children:(null==(h=d())?void 0:h.isQuickAccount)?"Payment":"Payment & activation"})})})}),a.jsx("div",{className:"mhwc-right"})]})}),a.jsx(G,{className:"page-header",children:a.jsxs("div",{className:"box-design rs-box-min-height py40",children:[a.jsx(N,{children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("h4",{children:I}),a.jsxs("h4",{children:["Total amount : $",b(Math.ceil(y).toFixed(2))]})]})}),a.jsx(P,{children:a.jsxs(j,{md:{span:6,offset:3},children:[a.jsxs("div",{className:"payment-tab-container",children:[a.jsx(s,{defaultSelectedItem:M,defaultClass:"",dynamicTab:"mini",activeTip:!0,activeClass:"active",tabData:K,callBack:(e,t)=>{w(t)}}),a.jsx("div",{className:"payment-body-form",children:0===M?a.jsx(L,{amount:(null==(u=null==(c=null==D?void 0:D.location)?void 0:c.state)?void 0:u.amount)||0,screenName:(null==(m=null==(g=null==D?void 0:D.location)?void 0:g.state)?void 0:m.screenName)||"",setTotalAmount:e=>{B(e)}}):a.jsx(k,{})})]}),1===(null==(v=null==(p=null==D?void 0:D.location)?void 0:p.state)?void 0:v.licenseTypeId)&&a.jsx("div",{children:a.jsx("div",{className:"payment-note-container",children:a.jsx("small",{children:"Your card will be charged $1 for verification purposes. This is not a subscription fee, and the charged amount will be refunded to your account shortly."})})})]})})]})})]})},K=[{id:1001,text:"Credit card",iconLeft:"icon-rs-credit-card-large icons-lg marginR10",disable:!1},{id:1002,image:"https://cdn.jsdelivr.net/gh/ResulticksInc/aibuildercss/assets/png/paypal-b9194479.png",imgText:"PayPal",disable:!0}];export{z as default};
