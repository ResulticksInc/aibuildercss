import{j as e}from"./pdf-editor-e8cb7a76.js";import{r as s}from"./react-vendor-379f659a.js";import{z as t,M as a,eH as o,aC as i,ar as r,aL as l,az as n,DG as d}from"./index-23a09c37.js";import{r as c}from"./Preference-8f8fc5ca.js";import{K as m}from"./index-566d2b59.js";import{L as p}from"./LayoutPageWrapper-ab434993.js";import{RSConfirmAlert as j}from"./RSConfirmAlert-1017f59d.js";import"./constants-82903eb8.js";import{S as u}from"./SkeletonTable-88398a63.js";import{C as h}from"./ui-f7791cf3.js";import"./utils-16c7e021.js";import"./kendo-5d73125a.js";import"./drag-drop-2020d552.js";import"./CompanyUserList-ade552bc.js";import"./RSDropdowns-e011803c.js";import"./style-a86a43a5.js";import"./RSKendoDropdown-32d89038.js";import"./get-4aa85b1a.js";import"./RSCheckbox-b4d531b7.js";import"./RSPhoneInput-e88e351a.js";import"./inputLimit-ce03b0f6.js";import"./RSFormGroup-ffdfb1d7.js";import"./FormListWrapper-65100154.js";import"./FormLabel-83e0741f.js";import"./FormFieldIcon-3c0298f7.js";import"./RSIcon-d18be5d2.js";import"./RSSwitch-6df3c521.js";import"./constantObject-ca27cf51.js";import"./react-router-dom.min-6f8d67fa.js";import"./ChannelGoalsData-34121eee.js";const x=()=>{const[x,f]=s.useState([]),[g,S]=s.useState(!0),[b,v]=s.useState(null);s.useState(null);const[y,N]=s.useState(!1),[k,w]=s.useState(null),[C,I]=s.useState(!0),D=c.useHistory(),[R,F]=s.useState(!1),[L,P]=s.useState(!1),[G,A]=s.useState(!1),z=s.useContext(t);s.useEffect((()=>{T(),a({path:o,loading:z.globalStateData.setIsLoadingData,ok:e=>{var s;!0===(null==e?void 0:e.status)?(null==(s=e.data)?void 0:s.length)>0?(f(e.data),I(!1)):I(!1):(I(!1),v("Failed to fetch roles. Invalid response.")),S(!1)},fail:e=>{v("Failed to fetch roles. Please try again later."),S(!1),I(!1)}})}),[]);const T=()=>{let e=!1,s=!1,t=!1;const a=i("Roles & permissions");1==(null==a?void 0:a.get_AddAccessData)&&(e=!0),s=1==(null==a?void 0:a.accessUpdateData),(null==a?void 0:a.accessDeleteData)&&(t=!0),P(e),F(s),A(t)};return e.jsxs(p,{children:[e.jsx(h,{fluid:!0,className:"main-heading-wrapper mb0",children:e.jsx(h,{className:"mhw-container",children:e.jsx("div",{className:"mhwc-left",children:e.jsx("h1",{children:e.jsx("div",{className:"mh-wrapper",children:e.jsx("span",{className:"mh-text",children:"Roles & Permission"})})})})})}),e.jsxs(h,{className:"page-header box-bottom-space",children:[e.jsx("div",{className:(L?"click-on":"click-off")+" mhwc-right d-flex justify-content-end marginB10",children:e.jsx(r,{id:"dl_add_button",icon:l,size:"lg",shadow:!0,tooltip:"Add new role",onClick:()=>{D.push("/preferences/newpermissions")}})}),y&&e.jsx(j,{size:"md",para:"Are you sure you want to delete this role?",pClass:"text-center mb0",secondaryButtonText:"Cancel",primaryButtonText:"OK",buttonClicked:e=>{!0===e?(k&&a({path:d,params:{id:k},loading:z.globalStateData.setIsLoadingData,method:"POST",ok:e=>{!0===e.status?f(x.filter((e=>e.securityGroupId!==k))):alert("Failed to delete the role. Please try again.")},fail:e=>{alert("Failed to delete the role. Please try again later.")}}),N(!1)):(N(!1),w(null))}}),x.length>0?e.jsx("div",{children:e.jsx(m,{config:{take:5,skip:0},data:x,pageable:!0,settings:{total:x.length},column:[{field:"securityGroupName",filter:"text",title:"Role name",width:"240",cell:s=>e.jsx("td",{children:e.jsx("span",{children:s.dataItem.securityGroupName})})},{field:"action",title:"Actions",width:"240",cell:s=>e.jsx(e.Fragment,{children:e.jsx("td",{children:e.jsxs(n,{className:"float-end",children:[e.jsx("div",{className:R?"":"click-off",children:e.jsx(r,{tooltip:"Info",icon:"icon-rs-pencil-edit-medium",onClick:()=>{var e;e=s.dataItem.securityGroupId,D.push(`/preferences/newpermissions?id=${e}`)}})}),e.jsx("div",{className:G?"":"click-off",children:e.jsx(r,{tooltip:"Users",icon:"icon-rs-delete-medium",onClick:()=>{var e;e=s.dataItem.securityGroupId,w(e),N(!0)}})})]})})})}]})}):C?e.jsx(h,{className:"page-header box-bottom-space box-design",children:e.jsx(u,{count:5,isError:!0,children:e.jsx("div",{})})}):e.jsx(h,{className:"page-header box-bottom-space box-design",children:e.jsx(u,{count:5,isError:!0,children:e.jsxs("div",{className:"nodata-bar add-func",children:[e.jsx("i",{className:"icon-rs-alert-medium icons-md orange-medium"}),e.jsx("p",{children:"No data available"})]})})})]})]})};export{x as default};
