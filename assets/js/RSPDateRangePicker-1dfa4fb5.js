import{j as e}from"./pdf-editor-e8cb7a76.js";import{R as t,r as a}from"./react-vendor-379f659a.js";import{h as s}from"./utils-16c7e021.js";import{k as n,w as l,i as o}from"./kendo-5d73125a.js";import{Y as c,ar as d,bd as r,B as i,E as u}from"./index-23a09c37.js";const m=t=>e.jsx(n,{...t,anchorAlign:{horizontal:"left",vertical:"middle"},popupAlign:{horizontal:"right",vertical:"middle"}}),D=t=>(t.value,e.jsx("label",{className:"pe-none",children:e.jsx(l,{...t,label:"From",format:{skeleton:"MMM dd, yyyy"}})})),h=t=>(t.value,e.jsx("label",{className:"pe-none",children:e.jsx(l,{...t,label:"To",format:{skeleton:"MMM dd, yyyy"}})})),p=e=>s().add(e,"d").toDate(),g=()=>{const e=c();if(null!==(null==e?void 0:e.createdDate)&&void 0!==(null==e?void 0:e.createdDate)){const t=new Date(e.createdDate);return((new Date).getTime()-t.getTime())/864e5>29?p(-29):s(e.createdDate).toDate()}return s((new Date).toJSON()).toDate()},k=e=>{const t=c();if(null==t?void 0:t.createdDate){const t=new Date(e);return(new Date-t)/864e5>30?p(-29):g()}return s((new Date).toJSON()).toDate()},f=t.memo((({isShowDateRangePicker:t,data:n,initialDateData:l,enable:f,class:v,closeDateRangePicker:w,cancelBtnClicked:x,applyBtnClicked:j})=>{const y=a.useRef(),C=a.useRef(),b=a.useMemo((()=>c()),[]),[E,M]=a.useState((()=>({startDate:"All Time",endDate:"",customDate:!1,customDropdown:t||!1,startEndDate:{start:k(null==b?void 0:b.createdDate),end:p(0)},customStartEndDate:{start:p(-29),end:p(0)},clicked:!1,showDatepicker:!1,clickedField:"",newAccountAge:!1}))),N=a.useMemo((()=>({allTime:[g(),p(0)],last7Days:[p(-6),p(0)],last30Days:[p(-29),p(0)]})),[]);a.useMemo((()=>({animate:!1,anchorAlign:{horizontal:"center",vertical:"bottom"},popupAlign:{horizontal:"center",vertical:"top"},popupClass:"range-calender"})),[]);const A=a.useCallback((e=>{const t=new Date(e).toDateString().slice(4,15);return`${t.slice(0,6)},${t.slice(6,11)}`}),[]),L=a.useCallback((e=>{var t,a;try{if(y.current&&!y.current.contains(e.target)){if(null==(a=null==(t=null==e?void 0:e.target)?void 0:t.className)?void 0:a.includes("k-"))return;M((e=>({...e,customDropdown:!1,customDate:!1})))}}catch(s){}}),[]),S=a.useCallback((e=>{const{value:t}=e,a={start:t.start||p(-150),end:t.end||p(0)};M((e=>({...e,[e.customDate?"customStartEndDate":"startEndDate"]:a})))}),[]),F=a.useCallback(((e,t)=>{M((a=>({...a,startEndDate:{start:e,end:t}})))}),[]),$=a.useCallback((e=>{null==w||w(e,E.startEndDate)}),[w,E.startEndDate]),T=a.useCallback((()=>{if(!(null==b?void 0:b.createdDate))return;const e=new Date,t=new Date(b.createdDate),a=Math.abs(e-t),s=Math.ceil(a/864e5);M((e=>({...e,newAccountAge:s<30})))}),[null==b?void 0:b.createdDate]),R=a.useCallback((()=>{null==x||x()}),[x]),z=a.useCallback((()=>{if(!w)return;const e=E.customDate?{...E.customStartEndDate}:{...E.startEndDate};E.customDate&&M((t=>({...t,startEndDate:e}))),e.start=s(e.start).add(1,"day"),e.end=s(e.end).add(1,"day"),w(!1,e),null==j||j(!0)}),[w,j,E.customDate,E.customStartEndDate,E.startEndDate]),B=a.useCallback((()=>{$(!0),M((e=>({...e,customDropdown:!e.customDropdown})))}),[$]),I=a.useCallback(((e,t)=>({onMouseEnter:()=>F(N[t][0],N[t][1]),onClick:()=>{M((t=>({...t,clicked:!0,clickedField:e}))),$(!1)},onMouseLeave:()=>{M((e=>e.clicked?{...e,clicked:!1}:{...e,startEndDate:{start:g(),end:p(0)}}))}})),[F,N,$]),J=a.useMemo((()=>I("All time","allTime")),[I]),O=a.useMemo((()=>I("Last 7 days","last7Days")),[I]),P=a.useMemo((()=>I("Last 30 days","last30Days")),[I]),Y=a.useCallback((()=>{M((e=>({...e,customDate:!0,clickedField:"Custom ranges"})))}),[]);a.useEffect((()=>(document.addEventListener("mousedown",L),(null==n?void 0:n.from)&&(null==n?void 0:n.to)&&M((e=>({...e,startEndDate:{start:s(n.from),end:s(n.to)}}))),T(),()=>{document.removeEventListener("mousedown",L)})),[L,null==n?void 0:n.from,null==n?void 0:n.to,T]),a.useEffect((()=>{if(!0===l)try{const e={start:k(null==b?void 0:b.createdDate),end:p(0)};M((t=>({...t,startEndDate:e})))}catch(e){}}),[l,null==b?void 0:b.createdDate]),a.useEffect((()=>{E.customDropdown&&!1===t&&M((e=>({...e,customDropdown:!1,customDate:!1})))}),[E.customDropdown,t]);const q=a.useMemo((()=>`${A(E.startEndDate.start-1)} - ${A(E.startEndDate.end-1)}`),[E.startEndDate.start,E.startEndDate.end,A]),G=a.useMemo((()=>`date-range-view-container ${f?"":"click-off"} ${v||""} ${E.customDropdown?"open":""}`),[f,v,E.customDropdown]),H=a.useMemo((()=>`date-range-dropdown ${E.customDropdown?"open":""} ${E.customDate?"calendar-box":""}`),[E.customDropdown,E.customDate]);return e.jsxs("div",{ref:y,className:G,children:[e.jsxs("div",{className:"date-title",onClick:B,children:[e.jsx(d,{icon:r}),e.jsx("span",{children:q}),e.jsx(d,{icon:"icon-custon-arrow-down-small"})]}),e.jsxs("div",{className:H,children:[E.customDate&&e.jsxs("div",{ref:C,className:"date-range-box dr-right",children:[e.jsx(o,{onChange:S,popup:m,popupSettings:{appendTo:C.current},max:new Date,show:E.customDate,startDateInput:D,endDateInput:h}),e.jsx("ul",{className:"d-none",children:e.jsx("li",{children:e.jsx("small",{className:"text-justify",children:"If the default handling of the dropdown menu and toggle aren't to your liking, you can customize them, by using the more basic Component to explicitly specify the Toggle and Menu components"})})})]}),e.jsxs("div",{className:"date-range-box dr-left",children:[e.jsxs("ul",{className:"date-list-view",children:[e.jsx("li",{className:"All time"===E.clickedField?"highLightClass":"",...J,children:"All time"}),e.jsx("li",{className:"Last 7 days"===E.clickedField?"highLightClass":"",...O,children:"Last 7 days"}),e.jsx("li",{className:"Last 30 days"===E.clickedField||!1===E.newAccountAge&&""===E.clickedField?"highLightClass":"",...P,children:"Last 30 days"}),e.jsx("li",{className:"Custom ranges"===E.clickedField?"highLightClass":"",onClick:Y,children:"Custom range"})]}),e.jsxs("div",{className:"d-flex justify-content-end btn-small",children:[e.jsx(i,{onClick:R,children:"Cancel"}),e.jsx(u,{onClick:z,children:"Apply"})]})]})]})]})}));export{m as C,f as R,D as a,h as b,p as g};
