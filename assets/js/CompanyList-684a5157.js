import{j as e}from"./pdf-editor-8270ab34.js";import{i as t,r as a}from"./react-vendor-379f659a.js";import{L as l}from"./LayoutPageWrapper-4f1f1143.js";import{K as n}from"./index-21f205f2.js";import{z as s,aB as i,Y as o,e9 as d,M as r,fo as c,bK as u,a0 as m,aJ as g,av as p,ar as v,b6 as h,E as x,ad as f,fp as I,ab as S,fq as j,X as y,ah as D,bX as C,al as N,U as b,eq as T,fr as w,fs as k,ft as A,aC as F,eL as L,fu as E,fv as M,fw as _,aa as O,aS as z,fx as R,az as U}from"./index-74701706.js";import{c as B,d as G,e as K}from"./AccountSetup-3654028b.js";import"./constants-82903eb8.js";import{S as P}from"./SkeletonTable-8cb486e7.js";import{RSErrorPopup as $,RSConfirmAlert as q}from"./RSConfirmAlert-deac68bb.js";import{R as Z,L as V}from"./RSKendoDropdown-01650470.js";import{a as H}from"./RSCheckbox-2fef59cb.js";import"./style-a86a43a5.js";import{M as Y}from"./kendo-5d73125a.js";import{A as J}from"./Skeleton-fd850846.js";import{k as W,a as X,b as Q,c as ee,d as te}from"./constantObject-ca27cf51.js";import{i as ae}from"./utils-16c7e021.js";import{R as le}from"./RSFormGroup-183a553e.js";import"./RSDropdowns-57ad4a66.js";import{R as ne}from"./RSIcon-70da13ba.js";import{M as se,R as ie,a as oe,C as de}from"./ui-e848d714.js";import{l as re,a as ce}from"./CompanyListConstants-93682152.js";import"./get-4aa85b1a.js";import"./drag-drop-a86b0275.js";import"./RSUploadImageComponent-ee71ee32.js";import"./charts-f2096496.js";import"./map-99306e6f.js";import"./maps-b8c6f010.js";import"./maker-47de0917.js";import"./RSBrandLogo-ad1f6d47.js";import"./export-data-a2401fa3.js";import"./index-11ed5abc.js";const ue=l=>{t();const n=a.useContext(s),C=a.useContext(i),[N,b]=ae({isLoading:!0,isError:!1}),[T,w]=a.useState([]),[k,A]=a.useState([]),[F,L]=a.useState([]),[E,M]=a.useState([]),[_,O]=a.useState(null),[z,R]=a.useState(null),[U,B]=a.useState(null),[G,K]=a.useState(null),[P,q]=a.useState(null),[de,re]=a.useState([]),[ce,ue]=a.useState(W),[me,ge]=a.useState(null),[pe,ve]=a.useState([]),[he,xe]=a.useState(X),[fe,Ie]=a.useState(null),[Se,je]=a.useState([]),[ye,De]=a.useState(Q),[Ce,Ne]=a.useState(null),[be,Te]=a.useState([]),[we,ke]=a.useState(ee),[Ae,Fe]=a.useState(null),[Le,Ee]=a.useState([]),[Me,_e]=a.useState(te),[Oe,ze]=a.useState(!1),[Re,Ue]=a.useState(null),[Be,Ge]=a.useState([]),[Ke,Pe]=a.useState(null),[$e,qe]=a.useState([]),[Ze,Ve]=a.useState(null),[He,Ye]=a.useState([]),[Je,We]=a.useState(!1),[Xe,Qe]=a.useState(null),[et,tt]=a.useState(!1),[at,lt]=a.useState(null);a.useEffect((()=>{let e=o();(null==e?void 0:e.isAgency)&&tt(null==e?void 0:e.isAgency),C.apiStateData.setIsReloadData(!1),window.scroll(0,0),it(),nt(),Ye([{link:"https://"+d,id:0,error:null}])}),[C.apiStateData.getIsReloadData]),void 0!==localStorage.getItem("sldomadd")&&null!==localStorage.getItem("sldomadd")&&localStorage.getItem("sldomadd")&&window.scrollTo(0,500);const nt=()=>{const e={clientId:null==l?void 0:l.ClientId};r({path:c,params:e,sessionOut:n.globalStateData.setSessionOutData,ok:e=>{var t,a,l,n,s;if(e.status){if(ot(e.data),st((null==(t=null==e?void 0:e.data)?void 0:t.currencyId)||0),b((e=>(e.isLoading=!1,e.isError=!1,e))),(null==(l=null==(a=null==e?void 0:e.data)?void 0:a.brandDomainMaster)?void 0:l.length)>0){let t=[];null==(s=null==(n=null==e?void 0:e.data)?void 0:n.brandDomainMaster)||s.map(((e,a)=>{t.push({link:e.link,id:a,error:null})})),Ye(t)}}else st(),b((e=>(e.isError=!0,e)))},fail:e=>{b((e=>(e.isError=!0,e)))}})},st=e=>{let t=o();if(null==t||t.isAccSettingsCompleted,0===e){const e=u();if(void 0!==localStorage.getItem("pdetails")&&null!==localStorage.getItem("pdetails")){let t=m(localStorage.getItem("pdetails"));ue(e.currencyMaster.filter((e=>e.currencyId===(null==t?void 0:t.currencyID)))[0]||W),xe(e.languageMaster.filter((e=>e.languageId===(null==t?void 0:t.defaultLanguageId)))[0]||X),De(e.timeZone.filter((e=>e.timezoneId===(null==t?void 0:t.defaultTimeZoneID)||0))[0]||Q),ke(e.dateFormat.filter((e=>e.dateFormatId===(null==t?void 0:t.defaultDateformatID)||0))[0]||ee),_e(e.timeFormat.filter((e=>e.timeFormatId===(null==t?void 0:t.defaultTimeFormatID)||0))[0]||te)}else{let t=m(localStorage.getItem("lsTimzoneData")),a=m(localStorage.getItem("lsUserData"));null!==(null==a?void 0:a.currencyId)&&void 0!==(null==a?void 0:a.currencyId)&&ue(e.currencyMaster.filter((e=>e.currencyId===(null==a?void 0:a.currencyId)))[0]||W),null!==t&&(xe(e.languageMaster.filter((e=>e.languageId===(null==t?void 0:t.languageId)))[0]||X),e.timeZone.filter((e=>e.timezoneId===(null==t?void 0:t.timezoneId)||0))[0],De(e.timeZone.filter((e=>e.timezoneId===(null==t?void 0:t.timezoneId)||0))[0]||Q),ke(e.dateFormat.filter((e=>e.dateFormatId===(null==t?void 0:t.dateFormatId)||0))[0]||ee),_e(e.timeFormat.filter((e=>e.timeFormatId===(null==t?void 0:t.timeFormatId)||0))[0]||te))}}},it=()=>{const e=u();re(e.currencyMaster),ve(e.languageMaster),je(e.timeZone),Te(e.dateFormat),Ee(e.timeFormat)},ot=e=>{Ue(e);const t=u();ue(t.currencyMaster.filter((t=>t.currencyId===e.currencyId))[0]||W),xe(t.languageMaster.filter((t=>t.languageId===e.languageId))[0]||X),De(t.timeZone.filter((t=>t.timezoneId===e.timezoneId))[0]||Q),ke(t.dateFormat.filter((t=>t.dateFormatId===e.dateFormatId))[0]||ee),_e(t.timeFormat.filter((t=>t.timeFormatId===e.timeformatId))[0]||te),ze(e.isDayLight||!1),Ge((null==e?void 0:e.smartlinkMaster)||[]),qe((null==e?void 0:e.campaignlinkMaster)||[]),M((null==e?void 0:e.productCategoryMaster)||[]),w((null==e?void 0:e.campaignTypeMaster)||[]),A((null==e?void 0:e.engagementMaster)||[]),L((null==e?void 0:e.conversionMaster)||[])},dt=(e,t)=>{r({path:I,params:e,loading:n.globalStateData.setIsLoadingData,sessionOut:n.globalStateData.setSessionOutData,ok:e=>{t(e.status)},fail:e=>{t(!1)}})};return g().addons.filter(((e,t)=>1===(null==e?void 0:e.addonId))),e.jsxs("div",{children:[e.jsxs(se,{show:null!=at,centered:!0,size:"md",children:[e.jsxs(se.Header,{children:[e.jsx("h2",{children:"Client"}),e.jsx(ne,{mainClass:"close",size:"md",handleClose:()=>{lt(null)}})]}),e.jsx(se.Body,{children:e.jsx("p",{children:at})})]}),!0===Je&&e.jsx($,{headerTitle:"Settings",para:Xe,primaryButtonText:"OK",buttonClicked:e=>{Qe(null),We(!1)}}),N.isLoading?e.jsx("div",{className:"settings-container",children:e.jsx("div",{className:"box-design ",children:e.jsx(J,{isError:N.isError})})}):e.jsxs("div",{className:"settings-container",children:[e.jsxs("div",{className:((null==l?void 0:l.isSupportUser)?"click-off":"")+" box-design",children:[e.jsx(le,{children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsx(Z,{required:!0,label:"Currency",textField:"currencyName",dataItemKey:"currencyId",data:de,value:ce||W,errorMessage:null!=P&&P,onChange:e=>{p("currencyDropdownItem",e.target.value),ue(e.target.value),q(null)}})}),e.jsx(oe,{children:e.jsx(Z,{required:!0,label:"Date format",textField:"dateFormat",dataItemKey:"dateFormatId",data:be,value:we||ee,errorMessage:null!=Ce&&Ce,onChange:e=>{p("dateFormatDropdownItem",e.target.value),ke(e.target.value),Ne(null)}})})]})}),e.jsx(le,{children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsx(Z,{required:!0,label:"Language",textField:"languageName",dataItemKey:"languageId",data:pe,value:he||X,errorMessage:null!=me&&me,onChange:e=>{p("languageDropdownItem",e.target.value),xe(e.target.value),ge(null)}})}),e.jsx(oe,{children:e.jsx(Z,{required:!0,label:"Time format",textField:"timeFormat",dataItemKey:"timeFormatId",data:Le,value:Me||te,errorMessage:null!=Ae&&Ae,onChange:e=>{p("timeFormatDropdownItem",e.target.value),_e(e.target.value),Fe(null)}})})]})}),e.jsx(le,{children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsx(Z,{required:!0,label:"Time zone",textField:"timezoneName",dataItemKey:"timezoneId",data:Se,value:ye||Q,errorMessage:null!=fe&&fe,onChange:e=>{p("timeZoneDropdownItem",e.target.value),De(e.target.value),Ie(null)}})}),e.jsx(oe,{children:e.jsx("div",{className:ye.isDayLight?"":"click-off",children:e.jsx(H,{className:"marginT6",checked:Oe,cb:e=>ze(e),lbl:"Daylight savings"})})})]})}),e.jsx("div",{className:"marginY20",children:e.jsxs(ie,{children:[e.jsx(oe,{md:4,children:e.jsxs("div",{children:[_?e.jsx("div",{className:"validation-message multi-select-valid-msg",style:{top:-23,left:12},children:_}):null,e.jsx("h4",{className:"mb10",children:"Communication types"}),e.jsxs("div",{className:"chips-container",children:[e.jsx("div",{className:"border-box-chips",children:e.jsx("div",{className:"multi-camp-type-max",children:e.jsx(Y,{placeholder:"Enter communication types",autoClose:!0,listNoDataRender:V,value:T,textField:"campaignTypeValue",dataItemKey:"campaignTypeId",allowCustom:!0,filterable:!0,onFilterChange:e=>{e.filter.value.length>75&&O("Reached max count")},onChange:e=>{const t=e.target.value;var a="add";if(T.length>t.length&&(a="delete"),"add"===a&&t.length<=15){let e=t.reduce(((e,t)=>e.find((e=>e.campaignTypeValue.toLowerCase()===t.campaignTypeValue.toLowerCase()))?e:e.concat([t])),[]).filter((e=>{var t;if(!/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e.campaignTypeValue))return""!==(null==(t=e.campaignTypeValue)?void 0:t.trim())}));return O(null),void w(e)}if("add"===a&&t.length>15)return O("Added maximum of communication types"),void setTimeout((()=>{O(null)}),3e3);((e,t)=>{let a="",l=[];if(T.map((t=>{0===e.filter((e=>t.campaignTypeId===e.campaignTypeId)).length&&(t.selected=!1,l.push(t))})),l.length>0){let e={clientId:f(),categoryName:l[0].campaignTypeValue,categoryType:"Communication Types"};a=l[0].campaignTypeValue,dt(e,(e=>{t("delete",e)}))}else t("add",!0)})(t,((e,a,l)=>{if("add"===e||"delete"===e&&!0===a){w(t);let e=t.length>0?null:"Add communication types";O(e)}else"delete"===e&&!1===a&&(w(T),O("Communication type already mapped. Cannot be deleted."))}))}})})}),e.jsx("small",{className:"fs12",children:"Maximum of 15 communication types can be added"})]})]})}),e.jsx(oe,{md:4,children:e.jsxs("div",{children:[z?e.jsx("div",{className:"validation-message multi-select-valid-msg",style:{top:-23,left:12},children:z}):null,U?e.jsx("div",{className:"validation-message multi-select-valid-msg",style:{top:-23,left:12},children:U}):null,e.jsx("h4",{className:"mb10",children:"Conversion types"}),e.jsxs("div",{className:"chips-container",children:[e.jsxs("div",{className:"border-box-chips",children:[e.jsx("h6",{children:"Engagement"}),e.jsx("div",{className:"multi-engage-max",children:e.jsx("div",{className:"position-relative",children:e.jsx(Y,{value:k,autoClose:!0,listNoDataRender:V,placeholder:"Enter engagement types",textField:"conversionName",dataItemKey:"conversionTypeId",allowCustom:!0,filterable:!0,onFilterChange:e=>{e.filter.value.length>75&&R("Reached max count")},onChange:e=>{const t=e.target.value;var a="add";if(k.length>t.length&&(a="delete"),"add"===a&&t.length<=15){let e=t.reduce(((e,t)=>e.find((e=>e.conversionName.toLowerCase()===t.conversionName.toLowerCase()))?e:e.concat([t])),[]).filter((e=>{var t;if(!/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e.conversionName))return""!==(null==(t=e.conversionName)?void 0:t.trim())}));return R(null),void A(e)}if("add"===a&&t.length>15)return R("Added maximum engagement types"),void setTimeout((()=>{R(null)}),3e3);((e,t)=>{let a=[];if(k.map((t=>{0===e.filter((e=>t.conversionName===e.conversionName)).length&&(t.selected=!1,a.push(t))})),a.length>0){let e={clientId:f(),categoryName:a[0].conversionName,categoryType:"Conversion Types",goalType:"E"};dt(e,(e=>{t("delete",e)}))}else t("add",!0)})(t,((e,a)=>{if("add"===e||"delete"===e&&!0===a){A(t);let e=t.length>0?null:"Add engagement types";R(e)}else"delete"===e&&!1===a&&(A(k),R("Engagement type already mapped. Cannot be deleted."),setTimeout((()=>{R(null)}),3e3))}))}})})}),e.jsx("div",{className:"dotted-line"}),e.jsx("h6",{children:"Conversion"}),e.jsxs("div",{className:"multi-conversion-max",children:[e.jsx("div",{className:"position-relative"}),e.jsx(Y,{value:F,listNoDataRender:V,placeholder:"Enter conversion types",textField:"conversionName",dataItemKey:"conversionTypeId",allowCustom:!0,filterable:!0,onFilterChange:e=>{e.filter.value.length>75&&B("Reached max count")},onChange:e=>{const t=e.target.value;var a="add";if(F.length>t.length&&(a="delete"),"add"===a&&t.length<=15){let e=t.reduce(((e,t)=>e.find((e=>e.conversionName.toLowerCase()===t.conversionName.toLowerCase()))?e:e.concat([t])),[]).filter((e=>{var t;if(!/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e.conversionName))return""!==(null==(t=e.conversionName)?void 0:t.trim())}));return B(null),void L(e)}if("add"===a&&t.length>15)return B("Added maximum conversion types"),void setTimeout((()=>{B(null)}),3e3);((e,t)=>{let a=[];if(F.map((t=>{0===e.filter((e=>t.conversionName===e.conversionName)).length&&(t.selected=!1,a.push(t))})),a.length>0){let e={clientId:f(),categoryName:a[0].conversionName,categoryType:"Conversion Types",goalType:"C"};dt(e,(e=>{t("delete",e)}))}else t("add",!0)})(t,((e,a)=>{if("add"===e||"delete"===e&&!0===a){L(t);let e=t.length>0?null:"Add conversion types";B(e)}else"delete"===e&&!1===a&&(L(F),B("Conversion type is already mapped. Cannot be deleted."),setTimeout((()=>{B(null)}),3e3))}))}})]})]}),e.jsx("small",{className:"fs12",children:"Maximum of 15 conversion types can be added"})]})]})}),e.jsx(oe,{md:4,children:e.jsxs("div",{children:[G?e.jsx("div",{className:"validation-message multi-select-valid-msg",style:{top:-23,left:12},children:G}):null,e.jsx("h4",{className:"mb10",children:"Product categories"}),e.jsxs("div",{className:"chips-container",children:[e.jsx("div",{className:"border-box-chips",children:e.jsx("div",{className:"multi-product-cate-max",children:e.jsx("div",{className:"position-relative",children:e.jsx(Y,{value:E,listNoDataRender:V,placeholder:"Enter product categories",textField:"friendlyName",dataItemKey:"categoryId",allowCustom:!0,filterable:!0,onFilterChange:e=>{e.filter.value.length>75&&K("Reached max count")},onChange:e=>{const t=e.target.value;var a="add";if(E.length>t.length&&(a="delete"),"add"===a&&t.length<=15){let e=t.reduce(((e,t)=>e.find((e=>e.friendlyName.toLowerCase()===t.friendlyName.toLowerCase()))?e:e.concat([t])),[]).filter((e=>{var t;if(!/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e.friendlyName))return""!==(null==(t=e.friendlyName)?void 0:t.trim())}));return K(null),void M(e)}if("add"===a&&t.length>15)return K("Added maximum product categories"),void setTimeout((()=>{K(null)}),3e3);((e,t)=>{let a=[];if(E.map((t=>{0===e.filter((e=>t.friendlyName===e.friendlyName)).length&&(t.selected=!1,a.push(t))})),a.length>0){let e={clientId:f(),categoryName:a[0].friendlyName,categoryType:"Product Categories"};dt(e,(e=>{t("delete",e)}))}else t("add",!0)})(t,((e,a)=>{if("add"===e||"delete"===e&&!0===a){M(t);let e=t.length>0?null:"Add product categories";K(e)}else"delete"===e&&!1===a&&(M(E),K("Product category already mapped. Cannot be deleted."),setTimeout((()=>{K(null)}),3e3))}))}})})})}),e.jsx("small",{className:"fs12",children:"Maximum of 15 product categories can be added"})]})]})})]})}),e.jsx("div",{className:"marginY20",children:e.jsx(ie,{children:e.jsx(oe,{md:4,children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsx("h4",{className:"mb10",children:"Custom Domain"}),e.jsx(v,{icon:"icon-rs-circle-question-mark-medium ml20",size:"md",tooltip:"Generic domain (slg.smartdx.co) will be rebranded to branded domain (link.brandname.io) to enable contact support team."})]}),e.jsx("div",{className:"chips-container click-off",children:e.jsx("div",{className:"border-box-chips",children:e.jsx("div",{className:"multi-camp-type-max",children:e.jsx(Y,{placeholder:"Enter communication types",autoClose:!0,listNoDataRender:V,value:He,textField:"link",dataItemKey:"id",allowCustom:!1,onChange:e=>{}})})})})]})})})})]}),e.jsxs("div",{className:"btn-container d-flex justify-content-end",children:[e.jsx(h,{onClick:()=>{null==l||l.backBtn(0)},children:"Back"}),e.jsx(x,{className:((null==l?void 0:l.isSupportUser)?"click-off":"")+" ",onClick:()=>{(()=>{var e;if(-1===ce.currencyId)return void q("Select currency");if(-1===we.dateFormatId)return void Ne("Select date format");if(-1===he.languageId)return void ge("Select language");if(-1===Me.timeFormatId)return void Fe("Select time format");if(-1===ye.timezoneId)return void Ie("Select timezone");let t={data:{timeZoneId:ye.timezoneId,timeZoneName:ye.timezoneName,dateFormat:we.dateFormat,timeFormat:Me.timeFormat}};S(t);const a={clientId:null==l?void 0:l.ClientId,currencyId:ce.currencyId,dateFormatId:we.dateFormatId,languageId:he.languageId,timeformatId:Me.timeFormatId,timezoneId:ye.timezoneId,isDayLight:Oe};let s=[];if(0===T.length)return void O("Add communication types");T.map((e=>{let t={CampaignTypeValue:e.campaignTypeValue};s.push(t)})),a.campaignTypeMaster=s;let i=[];if(null==k||0===k.length)return void R("Add engagement types");if(k.map((e=>{let t=e.conversionName.split(" "),a=t[0].charAt(0);t.length>1&&(a+=t[1].charAt(0));let l={ConversionName:e.conversionName,GoalType:"E",ConversionNameShort:e.conversionName.toUpperCase()};i.push(l)})),null==F||0===F.length)return void B("Add conversion types");let d=!1,c=[...He];if(c.length>0&&(c.map(((e,t)=>{if(!1===d&&null===e.error)return null===e.link||void 0===e.link||""===e.link?(e.err="Enter custom domain",void(d=!0)):void 0;d=!0})),!0===d))return void Ye(c);if(F.map((e=>{let t=e.conversionName.split(" "),a=t[0].charAt(0);t.length>1&&(a+=t[1].charAt(0));let l={ConversionName:e.conversionName,GoalType:"C",ConversionNameShort:e.conversionName.toUpperCase()};i.push(l)})),a.conversionMaster=i,null==E||0===E.length)return void K("Add product types");let u=[];E.map(((e,t)=>{let a={Categoryname:e.friendlyName};u.push(a)})),a.productCategoryMaster=u;const m=o();a.sourceType=D(),a.tenantName=(null==(e=null==m?void 0:m.clientDetailsLocalization)?void 0:e.instanceName)||null;const p={...Ke,...Ze};Object.keys(p).map((e=>{a[e]=p[e]}));let v=g(),h=v.addons.filter(((e,t)=>1===(null==e?void 0:e.addonId)));null!=v&&(3!==v.planId&&4!==v.planId||!h.length||(a.brandDomainMaster=He)),null==l||l.ClientId,ce.currencyId,we.dateFormatId,he.languageId,Me.timeFormatId,ye.timezoneId,r({path:j,params:a,loading:n.globalStateData.setIsLoadingData,sessionOut:n.globalStateData.setSessionOutData,ok:e=>{if(e.status){null==l||l.netxBtn(!0),null==l||l.removeUpdateContact(!0);const e=new CustomEvent("updateCompanyDetails",{detail:{message:"Hello from custom event!"}});window.dispatchEvent(e)}else lt((null==e?void 0:e.message)||"Something happend"),Qe((null==e?void 0:e.message)||y),We(!0),localStorage.removeItem("sldomadd")},fail:e=>{lt((null==e?void 0:e.message)||"Something happend")}})})()},children:"Update"})]})]})]})},me=({list:t,onNavigate:l,getAddAccessData:n,getUpdateAccessData:s,getDeleteAccessData:i})=>{const{clientId:o,clientName:d,logoPath:r,createdDate:c,licenseTypeId:u,clientBranchTypeId:m,isActivated:g,accStatus:p}=t,v=g?"license-active":"activateAlert",h=C().slice(0,-1),[x,f]=a.useState(`${h}${r}`);return e.jsxs("div",{className:`rs-card-02 rc-tl ${v} `,children:[e.jsx("div",{className:"rc-top",children:e.jsx("div",{className:"license_type",children:e.jsx("img",{src:re(u)})})}),e.jsxs("div",{className:"rc-info",children:[e.jsx("div",{className:"rci-left",children:e.jsx("div",{className:"company_logo",children:e.jsx("img",{src:x,alt:"Company image",onError:()=>{f(`https://apigd.smartdx.co${r}`)}})})}),e.jsxs("div",{className:"rci-right",children:[e.jsx("div",{className:"rci-company",children:d}),e.jsxs("div",{className:"rct-created",children:[e.jsx("span",{className:"rctc-on-text",children:"Created on:"}),e.jsx("span",{className:"rctc-date",children:N(c,!1)})]})]})]}),e.jsx("div",{className:"rc-bottom",children:e.jsxs("ul",{className:"rs-list-inline rli-al-2 text-right",children:[e.jsx("li",{className:s?"click-on":"click-off",onClick:()=>l({clientId:o,text:"Info"}),children:e.jsx(b,{position:"top",text:"Info",children:e.jsx("i",{className:`${T} icon-mini`,id:"rs_data_circle_info"})})}),e.jsx("li",{className:s?"click-on":"click-off",onClick:()=>l({clientId:o,text:"Users",clientName:d}),children:e.jsx(b,{position:"top",text:"Users",children:e.jsx("i",{className:`${w} icon-mini`,id:"rs_data_circle_user"})})}),e.jsx("li",{className:s?"click-on":"click-off",onClick:()=>l({clientId:o,text:"Settings"}),children:e.jsx(b,{position:"top",text:"Settings",children:e.jsx("i",{className:`${k} icon-mini`})})})]})})]})},ge=i=>{const d=t(),u=a.useContext(s),[g,p]=a.useState(null),[h,x]=a.useState({}),[f,I]=a.useState("Client list"),[j,y]=a.useState(null),[D,C]=a.useState(null),[b,T]=a.useState(!0),[w,k]=a.useState(null),[$,Z]=a.useState(null);a.useState(null==i?void 0:i.mainAgencyHeader);const[V,H]=a.useState(!0),[Y,J]=a.useState(!0);a.useState([{status:"inProcess",steps_title:"Client details",icons:"icon-rs-tick-mini icon-xs white"},{status:"",steps_title:"Settings",icons:"icon-rs-mini blue"}]),a.useState(!1);const[W,X]=a.useState(!1),[Q,ee]=a.useState([]),[te,ae]=a.useState(!0),[le,ne]=a.useState(!1),[se,re]=a.useState(!1),[ge,pe]=a.useState(!1),[ve,he]=a.useState(!1),[xe,fe]=a.useState([]),[Ie,Se]=a.useState([{title:"Client details",disable:!1,name:"CONTACT_DETAILS",icons:"icon-rs-tick-mini icon-xs white"},{title:"Settings",disable:!1,name:"SETTINGS",icons:"icon-rs-mini blue"}]),[je,ye]=a.useState("CONTACT_DETAILS"),[De,Ce]=a.useState(["CONTACT_DETAILS"]),[Ne,be]=a.useState(!1),[Te,we]=a.useState(null),[ke,Ae]=a.useState(null),[Fe,Le]=a.useState(""),[Ee,Me]=a.useState(!1),[_e,Oe]=a.useState(!1),[ze,Re]=a.useState(!1),[Ue,Be]=a.useState(!1),Ge=()=>{Se([{title:"Client details",disable:!1,name:"CONTACT_DETAILS",icons:"icon-rs-tick-mini icon-xs white"},{title:"Settings",disable:!1,name:"SETTINGS",icons:"icon-rs-mini blue"}]),ye("CONTACT_DETAILS"),Ce(["CONTACT_DETAILS"])},Ke=()=>{u.globalStateData.setKeyContactInfoData({...u.globalStateData.getKeyContactInfoData,CompanyDetails:{parentCompany:null,preferredRegionsData:[],preferredRegionsitem:null,companyData:[{id:"1",label:"LOC"},{id:"2",label:"RHQ"},{id:"3",label:"GHQ"}],company:null,companyValue:null,website:null,address:null,city:null,zipCode:null,countryData:[],countryDropdownItem:null,stateData:[],stateDropdownItem:null,cityData:[],cityDropdownItem:null,preferredRegionsCheckBox:!1,regionDropdownItem:null,regionData:[],industryData:[],industryDropdownItem:null,businessTypeData:[],businessTypeDropdownItem:null,brandPositionData:[],brandPositionDataDropdownItem:null,profilePath:null,errMsg_parentCompany:null,errMsg_preferredRegionsitem:null,errMsg_company:null,errMsg_companyValue:null,errMsg_website:null,errMsg_address:null,errMsg_city:null,errMsg_zipCode:null,errMsg_countryDropdownItem:null,errMsg_stateDropdownItem:null,errMsg_cityDropdownItem:null,errMsg_regionDropdownItem:null,errMsg_industryDropdownItem:null,errMsg_businessTypeDropdownItem:null,errMsg_brandPositionDataDropdownItem:null,errMsg_profilePath:null},locationSettings:{countryLocation:null,currencyDropdownData:[],currencyDropdownItem:null,languageDropdownData:[],languageDropdownItem:null,dateFormatDropdownData:[],dateFormatDropdownItem:null,timeFormatDropdownData:[],timeFormatDropdownItem:null,timeZoneDropdownData:[],timeZoneDropdownItem:null,dayLightSaving:!1,errMsgCurrency:null,errMsgLanguage:null,errMsgDateFormat:null,errMsgTimeFormat:null,errMsgTimeZone:null}})};a.useEffect((()=>{(()=>{const e=o();let t=!1,a=!1,l=!1;const n=F("Companies/Clients");1==(null==n?void 0:n.get_AddAccessData)&&(t=!0),a=1==(null==n?void 0:n.accessUpdateData),(null==n?void 0:n.accessDeleteData)&&(l=!0),Oe(t),Re(a),Be(l),null!=e&&(Me(null==e?void 0:e.isSupportUser),null!=(null==e?void 0:e.clientLists)&&fe(e.clientLists))})(),1==(null==i?void 0:i.mainAgencyHeader)&&(Ke(),Ge(),I("Add a new client account"),X(!0),ne(!1),p(0)),1!=(null==i?void 0:i.mainAgencyHeader)&&Pe()}),[]);const Pe=()=>{const e=o();let t={clientId:null==e?void 0:e.parentClientId,userId:null==e?void 0:e.userId,departmentId:0};r({path:A,loading:u.globalStateData.setIsLoadingData,sessionOut:u.globalStateData.setSessionOutData,params:t,ok:e=>{var t;if(e.status){if((null==(t=null==e?void 0:e.data)?void 0:t.length)>0){const t=null==e?void 0:e.data.map((e=>{let t="";switch(e.licenseTypeId){case 0:case 1:t="Free";break;case 2:t="Essentials";break;case 3:t="Premier";break;case 4:t="Ultimate";break;default:t="Unknown"}return{...e,licenseType:t}}));ee(t),ae(!0),ne(!0)}}else ae(!1),ne(!1)},fail:e=>{ae(!0),ne(!1)}})},$e=e=>{let t=o(),a={userId:null==t?void 0:t.userId,clientId:e};u.globalStateData.setIsLoadingData(!0),L.backgroundConnectServer({path:E,params:a,ok:t=>{if(!t.status||!t.isOnboarded){u.globalStateData.setIsLoadingData(!1);let e=a.userId+"_"+a.clientId;return window.btoa(e),be(!0),we(M),void Ae(1)}qe(e,(t=>{var a;if(null==t?void 0:t.status)if(null===(null==(a=null==t?void 0:t.data)?void 0:a.payStatus)){let e="";e=window.location.search.length>0?window.location.search+"&isAgency=true":"?isAgency=true",d.push({pathname:"/features",search:e})}else d.push({pathname:"/preferences/companyuser-list",search:`?clientId=${e}`})}))},fail:e=>{u.globalStateData.setIsLoadingData(!1)}})},qe=(e,t)=>{let a=o();L.backgroundConnectServer({path:_,params:{clientId:e,userId:null==a?void 0:a.userId},ok:e=>{if(null==e?void 0:e.status){if(u.globalStateData.setIsLoadingData(!1),e.data.accessToken&&e.data.accessToken.length>0){const a={isAuth:!0,accessToken:e.data.accessToken},l={sdc:!0,etc:!0,mp:!0,wp:!0,sl:!0,fs:!0,tmb:!0,ld:!0};return e.data.isAgency=!0,S(e),localStorage.setItem("session",JSON.stringify(a)),localStorage.setItem("lsUserData",O(null==e?void 0:e.data)),localStorage.setItem("lsConfig",JSON.stringify(l)),void t(e)}t({status:!1})}else u.globalStateData.setIsLoadingData(!1),t({status:!1})},fail:e=>{u.globalStateData.setIsLoadingData(!1)}})},Ze=t=>e.jsx(e.Fragment,{children:e.jsx(de,{fluid:!0,className:"main-heading-wrapper mb0",children:e.jsxs(de,{className:"mhw-container",children:[e.jsx("div",{className:"mhwc-left",children:e.jsx("h1",{children:e.jsx("div",{className:"mh-wrapper",children:e.jsx("span",{className:"mh-text",children:f})})})}),0==W?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"back-text",onClick:()=>d.push("/preferences"),children:[e.jsx(v,{icon:z,size:"sm"}),"Back"]})}):null]})})}),Ve=[e.jsx(G,{isSupportUser:Ee,EditToggle:ge,ClientId:ve,contactAllDetails:j,clientData:D,updateContact:b,updateContactfunction:e=>{T(e)},removeUpdateContact:e=>{T(e)},netxBtn:e=>{p(e),Se([{title:"Client details",disable:!1,name:"CONTACT_DETAILS",icons:"icon-rs-tick-mini icon-xs white"},{title:"Settings",disable:!1,name:"SETTINGS",icons:"icon-rs-tick-mini icon-xs white"}]),ye("SETTINGS"),Ce(["CONTACT_DETAILS","SETTINGS"])},backBtn:e=>{null!=Y?(H(!0),re(!1)):(H(!1),re(!0)),C(null),X(!1),pe(!1),I("Client list"),ne(!0)},i:g,params:h,contactDetailsData:e=>{y(e)}}),e.jsx(K,{ClientId:ve,EditToggle:ge,brandDetails:$,locationData:w,removeUpdateContact:e=>{T(e)},netxBtn:e=>{e&&(re(!0),Pe(),C(null),X(!1),pe(!1),I("Client list"),ne(!0))},backBtn:e=>{(e=>{p(e),Se([{title:"Client details",disable:!1,name:"CONTACT_DETAILS",icons:"icon-rs-tick-mini icon-xs white"},{title:"Settings",disable:!1,name:"SETTINGS",icons:"icon-xs white"}]),ye("CONTACT_DETAILS"),Ce(["CONTACT_DETAILS"])})(e),I(ge?"Edit client account":"Add a new client account")},i:g,params:h,contactAndbrandDetails:[j,$]}),e.jsx(ue,{isSupportUser:Ee,ClientId:ve,backBtn:e=>{null!=Y?(H(!0),re(!1)):(H(!1),re(!0)),C(null),X(!1),pe(!1),I("Client list"),ne(!0)},removeUpdateContact:e=>{T(e)},netxBtn:e=>{null!=Y?(H(!0),re(!1)):(H(!1),re(!0)),e&&(Pe(),C(null),X(!1),pe(!1),I("Client list"),ne(!0))}})],He=t=>{a.useState([]);const[l,n]=a.useState(!1),[s,i]=a.useState(!1),[d,r]=a.useState(!1);return a.useEffect((()=>{var e;const t=o();let a=!1,l=!1,s=null==(e=null==t?void 0:t.permission)?void 0:e.filter(((e,t)=>"Companies/Clients"==(null==e?void 0:e.featureName)));null!=s&&(null==s||s.map((e=>{1===(null==e?void 0:e.updateAccess)?a=!0:1===(null==e?void 0:e.viewAccess)&&(a=!1),1===(null==e?void 0:e.deleteAccess)&&(l=!0)}))),n(!1),i(a),r(l)}),[]),e.jsx(e.Fragment,{children:e.jsx("td",{children:e.jsxs(U,{className:"float-end",children:[e.jsx(v,{mainClass:s?"click-on":"click-off",tooltip:"Info",icon:"icon-rs-circle-info-medium",onClick:()=>{var e,a;a=null==(e=null==t?void 0:t.dataItem)?void 0:e.clientId,t.editCompanyInfo(a)}}),e.jsx(v,{mainClass:s?"click-on":"click-off",tooltip:"Users",icon:"icons-md icon-rs-user-medium",onClick:()=>{var e,a,l,n;l=null==(e=null==t?void 0:t.dataItem)?void 0:e.clientId,n=null==(a=null==t?void 0:t.dataItem)?void 0:a.clientName,he(l),Le(n),$e(l)}}),e.jsx(v,{mainClass:s?"click-on":"click-off",tooltip:"Settings",icon:"icon-rs-settings-medium",onClick:()=>{var e,a;a=null==(e=null==t?void 0:t.dataItem)?void 0:e.clientId,t.editCompanySetting(a)}})]})})})},Ye=e=>{let t={clientId:e};r({path:R,loading:u.globalStateData.setIsLoadingData,sessionOut:u.globalStateData.setSessionOutData,params:t,isCache:!1,isServiceWorker:!1,ok:e=>{(null==e?void 0:e.status)&&null!=(null==e?void 0:e.data)&&(C(null==e?void 0:e.data),I("Edit client account"),X(!0),ne(!1),pe(!0),p(0),Se([{title:"Client details",disable:!1,name:"CONTACT_DETAILS",icons:"icon-rs-tick-mini icon-xs white"}]),ye("CONTACT_DETAILS"),Ce(["CONTACT_DETAILS"]))},fail:e=>{}})},Je=e=>{let t={clientId:e};r({path:c,loading:u.globalStateData.setIsLoadingData,sessionOut:u.globalStateData.setSessionOutData,params:t,ok:t=>{(null==t?void 0:t.status)&&null!=(null==t?void 0:t.data)&&((e=>{let t={clientId:e};r({path:R,loading:u.globalStateData.setIsLoadingData,sessionOut:u.globalStateData.setSessionOutData,params:t,isCache:!1,isServiceWorker:!1,ok:e=>{(null==e?void 0:e.status)&&null!=(null==e?void 0:e.data)&&C(null==e?void 0:e.data)},fail:e=>{}})})(e),k(null==t?void 0:t.data),I("Edit client account"),pe(!0),X(!0),ne(!1),p(2),Se([{title:"Settings",disable:!1,name:"SETTINGS",icons:"icon-rs-tick-mini icon-xs white"}]),ye("SETTINGS"),Ce(["SETTINGS"]))},fail:e=>{}})};return e.jsx(e.Fragment,{children:e.jsxs(l,{children:[Ne&&e.jsx(q,{size:"md",headerTitle:"Alert",para:Te,secondaryButtonText:"Cancel",primaryButtonText:"Proceed",buttonClicked:e=>{if(be(!1),we(null),!0===e)return u.globalStateData.setIsLoadingData(!0),void qe(ve,(e=>{if(u.globalStateData.setIsLoadingData(!1),e.status&&1===ke){let e=o(),t=(null==e?void 0:e.userId)+"_"+ve,a=window.btoa(t);if(null!==localStorage.getItem("qclogin")&&void 0!==localStorage.getItem("qclogin")){let e=m(localStorage.getItem("qclogin")),t=window.btoa(null==e?void 0:e.passwd),l=window.btoa(Fe||"");u.toggleAuth(!1),d.push(`/qasonboarding?smartdxid=${a}&pwc=${t}&ST=G&package=0&risAgency=true&CN=${l}&isEx=true`)}}}));Ae(null)}}),e.jsx(Ze,{}),W?e.jsx(de,{className:"box-bottom-space mt20",children:e.jsxs(ie,{children:[e.jsx(oe,{sm:2,children:e.jsx(B,{currentPage:je,completedPages:De,typeDetails:Ie})}),e.jsx(oe,{sm:10,children:e.jsx("div",{children:Ve[g]})})]})}):null,e.jsx(e.Fragment,{children:e.jsxs(de,{className:"page-header box-bottom-space",children:[0==W?e.jsxs("div",{className:"justify-content-end d-flex mt20 mb20",children:[V&&e.jsx("div",{className:"mr20",children:e.jsx(v,{shadow:!0,tooltip:"List view",icon:"icon-rs-circle-list-edge-large",size:"lg",onClick:()=>{H(!1),re(!0),J(null)}})}),se&&e.jsx("div",{className:"mr20",children:e.jsx(v,{shadow:!0,tooltip:"Grid view",icon:"icon-rs-circle-grid-fill-edge-large",size:"lg",onClick:()=>{H(!0),re(!1)}})}),e.jsx("div",{className:`${Ee?"click-off":""} ${_e?"click-on":"click-off"}`,children:e.jsx(v,{shadow:!0,tooltip:"Add",icon:"icon-rs-circle-plus-fill-edge-medium",size:"lg",onClick:()=>{H(!1),Ke(),Ge(),I("Add a new client account"),X(!0),ne(!1),p(0),re(!1)}})})]}):null,V&&e.jsx(ie,{children:null==Q?void 0:Q.map((t=>e.jsxs(oe,{sm:4,children:["  ",e.jsx(me,{getAddAccessData:_e,getUpdateAccessData:ze,getDeleteAccessData:Ue,list:t,onNavigate:e=>{J(null==e?void 0:e.text),"Info"==(null==e?void 0:e.text)&&(he(null==e?void 0:e.clientId),Ye(null==e?void 0:e.clientId),re(!1),H(!1)),"Users"==(null==e?void 0:e.text)&&(he(null==e?void 0:e.clientId),Le(null==e?void 0:e.clientName),$e(null==e?void 0:e.clientId)),"Settings"==(null==e?void 0:e.text)&&(he(null==e?void 0:e.clientId),Je(null==e?void 0:e.clientId),re(!1),H(!1))}})]},null==t?void 0:t.clientId)))}),se?le&&Q.length>0?e.jsx(n,{config:{take:5,skip:0},data:Q,settings:{total:Q.length},pageable:!0,isDataStateRequired:!1,column:[{title:"Company name",field:"clientName"},{title:"Licence type",field:"licenseType",cell:t=>{var a;return e.jsx("td",{children:ce(null==(a=null==t?void 0:t.dataItem)?void 0:a.licenseTypeId)})}},{title:"Created date",field:"createdDate",cell:t=>{var a;return e.jsx("td",{children:N(null==(a=null==t?void 0:t.dataItem)?void 0:a.createdDate,!1)})}},{title:"Actions",field:"Actions",width:"240",cell:t=>e.jsx(He,{editCompanyInfo:e=>{he(e),Ye(e),re(!1)},...t,editCompanySetting:e=>{he(e),Je(e),re(!1)},viewId:e=>{},deleteId:e=>{}})}]}):te?e.jsx(de,{className:"page-header box-bottom-space",children:e.jsx(P,{count:5,isError:!0,children:e.jsx("div",{children:0==te&&0==Q.length&&e.jsx("p",{children:"No data available"})})})}):e.jsx(de,{className:"page-header box-bottom-space",children:e.jsx(P,{count:5,isError:!0,children:e.jsxs("div",{className:"nodata-bar add-func",children:[e.jsx("i",{className:"icon-rs-alert-medium icons-md orange-medium"}),e.jsx("p",{children:"No data available"})]})})}):null]})})]})})};export{ge as default};
