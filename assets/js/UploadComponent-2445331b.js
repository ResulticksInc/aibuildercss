import{j as e}from"./pdf-editor-8270ab34.js";import{E as r,bQ as o}from"./index-74701706.js";import"./utils-16c7e021.js";import"./react-vendor-379f659a.js";const t=t=>{let a=(null==t?void 0:t.type)?t.type:".jpg,.png";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"btn-file",children:[e.jsx(r,{children:(null==t?void 0:t.name)||"Upload"}),e.jsx("input",{title:t.tooltip,type:"file",accept:a,onChange:e=>{const r=e.target.files[0];Math.round(r.size/1024);const a=r.name.split(".").at(-1);if(".p8"!==(null==t?void 0:t.type)&&".json"!==(null==t?void 0:t.type))if("all"===(null==t?void 0:t.type))if("jpg"===a.toLowerCase()||"jpeg"===a.toLowerCase()||"png"===a.toLowerCase()||"doc"===a.toLowerCase()||"xls"===a.toLowerCase()||"pdf"===a.toLowerCase()||"csv"===a.toLowerCase()){if(Math.round(r.size/1024)>2048)return void t.onChange([!1,r.name,"File size is greater than 2MB"]);const e=new FileReader;e.readAsDataURL(r),e.onload=e=>{t.onChange([!0,r.name,e.target.result])}}else t.onChange([!1,r.name,"File type not supported"]);else if("jpg"===a.toLowerCase()||"jpeg"===a.toLowerCase()||"png"===a.toLowerCase()){const e=new FileReader;e.readAsDataURL(r),e.onload=e=>{const a=new Image;a.src=e.target.result,a.onload=e=>{const a=e.target.height,n=e.target.width;if("web"===t.type&&(a>145||n>145))return t.error&&t.error("Invalid image size"),void setTimeout((()=>{t.error&&t.error(null)}),3e3);const s=r.name.split(".").at(-1);"jpg"===s.toLowerCase()||"jpeg"===s.toLowerCase()||"png"===s.toLowerCase()?o(r,(e=>{t.onChange([r.name,e])}),(e=>{t.error&&t.error("Upload error"),setTimeout((()=>{t.error&&t.error(null)}),3e3),t.error&&t.error("")})):(t.error&&t.error("Cannot support this image format"),setTimeout((()=>{t.error&&t.error(null)}),3e3))}}}else t.error&&t.error("Cannot support this image format"),setTimeout((()=>{t.error&&t.error(null)}),3e3);else"p8"===a.toLowerCase()||"json"===a.toLowerCase()?o(r,(e=>{t.onChange([r.name,e])}),(e=>{t.error&&t.error("Upload error"),setTimeout((()=>{t.error&&t.error(null)}),3e3),t.error&&t.error("")})):(t.error&&t.error("Can not support the type"),setTimeout((()=>{t.error&&t.error(null)}),3e3))},className:"sp-input btn-browse-edit",name:"uploaded_file"})]})})};export{t as U};
