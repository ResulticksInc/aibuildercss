import{j as e}from"./pdf-editor-8270ab34.js";import{r as a,i as t,L as l}from"./react-vendor-379f659a.js";import{d as s,R as n}from"./RSKendoDropdown-01650470.js";import{R as i,a as r}from"./RSCheckbox-2fef59cb.js";import"./style-a86a43a5.js";import{z as o,fi as d,M as m,bK as u,fk as c,a2 as g,a5 as p,a3 as h,DY as x,a8 as v,DZ as y,E as S,a1 as f,a4 as j,a6 as b,eG as w,av as E,nx as k,fI as N,eF as I,fj as D,f9 as T,BH as M,aa as C,fm as L,D_ as O,bX as _,ah as P,D$ as R}from"./index-74701706.js";import"./RSDropdowns-57ad4a66.js";import{b as $,M as B,t as q}from"./inputLimit-ce03b0f6.js";import{RSErrorPopup as A}from"./RSConfirmAlert-deac68bb.js";import{b as U}from"./utils-16c7e021.js";import{R as F}from"./RSFormGroup-183a553e.js";import{S as W}from"./SmallText-221f66eb.js";import{RSPTimer as Z}from"./RSPTimer-a5ec25f7.js";import{R as z,a as K}from"./ui-e848d714.js";import"./get-4aa85b1a.js";import"./kendo-5d73125a.js";import"./drag-drop-a86b0275.js";import"./RSIcon-70da13ba.js";const G=w=>{const k=a.useContext(o),N=t(),[O,_]=a.useState(""),[P,R]=a.useState(!1),[U,G]=a.useState(!1),[X,Q]=a.useState(""),[V,ee]=a.useState(!1),[ae,te]=a.useState(!1),[le,se]=a.useState(""),[ne,ie]=a.useState(""),[re,oe]=a.useState(!1),[de,me]=a.useState(""),[ue,ce]=a.useState(!1),[ge,pe]=a.useState(!1),[he,xe]=a.useState(null),[ve,ye]=a.useState(!1),[Se,fe]=a.useState(Y()),[je,be]=a.useState(Y()),[we,Ee]=a.useState(null),[ke,Ne]=a.useState(!1),[Ie,De]=a.useState(null),[Te,Me]=a.useState(""),[Ce,Le]=a.useState([]),[Oe,_e]=a.useState(null),[Pe,Re]=a.useState(null),[$e,Be]=a.useState({email:null,otp:"",industry:null,companyName:null,answer:null,agree:null}),[qe,Ae]=a.useState(!1),[Ue,Fe]=a.useState(!0),[We,Ze]=a.useState(!1),[ze,Ke]=a.useState(null),[Ge,Ye]=a.useState(null),[He,Je]=a.useState(null),[Xe,Qe]=a.useState(null),[Ve,ea]=a.useState(null),[aa,ta]=a.useState(!1),[la,sa]=a.useState(""),[na,ia]=a.useState(""),[ra,oa]=a.useState(!1),[da,ma]=a.useState(!1),[ua,ca]=a.useState(null),[ga,pa]=a.useState(!1),[ha,xa]=a.useState(!1),[va,ya]=a.useState(!1),[Sa,fa]=a.useState("");a.useState(""),a.useState(""),a.useEffect((()=>{null!==localStorage.getItem("lsMasterDropdownData")&&void 0!==localStorage.getItem("lsMasterDropdownData")?wa():null!==localStorage.getItem("lsMasterDropdownData")&&void 0!==localStorage.getItem("lsMasterDropdownData")||ba(),null!==localStorage.getItem("bdetails")&&void 0!==localStorage.getItem("bdetails")||d((e=>{}))}),[]),a.useEffect((()=>{}),[U]);const ja=()=>{m({path:D,isServiceWorker:!1,params:{emailId:O},ok:e=>{var a,t,l;if(ye(!1),(null==e?void 0:e.status)&&(null==(t=null==(a=null==e?void 0:e.data)?void 0:a.otpToken)?void 0:t.length)>0){k.globalStateData.setIsLoadingData(!1);var s={...$e};s.email=c,Be(s),setTimeout((()=>{Be("")}),6e3),Q((null==(l=null==e?void 0:e.data)?void 0:l.otpToken)||""),G(!0)}},fail:e=>{k.globalStateData.setIsLoadingData(!1),setTimeout((()=>{Be("")}),5e3)}})},ba=()=>{m({path:M,ok:e=>{localStorage.setItem("lsMasterDropdownData",C(e.data)),wa()},fail:e=>E()})},wa=()=>{var e;const a=u();let t=null==(e=null==a?void 0:a.industry)?void 0:e.sort(((e,a)=>e.industryName>a.industryName?1:-1));null!==t&&(Le(t||[]),(null==t?void 0:t.length)>0&&_e(t.filter((e=>e.industryId===a.industryId))[0]||null))},Ea=()=>{ma(!0),pa(!1),ia(""),k.globalStateData.setIsLoadingData(!0),m({path:I,params:{emailId:la},isServiceWorker:!1,retry:2,retryTime:5e3,ok:e=>{e.status?(ma(!1),ea(null==e?void 0:e.message),k.globalStateData.setIsLoadingData(!1)):(ma(!1),k.globalStateData.setIsLoadingData(!1),k.globalStateData.setIsLoadingData(!0),m({path:D,isServiceWorker:!1,params:{emailId:la},ok:e=>{var a,t,l;(null==e?void 0:e.status)&&(null==(t=null==(a=null==e?void 0:e.data)?void 0:a.otpToken)?void 0:t.length)>0&&(k.globalStateData.setIsLoadingData(!1),Q(null==(l=null==e?void 0:e.data)?void 0:l.otpToken),ia(""),ca(null),pa(!0),ea(c),setTimeout((()=>{ea(null)}),6e3))},fail:e=>{k.globalStateData.setIsLoadingData(!1),setTimeout((()=>{ea(null)}),4e3)}}))},fail:e=>{ma(!1),ea("Enter valid email"),setIsLoadingData(!1)}})},ka=e=>{const a={otpToken:X,otp:e};k.globalStateData.setIsLoadingData(!0),m({path:L,params:a,ok:e=>{e.status?(ca(null),xa(!0),pa(!0),oa(!0),k.globalStateData.setIsLoadingData(!1)):(ca(null==e?void 0:e.message),xa(!1),pa(!0),k.globalStateData.setIsLoadingData(!1))},fail:e=>{ca(null==e?void 0:e.message),xa(!1),k.globalStateData.setIsLoadingData(!1)}})};return e.jsxs("div",{className:"form-login",children:[!0===ke&&e.jsx(A,{headerTitle:"Sorry",subtitle:"Please try again after sometime...",primaryButtonText:"OK",buttonClicked:e=>{(void 0).setState({saveError:!1})}}),e.jsxs(z,{className:"mb20",children:[e.jsx(K,{className:"text-center ml40",children:e.jsx(s,{lbl:"Brand",name:"matchtype",labelId:"all",checked:Ue,cb:e=>{Ze(!1),Fe(!0),pe(!1),xe(null),Je(null),Qe(null),ea(null),ta(!1),sa(""),ia(""),oa(!1),ma(!1),ca(null),pa(!1),xa(!1),ya(!1),fa(""),window.signupEmail=void 0}})}),e.jsx(K,{className:"text-left p0",children:e.jsx(s,{lbl:"Agency",name:"matchtype",labelId:"all",checked:We,cb:e=>{Ze(!0),Fe(!1),Ke(null),Ye(null),_(""),R(!1),G(!1),Q(""),ee(!1),te(!1),se(""),ie(""),oe(!1),me(""),ce(!1),ye(!1),fe(Y()),be(Y()),Ee(null),Ne(!1),De(null),Me(""),_e(null),Re(null),Be({email:null,otp:"",industry:null,companyName:null,answer:null,agree:null}),window.signupEmail=void 0}})})]}),1==We?e.jsxs("div",{className:"agency-wrapper",children:[e.jsx(F,{children:e.jsx(z,{children:e.jsx(K,{children:e.jsx(i,{id:"agency_email_id_textbox",name:"agencyEmail",placeholder:"Email",val:la,disabled:!!ra,max:100,iconPlaceholder:!da,colorSuccess:Ve==c,iconName:g,errorSuccess:!0,success_msg:"success_msg",errorMessage:Ve,required:!0,ob:e=>{if(!(e.length>0))return ea("Enter email"),ia(""),pa(!1),void ca(null);if(null==Ve){const a=p(e.trim());if(!h(a))return void ea("Enter a valid business email");ea(null),sa(a),ia(""),ca(null)}void 0===window.signupEmail||window.signupEmail.toLowerCase()!==e.toLowerCase()?(window.signupEmail=e,Ea()):(window.signupEmail.toLowerCase(),e.toLowerCase())},cb:e=>{const a=p(e.trim());ea(null),a.length<=100?sa(a):ea("Maximum limit reached")}})})})}),ga||""!=na?e.jsx(F,{children:e.jsx(z,{children:e.jsxs(K,{md:12,children:[e.jsx(i,{disabled:ha,name:"otp",required:!0,iconPlaceholder:!0,iconName:ha?"icon-rs-circle-tick-medium icons-md green":"",success_msg:(null==ua?void 0:ua.includes("success"))?"success_msg":"",errorMessage:ua,placeholder:1==ha?"One time password":x,max:$,keyboardType:"number",val:na,cb:e=>{(""===e||/^[0-9\b.]+$/.test(e))&&(ia(e),ca(null)),(null==e?void 0:e.length)>5&&ka(e)},ob:e=>{if(!e.length)return ia(e),void ca(x);ia(e),ca(null),ka(e)}}),ha||va?null:e.jsx("div",{className:"marginT2",children:e.jsxs(W,{children:["One time password is valid for 5 minutes ",e.jsx(Z,{onComplete:()=>{ya(!0)}})]})}),!ha&&va?e.jsx("div",{className:"d-flex",children:e.jsxs("small",{children:[e.jsx("label",{className:"rs-link orange-medium",onClick:()=>{ia(""),pa(!0),ya(!1),fa("One time password resent successfully"),xa(!1),ca(null),Ea(),setTimeout((()=>{fa(null)}),5e3)},children:"Resend?"}),e.jsx(W,{className:"error-number ml5",children:"One time password expired"})]})}):null]})})}):null,e.jsx(F,{children:e.jsx(z,{children:e.jsx(K,{className:"text-right",children:e.jsx(i,{name:"companyname",placeholder:"Agency group",val:ze,max:20,isLoading:aa,iconPlaceholder:!aa,iconName:void 0,errorMessage:He,required:!0,handleOnBlur:e=>{e.length;let a=RegExp("^[0-9]+$").test(v(e.trim()))?"The company name should contain alphanumeric":0===e.trim().length?"Enter agency group":null;var t;Je(a),Ke(e.trim()),v(e).length>0?null===a&&(t=e.trim(),ta(!0),m({path:T,params:{clientName:t},retry:2,retryTime:5e3,ok:e=>{oe(!1),e.status?(Je("Agency group already exists"),ta(!1)):ta(!1)},fail:e=>{ta(!1),Je("Unexpected happened. Try again later")}})):Je("Enter agency group")},handleOnchange:e=>{if(!1===/^[A-Za-z0-9_&`\- ]+$/.test(e)){if(0===e.length)return Ke(null),void Je("Enter agency name");Je("Special character not allowed")}else Je(null),Ke(e)}})})})}),e.jsx(F,{children:e.jsx(z,{children:e.jsx(K,{className:"text-right",children:e.jsx(i,{name:"agency name",placeholder:"Agency name",val:Ge,max:20,errorMessage:Xe,required:!0,handleOnBlur:e=>{let a=RegExp("^[0-9]+$").test(v(e.trim()))?"The agency name should contain alphanumeric":0===e.trim().length?"Enter agency name":null;Qe(a),Ye(e.trim())},handleOnchange:e=>{if(!1===/^[A-Za-z0-9_&`\- ]+$/.test(e)){if(0===e.length)return Ye(null),void Qe("Enter agency name");Qe("Special character not allowed")}else Qe(null),Ye(e)}})})})}),e.jsx(F,{children:e.jsx(e.Fragment,{children:e.jsx(r,{id:"termsandconditions_checkbox",className:"font-sm",checked:ge,errorMessage:he,cb:e=>{pe(e),xe(e?null:y)},lbl:" I agree to the ",children:e.jsxs(l,{to:{pathname:"https://www.smartdx.co/terms-conditions.html"},target:"_blank",className:"text-orange",children:[" ","Terms & Conditions."]})})})}),e.jsx(z,{children:e.jsx(K,{className:"d-flex justify-content-center",children:e.jsx(S,{id:"signup_button",onClick:()=>{if(null==la||0==(null==la?void 0:la.length)||""==la)return void ea("Enter email");if(null==na||0==(null==na?void 0:na.length)||""==na)return void ca("Enter OTP");if(null!=ua)return;if(null==ze||0==(null==ze?void 0:ze.length))return void Je("Enter agency group");if(null!=He||(null==He?void 0:He.length)>0)return;if(null==Ge||0==(null==Ge?void 0:Ge.length))return void Qe("Enter agency name");if(!ge)return void xe(y);let e={agencyGroup:ze,agencyName:Ge,agencyemailId:la,userOtp:na};localStorage.setItem("agencyData",JSON.stringify(e)),N.push({pathname:"agencysetup"})},children:"Sign Up"})})})]}):null,1==Ue?e.jsxs("div",{className:"brand-wrapper",children:[e.jsxs("div",{className:"position-relative",children:[Pe&&e.jsx("div",{className:"validation-message",children:Pe}),e.jsx(F,{children:e.jsx(i,{id:"email_id_textbox",disabled:P,name:"email",placeholder:f,val:O,max:B,iconPlaceholder:!ve,colorSuccess:$e.email===c,iconName:g,errorSuccess:!0,success_msg:"success_msg",errorMessage:$e.email,required:!0,ob:e=>{if(e.length>0){if(null===$e.email){const a=p(e.trim());if(!h(a.trim()))return void Be({...$e,email:j});Be({...$e,email:null}),void 0===window.signupEmail||window.signupEmail.toLowerCase()!==e.toLowerCase()?(window.signupEmail=e,ye(!0),G(!1),se(""),k.globalStateData.setIsLoadingData(!0),m({path:I,params:{emailId:O},isServiceWorker:!1,retry:2,retryTime:5e3,ok:e=>{if(Ee(e.status),e.status)(a={...$e}).email=null==e?void 0:e.message,Be(a),ye(!1),Ae(!1),k.globalStateData.setIsLoadingData(!1);else{void 0===(null==e?void 0:e.data)&&null!==(null==e?void 0:e.data)&&(null==e||e.message);var a={...$e};ja(),ye(!1),Ae(!0)}},fail:e=>{ye(!1);var a={...$e};a.email="Enter valid email",Be(a),Ae(!1)}})):window.signupEmail.toLowerCase()===e.toLowerCase()&&Ee(!1)}}else Be({...$e,email:f})},cb:e=>{let a=p(e.trim());Be({...$e,email:null}),a.length<=100?_(a):Be({...$e,email:b})}})})]}),!0===U?e.jsx(H,{isShowOTPModal:U,emailId:O,otpToken:X,otpSuccess:V,errorMessage:$e.otp,confirmBtnClick:e=>{Q(e.otpToken),se(e.otp)},onOtpSuccess:e=>{ee(e)},close:()=>{G(!1)}}):null,e.jsx(F,{children:e.jsx(i,{id:"company_textbox",name:"companyname",placeholder:"Company name",val:ne,max:q,isLoading:re,iconPlaceholder:!re,iconName:void 0,errorMessage:$e.companyName,required:!0,handleOnFocus:e=>De(null),handleOnBlur:e=>{let a=RegExp("^[0-9]+$").test(v(e.trim()))?"The company name should contain alphanumeric":0===e.trim().length?"Enter company name":null;var t;Be({...$e,companyName:a}),ie(e.trim()),v(e).length>0&&null===a&&(t=e.trim(),oe(!0),m({path:T,params:{clientName:t},retry:2,retryTime:5e3,ok:e=>{if(De(e.status),oe(!1),e.status){var a={...$e};a.companyName="Company name already exists",Be(a),te(!1)}else te(!0)},fail:e=>{oe(!1);var a={...$e};a.companyName="Unexpected happened. Try again later",Be(a)}}))},handleOnchange:e=>{if(!1===/^[A-Za-z0-9_&`\- ]+$/.test(e)){if(0===e.length){ie("");let e="Enter company name";return void Be({...$e,companyName:e})}let a="Special character not allowed";Be({...$e,companyName:a})}else Be({...$e,companyName:null}),ie(e)}})}),e.jsx(F,{children:e.jsx(n,{id:"industry_dropdown",textField:"industryName",dataItemKey:"industryId",label:"Industry",required:!0,data:Ce,value:Oe||{industryId:-1,industryName:"Select industry"},errorMessage:null==$e?void 0:$e.industry,onChange:e=>{Me(e.value),_e(e.value),Be({...$e,industry:null})}})}),e.jsx(F,{children:e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(r,{id:"termsandconditions_checkbox",className:"font-sm",checked:ue,errorMessage:$e.agree,cb:e=>{ce(e),Be(e?{...$e,agree:null}:{...$e,agree:y})},lbl:""}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginLeft:"-10px"},children:[e.jsx("span",{children:"I agree to the"}),e.jsx(l,{to:{pathname:"https://www.smartdx.co/terms-conditions.html"},target:"_blank",className:"text-orange",style:{marginLeft:"5px"},children:"Terms & Conditions."})]})]})})}),e.jsx(z,{children:e.jsx(K,{className:"d-flex justify-content-center",children:e.jsx(J,{industry:Te,otpToken:X,otpSuccess:V,clientNameSuccess:ae,otp:le,email:O,checked:ue,companyName:ne,a:Se,b:je,sum:de,isEMailExist:we,emailErrMsg:$e.email,isCompanyNameExist:Ie,setErrorMessage:e=>{Be({...$e,...e})},clickOff:qe})})})]}):null]})},Y=()=>Math.floor(9*w(0,1)+1),H=l=>{const[s,n]=a.useState(""),[r,d]=a.useState(null==l?void 0:l.errorMessage),[u,c]=a.useState((null==l?void 0:l.otpToken)||""),[g,p]=a.useState(!1),[h,x]=a.useState(!1);a.useState(!0);const[v,y]=a.useState(!1);return a.useState(!1),a.useContext(o),t(),a.useEffect((()=>{E("Component didupdate",null==l?void 0:l.errorMessage),d(null==l?void 0:l.errorMessage)}),[null==l?void 0:l.errorMessage]),a.useEffect((()=>{var e;null==(e=document.getElementById("l_otp"))||e.focus()}),[]),e.jsxs(F,{className:g||v?"":"mb20 mt-5",children:[e.jsx(z,{children:e.jsx(K,{md:12,children:e.jsx(i,{disabled:!!g,id:"opt_textbox",name:"otp",required:!0,placeholder:g?"One-Time Password":r?"Enter correct One-Time Password":"Enter One-Time Password to verify email",success_msg:(null==r?void 0:r.includes("success"))?"success_msg":"",val:s,iconPlaceholder:!0,isLoading:h,iconName:`\n          ${s.length>0&&g?`${k} color-primary-green`:""} \n          ${s.length>0&&r?`${N} color-primary-red`:""}`,iconOnClick:()=>{n(""),d(null)},errorMessage:r,keyboardType:"number",max:$,cb:e=>{p(!1),d(!1);let a=e.length?null:"Enter One-Time Password to verify email";d(a),(""===e||/^[0-9\b]+$/.test(e))&&(6===e.length&&(e=>{const a={otpToken:u,otp:e};let t=_();x(!0),m({bUrl:t,path:O,params:a,ok:a=>{x(!1),a.status?(l.confirmBtnClick({otpToken:u,otp:e}),p(!0),l.onOtpSuccess(!0)):d((null==a?void 0:a.message)||"Enter valid one time password")},fail:e=>{x(!1)}})})(e),n(e))},ob:e=>{if(e.length)e.length<6&&(""===e||/^[0-9\b.]+$/.test(e))&&d("Enter valid One-Time Password");else{let a=e.length?null:"Enter One-Time Password to verify email";d(a)}}})})}),e.jsxs(z,{children:[e.jsx(K,{md:g||v?8:10,children:g||v?!g&&e.jsx(W,{children:"One-Time Password expired"}):e.jsxs(W,{children:["One time password is valid for 5 minutes  ",e.jsx(Z,{onComplete:()=>{y(!0)}})]})}),e.jsx(K,{md:4,children:!g&&v?e.jsx(W,{right:!0,children:e.jsx("label",{className:"rs-link orange-medium",onClick:()=>{y(!1),n(""),d("One time password resent successfully"),setTimeout((()=>{d("")}),5e3),p(!1),d(""),x(!0),m({path:D,params:{emailId:l.emailId},ok:e=>{var a,t,l;x(!1),(null==e?void 0:e.status)&&(null==(t=null==(a=null==e?void 0:e.data)?void 0:a.otpToken)?void 0:t.length)>0?c((null==(l=null==e?void 0:e.data)?void 0:l.otpToken)||""):d("Otp send failed")},fail:e=>{x(!1),d("Otp send failed")}})},children:"Resend?"})}):null})]})]})},J=l=>{const s=t(),n=a.useContext(o);return e.jsx(S,{id:"signup_button",onClick:()=>{n.globalStateData.getIsPrototype?s.push({pathname:"key-contact-info",state:{email:l.email||""}}):0!==l.email.length?h(l.email)?l.isEMailExist||null===l.isEMailExist?l.setErrorMessage({email:l.emailErrMsg}):0!==l.otp.length?0!==l.companyName.length?l.isCompanyNameExist||null===l.isCompanyNameExist||(0!==l.industry.length?l.checked?(l.setErrorMessage(null),(()=>{var e,a;let t="";t=window.location.href.includes("localhost")?"app":(null==(e=window.location.href.match(/(sit|app|run)/))?void 0:e[1])||"sit";const i=U.parse(null==(a=null==s?void 0:s.location)?void 0:a.search);let r=parseInt(null==i?void 0:i.pId)||0;const o={industryId:l.industry.industryId,loginName:l.email,clientName:l.companyName,otpToken:l.otpToken,otp:l.otp,sourceType:P(),platformName:t,package:r};m({path:R,loading:n.globalStateData.setIsLoadingData,params:o,ok:e=>{var a;e.status?(n.globalStateData.setUserIdData(e.signupId||0),n.globalStateData.setBodyNameData(""),localStorage.setItem("lsUserData",C(e.data)),s.push({pathname:"thanksforsignup",state:{qas:!0,payment:!0,industryId:l.industry.industryId,email:l.email}})):(null==(a=null==e?void 0:e.message)?void 0:a.toLowerCase().includes("company name"))?l.setErrorMessage({companyName:null==e?void 0:e.message}):l.setErrorMessage({email:null==e?void 0:e.message})},fail:e=>{l.setErrorMessage({email:"Unexpected error. Try again later"})}})})()):l.setErrorMessage({agree:y}):l.setErrorMessage({industry:"Select industry"})):l.setErrorMessage({companyName:"Enter company name"}):l.setErrorMessage({otp:"Enter one time password"}):l.setErrorMessage({email:j}):l.setErrorMessage({email:f})},className:(null==l?void 0:l.clickOff)&&l.otpSuccess&&l.clientNameSuccess?"":"click-off",children:"Sign Up"})};export{G as QASNewUser};
