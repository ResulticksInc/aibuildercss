import{j as e}from"./pdf-editor-8270ab34.js";import{R as a,r as l,w as s}from"./react-vendor-379f659a.js";import{i}from"./utils-16c7e021.js";import{H as t}from"./charts-f2096496.js";import{h as n}from"./map-99306e6f.js";import{p as r}from"./maps-b8c6f010.js";import{m as o,M as d}from"./maker-47de0917.js";import"./export-data-a2401fa3.js";import{z as c,M as m,E0 as u,b_ as h,ep as x,E1 as p}from"./index-74701706.js";import{RSErrorPopup as v}from"./RSConfirmAlert-deac68bb.js";import{N as j,R as g}from"./NewCharts-9842b056.js";import{R as b}from"./RTabbar-ca75b8a9.js";import{Y as y,I as N,J as f,K as k,L as D,M as w,N as C,O as I,av as L,ao as A,am as S,aH as T,aI as F,aJ as M,aG as H}from"./Colors-8a9fdcf2.js";import{H as B,O as E}from"./Skeleton-fd850846.js";import{a as W}from"./SkeletonTable-8cb486e7.js";import{c as O}from"./chart-clock-modified-566e767a.js";import{K as R}from"./index-21f205f2.js";import{a as P,R as U}from"./ui-e848d714.js";import{H as z,b as $}from"./Constants-91b79536.js";import{e as G,d as K,D as _}from"./index-11ed5abc.js";import{B as V}from"./BootstrapDropdown-6b9714b5.js";import"./kendo-5d73125a.js";import"./drag-drop-a86b0275.js";import"./RSIcon-70da13ba.js";import"./constants-82903eb8.js";import"./get-4aa85b1a.js";const q=a.memo((a=>{var l,s,t,n,r,o,d,c,m,u,h,x,p,v;const[g,y]=i({tabEngagementIndex:0,expandEnable:!1});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"portlet-container portlet-md "+(g.expandEnable?"expand-full-view":""),children:[e.jsxs("div",{className:"portlet-header",children:[e.jsx("h4",{children:"Engagement"}),e.jsx("div",{className:"p-nav-right",children:e.jsx(b,{defaultSelectedItem:g.tabEngagementIndex,defaultClass:"",dynamicTab:"mini marginB0",activeClass:"active",tabData:J,callBack:(e,a)=>{y((e=>{e.tabEngagementIndex=a}))}})})]}),e.jsx("div",{className:"portlet-body",children:0===g.tabEngagementIndex?a.isLoading?e.jsx(B,{}):(null==(l=a.data)?void 0:l.engagementOverAllData)&&(null==(t=null==(s=a.data)?void 0:s.engagementOverAllData)?void 0:t.categories)&&(null==(r=null==(n=a.data)?void 0:n.engagementOverAllData)?void 0:r.series)&&void 0!==(null==(o=a.data)?void 0:o.engagementOverAllData)?e.jsx("div",{className:"portlet-chart",children:e.jsx(j,{options:Y(null==(d=a.data)?void 0:d.engagementOverAllData)})}):e.jsxs(e.Fragment,{children:[!(null==(m=null==(c=a.data)?void 0:c.engagementOverAllData)?void 0:m.length)&&e.jsx(W,{}),e.jsx(B,{})]}):a.isLoading?e.jsx(B,{}):(null==(h=null==(u=a.data)?void 0:u.engagementFirst24Hrs)?void 0:h.length)?e.jsx("div",{className:"portlet-chart",children:e.jsx(j,{options:Q(null==(x=a.data)?void 0:x.engagementFirst24Hrs)})}):e.jsxs(e.Fragment,{children:[(null==(v=null==(p=a.data)?void 0:p.engagementFirst24Hrs)?void 0:v.length)?null:e.jsx(W,{}),e.jsx(B,{})]})}),a.expand&&e.jsx("div",{className:"expand-icon-wrap",onClick:()=>{y((e=>{e.expandEnable=!e.expandEnable}))},children:e.jsx("i",{className:(g.expandEnable?"icon-rs-arrow-left-mini":"icon-rs-arrow-right-medium")+" white"})})]})})})),J=[{id:1001,text:"Overall"},{id:1002,text:"First 24 hrs"}],Y=e=>{var a,l,s;return{chart:{type:"areaspline",className:"chart-line-animate x-axis-labels-performance-del"},title:{text:""},xAxis:{title:{text:""},categories:null==(a=null==e?void 0:e.categories)?void 0:a.map((e=>{let a=new Date(e).toDateString().split(" ");var l,s,i;return i=(l=a[2])%100,(1==(s=l%10)&&11!=i?l+"st":2==s&&12!=i?l+"nd":3==s&&13!=i?l+"rd":l+"th")+" "+a[1]})),labels:{rotation:0}},yAxis:{title:{text:""}},symbolRadius:0,plotOptions:{series:{marker:{fillColor:null,lineColor:null,lineWidth:1,radius:3,symbol:"circle"}}},legend:{enabled:!0},series:[{marker:{lineColor:y,fillColor:"white",radius:3,lineWidth:2},name:"Total link clicks",lineWidth:1,color:y,data:null==(s=null==(l=null==e?void 0:e.series[0])?void 0:l.datas)?void 0:s.map((e=>e||0)),fillColor:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`${y+40}`],[1,"rgb(64 171 175 / 0%)"]]}}]}},Q=e=>({chart:{type:"areaspline",className:"chart-line-animate x-axis-labels-performance-del"},title:{text:""},xAxis:{title:{text:""},categories:null==e?void 0:e.map((e=>`${e.hr} hrs`)),labels:{rotation:0}},yAxis:{title:{text:""}},symbolRadius:0,legend:{enabled:!0},series:[{marker:{lineColor:y,fillColor:"white"},name:"Total link clicks",lineWidth:1,color:y,data:null==e?void 0:e.map((e=>e.count)),zoneAxis:"x",zones:[{value:6},{dashStyle:"dash"}],fillColor:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`${y+40}`],[1,"rgb(64 171 175 / 0%)"]]}}]}),X=a=>{var s,t;const[n,r]=i({tabDaysIndex:0}),o=l.useMemo((()=>e.jsx("div",{className:"portlet-chart",children:e.jsx(j,{id:234212,options:ae(a.data)})})),[a.data]);return e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsxs("div",{className:"portlet-header",children:[e.jsx("h4",{children:"Usage behavior"}),e.jsx("div",{className:"p-nav-right",children:e.jsx(b,{defaultSelectedItem:n.tabDaysIndex,defaultClass:"",dynamicTab:"mini marginB0",activeClass:"active",tabData:Z,callBack:(e,a)=>{r((e=>{e.tabDaysIndex=a}))}})})]}),e.jsx("div",{className:"portlet-body",children:0===n.tabDaysIndex?a.isLoading?e.jsx(B,{}):(null==(t=null==(s=a.data)?void 0:s.byDays)?void 0:t.length)?e.jsx(e.Fragment,{children:o}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]}):a.isLoading?e.jsx(B,{}):(null==a?void 0:a.byHoursChart)?e.jsxs("div",{className:"portlet-chart",children:[e.jsx("img",{className:"chart-clock-img",src:O,alt:"by hours"}),e.jsx(j,{options:a.byHoursChart})]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})]})},Z=[{id:1001,text:"By days"},{id:1002,text:"By hours"}],ee={monday:N,tuesday:f,wednesday:k,thursday:D,friday:w,saturday:C,sunday:I},ae=e=>{let a=[];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((l=>{var s;null==(s=null==e?void 0:e.byDaysCount)||s.map((e=>{e.name.includes(l)&&a.push(e)}))}));let l=null==a?void 0:a.reduce(((e,a)=>e+Number(a.value)),0);return{chart:{type:"column",height:350},xAxis:{title:{text:""},categories:null==a?void 0:a.map((e=>e.name)),tickInterval:1},plotOptions:{column:{stacking:!1,colorByPoint:!0}},colors:null==a?void 0:a.map((e=>ee[e.name.toLowerCase()])),tooltip:{formatter:function(){return`<span>${this.x}</span><br><span style="color:${this.points[0].color}">●</span> Value: <span>${this.y.toFixed(0)}%</span>`}},yAxis:{title:{text:""},labels:{formatter:function(){return this.axis.defaultLabelFormatter.call(this)+"%"}},max:100},series:[{showInLegend:!1,name:"Communication period",pointWidth:27,data:null==a?void 0:a.map((e=>Number(e.value)/l*100)),legendIndex:0,states:{inactive:{opacity:1},hover:{enabled:!1}}}]}},le=a.memo((a=>{var l,s,t,n,r,o,d,c,m,u,h,x,p;const[v,g]=i({tabReachIndex:0,expandEnable:!1});return e.jsxs("div",{className:"portlet-container portlet-md "+(v.expandEnable?"expand-full-view":""),children:[e.jsxs("div",{className:"portlet-header",children:[e.jsx("h4",{children:"Reach"}),e.jsx("div",{className:"p-nav-right",children:e.jsx(b,{defaultSelectedItem:v.tabReachIndex,defaultClass:"",dynamicTab:"mini marginB0",activeClass:"active",tabData:se,callBack:(e,a)=>{g((e=>{e.tabReachIndex=a}))}})})]}),e.jsx("div",{className:"portlet-body",children:0===v.tabReachIndex?a.isLoading?e.jsx(B,{}):(null==(l=a.data)?void 0:l.reachOverAllData)&&(null==(t=null==(s=a.data)?void 0:s.reachOverAllData)?void 0:t.categories)&&(null==(r=null==(n=a.data)?void 0:n.reachOverAllData)?void 0:r.series)&&void 0!==(null==(o=a.data)?void 0:o.reachOverAllData)?e.jsxs("div",{className:"portlet-chart",children:[e.jsx(j,{options:ie(null==(d=a.data)?void 0:d.reachOverAllData,null==a?void 0:a.isDynamic),isDynamic:null==a?void 0:a.isDynamic}),e.jsx("div",{className:"expand-icon-wrap",onClick:()=>{g((e=>{e.expandEnable=!e.expandEnable}))},children:e.jsx("i",{className:(v.expandEnable?"icon-rs-arrow-left-mini":"icon-rs-arrow-right-medium")+" white"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]}):a.isLoading?e.jsx(B,{}):(null==(m=null==(c=a.data)?void 0:c.reachFirst24Hrs)?void 0:m.length)?e.jsxs("div",{className:"portlet-chart",children:[e.jsx(j,{options:te(null==(u=a.data)?void 0:u.reachFirst24Hrs,null==a?void 0:a.isDynamic)}),e.jsx("div",{className:"expand-icon-wrap",onClick:()=>{g((e=>{e.expandEnable=!e.expandEnable}))},children:e.jsx("i",{className:(v.expandEnable?"icon-rs-arrow-left-mini":"icon-rs-arrow-right-medium")+" white"})})]}):e.jsxs(e.Fragment,{children:[!(!(null==(h=a.data)?void 0:h.reachFirst24Hrs)||0!==(null==(p=null==(x=a.data)?void 0:x.reachFirst24Hrs)?void 0:p.length))&&e.jsx(W,{}),e.jsx(B,{})]})})]})})),se=[{id:1001,text:"Overall"},{id:1002,text:"First 24 hrs"}],ie=(e,a)=>{var l,s,i;return{chart:{type:"areaspline",className:"chart-line-animate x-axis-labels-performance-del"},title:{text:""},xAxis:{title:{text:""},categories:null==(l=null==e?void 0:e.categories)?void 0:l.map((e=>{let a=new Date(e).toDateString().split(" ");var l,s,i;return i=(l=a[2])%100,(1==(s=l%10)&&11!=i?l+"st":2==s&&12!=i?l+"nd":3==s&&13!=i?l+"rd":l+"th")+" "+a[1]})),labels:{rotation:0}},yAxis:{title:{text:""}},symbolRadius:0,plotOptions:{series:{marker:{fillColor:null,lineColor:null,lineWidth:1,radius:0,symbol:"square"}}},legend:{enabled:!0},series:[{marker:{fillColor:"#fff",radius:3,lineWidth:2},name:!0===a?"Total impression":"Total delivered",lineWidth:1,color:y,data:null==(i=null==(s=null==e?void 0:e.series[0])?void 0:s.datas)?void 0:i.map((e=>e)),fillColor:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`${y+40}`],[1,"rgb(64 171 175 / 0%)"]]}}]}},te=(e,a)=>({chart:{type:"areaspline",className:"chart-line-animate x-axis-labels-performance-del"},title:{text:""},xAxis:{title:{text:""},categories:null==e?void 0:e.map((e=>`${e.hr} hrs`)),labels:{rotation:0}},yAxis:{title:{text:""}},symbolRadius:0,legend:{enabled:!0},series:[{marker:{lineColor:y,fillColor:"white"},name:!0===a?"Total impression":"Total delivered",lineWidth:1,color:y,data:null==e?void 0:e.map((e=>e.count)),fillColor:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`${y+40}`],[1,"rgb(64 171 175 / 0%)"]]}}]}),ne=({state:a})=>{var s,i,t,n,r,o;const d=l.useMemo((()=>e.jsx(j,{options:re(a.data)})),[null==(s=a.data)?void 0:s.campaignStatus]);return e.jsx(P,{md:6,children:e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"Communication status"})}),e.jsx("div",{className:"portlet-body",children:e.jsx("div",{className:"portlet-chart",children:a.isLoading?e.jsx(B,{}):(null==(t=null==(i=a.data)?void 0:i.campaignStatus)?void 0:t.length)&&0!==(null==(o=null==(r=null==(n=a.data)?void 0:n.campaignStatus)?void 0:r.map((e=>Number(e.value))))?void 0:o.reduce(((e,a)=>e+a)))?e.jsx(e.Fragment,{children:d}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})})]})})},re=e=>{var a;let l=0,s=null==(a=null==e?void 0:e.campaignStatus)?void 0:a.filter((e=>e.value>0));return null==s||s.map((e=>{l=l+parseInt(e.value)||0})),{chart:{type:"pie"},legend:{itemMarginTop:0,itemMarginBottom:5},colors:[L,y,A,S],tooltip:{enabled:!0,formatter:function(){let e=Number(this.point.count);return this.point.name+'<br><span style="color:'+this.point.color+'">●</span> '+this.series.name+": <b>"+e+"</b></span>"}},plotOptions:{pie:{startAngle:0,dataLabels:{enabled:!0,formatter:function(){return this.point.y+"%"}}}},series:[{name:"Total",showInLegend:!0,borderWidth:2,height:"100%",innerSize:"50%",size:"100%",data:null==s?void 0:s.map(((e,a)=>{let s=parseInt(e.value)/l*100||0,i=parseFloat(s).toFixed(2),t=parseFloat(i);return{name:e.name,legendIndex:a,y:t,count:e.value}})),shadow:!1,dataLabels:{enabled:!0,connectorShape:"fixedOffset",crookDistance:"100%",softConnector:!0}},{borderWidth:0,innerSize:"89%",size:"53%",data:[{color:"rgba(0, 0, 0, 0.15)",y:100}],shadow:!1,showInLegend:!1,enableMouseTracking:!1,dataLabels:{enabled:!1}}]}};n(t);let oe=d;const de=s((a=>{var s,t,n,r,o;const d=l.useContext(c),[h,x]=i({isLoading:!1,isLinkLoading:!0,sankeyPortletFullView:!1,tabReachIndex:0,tabEngagementIndex:0,tabDaysIndex:0,tabDeviceIndex:0,skip:0,take:10,data:null,linkClickData:null,isMobilePush:!1,byHoursChart:null,saveError:!1,expandEnable:!1,splitDataItem:(null==(s=null==a?void 0:a.selectedItem)?void 0:s.splitTypes)?null==(t=null==a?void 0:a.selectedItem)?void 0:t.splitTypes:[],splitSelectedItem:(null==(n=null==a?void 0:a.selectedItem)?void 0:n.splitTypes)?null==(r=null==a?void 0:a.selectedItem)?void 0:r.splitTypes[0]:{}}),[j,g]=l.useState([]);l.useEffect((()=>{var e,l;(null==(e=null==a?void 0:a.selectedItem)?void 0:e.splitTypes)?b(null==(l=null==a?void 0:a.selectedItem)?void 0:l.splitTypes[0].id):b()}),[a.channelId]);const b=l.useCallback((e=>{var l;const s=a.state,i={campaignId:s.campaignId,channelId:a.channelId,blastGuid:s.guiId,splitType:(null==(l=a.selectedItem)?void 0:l.isSplitAB)?e:""};x((e=>{e.isLoading=!0,e.data=null})),m({path:u,params:i,sessionOut:d.globalStateData.setSessionOutData,ok:a=>{y(a,e)},fail:e=>{a.updateDownloadStatus(!1)}})}),[a.channelId]),y=(e,l)=>{var s,i,t;let n=null;if((e=>{var l;const s={campaignGuid:(null==(l=null==a?void 0:a.state)?void 0:l.guiId)||"",channelId:a.channelId,splitType:e||""};m({path:p,params:s,sessionOut:d.globalStateData.setSessionOutData,ok:e=>{e.status?x((a=>{a.linkClickData=e.data.topLinksClickedList,a.isLinkLoading=!1})):x((e=>{e.saveError=!0,e.isLinkLoading=!1}))},fail:e=>{x((e=>{e.isLinkLoading=!1}))}})})(l),!0===e.status){if(x((e=>{e.isLoading=!1})),g(null==(i=null==(s=null==e?void 0:e.data)?void 0:s.channelList)?void 0:i.nativeChannels),8===a.channelId&&(n=e.data.webpushDetail,x((a=>{a.data=e.data.webpushDetail,a.isMobilePush=!1}))),14===a.channelId&&(n=e.data.mobilePushDetail,x((a=>{a.data=e.data.mobilePushDetail,a.isMobilePush=!0}))),n.byHoursCount&&(null==(t=n.byHoursCount)?void 0:t.length)){let e=0,a=[],l=n.byHoursCount.map((e=>({hour:e.name.split(" ")[0],hourWiseCount:e.value})));l.forEach((a=>{e+=Number(a.hourWiseCount)})),a=l.sort(((e,a)=>Number(a.hourWiseCount)-Number(e.hourWiseCount))).map(((e,a)=>{if(a<4)return e})).filter(Boolean),a.forEach((e=>e.createdDate=new Date((e.createdDate||new Date)+" CDT").toLocaleString().replace(/,/g,"")));const s=a,i=null==s?void 0:s.reduce(((e,a)=>e+Number(a.hourWiseCount)),0),t=s[0],d=s[0];let m=0;s.forEach((e=>{m+=Number(e.hourWiseCount)}));let h=`of the visitors engage during ${t.hour-1>=12?t.hour-1-12==0?"12 PM":t.hour-1-12+" PM":t.hour-1==0?"12 AM":t.hour-1+" AM"} to ${d.hour>=12?d.hour-12==0?"12 PM":d.hour-12+" PM":0===d.hour?"12 AM":d.hour+" AM"}`;var r=new Date(s[0].createdDate);r.setHours(r.getHours()-1),new Date(s[0].createdDate);var o=new Date;o.setHours(Number(s[0].hour)-1),o=o.getHours();var c=new Date;c.setHours(Number(s[0].hour));let p={chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,backgroundColor:null},title:{text:null},credits:{enabled:!1},plotOptions:{gauge:{pivot:{radius:0},dial:{radius:"118%",topWidth:18,baseWidth:1,rearLength:"-93%",baseLength:"93%",backgroundColor:"#0c8aff"}}},pane:{startAngle:0,endAngle:360,size:"80%",innerSize:"50%",background:[{backgroundColor:{linearGradient:{x1:0,y1:1,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#FFF"]]},borderWidth:1,outerRadius:"0%"},{borderColor:"transparent"}]},yAxis:{min:0,max:24,minorTickInterval:"3",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#ccc",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#ccc",labels:{step:3,rotation:"90",style:{"font-size":"14px"}},title:{text:""},plotBands:[{from:0,to:24,color:"#e8e8ea",outerRadius:"105%",thickness:"4%"}]},tooltip:{enabled:!1},series:[{name:"24 Hour",data:[o,c=c.getHours()],tooltip:{valueSuffix:""}}]};try{let e=new Date;e.setHours(Number(s[0].hour)-1),e=e.getHours();let a=new Date;a.setHours(Number(s[0].hour)),a=a.getHours(),p.yAxis.plotBands.push({from:e,to:a,color:"#66ab37",outerRadius:"105%",thickness:"4%"})}catch(u){}try{let e=new Date;e.setHours(Number(s[1].hour)-1),e=e.getHours();let a=new Date;a.setHours(Number(s[1].hour)),a=a.getHours(),p.yAxis.plotBands.push({from:e,to:a,color:"#98cc03",outerRadius:"105%",thickness:"4%"})}catch(u){}try{let e=new Date;e.setHours(Number(s[2].hour)-1),e=e.getHours();let a=new Date;a.setHours(Number(s[2].hour)),a=a.getHours(),p.yAxis.plotBands.push({from:e,to:a,color:"#b2d943",outerRadius:"105%",thickness:"4%"})}catch(u){}try{let e=new Date;e.setHours(Number(s[3].hour)-1),e=e.getHours();let a=new Date;a.setHours(Number(s[3].hour)),a=a.getHours(),p.yAxis.plotBands.push({from:e,to:a,color:"#b6d759",outerRadius:"105%",thickness:"4%"})}catch(u){}x((e=>{e.byHoursChart=p,e.usage_by_hour_web=h,e.hourPeak=(Number(s[0].hourWiseCount)/i*100).toFixed(0)}))}a.updateDownloadStatus(!0)}else x((e=>{e.saveError=!0,e.isLoading=!1})),a.updateDownloadStatus(!1)},N=()=>h.saveError?e.jsx(v,{headerTitle:"Sorry",para:"Report is not generated properly. Please try again after sometime...",primaryButtonText:"OK",buttonClicked:e=>{x((e=>{e.saveError=!1}))}}):null,f=()=>{var a;return e.jsxs("div",{className:"d-flex justify-content-between align-items-center splite_ab splite_ab_bg",children:[e.jsxs("div",{children:[e.jsx(V,{data:null==h?void 0:h.splitDataItem,defaultItem:null==(a=null==h?void 0:h.splitSelectedItem)?void 0:a.title,alignRight:!0,fieldKey:"title",onSelect:e=>{x((a=>{a.splitSelectedItem=e})),b(e.id)}}),"    "]}),e.jsx("div",{})]})},k=()=>{var e;if((null==j?void 0:j.length)>0){let l=j.filter((e=>e.channelId==(null==a?void 0:a.channelId)));if((null==l?void 0:l.length)>0)return null==(e=l[0])?void 0:e.isDynamicCampaign}return!1};return e.jsxs("div",{children:[(null==(o=a.selectedItem)?void 0:o.isSplitAB)?e.jsx(f,{}):null,e.jsx(we,{state:h})," ",e.jsxs(U,{children:[e.jsx(De,{state:h,location:a.location,propsState:a.state,isDynamic:k()}),e.jsx(ke,{state:h,location:a.location,propsState:a.state,isDynamic:k()}),e.jsx(fe,{state:h,isDynamic:k()})]}),e.jsx(z,{}),e.jsxs(U,{children:[e.jsx(Ne,{state:h,isDynamic:k()})," ",e.jsx(ye,{state:h,channelId:a.channelId,isDynamic:k()})," "]}),e.jsxs(U,{children:[e.jsx(ge,{state:h,isDynamic:k()}),!1===k()?e.jsx(be,{state:h,isDynamic:k()}):null,e.jsx(ne,{state:h}),e.jsx(he,{state:h})]}),e.jsx($,{}),e.jsxs(U,{children:[e.jsx(xe,{state:h}),e.jsx(pe,{state:h}),e.jsx(ve,{state:h})]}),e.jsxs(U,{children:[e.jsx(je,{state:h})," "]}),e.jsx(N,{})]})})),ce=e=>{let a=0,l=null==e?void 0:e.filter((e=>Number(e.value)>0));return null==l||l.map((e=>{a+=parseInt(e.value)||0})),{chart:{type:"pie"},plotOptions:{pie:{startAngle:-90}},legend:{itemMarginTop:15,itemMarginBottom:0},colors:[T,F,M],tooltip:{enabled:!0,formatter:function(){let e=Number(this.point.count);return this.point.name+'<br><span style="color:'+this.point.color+'">●</span> '+this.series.name+": <b>"+e+"</b></span>"}},series:[{name:"Total clicks",showInLegend:!0,borderWidth:2,height:"100%",innerSize:"50%",size:"100%",data:null==l?void 0:l.map((e=>({name:e.name,y:parseInt(e.value)/a*100,count:e.value}))),shadow:!1,dataLabels:{enabled:!0,connectorShape:"crookedLine",crookDistance:"100%",softConnector:!1}},{borderWidth:0,innerSize:"89%",size:"53%",data:[{color:"rgba(0, 0, 0, 0.15)",y:100}],shadow:!1,showInLegend:!1,enableMouseTracking:!1,dataLabels:{enabled:!1}}]}},me=e=>{var a,l,s;return{chart:{type:"areaspline",className:"chart-line-animate x-axis-labels-performance-del"},title:{text:""},xAxis:{title:{text:""},categories:null==(a=null==e?void 0:e.categories)?void 0:a.map((e=>{let a=new Date(e).toDateString().split(" ");var l,s,i;return i=(l=a[2])%100,(1==(s=l%10)&&11!=i?l+"st":2==s&&12!=i?l+"nd":3==s&&13!=i?l+"rd":l+"th")+" "+a[1]})),labels:{rotation:0}},yAxis:{title:{text:""}},symbolRadius:0,legend:{enabled:!1},series:[{marker:{lineColor:"#b3d942",fillColor:"white"},name:"Conversion",color:H,lineWidth:1,data:null==(s=null==(l=null==e?void 0:e.series[0])?void 0:l.datas)?void 0:s.map((e=>e||0)),fillColor:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`${H+40}`],[1,"rgb(64 171 175 / 0%)"]]}}]}},ue=e=>{let a=0,l=null==e?void 0:e.filter((e=>Number(e.value)>0));return null==l||l.map((e=>{a+=parseInt(e.value)||0})),{chart:{type:"pie"},plotOptions:{pie:{startAngle:-90}},legend:{itemMarginTop:15,itemMarginBottom:0},tooltip:{enabled:!0,formatter:function(){let e=Number(this.point.count);return this.point.name+'<br><span style="color:'+this.point.color+'">●</span> '+this.series.name+": <b>"+e+"</b></span>"}},series:[{name:"Total",showInLegend:!0,borderWidth:2,height:"100%",innerSize:"50%",size:"100%",data:null==l?void 0:l.map((e=>({name:e.name,y:parseInt(e.value)/a*100,count:e.value}))),shadow:!1,dataLabels:{enabled:!0,connectorShape:"crookedLine",crookDistance:"100%",softConnector:!1}},{borderWidth:0,innerSize:"89%",size:"53%",data:[{color:"rgba(0, 0, 0, 0.15)",y:100}],shadow:!1,showInLegend:!1,enableMouseTracking:!1,dataLabels:{enabled:!1}}]}},he=({state:a})=>{var s,i,t,n,r,o;const d=l.useMemo((()=>{var l;return e.jsx(j,{options:ce(null==(l=a.data)?void 0:l.interactivity)})}),[null==(s=a.data)?void 0:s.interactivity]);return e.jsx(P,{md:6,children:e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"Interactivity"})}),e.jsx("div",{className:"portlet-body",children:e.jsx("div",{className:"portlet-chart",children:a.isLoading?e.jsx(B,{}):(null==(t=null==(i=a.data)?void 0:i.interactivity)?void 0:t.length)&&0!==(null==(o=null==(r=null==(n=a.data)?void 0:n.interactivity)?void 0:r.map((e=>Number(e.value))))?void 0:o.reduce(((e,a)=>e+a)))?e.jsx(e.Fragment,{children:d}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})})]})})},xe=({state:a})=>{var s,i,t,n;const r=l.useMemo((()=>{var l;return e.jsx(j,{options:ue(null==(l=a.data)?void 0:l.osInfo)})}),[null==(s=a.data)?void 0:s.osInfo]);return e.jsx(P,{md:6,children:e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"Operating system"})}),a.isLoading?e.jsx(B,{}):(null==(t=null==(i=a.data)?void 0:i.osInfo)?void 0:t.length)?e.jsx(e.Fragment,{children:e.jsx("div",{className:"portlet-body",children:(null==(n=a.data)?void 0:n.osInfo)?e.jsx("div",{className:"portlet-chart",children:r}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})]})})},pe=({state:a})=>e.jsx(P,{md:6,children:e.jsx(X,{isLoading:a.isLoading,data:a.data,byHoursChart:a.byHoursChart})}),ve=({state:a})=>{var l,s,i,t;return e.jsx(P,{md:12,children:e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"By location"})}),e.jsx("div",{className:"portlet-body",children:a.isLoading?e.jsx(B,{}):(null==(s=null==(l=a.data)?void 0:l.byLocationGeography)?void 0:s.length)?e.jsx("div",{className:"portlet-map mt0",children:e.jsx(g,{options:(t=null==(i=a.data)?void 0:i.byLocationGeography,{chart:{map:"custom/world",proj4:r,height:330},title:{text:" "},exporting:{enabled:!1},credits:{enabled:!1},mapNavigation:{enabled:!1},tooltip:{headerFormat:"",pointFormat:"<span>{point.name}</span><br>Lat: {point.lat}, Lon: {point.lon}",useHTML:!0,shared:!0,backgroundColor:"#5f5f5f",borderWidth:0,shadow:!1,style:{color:"#fefefe",cursor:"default",fontSize:"13px",whiteSpace:"nowrap"}},legend:{enabled:!1},plotOptions:{mappoint:{marker:{symbol:`url(${oe})`},dataLabels:{align:"left",x:5,verticalAlign:"middle"}}},series:[{name:"Basemap",mapData:o,borderColor:"#ffffff",nullColor:"#749bf0",showInLegend:!1},{name:"Separators",type:"mapline",nullColor:"#707070",showInLegend:!1,enableMouseTracking:!1},{type:"mappoint",name:"Cities",data:null==t?void 0:t.map((e=>({name:e.city,lat:Number(e.latitude),lon:Number(e.longitude)})))}]})})}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})]})})},je=({state:a})=>{var l,s,i;return e.jsx(P,{md:12,children:e.jsxs("div",{className:"portlet-container portlet-md height-auto",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"Total link click activity"})}),e.jsx("div",{className:"portlet-body",children:a.isLinkLoading?e.jsx(B,{isError:!0}):(null==(l=a.linkClickData)?void 0:l.length)>0?e.jsx(R,{isDataStateRequired:!0,data:a.linkClickData,settings:{total:null==(s=a.linkClickData)?void 0:s.length},pageable:(null==(i=a.linkClickData)?void 0:i.length)>5,column:[{title:"S.No",field:"sNo",filter:"text"},{title:"Link (URL)",field:"url"},{title:"Total clicks",field:"totalClicks"}]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{isError:!0})]})})]})})},ge=({state:a,isDynamic:l})=>e.jsx(P,{md:l?12:6,children:e.jsx(q,{isLoading:a.isLoading,data:a.data})}),be=({state:a,isDynamic:s})=>{var i,t,n,r,o,d;const c=l.useMemo((()=>{var l,s,i;return(null==(s=null==(l=a.data)?void 0:l.conversionOverAllData)?void 0:s.series)?e.jsx(j,{options:me(null==(i=a.data)?void 0:i.conversionOverAllData)}):null}),[null==(i=a.data)?void 0:i.conversionOverAllData]);return e.jsx(P,{md:6,children:e.jsxs("div",{className:"portlet-container portlet-md",children:[e.jsx("div",{className:"portlet-header",children:e.jsx("h4",{children:"Conversion"})}),!0===s?e.jsxs(e.Fragment,{children:[e.jsx(W,{message:"Conversion is not applicable for Dynamic zone."}),e.jsx(B,{})]}):e.jsx(e.Fragment,{children:a.isLoading?e.jsx(B,{}):(null==(t=a.data)?void 0:t.conversionOverAllData)&&(null==(r=null==(n=a.data)?void 0:n.conversionOverAllData)?void 0:r.categories)&&(null==(d=null==(o=a.data)?void 0:o.conversionOverAllData)?void 0:d.series)?e.jsx("div",{className:"portlet-body",children:e.jsx("div",{className:"portlet-chart",children:c})}):e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(B,{})]})})]})})},ye=({state:a,channelId:l,isDynamic:s})=>{var i,t,n,r,o,d,c,m,u,h,x,p,v,j,g,b,y,N,f,k,D,w,C,I,L,A,S,T;return e.jsx(P,{md:4,children:e.jsxs("div",{className:"portlet-container keymetrics-portlet keymetrics-md",children:[e.jsx("h4",{children:"Key metrics"}),e.jsxs("ul",{className:"keymetrics-list key-border",children:[e.jsxs("li",{children:[e.jsx("h3",{children:(null==(t=null==(i=a.data)?void 0:i.keyMetrics)?void 0:t.totalSent)||0}),e.jsx("small",{children:!0===s?"Total impression":"Total sent"})]}),e.jsxs("li",{children:[e.jsx("h3",{children:(null==(r=null==(n=a.data)?void 0:n.keyMetrics)?void 0:r.delivered)||0}),e.jsx("small",{children:!0===s?"Unique impression":"Delivered"})]})]}),e.jsx("p",{children:"Interactivity"}),e.jsxs("ul",{className:"keymetrics-list keymetrics-theme",children:[e.jsxs("li",{className:"bg-light-blue",children:[e.jsxs("h3",{className:"white p0",children:[(null==(d=null==(o=a.data)?void 0:o.keyMetrics)?void 0:d.clicks)||0,e.jsx("small",{})]}),e.jsx("small",{children:!0===s?"Total clicks":"Clicks"})]}),8===l?null:e.jsxs("li",{className:"bg-medium-blue",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(m=null==(c=a.data)?void 0:c.keyMetrics)?void 0:m.mayBeLater)||0,e.jsx("small",{})]}),e.jsx("small",{children:"May be later"})]}),e.jsxs("li",{className:8===l?"bg-medium-blue":"bg-dark-blue",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(h=null==(u=a.data)?void 0:u.keyMetrics)?void 0:h.dismiss)||0,e.jsx("small",{})]}),e.jsx("small",{children:"Dismiss"})]})]}),e.jsx("p",{children:"Undelivered push notification status"}),e.jsxs("ul",{className:"keymetrics-list keymetrics-theme",children:[e.jsxs("li",{className:"bg-light-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(v=null==(p=null==(x=a.data)?void 0:x.keyMetrics)?void 0:p.undeliveredPushNotificationStatus)?void 0:v.undelivered)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Undelivered"})]}),a.isMobilePush?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"bg-medium-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(b=null==(g=null==(j=a.data)?void 0:j.keyMetrics)?void 0:g.undeliveredPushNotificationStatus)?void 0:b.dueToAppUnInstall)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Due to app uninstalls"})]}),e.jsxs("li",{className:"bg-dark-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(f=null==(N=null==(y=a.data)?void 0:y.keyMetrics)?void 0:N.undeliveredPushNotificationStatus)?void 0:f.duplicateRegId)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Mismatch sender ID"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"bg-medium-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(w=null==(D=null==(k=a.data)?void 0:k.keyMetrics)?void 0:D.undeliveredPushNotificationStatus)?void 0:w.mismatchSenderID)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Mismatch sender ID"})]}),e.jsxs("li",{className:"bg-dark-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(L=null==(I=null==(C=a.data)?void 0:C.keyMetrics)?void 0:I.undeliveredPushNotificationStatus)?void 0:L.notRegistered)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Not registered"})]})]}),e.jsxs("li",{className:"bg-medium-red",children:[e.jsxs("h3",{className:"white p0",children:[!0===s?"NA":(null==(T=null==(S=null==(A=a.data)?void 0:A.keyMetrics)?void 0:S.undeliveredPushNotificationStatus)?void 0:T.unSubcribed)||0,e.jsx("small",{})]}),e.jsx("small",{className:"truncate70-del",children:"Unsubscribed"})]})]})]})})},Ne=({state:a,isDynamic:l})=>e.jsx(P,{md:8,children:e.jsx(le,{isLoading:a.isLoading,data:a.data,isDynamic:l})}),fe=({state:a,isDynamic:l})=>{var s,i,t,n,r,o,d,c,m,u,h,x,p,v,j;return e.jsx(P,{children:e.jsx("div",{className:"details-box "+(!0===l?"dynamic-height":""),children:a.isLoading?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-start d-flex align-items-center "+(!0===l?"":"marginB23"),children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("img",{src:G,alt:"Communication campaign",width:65,height:65})}),e.jsxs("div",{className:"marginL23",children:[e.jsx("h4",{className:"marginB0",children:!0===l?"CTR":"Conversion"}),e.jsx("h3",{className:"marginB0 font-xl fontM",children:!0===l?`${(null==(i=null==(s=a.data)?void 0:s.engagement)?void 0:i.clicks)||0}%`:e.jsx(e.Fragment,{children:`${(null==(n=null==(t=a.data)?void 0:t.conversion)?void 0:n.count)||0}${!0===l?"%":""}`||0})}),e.jsx("div",{className:"detail-center",children:e.jsx("ul",{children:e.jsxs("li",{children:[e.jsx("small",{children:!0===l?" ":"Goal conversion"}),e.jsx("span",{children:!0===l?" ":(null==(o=null==(r=a.data)?void 0:r.conversion)?void 0:o.registration)||0}),e.jsx("small",{children:!0===l?" ":"%"})]})})})]})]}),!0===l?null:e.jsxs("div",{className:"detail-end bgGreen-medium d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"marginB0",children:(null==(d=a.data)?void 0:d.prevDisplayLabel)||"Previous week comparison"}),e.jsxs("div",{className:"",children:[e.jsx("span",{children:null==(m=null==(c=a.data)?void 0:c.conversion)?void 0:m.previousWeekComparison}),e.jsx("small",{className:"font-sm",children:"NA"!==(null==(h=null==(u=a.data)?void 0:u.conversion)?void 0:h.previousWeekComparison)&&""}),(null==(x=a.data)?void 0:x.conversion)?"NA"!==(null==(v=null==(p=a.data)?void 0:p.conversion)?void 0:v.previousWeekComparison)&&e.jsx("i",{className:`icon-rs-arrow-${(null==(j=a.data)?void 0:j.isLowConvPerformance)?"down":"up"}-medium icons-md white posr top3`}):e.jsx("span",{children:"NA"})]})]})]})})})},ke=({state:a,location:l,propsState:s,isDynamic:i})=>{var t,n,r,o,d,c,m,u,x,p,v,j,g,b,y;return e.jsx(P,{children:e.jsx("div",{className:"details-box",children:a.isLoading?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-start d-flex align-items-center "+(!0===i?"":"marginB23"),children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("img",{src:K,alt:"Communication campaign",width:85,height:85})}),e.jsxs("div",{className:"marginL23",children:[e.jsx("h4",{className:"marginB0",children:"Engagement"}),e.jsx("h3",{className:"marginB0 font-xl fontM",children:(null==(n=null==(t=a.data)?void 0:t.engagement)?void 0:n.count)||0}),e.jsx("div",{className:"detail-center",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("small",{children:"Clicks"}),e.jsx("span",{children:(null==(o=null==(r=a.data)?void 0:r.engagement)?void 0:o.clicks)||0}),e.jsx("small",{children:"%"})]}),!0===i?null:e.jsx("li",{children:e.jsx(h,{pophover:e.jsxs(e.Fragment,{children:["Event trigger"===l.state.campaignTypeValue||"Event trigger"===s.deliveryType||"Event trigger"===s.campaignType?e.jsxs("small",{children:["Unknown audience:"," ",(null==(d=a.data)?void 0:d.engUnknownAudienceCount)||0," "]}):e.jsx("small",{children:"Unknown audience: NA "}),e.jsxs("small",{children:["Known audience:"," ",(null==(c=a.data)?void 0:c.engKnownAudienceCount)||0]}),e.jsxs("small",{children:["Identified audience:"," ",(null==(m=a.data)?void 0:m.engIdentifiedUserCount)||0]})]}),position:"top",children:e.jsx("i",{className:"icon-rs-circle-info-mini icons-sm grey paddingL5 d-inline-block float-end cursor-pointer"})})})]})})]})]}),!0===i?null:e.jsxs("div",{className:"detail-end bgOrange-medium d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"marginB0",children:(null==(u=a.data)?void 0:u.prevDisplayLabel)||"Previous week comparison"}),e.jsxs("div",{children:[e.jsx("span",{children:null==(p=null==(x=a.data)?void 0:x.engagement)?void 0:p.previousWeekComparison}),e.jsx("small",{className:"font-sm",children:"NA"!==(null==(j=null==(v=a.data)?void 0:v.engagement)?void 0:j.previousWeekComparison)&&""}),"NA"!==(null==(b=null==(g=a.data)?void 0:g.engagement)?void 0:b.previousWeekComparison)&&e.jsx("i",{className:`icon-rs-arrow-${(null==(y=a.data)?void 0:y.isLowEngPerformance)?"down":"up"}-medium icons-md white posr top3`})]})]})]})})})},De=({state:a,location:l,propsState:s,isDynamic:i})=>{var t,n,r,o,d,c,m,u,x,p,v,j,g,b,y;return e.jsx(P,{children:e.jsx("div",{className:"details-box",children:a.isLoading?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-start d-flex align-items-center "+(!0===i?"":"marginB23"),children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("img",{src:_,alt:"Communication campaign",width:65,height:65})}),e.jsxs("div",{className:"marginL23",children:[e.jsx("h4",{className:"marginB0",children:"Reach"}),e.jsx("h3",{className:"marginB0 font-xl fontM",children:(null==(n=null==(t=a.data)?void 0:t.reach)?void 0:n.count)||0}),e.jsx("div",{className:"detail-center",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("small",{children:!0===i?"Impression":"Delivered"}),e.jsx("span",{children:(null==(o=null==(r=a.data)?void 0:r.reach)?void 0:o.delivered)||0}),e.jsx("small",{children:"%"})]}),!0===i?null:e.jsx("li",{children:e.jsx(h,{pophover:e.jsxs(e.Fragment,{children:["Event trigger"===l.state.campaignTypeValue||"Event trigger"===s.deliveryType||"Event trigger"===s.campaignType?e.jsxs("small",{children:["Unknown audience:"," ",(null==(d=a.data)?void 0:d.deliveredUnknownUserCount)||0," "]}):e.jsx("small",{children:"Unknown audience: NA "}),e.jsxs("small",{children:["Known audience:"," ",(null==(c=a.data)?void 0:c.deliveredKnownUserCount)||0]}),e.jsxs("small",{children:["Identified audience:"," ",(null==(m=a.data)?void 0:m.deliveredIdentifiedUserCount)||0]})]}),position:"top",children:e.jsx("i",{className:"icon-rs-circle-info-mini icons-sm grey paddingL5 d-inline-block float-end cursor-pointer"})})})]})})]})]}),!0===i?null:e.jsxs("div",{className:"detail-end bgBlue-light d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"marginB0",children:(null==(u=a.data)?void 0:u.prevDisplayLabel)||"Previous week comparison"}),e.jsxs("div",{children:[e.jsx("span",{children:null==(p=null==(x=a.data)?void 0:x.reach)?void 0:p.previousWeekComparison}),e.jsx("small",{className:"font-sm",children:"NA"!==(null==(j=null==(v=a.data)?void 0:v.reach)?void 0:j.previousWeekComparison)&&""}),"NA"!==(null==(b=null==(g=a.data)?void 0:g.reach)?void 0:b.previousWeekComparison)&&e.jsx("i",{className:`icon-rs-arrow-${(null==(y=a.data)?void 0:y.isLowReachPerformance)?"down":"up"}-medium icons-md white posr top3`})]})]})]})})})},we=({state:a})=>{var l,s,i,t,n;return e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h3",{className:"marginY15",children:"Overview "}),e.jsx("small",{className:"ml10",children:void 0!==(null==(l=a.data)?void 0:l.lastUpdatedDateTime)&&null!==(null==(s=a.data)?void 0:s.lastUpdatedDateTime)&&"0001-01-01T00:00:00"!==(null==(i=a.data)?void 0:i.lastUpdatedDateTime)?e.jsxs(e.Fragment,{children:["(As on:"," ",x(null==(t=a.data)?void 0:t.lastUpdatedDateTime,null==(n=a.data)?void 0:n.lastUpdatedDateTime),")"]}):""})]})};export{de as default};
