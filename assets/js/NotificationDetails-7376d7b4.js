var t=Object.defineProperty,e=(e,i,a)=>(((e,i,a)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a})(e,"symbol"!=typeof i?i+"":i,a),a);import{j as i}from"./pdf-editor-5df4b936.js";import{w as a,r as o}from"./react-vendor-379f659a.js";import{c as s,o as r,a as n,b as c}from"./mobx-e1586d6a.js";import{L as l}from"./LayoutPageWrapper-ce9c32da.js";import{R as d}from"./RSPDateRangePicker-f4f8ca76.js";import{be as m,M as h,Bx as g,By as p,z as u,ep as f,ar as D,nb as x}from"./index-7d59e1e4.js";import{RSConfirmAlert as b}from"./RSConfirmAlert-56ae520e.js";import"./constants-82903eb8.js";import{S as j}from"./SkeletonCampaignList-4f3a1da7.js";import{K as w}from"./index-b70e15a0.js";import{p as y}from"./kendo-5d73125a.js";import{h as k}from"./utils-16c7e021.js";import{C as S}from"./ui-9ddcca8e.js";import"./drag-drop-bc3ac7ea.js";import"./RSIcon-9079b0f0.js";import"./SkeletonTable-9a18ea3e.js";import"./get-4aa85b1a.js";const M=new class{constructor(){e(this,"getDateWithDay",(t=>k().add(t,"d").toDate())),e(this,"formatDate",(t=>{var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate();return[e.getFullYear(),i,a].join("-")})),e(this,"result",null),e(this,"userList",[]),e(this,"skip",0),e(this,"take",10),e(this,"listError",!1),e(this,"modelShown",!1),e(this,"description",""),e(this,"isLoading",!1),e(this,"startDate",this.formatDate(k(this.getDateWithDay(-29)).format("DD MMM yyyy"))),e(this,"endDate",this.formatDate(k(new Date).format("DD MMM yyyy"))),e(this,"isShowDateRangePicker",!1),e(this,"applyBtn",!1),e(this,"context",null),e(this,"updateModelShown",(t=>{this.modelShown=t})),e(this,"onCloseDateRangePicker",((t,e)=>{let i=new Date(e.start.toISOString().split("T")[0]),a=new Date(e.end.toISOString().split("T")[0]);i=k(i).format("DD MMM yyyy"),a=k(a).format("DD MMM yyyy");let o={userId:m(),startDate:this.formatDate(i),endDate:this.formatDate(a)};t||(this.startDate=this.formatDate(i),this.endDate=this.formatDate(a),this.isLoading=!0,this.getAlertNotification(o)),this.isShowDateRangePicker=t})),e(this,"dataStateChange",(t=>{this.isLoading=!0,setTimeout((()=>{this.isLoading=!1;let e=I(t.dataState,this.userList);this.dataState=t.dataState,this.result=e.result}),1e3)})),e(this,"formatDate",(t=>{var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate();return[e.getFullYear(),i,a].join("-")})),e(this,"getAlertNotification",(t=>{const e={userId:m(),startDate:this.startDate,endDate:this.endDate};h({path:g,params:t||e,sessionOut:this.context.globalStateData.setSessionOutData,ok:t=>{var i,a,o,s;if(t.status&&(null==(a=null==(i=t.data)?void 0:i.alertNotifications)?void 0:a.length)){let i=null==(s=null==(o=t.data)?void 0:o.alertNotifications)?void 0:s.sort(((t,e)=>t.notificationID>e.notificationID?1:-1)).reverse();if(this.userList=i,null!=e){let t=I({take:5,skip:0},i);this.dataState=t.dataState,this.result=t.result}this.listError=!1}else this.listError=!0;this.isLoading=!1},fail:t=>{this.listError=!0,this.isLoading=!1}})})),e(this,"readNotification",((t,e)=>{const i={userId:m(),notificationId:t};h({path:p,params:i,ok:t=>{t.status&&e(!0)},fail:t=>{}})})),s(this,{result:r,userList:r,skip:r,take:r,listError:r,modelShown:r,description:r,isLoading:r,startDate:r,endDate:r,isShowDateRangePicker:r,applyBtn:r,getAlertNotification:n,dataStateChange:n,onCloseDateRangePicker:n,updateModelShown:n,readNotification:n})}},I=(t,e)=>({result:y(e.slice(0),t),dataState:t});class C extends o.Component{constructor(){super(...arguments),e(this,"componentDidMount",(t=>{M.context=this.context,M.isLoading=!0,M.getAlertNotification()})),e(this,"DescriptionCustomComponent",c((t=>i.jsx(N,{...t,infoBtnClick:t=>{M.updateModelShown(!0),M.description=t},callback:()=>{M.getAlertNotification()}})))),e(this,"DateRangeComponent",c((t=>i.jsxs("div",{className:"d-flex justify-content-between mt15 mb15",children:[i.jsx("div",{}),i.jsx("div",{className:"d-flex align-items-center",children:i.jsx(d,{enable:!0,isShowDateRangePicker:M.isShowDateRangePicker,closeDateRangePicker:M.onCloseDateRangePicker,applyBtnClicked:t=>M.applyBtn=t,cancelBtnClicked:()=>M.isShowDateRangePicker=!1})})]})))),e(this,"NotificationDetails",c((t=>{var e,a;return i.jsxs(i.Fragment,{children:[i.jsx(this.DateRangeComponent,{}),M.isLoading&&i.jsx(j,{isError:M.listError}),!M.isLoading&&(null==(e=M.userList)?void 0:e.length)?i.jsx(w,{config:M.dataState,data:M.userList,onDataStateChange:M.dataStateChange,column:[{title:"Date and Time",field:"date",width:"230",cell:t=>i.jsxs("td",{children:[" ",f(t.dataItem.createdDate,!0)," "]})},{title:"Description",field:"description",filter:"text",cell:this.DescriptionCustomComponent},{title:"Module",field:"module",filter:"text",width:"300"},{title:"Status",field:"status",filter:"text",width:"120"}],settings:{total:null==(a=M.userList)?void 0:a.length},pageable:M.userList.length>5}):null]})}))),e(this,"ModalComponent",c((()=>M.modelShown&&i.jsx(b,{headerTitle:"Notification details",para:M.description.includes(".")?M.description:M.description+".",primaryButtonText:"OK",buttonClicked:t=>M.modelShown=!1}))))}render(){return i.jsxs(l,{children:[i.jsx(S,{fluid:!0,className:"main-heading-wrapper mb0",children:i.jsxs(S,{className:"mhw-container",children:[i.jsx("div",{className:"mhwc-left",children:i.jsx("h1",{children:i.jsx("div",{className:"mh-wrapper",children:i.jsx("span",{className:"mh-text",children:"Notification details"})})})}),i.jsx("div",{className:"mhwc-right"})]})}),i.jsx(this.ModalComponent,{}),i.jsx(S,{className:"page-header",children:i.jsx(this.NotificationDetails,{})})]})}}e(C,"contextType",u);const v=a(C),N=c((t=>{var e;return i.jsx("td",{children:i.jsx("div",{className:"camp-icon",children:i.jsxs("ul",{className:"d-flex align-items-center justify-content-start",children:[i.jsx("li",{children:i.jsx(D,{tooltip:null==(e=L[t.dataItem.notificationTypeID])?void 0:e.text,icon:L[t.dataItem.notificationTypeID].icon,size:L[t.dataItem.notificationTypeID].size?L[t.dataItem.notificationTypeID].size:"md",color:L[t.dataItem.notificationTypeID].color,mainClass:`box-view-icon ${L[t.dataItem.notificationTypeID].bg}`})}),i.jsx("li",{className:"mx10",children:i.jsx("div",{className:"truncate500 text-underline-h cp",onClick:()=>{t.infoBtnClick(t.dataItem.description),M.readNotification(t.dataItem.notificationID,(e=>{const i=new CustomEvent("myCustomEvent",{detail:{message:"Hello from custom event!"}});window.dispatchEvent(i),e&&t.callback(!0)}))},children:t.dataItem.description.includes(".")?t.dataItem.description:t.dataItem.description+"."})}),i.jsx("li",{children:t.dataItem.description.length>62&&i.jsx(D,{icon:x,tooltip:"Info",onClick:()=>{t.infoBtnClick(t.dataItem.description),M.readNotification(t.dataItem.notificationID,(e=>{e&&t.callback(!0)}))}})})]})})})})),L={1:{icon:"icon-rs-tick-medium",text:"Created",bg:"bg-primary-green",color:"white"},2:{icon:"icon-rs-circle-tick-medium",text:"Modified",bg:"bg-primary-green",color:"white"},3:{icon:"icon-rs-tick-medium",text:"Created",bg:"bg-primary-green",color:"white"},4:{icon:"icon-rs-smart-link-medium",text:"Smart Link",bg:"bg-primary-orange",color:"white"},5:{icon:"icon-rs-circle-time-medium",text:"Scheduled"},6:{icon:"icon-rs-circle-time-medium",text:"Scheduled",color:"blue"},7:{icon:"icon-rs-circle-tick-medium",text:"Modified",bg:"bg-primary-green",color:"white"},8:{icon:"icon-rs-alert-medium",text:"Alert",color:"white"},9:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},10:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},11:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},12:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},13:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},14:{icon:"icon-rs-delete-medium",text:"Modified",color:"white",bg:"bg-primary-red"},15:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},16:{icon:"icon-rs-close-medium",text:"Delete",color:"white",bg:"bg-primary-red"},17:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white",bg:"bg-primary-green"},18:{icon:"icon-rs-circle-time-medium",text:"Scheduled",bg:"bg-primary-orange",color:"white"},19:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white"},20:{icon:"icon-rs-circle-tick-medium",text:"Modified",color:"white"}};export{v as default};
