import{a,j as e,h as n,E as l}from"./pdf-editor-5df4b936.js";import{L as t}from"./LayoutPageWrapper-ce9c32da.js";import{r as s}from"./react-vendor-379f659a.js";import{i}from"./utils-16c7e021.js";import{r as d}from"./react-router-dom.min-6f8d67fa.js";import{z as o,al as c,M as r,C8 as h,U as m,ar as u,aS as p,am as x}from"./index-7d59e1e4.js";import{R as j}from"./RTabbar-aa3b2609.js";import{S as v,a as g}from"./SkeletonTable-9a18ea3e.js";import"./constants-82903eb8.js";import{C as I}from"./ui-9ddcca8e.js";import"./kendo-5d73125a.js";import"./drag-drop-bc3ac7ea.js";const f=s.lazy((()=>a((()=>import("./SocialMedia-31a6e4a9.js")),["assets/js/SocialMedia-31a6e4a9.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/NewCharts-2003bf3c.js","assets/js/charts-f2096496.js","assets/js/Colors-8a9fdcf2.js","assets/js/map-99306e6f.js","assets/js/BootstrapDropdown-280269fa.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/js/index-7d59e1e4.js","assets/js/utils-16c7e021.js","assets/css/index-66e6a83b.css","assets/js/RSConfirmAlert-56ae520e.js","assets/js/RSIcon-9079b0f0.js","assets/js/RTabbar-aa3b2609.js","assets/js/Skeleton-e23e80f4.js","assets/js/constants-82903eb8.js","assets/css/constants-2d54d6dc.css","assets/js/SkeletonTable-9a18ea3e.js","assets/js/chart-clock-modified-6edbe255.js","assets/js/index-0540604b.js","assets/js/Constants-07218659.js","assets/js/index-b70e15a0.js","assets/js/get-4aa85b1a.js"]))),C=s.lazy((()=>a((()=>import("./PaidMedia-723a3237.js")),["assets/js/PaidMedia-723a3237.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/charts-f2096496.js","assets/js/map-99306e6f.js","assets/js/NewCharts-2003bf3c.js","assets/js/Colors-8a9fdcf2.js","assets/js/BootstrapDropdown-280269fa.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/js/index-7d59e1e4.js","assets/js/utils-16c7e021.js","assets/css/index-66e6a83b.css","assets/js/RTabbar-aa3b2609.js","assets/js/Skeleton-e23e80f4.js","assets/js/constants-82903eb8.js","assets/css/constants-2d54d6dc.css","assets/js/SkeletonTable-9a18ea3e.js","assets/js/chart-clock-modified-6edbe255.js","assets/js/Constants-07218659.js","assets/js/index-0540604b.js","assets/js/export-data-a2401fa3.js","assets/js/index-b70e15a0.js","assets/js/get-4aa85b1a.js"]))),N=s.lazy((()=>a((()=>import("./SmartLinkReport-b7e5f38d.js")),["assets/js/SmartLinkReport-b7e5f38d.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/NewCharts-2003bf3c.js","assets/js/charts-f2096496.js","assets/js/Colors-8a9fdcf2.js","assets/js/map-99306e6f.js","assets/js/index-7d59e1e4.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/js/utils-16c7e021.js","assets/css/index-66e6a83b.css","assets/js/RSConfirmAlert-56ae520e.js","assets/js/RSIcon-9079b0f0.js","assets/js/Engagement-885809d4.js","assets/js/RTabbar-aa3b2609.js","assets/js/Skeleton-e23e80f4.js","assets/js/constants-82903eb8.js","assets/css/constants-2d54d6dc.css","assets/js/SkeletonTable-9a18ea3e.js","assets/js/chart-clock-modified-6edbe255.js","assets/js/Constants-07218659.js","assets/js/index-0540604b.js","assets/js/index-b70e15a0.js","assets/js/get-4aa85b1a.js"]))),D=s.lazy((()=>a((()=>import("./NotificationReport-aebc191c.js")),["assets/js/NotificationReport-aebc191c.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/utils-16c7e021.js","assets/js/charts-f2096496.js","assets/js/map-99306e6f.js","assets/js/maps-b8c6f010.js","assets/js/maker-47de0917.js","assets/js/export-data-a2401fa3.js","assets/js/index-7d59e1e4.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/css/index-66e6a83b.css","assets/js/RSConfirmAlert-56ae520e.js","assets/js/RSIcon-9079b0f0.js","assets/js/NewCharts-2003bf3c.js","assets/js/Colors-8a9fdcf2.js","assets/js/RTabbar-aa3b2609.js","assets/js/Skeleton-e23e80f4.js","assets/js/constants-82903eb8.js","assets/css/constants-2d54d6dc.css","assets/js/SkeletonTable-9a18ea3e.js","assets/js/chart-clock-modified-6edbe255.js","assets/js/index-b70e15a0.js","assets/js/get-4aa85b1a.js","assets/js/Constants-07218659.js","assets/js/index-0540604b.js","assets/js/BootstrapDropdown-280269fa.js"]))),w=a=>{var x,j,f,C,N,D;const w=d.useHistory(),S=s.useContext(o),[b,y]=i({data:null,isLoading:!0,channelList:[],nativeChannels:[],paidMediaChannels:[],socialMediaChannels:[],campaignName:null==(j=null==(x=null==w?void 0:w.location)?void 0:x.state)?void 0:j.campaignName,startDate:c(null==(C=null==(f=null==w?void 0:w.location)?void 0:f.state)?void 0:C.startDate),endDate:c(null==(D=null==(N=null==w?void 0:w.location)?void 0:N.state)?void 0:D.endDate),showDownLoad:!1,channelName:"Default"});s.useEffect((()=>{k()}),[]);const M=s.useCallback((a=>{y((e=>(e.showDownLoad=a,e)))}),[]),_=()=>{var a;const e=null==(a=null==w?void 0:w.location)?void 0:a.state;return{campaignId:null==e?void 0:e.campaignId,channelId:(null==e?void 0:e.channelId)||1,blastGuid:null==e?void 0:e.guiId}},k=s.useCallback((()=>{r({path:h,params:_(),sessionOut:S.globalStateData.setSessionOutData,ok:a=>{(a=>{var e,n;let l=[],t=[],s=[],i=[];try{if(a.status){let d=(null==(e=null==a?void 0:a.data)?void 0:e.channelList)||[];(null==(n=Object.keys(d))?void 0:n.length)&&(y((e=>{e.data=null==a?void 0:a.data})),t=(null==d?void 0:d.nativeChannels)||[],s=(null==d?void 0:d.paidMediaChannels)||[],i=(null==d?void 0:d.socialMediaChannels)||[],l=t.filter((a=>16!=a.channelId)),(null==i?void 0:i.length)&&l.push({channelName:"Social media",channelId:5}),(null==s?void 0:s.length)&&l.push({channelName:"Paid media",channelId:10}))}}catch(d){alert(d)}y((e=>{var n,d,o,r;return e.channelList=l,e.isLoading=!1,e.nativeChannels=t,e.socialMediaChannels=i,e.paidMediaChannels=s,e.selectedChannelId=(null==(n=l[0])?void 0:n.channelId)||0,e.isError=!l.length,e.campaignName=null==(d=a.data)?void 0:d.campaignName,e.startDate=c(null==(o=a.data)?void 0:o.startDate),e.endDate=c(null==(r=a.data)?void 0:r.endDate),e}))})(a)},fail:a=>{y((a=>(a.isLoading=!1,a.isError=!0,a)))}})})),E=()=>e.jsx("h1",{className:"details-ana-title",children:e.jsx("div",{className:"mh-wrapper",children:e.jsx(m,{text:null==b?void 0:b.campaignName,position:"bottom",children:e.jsx("span",{className:"mh-text",children:null==b?void 0:b.campaignName})})})}),R=()=>e.jsxs(e.Fragment,{children:[(null==b?void 0:b.campaignName)?e.jsx("h1",{className:"marginB0 marginL15 marginR10",children:"-"}):null,e.jsx("span",{className:"details-ana-date",children:"Invalid date"===(null==b?void 0:b.startDate)||"Invalid date"===(null==b?void 0:b.endDate)?null:e.jsxs(e.Fragment,{children:[null==b?void 0:b.startDate," - ",null==b?void 0:b.endDate]})})]}),P=()=>e.jsx("div",{className:`d-flex ${!1===b.showDownLoad&&"click-off"}`,children:e.jsx(u,{tooltip:"Download",icon:"icon-rs-download-medium",size:"md",onClick:()=>{(async(a,e)=>{const t=document.getElementById("reportdata");t.style.display="block",t.style.maxHeight="none";try{const a=await n(t),s=a.toDataURL("image/png"),i=new l({orientation:"portrait",unit:"px",format:[a.width-200,a.height]});i.addImage(s,"PNG",50,50,a.width-300,a.height-300),i.save(e)}catch(s){}finally{t.style.display="",t.style.maxHeight=""}})(0,b.campaignName+" - "+b.channelName+" "+c(new Date,!1)+".pdf")}})}),O=()=>e.jsxs("div",{className:"back-text cp ml10",onClick:()=>{w.location.state.info?w.push("/preferences/consumptions"):w.push("/analytics")},children:[e.jsx(u,{icon:p,size:"sm"}),"Back"]}),z=()=>e.jsx(I,{className:"page-header",children:e.jsx("div",{className:"reportdata mt30",children:e.jsx(v,{count:12})})}),T=()=>e.jsx(I,{className:"page-header",children:e.jsx("div",{className:"reportdata mt30",children:e.jsx(v,{count:12,isError:b.isError,children:b.channelList.length?null:e.jsx(g,{})})})}),A=s.useMemo((()=>{let a={channelList:b.channelList,nativeChannels:b.nativeChannels,paidMediaChannels:b.paidMediaChannels,socialMediaChannels:b.socialMediaChannels,...w.location.state};return e.jsx(L,{...a,updateDownloadStatus:M,setChannelName:a=>{y((e=>(e.channelName=a,e)))}})}));return e.jsxs(t,{children:[e.jsx(I,{fluid:!0,className:"main-heading-wrapper mb0",children:e.jsxs(I,{className:"mhw-container",children:[e.jsxs("div",{className:"mhwc-left d-flex align-items-center",children:[e.jsx(E,{}),e.jsx(R,{})]}),e.jsxs("div",{className:"mhwc-right align-items-center",children:[e.jsx(P,{}),e.jsx(O,{})]})]})}),b.isLoading?e.jsx(z,{}):0===b.channelList.length?e.jsx(T,{}):e.jsx(e.Fragment,{children:A})]})},L=a=>{const n=d.useHistory(),[l,o]=i({selectKey:0,saveError:!1,isLoading:!1,tabIndex:0,treeUpdate:0,selectedChannelId:null,selectedItem:null,channelList:a.channelList,socialMediaChannels:a.socialMediaChannels,nativeChannels:a.nativeChannels,paidMediaChannels:a.paidMediaChannels});s.useEffect((()=>{c(l.channelList)}),[l.channelList]);const c=a=>{var e,l,t=0;if(null==(l=null==(e=null==n?void 0:n.location)?void 0:e.state)?void 0:l.channelId){const e=n.location.state.channelId;let l=a.findIndex((a=>a.channelId===e));t=-1===l?0:l}else t=0;o((e=>{e.selectKey=t,e.tabIndex=t,e.selectedChannelId=a[t].channelId,e.selectedItem=a[t]}))};return e.jsxs(e.Fragment,{children:[e.jsx(I,{fluid:!0,className:"bg-white",children:e.jsx(I,{children:e.jsx(j,{defaultSelectedItem:l.tabIndex,defaultClass:"",dynamicTab:"fluid",activeClass:"active",tabData:(r=l.channelList,r.map(((a,e)=>({text:x(a.channelName),id:a.channelId,panelClassName:"panel"})))),callBack:(e,n)=>{o((l=>(l.selectedChannelId=e.id,l.selectedItem=a.channelList[n],l.tabIndex=n,l))),a.setChannelName(a.channelList[n].channelName),a.updateDownloadStatus(!1)}})})}),e.jsx(I,{id:"reportdata",className:"page-header",children:((i,d)=>{switch(a.setChannelName(a.channelList[l.tabIndex].channelName),i){case 1:case 2:case 21:case 30:return e.jsx(N,{...{...a,channelId:i},updateDownloadStatus:a.updateDownloadStatus});case 8:case 9:case 14:return!1===n.location.state.isSmartlink?e.jsx(s.Suspense,{fallback:e.jsx(t,{}),children:e.jsx(D,{context:a.context,data:l.data,state:n.location&&n.location.state,channelId:i,selectedItem:d,updateDownloadStatus:a.updateDownloadStatus})}):e.jsx(s.Suspense,{fallback:e.jsx(t,{}),children:e.jsx(N,{...{...a,channelId:i},updateDownloadStatus:a.updateDownloadStatus})});case 6:case 10:return e.jsx(s.Suspense,{fallback:e.jsx(t,{}),children:e.jsx(C,{channels:l.paidMediaChannels,...{...a,channelId:10},updateDownloadStatus:a.updateDownloadStatus})});case 5:return e.jsx(s.Suspense,{fallback:e.jsx(t,{}),children:e.jsx(f,{channels:l.socialMediaChannels,...{...a,channelId:10},updateDownloadStatus:a.updateDownloadStatus})});default:return null}})(l.selectedChannelId,l.selectedItem)})]});var r};export{w as default};
