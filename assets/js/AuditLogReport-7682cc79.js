import{j as e}from"./pdf-editor-e8cb7a76.js";import{L as a}from"./LayoutPageWrapper-ab434993.js";import{K as t}from"./index-566d2b59.js";import{M as s,ad as i,be as l,ar as d,aS as r,bf as o,bg as n,al as c}from"./index-23a09c37.js";import{r as m}from"./react-vendor-379f659a.js";import{r as p}from"./react-router-dom.min-6f8d67fa.js";import{p as h}from"./kendo-5d73125a.js";import{g as j,R as u}from"./RSPDateRangePicker-1dfa4fb5.js";import{C as f,R as x}from"./ui-f7791cf3.js";import"./get-4aa85b1a.js";import"./utils-16c7e021.js";import"./drag-drop-2020d552.js";const g=g=>{const v=p.useHistory(),[k,D]=m.useState(!1),[w,N]=m.useState({skip:0,take:5,sort:[{field:"orderDate",dir:"desc"}]}),[S,b]=m.useState([]),[R,I]=m.useState([]),[C,L]=m.useState(!1);m.useEffect((()=>{let e=y("","");P(e)}),[]);const P=e=>{D(!0),s({path:o,params:e,ok:e=>{var a,t,s,i;if(e.status&&(null==(t=null==(a=null==e?void 0:e.data)?void 0:a.auditLogData)?void 0:t.length)>0){n.info("audit log report data",e.data);let a=[...null==(s=null==e?void 0:e.data)?void 0:s.auditLogData];const t={skip:0,take:w.take};let l=h(a,t);b((null==l?void 0:l.data)||[]),I(null==(i=null==e?void 0:e.data)?void 0:i.auditLogData)}D(!1)},fail:e=>{D(!1)}})},y=(e,a)=>{let t=e||"",s=a||"";return""===t&&(t=j(-29),s=j(0)),{clientId:i(),userId:l(),pagination:{pageNo:1,pageSize:50},fromDate:t,toDate:s}},B=()=>e.jsx(t,{config:w,data:S,pageable:!0,settings:{total:R.length},isDataStateRequired:!0,pageStateChange:e=>{(e=>{const{skip:a,take:t}=e.page;let s={...w};s.skip=a,s.take=t,N(s);let i=h(R,e.page);b(null==i?void 0:i.data)})(e)},column:[{field:"createdDate",title:"Created date",width:220,cell:a=>e.jsx("td",{className:"text-start",children:e.jsx("span",{children:c(a.dataItem[a.field],!0)})})},{field:"name",title:"User name",width:180,cell:a=>e.jsxs("td",{children:[" ",a.dataItem[a.field]," "]})},{field:"email",title:"Email",width:180,cell:a=>e.jsxs("td",{children:[" ",a.dataItem[a.field]," "]})},{field:"moduleName",title:"Module",width:210,cell:a=>e.jsxs("td",{children:[" ",a.dataItem[a.field]," "]})},{field:"description",title:"Description",cell:a=>e.jsxs("td",{children:[" ",a.dataItem[a.field]," "]})}]}),z=()=>e.jsx(u,{closeDateRangePicker:(e,a)=>{if(L(e),!1===e){let e=y(null==a?void 0:a.startDate,null==a?void 0:a.endDate);P(e)}},cancelBtnClicked:()=>{L(!1)},applyBtnClicked:e=>{L(!1)},isShowDateRangePicker:C,show:!0,class:"marginR10",enable:!0});return e.jsxs(a,{children:[e.jsx(f,{fluid:!0,className:"main-heading-wrapper mb0",children:e.jsxs(f,{className:"mhw-container",children:[e.jsx("div",{className:"mhwc-left",children:e.jsx("h1",{children:e.jsx("div",{className:"mh-wrapper",children:e.jsx("span",{className:"mh-text",children:"Audit log report"})})})}),e.jsx("div",{className:"mhwc-right",children:e.jsxs("div",{className:"back-text",onClick:()=>v.push("/preferences"),children:[e.jsx(d,{icon:r,size:"sm"}),"Back"]})})]})}),e.jsxs(f,{className:"page-header box-bottom-space",children:[e.jsx("div",{}),e.jsx("div",{children:(null==S?void 0:S.length)>0&&e.jsxs("div",{children:[e.jsx(x,{children:e.jsx(z,{})}),e.jsx(x,{children:e.jsx(B,{})})]})})]})]})};export{g as AuditLogReport};
