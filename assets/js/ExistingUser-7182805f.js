import{a,j as e}from"./pdf-editor-5df4b936.js";import{r as t,i as l}from"./react-vendor-379f659a.js";import{av as s,z as o,a0 as i,a2 as n,a1 as r,a3 as d,a4 as c,a5 as u,a6 as m,a7 as g,pl as p,pk as v,a8 as h,a9 as S,DU as f,ab as D,aa as I,eu as w,ah as y,E as x,ac as b,Cf as j,nx as E,fI as k,B as N,ey as T,F as L,M as C,DV as A,eF as O,Y as _,Bw as M,X as B,fk as U,fj as P,fw as R,af as F,DW as J,bo as q,bX as $,ag as z,DX as H}from"./index-7d59e1e4.js";import{R as V,a as X}from"./RSCheckbox-31e7b177.js";import{M as W,a as Y,b as Z}from"./inputLimit-ce03b0f6.js";import"./RSIcon-9079b0f0.js";import{R as G}from"./RSFormGroup-02fd3241.js";import{S as K}from"./SmallText-624a260a.js";import{q as Q}from"./utils-16c7e021.js";import{R as aa,a as ea}from"./ui-9ddcca8e.js";import"./kendo-5d73125a.js";import"./drag-drop-bc3ac7ea.js";const ta=t.lazy((()=>a((()=>import("./RSConfirmAlert-56ae520e.js")),["assets/js/RSConfirmAlert-56ae520e.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/index-7d59e1e4.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/js/utils-16c7e021.js","assets/css/index-66e6a83b.css","assets/js/RSIcon-9079b0f0.js"]))),la=t.lazy((()=>a((()=>import("./RSPTimer-af842117.js")),["assets/js/RSPTimer-af842117.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css"]))),sa=t.lazy((()=>a((()=>import("./SDXOTP-33affb90.js")),["assets/js/SDXOTP-33affb90.js","assets/js/pdf-editor-5df4b936.js","assets/js/react-vendor-379f659a.js","assets/css/pdf-editor-1e521ea9.css","assets/js/RSKendoDropdown-e93f1389.js","assets/js/ui-9ddcca8e.js","assets/js/kendo-5d73125a.js","assets/css/kendo-8498baa5.css","assets/js/drag-drop-bc3ac7ea.js","assets/js/index-7d59e1e4.js","assets/js/utils-16c7e021.js","assets/css/index-66e6a83b.css","assets/js/get-4aa85b1a.js","assets/js/RSCheckbox-31e7b177.js","assets/js/style-a86a43a5.js","assets/css/style-e8a0ccb9.css","assets/js/RSDropdowns-d68fa550.js","assets/js/inputLimit-ce03b0f6.js","assets/js/RSIcon-9079b0f0.js","assets/js/RSFormGroup-02fd3241.js","assets/js/SmallText-624a260a.js","assets/js/RSPTimer-af842117.js"]))),oa="accountadmin@smartdx.id",ia="zVQHE7U8MT",na=a=>{s("props.isShowForgotButton",a.isShowForgotButton);const x=t.useContext(o),b=l(),[j,E]=t.useState(""),[k,N]=t.useState(!1),[T,L]=t.useState(""),[A,M]=t.useState(!1),[B,U]=t.useState(!1),[P,F]=t.useState(!1),[J,q]=t.useState(!1),[$,z]=t.useState(""),[H,Z]=t.useState({pathName:"/",search:""}),[K,ta]=t.useState({email:null,passwd:null});t.useEffect((()=>{var a,e,t,l,s,o;let n=localStorage.getItem("login");if(null!==n){let a=i(n);E(a.email),L(a.passwd),M(a.checked)}const r=Q.parse(window.location.search);if(null!==(null==r?void 0:r.baseData)&&void 0!==(null==r?void 0:r.baseData)){let a=i(null==r?void 0:r.baseData);E(null==a?void 0:a.emailId),L(null==a?void 0:a.password)}Z({pathName:(null==(t=null==(e=null==(a=null==b?void 0:b.location)?void 0:a.state)?void 0:e.from)?void 0:t.pathname)||"/",search:(null==(o=null==(s=null==(l=null==b?void 0:b.location)?void 0:l.state)?void 0:s.from)?void 0:o.search)||""})}),[P]);return e.jsxs("div",{children:[!1===B&&!1===P&&e.jsxs("div",{className:"form-login-cam",children:[e.jsx(G,{children:e.jsx(V,{id:"l_username",type:"text",name:"email",val:j,required:!0,isLoading:k,iconPlaceholder:!k,iconName:n,placeholder:r,errorMessage:K.email,max:W,padTop:"This account has been deactivated. Please contact your system administrator."===K.email?"pt17":"",handleOnBlur:a=>{d(a)?(j!==oa&&(N(!0),C({path:O,params:{emailId:j},retry:2,retryTime:5e3,ok:a=>{var e,t;if(N(!1),!a.status){var l={...K};return l.email=a.message,void ta(l)}x.globalStateData.setSourceTypeData(""!==(null==(e=null==a?void 0:a.data)?void 0:e.sourceType)?null==(t=null==a?void 0:a.data)?void 0:t.sourceType:"A"),a.status},fail:a=>{N(!1);var e={...K};e.email="Unexpected happened. Try again later",ta(e)}})),ta({...K,email:null})):a.length?ta({...K,email:c}):ta({...K,email:r})},handleOnchange:a=>{let e=u(a);ta({...K,email:null}),e.length<=100?(""===a||/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/.test(a),E(e)):ta({...K,email:m})}})}),e.jsx(G,{className:"mb10",children:e.jsx(V,{viewEye:!1,meter:!0,id:"l_password",name:"password",type:!0===J?"text":"password",placeholder:g,val:T,required:!0,errorMessage:K.passwd,max:Y,iconPlaceholder:!0,iconName:!0===J?p:v,iconOnClick:()=>{q(!J)},ob:a=>{a.length>0?ta({...K,passwd:null}):ta({...K,passwd:g})},cb:a=>{let e=h(a);u(a).length<=16?(L(e),S(e),ta({...K,passwd:null}),ta({...K,email:null})):ta({...K,passwd:m})}})}),e.jsx(G,{className:!0===f()?"click-off":"",children:e.jsxs(aa,{children:[e.jsx(ea,{children:e.jsx(X,{className:"font-sm",checked:!0!==f()&&A,cb:a=>M(a),lbl:" Stay signed in"})}),e.jsx(ea,{children:a.isShowForgotButton?null:e.jsx("div",{onClick:()=>{null==a||a.isOtp(!B),U(!B)},className:"text-orange text-end font-sm cp",children:"Forgot password?"})})]})}),e.jsx(ra,{isShowForgotButton:a.isShowForgotButton,isHideLoader:a.isHideLoader,email:j,passwd:T,checked:A,emailErrorMessage:K.email,isOtpRequiredData:a=>{z(a),F(!0)},setLoginErrMsg:a=>{ta({...K,...a})},setErrorMessage:a=>{ta({...K,...a})},isLogin:e=>{var t,l,s,o,i,n,r,d,c;if(e.data.accessToken&&e.data.accessToken.length>0){const u={isAuth:!0,accessToken:e.data.accessToken};if(D(e),localStorage.setItem("session",JSON.stringify(u)),localStorage.setItem("lsUserData",I(e.data)),localStorage.setItem("lsConfig",JSON.stringify(pa)),null==(t=null==e?void 0:e.data)||t.firstName,null==(l=null==e?void 0:e.data)||l.emailId,null==(s=null==e?void 0:e.data)||s.createdDate,x.globalStateData.setLoggedInUserData(e.data),x.globalStateData.setEmailIdData(a.email),x.globalStateData.setBodyNameData(""),!0===(null==(o=null==e?void 0:e.data)?void 0:o.isAgency))return(()=>{var e;let t=_();if(null!=t){let l=null==t?void 0:t.userId;if(null!=(null==t?void 0:t.clientId)){((e,t)=>{localStorage.setItem("companyvalue",JSON.stringify(e));let l={userId:t,clientId:null==e?void 0:e.clientId};C({path:R,params:l,ok:e=>{if(x.globalStateData.setIsLoadingData(!1),!0===(null==e?void 0:e.status)){for(var t in localStorage)t.includes("camp_")&&localStorage.removeItem(t);if(localStorage.setItem("cli_"+(null==l?void 0:l.clientId),null==l?void 0:l.clientId),localStorage.setItem("backlsUserData",localStorage.getItem("lsUserData")),e.data.isAgency=!0,localStorage.setItem("lsUserData",I(e)),e.status&&e.message.toLowerCase().includes("login")){let t=(e=>{var t,l,s;if(x.globalStateData.setIsLoadingData(!1),e.data.accessToken&&e.data.accessToken.length>0){const o={isAuth:!0,accessToken:e.data.accessToken},i={sdc:!0,etc:!0,mp:!0,wp:!0,sl:!0,fs:!0,tmb:!0,ld:!0};return D(e),localStorage.setItem("session",JSON.stringify(o)),localStorage.setItem("lsUserData",I(null==e?void 0:e.data)),localStorage.setItem("lsConfig",JSON.stringify(i)),null==(t=null==e?void 0:e.data)||t.firstName,null==(l=null==e?void 0:e.data)||l.emailId,null==(s=null==e?void 0:e.data)||s.createdDate,x.globalStateData.setLoggedInUserData(e.data),x.globalStateData.setEmailIdData(a.email),x.globalStateData.setBodyNameData(""),x.toggleAuth(!0),!0===e.data.isAccSettingsCompleted&&(b.push("/"),x.globalStateData.setBodyNameData(""),!0)}})(e);if(t)return!0}}else x.toggleAuth(!1),x.globalStateData.setIsLoadingData(!1)},fail:a=>{x.toggleAuth(!1),x.globalStateData.setIsLoadingData(!1)}})})((null==(e=null==t?void 0:t.clientLists)?void 0:e.filter(((a,e)=>(null==a?void 0:a.clientId)!=(null==t?void 0:t.clientId))))[0],l)}}})(),void window.location.reload();if(x.globalStateData.setIsLoadingData(!1),null===(null==(i=e.data)?void 0:i.payStatus)||void 0===(null==(n=e.data)?void 0:n.payStatus)){null==(r=e.data)||r.paymentTerms;let a=w(1);a.addons=[];let t=I(a);return localStorage.setItem("pconfig",t),x.toggleAuth(!0),x.globalStateData.setBodyNameData(""),void b.push("/features")}if(0===e.data.paymentTerms){if("0001-01-01T00:00:00"===e.data.nextDueDate){if(x.toggleAuth(!0),null==(d=null==H?void 0:H.pathName)?void 0:d.includes("/audience/new-dynamic-list")){let a=Q.parse(H.search);if("true"===((null==a?void 0:a.ar)||""))return void b.push({pathname:H.pathName,search:H.search})}return b.push({pathname:"/"}),void window.location.reload()}let a=new Date(e.data.dueDate);if(new Date<=a){if(x.globalStateData.setPaymentMessage(""),x.toggleAuth(!0),null==(c=null==H?void 0:H.pathName)?void 0:c.includes("/audience/new-dynamic-list")){let a=Q.parse(H.search);if("true"===((null==a?void 0:a.ar)||""))return b.push({pathname:H.pathName,search:H.search}),void window.location.reload()}b.push({pathname:"/"}),window.location.reload()}else x.globalStateData.setPaymentMessage("payment")}else x.toggleAuth(!0),!1===e.data.isAccSettingsCompleted?(b.push("/preferences"),x.globalStateData.setBodyNameData("")):b.push({pathname:H.pathName,search:H.search})}}}),a.isShowForgotButton?e.jsx("p",{className:"text-orange font-xs text-center text-underline-none mb0",children:"Your session expired. Login to continue"}):null]}),B&&e.jsx(ca,{emailId:j,closeForgotPasswordModal:()=>{null==a||a.isOtp(!B),U(!B)}}),P?e.jsx(ua,{lastReferal:H,isShowForgotButton:a.isShowForgotButton,close:()=>{null==a||a.isOtp(!1),F(!1)},mobData:$,isOtpShow:e=>{null==a||a.isOtp(e),F(e)},email:j,passwd:T,isHideLoader:a.isHideLoader,sourceType:y()}):null]})},ra=a=>{const{checked:l,email:s,passwd:i,setLoginErrMsg:n}=a,r=t.useContext(o);return t.useEffect((()=>{}),[]),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(x,{id:"l_loginBtn",className:"",onClick:()=>{if("This account has been deactivated. Please contact your system administrator."===(null==a?void 0:a.emailErrorMessage))return;if(null!==a.emailErrorMessage)return;if(0===a.email.length)return void a.setErrorMessage({email:c});if(!d(a.email))return void a.setErrorMessage({email:c});if(0===a.passwd.length)return void a.setErrorMessage({passwd:g});a.setErrorMessage({email:null});let e={email:s,passwd:i,checked:l};localStorage.setItem("qclogin",I(e)),!0===f()?localStorage.removeItem("login"):l?da(s,i,l):localStorage.removeItem("login"),((e=null)=>{let t=y(),l={emailId:s,password:i,sourceType:t};null!==e&&(l=e),l.userAgent=navigator.userAgent;let o=F;s===oa&&i===ia&&(o=J),r.globalStateData.setIsLoadingData(!0),a.isHideLoader&&r.globalStateData.setIsLoadingData(!1),C({path:o,params:l,ok:e=>{var t,l;(null==e?void 0:e.status)?((null==e?void 0:e.status)&&localStorage.setItem("lsUserData",I(e)),localStorage.setItem("parentcompany",null==(t=null==e?void 0:e.data)?void 0:t.clientName),localStorage.setItem("isAgency",null==(l=null==e?void 0:e.data)?void 0:l.isAgency),e.status&&e.message.toLowerCase().includes("otp")?(r.globalStateData.setIsLoadingData(!1),a.isOtpRequiredData(e.data)):e.status&&e.message.toLowerCase().includes("login")?a.isLogin(e):(a.setLoginErrMsg({email:e.message}),r.globalStateData.setIsLoadingData(!1))):(r.globalStateData.setIsLoadingData(!1),n({email:(null==e?void 0:e.message)||"Unexpected error. Try again later"}))},fail:a=>{r.globalStateData.setIsLoadingData(!1),r.toggleAuth(!1),n({email:"Unexpected error. Try again later"})}})})()},children:"Sign In"})})},da=(a,e,t)=>{let l={email:a,passwd:e,checked:t};localStorage.setItem("login",I(l))},ca=a=>{const[l,s]=t.useState(""),[o,i]=t.useState(null),[n,r]=t.useState(!1);return e.jsxs("div",{className:"forgot-password-modal",children:[e.jsx(ma,{email:l,setEmail:a=>s(a),setEmailErr:a=>i(a),otpSuccess:a=>r(a),emailErr:o}),e.jsx(ga,{email:l,otpSuccess:n,close:a.closeForgotPasswordModal,setEmailErr:a=>i(a)})]})},ua=a=>{const[s,i]=t.useState(""),[n,r]=t.useState(null),[d,c]=t.useState(null==a?void 0:a.mobData),[u,m]=t.useState(!1),[g,p]=t.useState(!0),[v,h]=t.useState(!1),[S,w]=t.useState(!1),[y,T]=t.useState(null),A=t.useContext(o),O=l();t.useEffect((()=>{}),[]);const U=e=>{if(L(e)||L(a.mobData))return void r("Enter valid one time password");if(v)return r("Click Resend OTP and try again"),void m(!1);const t={otpToken:d,Otp:e};let l=$(),s=z;(null==a?void 0:a.email)===oa&&(s=H),C({bUrl:l,path:s,params:t,loading:a.isHideLoader?null:A.globalStateData.setIsLoadingData,ok:e=>{var t,l,s,o,i,n,d,c,u,g,p;if(e.status){if((null==a?void 0:a.email)===oa)return localStorage.setItem("lsclientList",I(null==e?void 0:e.data)),void O.push("/client-list");(a=>{var e,t,l,s,o,i;(null==(e=a.data)?void 0:e.dateFormat)&&(null==(t=a.data)?void 0:t.timeZoneName)||(null==(s=null==(l=a.data)?void 0:l.clientDetailsLocalization)?void 0:s.dateFormat)&&(null==(i=null==(o=a.data)?void 0:o.clientDetailsLocalization)||i.timeZoneName)})(null==e?void 0:e.data),m(!0);try{if(e.data.accessToken&&e.data.accessToken.length>0){const r={isAuth:!0,accessToken:e.data.accessToken};if(localStorage.setItem("session",JSON.stringify(r)),localStorage.setItem("lsUserData",I(e.data)),null==(t=null==e?void 0:e.data)||t.firstName,null==(l=null==e?void 0:e.data)||l.emailId,null==(s=null==e?void 0:e.data)||s.createdDate,localStorage.setItem("lsConfig",JSON.stringify(pa)),M((null==(o=null==e?void 0:e.data)?void 0:o.licensingTypeId)||4),A.globalStateData.setLoggedInUserData(e.data),A.globalStateData.setEmailIdData(a.email),!0===(null==(i=null==e?void 0:e.data)?void 0:i.isAgency)){if(localStorage.setItem("parentcompany",null==(n=null==e?void 0:e.data)?void 0:n.clientName),localStorage.setItem("isAgency",null==(d=null==e?void 0:e.data)?void 0:d.isAgency),1==(null==(u=null==(c=null==e?void 0:e.data)?void 0:c.clientLists)?void 0:u.length))return P(e)?(O.push("/companyadd"),!0):void 0;if((null==(p=null==(g=null==e?void 0:e.data)?void 0:g.clientLists)?void 0:p.length)>1)return void(()=>{var e;let t=_();if(null!=t){let l=null==t?void 0:t.userId;if(null!=(null==t?void 0:t.clientId)){let s=null==(e=null==t?void 0:t.clientLists)?void 0:e.filter(((a,e)=>(null==a?void 0:a.clientId)!=(null==t?void 0:t.clientId)));A.globalStateData.setIsLoadingData(!0),((e,t)=>{localStorage.setItem("companyvalue",JSON.stringify(e));let l={userId:t,clientId:null==e?void 0:e.clientId};C({path:R,params:l,ok:e=>{if(!0===(null==e?void 0:e.status)){for(var t in localStorage)t.includes("camp_")&&localStorage.removeItem(t);if(localStorage.setItem("cli_"+(null==l?void 0:l.clientId),null==l?void 0:l.clientId),localStorage.setItem("backlsUserData",localStorage.getItem("lsUserData")),e.data.isAgency=!0,localStorage.setItem("lsUserData",I(e)),e.status&&e.message.toLowerCase().includes("login")){let t=(e=>{var t,l,s;if(A.globalStateData.setIsLoadingData(!1),e.data.accessToken&&e.data.accessToken.length>0){const o={isAuth:!0,accessToken:e.data.accessToken},i={sdc:!0,etc:!0,mp:!0,wp:!0,sl:!0,fs:!0,tmb:!0,ld:!0};return D(e),localStorage.setItem("session",JSON.stringify(o)),localStorage.setItem("lsUserData",I(null==e?void 0:e.data)),localStorage.setItem("lsConfig",JSON.stringify(i)),null==(t=null==e?void 0:e.data)||t.firstName,null==(l=null==e?void 0:e.data)||l.emailId,null==(s=null==e?void 0:e.data)||s.createdDate,A.globalStateData.setLoggedInUserData(e.data),A.globalStateData.setEmailIdData(a.email),A.globalStateData.setBodyNameData(""),A.toggleAuth(!0),!0===e.data.isAccSettingsCompleted&&(O.push("/"),A.globalStateData.setBodyNameData(""),!0)}})(e);if(window.location.reload(),t)return!0}}else A.toggleAuth(!1),A.globalStateData.setIsLoadingData(!1)},fail:a=>{A.toggleAuth(!1),A.globalStateData.setIsLoadingData(!1)}})})(s[0],l)}}})()}let m=new Date(e.data.dueDate);new Date<=m||"0001-01-01T00:00:00"!==e.data.nextDueDate&&A.globalStateData.setPaymentMessage("payment"),D(e),X()}}catch(v){}}else r("Please enter the correct one time password"),m(!1)},fail:e=>{r(e.message),m(!1),a.setEmailErr&&a.setEmailErr(e.message)}})},P=a=>{var e,t,l,s,o;if(A.globalStateData.setIsLoadingData(!1),a.data.accessToken&&a.data.accessToken.length>0){const i={isAuth:!0,accessToken:a.data.accessToken},n={sdc:!0,etc:!0,mp:!0,wp:!0,sl:!0,fs:!0,tmb:!0,ld:!0};return D(a),localStorage.setItem("session",JSON.stringify(i)),localStorage.setItem("lsUserData",I(null==a?void 0:a.data)),localStorage.setItem("lsConfig",JSON.stringify(n)),null==(e=null==a?void 0:a.data)||e.firstName,null==(t=null==a?void 0:a.data)||t.emailId,null==(l=null==a?void 0:a.data)||l.createdDate,A.globalStateData.setLoggedInUserData(a.data),A.globalStateData.setEmailIdData(null==(s=a.data)?void 0:s.emailId),A.globalStateData.setBodyNameData(""),!0===(null==(o=null==a?void 0:a.data)?void 0:o.isAgency)}},X=()=>{q(A,(a=>{}));let e=_();if(A.toggleAuth(!0),null===(null==e?void 0:e.payStatus)||void 0===(null==e?void 0:e.payStatus)){let a=(null==e?void 0:e.paymentTerms)||1;return M(a),O.push("/features"),void A.globalStateData.setBodyNameData("")}if(!1===(null==e?void 0:e.isAccSettingsCompleted))O.push("/preferences"),A.globalStateData.setBodyNameData("");else{let e=Q.parse(a.lastReferal.search);if("true"===((null==e?void 0:e.ar)||""))return void O.push({pathname:a.lastReferal.pathName,search:a.lastReferal.search});O.push({pathname:"/"})}window.location.reload()};return e.jsxs("div",{className:"forgot-password-modal otp",children:[e.jsx(G,{children:e.jsx("h1",{className:"color-primary-blue",children:"Enter one time password"})}),e.jsx(G,{children:e.jsx("p",{className:"mb0",children:b})}),e.jsxs(G,{children:[e.jsx(aa,{children:e.jsx(ea,{md:12,children:e.jsx(V,{id:"l_otp",disabled:u,name:"otp",required:!0,placeholder:j,success_msg:(null==n?void 0:n.includes("successfully"))&&"success_msg",colorSuccess:!!(null==n?void 0:n.includes("successfully")),val:s,iconPlaceholder:!0,iconName:`\n                    ${u?`${E} color-primary-green`:""} \n                    ${n?(null==n?void 0:n.includes("successfully"))?`${E} color-primary-green`:`${k} color-primary-red`:""}`,iconOnClick:()=>{i(""),r(null)},errorMessage:n,keyboardType:"number",max:Z,cb:a=>{let e=a.length?null:"Enter one time password";r(e),(""===a||/^[0-9\b]+$/.test(a))&&(6===a.length&&U(a),i(a))},ob:a=>{if(!a.length){let e=a.length?null:"Enter one time password";return r(e),void setTimeout((()=>{r("")}),2e3)}a.length}})})}),e.jsxs(aa,{children:[e.jsx(ea,{md:u||v?8:10,children:u||v?!u&&e.jsx(K,{children:"One time password expired"}):e.jsxs(K,{children:["One time password is valid for 5 minutes Â ",e.jsx(la,{onComplete:()=>{h(!0)}})]})}),e.jsx(ea,{md:4,children:!u&&v?e.jsx(e.Fragment,{children:!1===f()&&e.jsx(K,{right:!0,children:e.jsx("label",{className:"rs-link orange-medium",onClick:()=>{h(!1),i(""),r("One time password resent successfully"),setTimeout((()=>{r("")}),5e3),(()=>{const e={emailId:a.email,password:a.passwd,sourceType:a.sourceType};e.userAgent=navigator.userAgent,p(!1);let t=F;(null==e?void 0:e.emailId)===oa&&(null==e?void 0:e.password)===ia&&(t=J),C({path:t,params:e,ok:a=>{(null==a?void 0:a.status)?(c(a.data),p(!0)):(w(!0),T((null==a?void 0:a.message)||B))},fail:a=>{p(!0)}})})()},children:"Resend OTP?"})})}):null})]})]}),e.jsx("div",{children:!0===S&&e.jsx(ta,{headerTitle:"Sorry",para:y,primaryButtonText:"OK",buttonClicked:a=>{w(!1)}})}),e.jsxs("div",{className:"mt30 d-flex justify-content-end",children:[e.jsx(N,{onClick:()=>{if(f()){var e=window.location.protocol+"//"+window.location.host+"/login";window.history.pushState({path:e},"",e),window.location.reload()}a.close()},children:"Cancel"}),e.jsx(x,{id:"l_otp_confirm",className:u?"":"click-off",onClick:()=>{u&&X()},children:"Confirm"})]})]})},ma=a=>{const[l,s]=t.useState(null),[i,r]=t.useState(!1),[c,g]=t.useState(!1),[p,v]=t.useState(""),[h,S]=t.useState(""),[f,D]=t.useState(null),[I,w]=t.useState(!1),y=t.useContext(o),x=()=>{a.email!==oa&&(r(!0),g(!1),S(""),C({path:O,params:{emailId:a.email},isServiceWorker:!1,retry:2,retryTime:5e3,ok:e=>{e.status?(r(!1),s(U),setTimeout((()=>{s(null)}),5e3),b()):(a.setEmailErr((null==e?void 0:e.message)||T),r(!1))},fail:e=>{r(!1),y.globalStateData.setIsLoadingData(!1),a.setEmailErr(T)}}))},b=()=>{w(!1),null==a||a.otpSuccess(!1),C({path:P,isServiceWorker:!1,params:{emailId:a.email},ok:a=>{var e,t,l;(null==a?void 0:a.status)&&(null==(t=null==(e=null==a?void 0:a.data)?void 0:e.otpToken)?void 0:t.length)>0&&(g(!0),v((null==(l=null==a?void 0:a.data)?void 0:l.otpToken)||""))},fail:a=>{y.globalStateData.setIsLoadingData(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{children:[e.jsx(V,{name:"email",placeholder:(0===a.email.length?"Enter registered email":"Registered email")+" ",val:a.email,errorMessage:a.emailErr,max:W,iconPlaceholder:!i,iconName:n,isLoading:i,required:!0,cb:e=>{let t=u(e);a.setEmailErr(0===e.length?"Enter email":null),t.length<=100?a.setEmail(t):a.setEmailErr(m)},ob:e=>{let t=u(e);a.setEmail(t),d(t)?(a.setEmailErr(null),void 0===window.forgetEmail?(window.forgetEmail=e,x()):window.forgetEmail.toLowerCase()!==e.toLowerCase()?(window.signupEmail=e,x()):(window.forgetEmail.toLowerCase(),e.toLowerCase())):a.setEmailErr(T)}}),null!==l&&e.jsx(K,{style:{color:"green"},children:l})]}),e.jsx(G,{children:c&&e.jsx(sa,{className:!0===I?"click-off":"on",isShowOTPModal:c,emailId:a.email,otpToken:p,otp:h,errorMessage:f,confirmBtnClick:a=>{v(a.otpToken),S(a.otp)},onOtpSuccess:e=>{w(e),null==a||a.otpSuccess(e)},close:()=>{setIsShowOTPModal(!1)}})})]})},ga=a=>{const l=t.useContext(o),[s,i]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx(N,{onClick:()=>{i(!1),a.close()},children:"Cancel"}),e.jsx(x,{className:!0===(null==a?void 0:a.otpSuccess)&&!1===s?"click-on":"click-off",onClick:()=>{if(L(a.email))return void a.setEmailErr(T);let e=u(a.email);if(!d(e))return void a.setEmailErr(T);a.setEmailErr(null);const t={emailId:a.email};C({path:A,params:t,loading:l.globalStateData.setIsLoadingData,ok:e=>{e.status?i(!0):a.setEmailErr(e.message)},fail:e=>{a.setEmailErr(e.message)}})},children:"Send"})]}),s&&!0===(null==a?void 0:a.otpSuccess)?e.jsxs("div",{className:"alert-forgot-success mt30",children:[e.jsx("i",{className:"icon-rs-circle-tick-medium icons-lg"}),e.jsx("p",{children:"New password is emailed to the specified email"}),e.jsx("i",{class:"icon-rs-close-medium cp",onClick:()=>{i(!1),a.close()}})]}):null]})},pa={sdc:!0,etc:!0,mp:!0,wp:!0,sl:!0,fs:!0,tmb:!0,ld:!0};export{na as QASExistingUser,sa as SDXOTP};
