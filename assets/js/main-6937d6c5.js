import{j as e}from"./pdf-editor-5df4b936.js";import{B as t,E as n}from"./index-7d59e1e4.js";import{R as r}from"./RSIcon-9079b0f0.js";import{M as o}from"./ui-9ddcca8e.js";import{r as i,b as s,p as l,o as a}from"./react-vendor-379f659a.js";import{n as c,v as u,y as d,z as p,B as h,C as f,F as m,H as g,I as v,J as y,K as b,L as w,N as k,O as x,Q as S,R as C,U as E,V as O,W as T,X as M,Y as A,Z as N,$ as P,a0 as R,a1 as D,a2 as I,a3 as _,a4 as F,a5 as z,a6 as B,a7 as L,a8 as j,a9 as H,aa as V,ab as $,ac as W,ad as U,ae as q,af as K,ag as J,ah as G,ai as X,aj as Y,ak as Q,al as Z,am as ee,an as te,ao as ne,ap as re,aq as oe,ar as ie,as as se,at as le,au as ae,av as ce,aw as ue,ax as de,k as pe,s as he,ay as fe,az as me,aA as ge,aB as ve,aC as ye,aD as be,aE as we,aF as ke,aG as xe,aH as Se,aI as Ce,aJ as Ee,aK as Oe,aL as Te,aM as Me,aN as Ae,aO as Ne,aP as Pe,aQ as Re,A as De,aR as Ie,aS as _e,aT as Fe,aU as ze,aV as Be,aW as Le,aX as je,aY as He,aZ as Ve,a_ as $e,a$ as We,b0 as Ue,b1 as qe,b2 as Ke}from"./kendo-5d73125a.js";import{_ as Je,a as Ge,b as Xe}from"./tslib.es6-1635a32f.js";const Ye=({message:i,onConfirm:s,onCancel:l})=>e.jsxs(o,{show:!0,centered:!0,children:[e.jsxs(o.Header,{children:[e.jsx("h2",{children:"Confirmation"}),e.jsx(r,{mainClass:"close",size:"md",handleClose:l})]}),e.jsx(o.Body,{children:e.jsx("p",{children:i})}),e.jsxs(o.Footer,{children:[e.jsx(t,{onClick:l,children:"Cancel"}),e.jsx(n,{onClick:s,children:"Confirm"})]})]});var Qe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={},r=function(e){return e.filter((function(e){return!0!==e&&!!e})).map((function(e){return Array.isArray(e)?r(e):function(e){return"object"==typeof e?Object.keys(e).forEach((function(t){n[t]=e[t]})):n[e]=!0}(e)}))};return r(e),Object.keys(n).map((function(e){return n[e]&&e||null})).filter((function(e){return null!==e})).join(" ")},Ze=["telerik.com","progress.com","stackblitz.io","csb.app"],et=!1,tt=function(){var e=i.useState(!0),t=e[0],n=e[1],r=i.useState(!1),o=r[0],l=r[1];i.useEffect((function(){et||(l(!0),et=!0)}),[]);var a=i.createElement(i.Fragment,null,t&&i.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"16px",right:"16px",padding:"12px",borderRadius:"4px",boxShadow:"0px 4px 5px 0px rgba(0, 0, 0, 0.04), 0px 2px 4px 0px rgba(0, 0, 0, 0.03)",fontSize:"14px",fontWeight:400,lineHeight:"20px",backgroundColor:"#FFC000",color:"#1E1E1E",zIndex:999}},i.createElement("span",{style:{display:"flex",alignSelf:"center",marginRight:"8px"}},i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1L0 15H16L8 1ZM7 6V11H9V6H7ZM7 14V12H9V14H7Z",fill:"#1E1E1E"}))),i.createElement("span",null,"No valid license found for KendoReact. Learn how to activate your license."),i.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"24px"}},i.createElement("a",{href:"https://www.telerik.com/kendo-react-ui/components/my-license/?utm_medium=product&utm_source=kendoreact&utm_campaign=kendo-ui-react-purchase-license-keys-banner",style:{marginRight:"8px",display:"flex"}},i.createElement("button",{title:"Learn More",style:{display:"inline-flex",position:"relative",border:"none",borderRadius:"4px",padding:"5px",backgroundColor:"transparent",transition:"color 0.2s ease-in-out",outline:"none",cursor:"pointer"}},i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},i.createElement("path",{d:"M15 8C15 11.8656 11.8656 15 8 15C4.13437 15 1 11.8656 1 8C1 4.13437 4.13437 1 8 1C11.8656 1 15 4.13437 15 8ZM14 8C14 4.6875 11.3125 2 8 2C4.6875 2 2 4.6875 2 8C2 11.3125 4.6875 14 8 14C11.3125 14 14 11.3125 14 8ZM11 6C11 7.4125 10.2687 8.05937 9.73125 8.53125C9.25937 8.94688 9 9.17813 9 10H7C7 8.275 7.84688 7.525 8.40938 7.03125C8.84062 6.65312 9 6.50938 9 6C9 5.45 8.55 5 8 5C7.45 5 7 5.45 7 6H5C5 4.34375 6.34375 3 8 3C9.65625 3 11 4.34375 11 6ZM9 13V11H7V13H9Z",fill:"#1E1E1E"})))),i.createElement("button",{title:"Close",style:{display:"inline-flex",position:"relative",border:"none",borderRadius:"4px",padding:"5px",backgroundColor:"transparent",transition:"color 0.2s ease-in-out",outline:"none",cursor:"pointer"},onClick:function(){n(!1)}},i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},i.createElement("path",{d:"M13 4.41562L9.41563 8L13 11.5844L11.5844 13L8 9.41563L4.41562 13L3 11.5844L6.58437 8L3 4.41562L4.41562 3L8 6.58437L11.5844 3L13 4.41562Z",fill:"#1E1E1E"}))))));return i.createElement(i.Fragment,null,i.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,right:0,bottom:0,opacity:.2,zIndex:101,pointerEvents:"none",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABVxSURBVHgB7Z3tVRtJE4WL9zgANgLLGRCCnAGOADmCxRGgDFAGYiOADKQMIAGO9J8ji42g37mjqlUjBgOanpn+uM85sjC2sKzbVd1dVV0tQgghhBBCCCGEEEIIKRPn3Gn1GAlJmmN1pP558J6OX9540ejh4WGlX09OTk7+EZIclXYXlY43+vVflY7PH3wd9c+AY/Wvvcb9/b0bjUYOz/hBQpICmh1oOPrEa6l/4rTR337AhIMgTSqtzg+0m8gnof7p0mD8EzmGhkFwJiR6np6e7luLL9Q/RTDTBzF+7wfWg2CxWOCHjYVET6XTdLPZrFuLL9Q/NeCkoVUQ4/d+6Ijev1yof1rAUVMvQgjJHebrSRu+CEmWo/O8hISgCjStKpgiGoDWed4AUP/hwGf++Pi4hQYyFHgDzBP3T7A8b0uo/zD4+sMBy1CwWKR/YjF+fS/Uv2di0t/eEAdBT0QnvlD/PolR/xoOgu4JUd7bFdS/e6I1foODoFuqz3M2mUziFF+of5dEb/xGwyAYCwmCVuPNYv5MqX94Yl75NWKD4PLyEm92KqQoqH9Y8Bnis0zC+A14LbxxVqiVCfUPh678plxNFYQe5pjRgAgpDAv4IOAHJyCEkDJoiPaeCyG5UA1oRIYWHNivSSbV0wLq/zbQXz+bS8kV/AeZJ35NCcYPqH8zvv4VS8kVFou8phTjB9T/NcVt+zgI9rjQDRwTgPrvKcn5v4CDYIfT/vtFiS/UHxRr/AYHwQ4t9DiVwihZ/+KN36ATKJsS9U+utr9r/EGQdQSUNFKa/geZkImQ/2rHlznnQDG7oX9b9Xwl5AUl6G9oLcSSxl8Q/p4P13YJIaQMisvzEkJ2lJjnJyQY3lnoJGfNUvP8oUhZf7c70s2eCG1wL7uhRJ0iQnCveiDIhzf7t/f9IvP8IUhJfx/b9rErUkvgRVPIE1fv6xrvbzweu7OzM3d7e4v3OhfSilT092HMJzCxF4u43eWctfFvt1uHu9nxXvF1CWmtroldfx9W+HVErINAjX+M65ngAPxnOAJ1AiMhrUjBCdD4Oya2QYBlPwx8vV47WwFg+a+XZbrz83NzANz/ByBmJ0Dj74lYBgECfrbnt6U/DB/vC7388L2rqyu8vzshwYjRCdD4e8YfBLidVgYA0X7M9jB8PGazmbu5ualnfiz9dSAsufwPTwz6+5jjp/H3CD5ofPB9343u9v3u6+U+0jyY7eEA8Hx3d4c/QjvvMyGdMZT+TeA9wBHR+DPHUn3T6bRe7uMxn89tn18v/TH7O17gQEheYM9vEX7M9hbsg/FbHED3/IPPSISQgNhyE0au+7x7PPtOQFcB3PMTMjTYf4cyRN3zL2DgMHgs/7XU99acgDIWEgUh9W/4uWMh8QKBvCh8qxSR7fmxt0eEv8kJ6MzP8/2REFL/g59bp/o0xsMAb6xAnBB5Yr+6D3X9KOpBxP/ACWA0jFnoEw+h9D/4mYd5/pGQeAlRLFK95tJy+35578PDQ+0E9LAPi3wixAUsFmKRT6I0DIIPzdJuf6R3i+UeZnsz/nqjPx47/fMpZ/54OVb/g5/BZi4pY4Pgo8s2d3CkF0Z/cXFRL/+Xy2W9BdBUH4/5JsBn9W94PZu5pI77QzMOjepiNp/j71hO//fv31sr7qmtfT73i3xWjnvAZHhH/4nquXrLwB2bueSJ27Vmvodhq4df4BmzvQb3IPxWl/zgRl/DwZA4GrhdYFUHfbHE1y0enXsJ2FLfCnggvjqBejDoTI8o38ocgJAscNq8BY4fv/Uf+J46gjkdQcbA+19fXzs7zQfR8TWcgH+kFw/u+fMDKz/o3OQETk9PLcWLPSBbeeWELd91eb+CcTc5gXr6r9J8PNKbF/7S3z+6DYcvDasBOv6M0GUduNDfv+cEYPhjIVmA+I3Vc4gaOQzfHAECvb4joAPICCzlrIJP93h/dAIYDBQ/L8wBNC37rXUblv5CB5AfGvi5h6F7Ed9GJ2CZP0b780O1vreVnnhOAFsBOoCMscg/HMBbTsCO+grJFkvvHmYCSnYA/5MMcbsiH6TykNgfr9fry58/f0oltFxcXMj379+l+h42gBcnJyfr6iXfq1nhJ56FZIeuAq+fn59Xv379Oq0CgVJNBEIydAAavLv98ePHeSX4bfX1OQSv9noQ/a7y9A8HTuAcTqB63FSPZyE5Mq3GwOW3b99kNpu9+5e/fv2Kp3+FpAW8vB3cwbLOOvZYfl9LfGdW9KOn+mZCskZXhCuL9vtLfjvshd97hWArpn8TxGn5rhZzOL/gB19DYBzzxcEeTQEtGfArB7c7xbmyVu4YExoTuNcYEL6eCkkTxHYOmna4wzQfvq8z/+o949e940hIkjTp5/ZXjm/1+VQfr856UP/EcLtqr9s/OQENDl5+wPhH3nHQZK6mJjucNvNo2w+A+icC0jaY4a2LT5MT+Mye3+l58JSupiY7XIA2XtQ/IZw2f7D9v+X6D53AZ/f8LqGrqckOF7CNF/VPAF3Or6xvv53r951Amx5+DYOAXWEjxXXQxov6R4zTSzusht8OfABE+r3U39y1iPbbIODVX3ED4/Tagk8kENQ/QiyaC1Fg7PX6frm0Mk6/wUOQ8l799+j9I0cDwcF1ov4R4Xbde2vjxi92ogsPzPrY92szD7buJiQn3K6+v17q2yxvlV1u3+TRAn4jIYTkAfbymOWx1AcwfHMEXp5/JISQ9PEDd867ohvGbvt+cwRe6+5ee7ltNpuVf7yYdA8+68fHxy0+exkY6t8RGnSxJX19yAd7fWvhjEs7NOCHb2D9/+AGqO3HQGSeuD/8PD/GggwM9e8IBPCwr7ciHnzA6NrqtW5+4QRkIByLRXrDRXhXH/XvCKRccEuPX8mHD9jr7Vc7AV32D9rJh4Oge2I0foP6d8QHnADO9kdxYw8HQXfEbPwG9e+It5yAlvdG1beNgyA8KRi/Qf07oskJIEYQw8x/SMMgGAs5CmR0UjF+g/oHwh00YzAn0OZgT1/YINBU5VTIUeCzw2eYivEb1L8l7o1mDm7X220a48x/iNtVLE4dC5OOxu2794wlMaj/kbgAzRwIIQmS4p6PEBKIp6enexo/IYWCPdNms1nnbPxat7BwvH/+P7Dt08/kUjKH+hcOxGeeeI8f86lYSuZQ/8JhsciehoBv9rMi9VdcwZcucBCkVeEXmuL1dy0vbciBkgdBycZvFKs/8/x7ShwENP49xelP8V9T0iBgncdritGfxv82/iDIORJ+EAGfCKnJXn8a//to7fgy51y45sCX1P812erPZR8hBVMZ/Ax9+2j8hBSIHumcpXikkxBCBsXtz8QnUyXndvfz8Sx8AFLUnwTEveyKE32KyAK+7IYThqT0V88/o+cPBz7TVPLEJdb2d00y+pv4elHHTEgwUigWYaq3O6LXn56/e2IeBDT+7olWf4rfHzEOAurfH9HpT/H7J6ZBQP37Jxr9Kf5w+IMAt9PKQOB6NurfP4Prjyg/jX9Y8JnDAHE/vQwE/m0MQOrfP4PqX/3jp15Dj4kQQspCK5SK7OZDCCGEEBIfbneH4kgCoT9vLCQJguqPaD8CDdXzlZDogaEuFotgKSLL9uBnYmAJiZqg+vupPlzbJSR6YKSh8sSODVyTI5j+LO9NlxDFIqzzSJfW+jPPnz4Ng+DDGRvqnz5t9GeePxNsEHx2+U798+BY/e3FzPNnwLE6Uv88oI6EEEIIIYQQQgghhBBCCCGEEEIIIYQQQkiRoHyQxz/T51gdqX8evKfjlzdeNHp4eFjp15OTk5N/hCQHjoFWOt7o139VOj5/8HXUPwOO1f+/02ApXEhJmmnTzIP6p49r28wlRFMJMgwhmnlQ/3RB854g/RwaBgF7wkVOyGYe1D9N0L4vWDMXGwTaFHIsJGpgpF5TyIm0hPqnR6XTdLPZrF2oZi7aVIDePxFgqCH1ov6EEEIIITHRtl7jixBCkuToPH8ocGMQrihmiqh/8Jnjau6hrwen/sPQOs8fAgxA5on7xxcfBigDQf2HIUSdR6g3wmKRnolGfKH+QxCT/vaGOAh6Ijrxhfr3SYz613AQdE+04gv174Ng5b1dwUHQHTEbv0H9u6X6PGeTySTu69oaBsFYSCui9/we1L87tBpzFv1naoPg8vISA2AqpBX4DPFZxm78BvUn9awF8R07yrRGPf80pdmU+hNCyJHoYa4ZHSghhWEBXwT84ASEEFIGDdmec8mJ6j+EyNAiu/9YACC+fjaXkinU/21SSPW2BuIzT/waX/yKpWQK9W+mCOMHLBZ5TfbLPg/q/5pijN/gINhTnPhC/X1cwAauScFBUKbxG9R/h9P7F0rTv6bkQVCy8Rt0Aju00OtUSqTEQZBSbX/X0AmQF4Mg5wi4cRAJn0jhlKY/aUBrx5c558ANzYUvafx7StAfqxv0UKyer4QQUg5+zAfXdgkhpAxKqvMghHgUm+cPhdufhU/Oa+qRTp6Jb0HK+oOi8/whcC+74SSTIrJlH7vitCMl/RHcqx4I8uHN/u19v9w8f1swi6aWJ+aeLxyp6F+9r2u8v/F47M7Oztzt7S3e61xIe1IqFmGFX3hi19/tLuesjX+73brFYlG/V3xdQlq7F1JwAjT+7ohVfzX+Ma5ngwPwn+EI1AmMhLQnZidA4++e2PTHsh8Gvl6vna0AsPzXy1Ld+fm5OQDu/0MRoxOg8fdHLPoj4Gd7flv6w/DxvtDLD9+7urrC+7sTEhZ/EOB2WhkYE57G3w8x6I9oP2Z7GD4es9nM3dzc1DM/lv46FpZc/ncEBgEMD7XVMjB4DxiINP7+GEp/t7/voF7uI0WJ2R4OAM93d3f4I7TzPhNCSD5Yqm86ndbLfTzm87nt8+ulP2Z/x+vQCMkL7Pktwo/Z3oJ9MH6LA+ief/AVKSEkILbdgJHr3v4ez74T0FUA9/wxgP1XF0Lozx0LiZqQ+uuefwEDh8Fj+a+lvrfmBJSxkOGBEF4UNliKyFJ9usdjgCdSQupve37s7RHhb3ICOvPzfH8swDhD54kb8vwjIVESSn+/ug91/SjqQcT/wAlgNhiz0CcyQhaLsMgnPULoX73m0nL7fnnvw8ND7QT0sA+LfGKlYRB82ks7NnNIlmP1d/sjvVtsJTDbm/HXG/3x2OmfTznzR44NgmOX7Y7NHJLms/q7gyO9MPqLi4t6+b9cLustgKb6eMw3FdwfmjFggKg3X71l4I7NHJLmHf3PVPs5/o7l9H///r214p7a2udzv8hn5RgDShsN3Czg1SE4lom6xKO4heB2rdnvYdi6QljgGbO9BvfgOLa65Ac3+hpOBinjtHkDhMdv/Qe+p45gTkeQL7bUtwIeaK5OoJ4MdKZHlG9lDkBIPsDzQ/QmJ3B6emopHqwB2corQzDDX19fOzvNh7GAr+EE/CO9eHDPnxH+0t8/ugnBpWE1QOHzwpbvurxfwbibnEA9/VdpPh7pzQjs3yyfK2rkMHxzBAj0+I6ADiAvdFsHLvT37zkBGP5YSB6YA2ha9lvrJiz9hQ4gO7CVswo+jfH80QlgMqD2GaKC35unF88JYCtAB5AnGvi9h6F7GZ9GJ2CZP0b7M8XSO4eZADqAvLHIPxzAW07AjvpKYfxPCkBngevn5+fVr1+/TqtAoFQDQUieuF2RD1J5SOyP1+v15c+fP6Vy9HJxcSHfv3+X6nsIAF2cnJysq5d8r1YAP/EshVGEA6iYVkZ/+e3bN5nNZu/+5a9fv+LpXyHJocG72x8/fpxXDv+2+vocDr+K9cDp31UrvYcDJ3AOJ1A9bqrHs5D80BlhZdF+f8lvhz3we68QZMX0T3pglWcHd6Cjdeyx/L6W+M6s6EdP9c2ElIHbneJaWStnFIRoTOBe94D4eiokSZyW72oxl/MLfvA1jB6642CPpoCXDPhljO79RwffG6kj2OrzqT5e1Xo3vZ7EC2K7B0073GGaD9/XmX/1nvFT/4Rx2syjbT+AIW+gIZ/D7ao9b//kBDQ4ePkB46f+qeICtPFy2g8gpavJSwZpW8zw1sWnyQl8Zs9P/RPFBWzj5RK6mrxkTCfb/1uu/9AJfHbPT/0Tw3XQxqthELArcETocn5lffvtXL/vBNr08KP+CQFxvLbQEwmEDQJe/RQXTi/tsBp+O/AFEOn3Un9z1yLaT/0TQgNBwb20Zg/o/SPBsjkwShh7vb5fLq2M22/wEqS8V/+9sRBChsXtuvfWxo1f7EQnHpj1se/XZh5s3U1ITrhdfX+91LdZ3io73b7JqwX8RkIIyQPs5THLY6kPYPjmCLw8/0hI3iAd8/j4uN1sNisZGLwH/3gpCYcfuHPeFd0wdtv3myPwWnf32suR+veMn+fHBy8DA0fEPHF4NOhmS/r6kA/2+tbCHZd2aMAP38D6/8ENUNtP/XvERXhXn2OxSCcggId9vRXx4LNF12avdfsLJyADQf17IkbjNzgIwoOUK27p8Sv58Nl6vf1qJ6DL/kE7+VD/jonZ+A0OgvB8wAngbH8UN/ZQ/45IwfgNDoLwvOUEtLw3qr6N1D8wiOimYvxGwyAYC2lFkxNAjCCGmf8Q6h8QRHeR7knF+A0bBJqqmgr5NO6gGYc5gTYHe/qC+gfC7bv3jCUx3K5ibepYmPJp3BvNXNyut+M0xpn/EOpPyBG4AM1cCCEJkmLMhxASiKenp3saf4Fg2Vc9FsjpSuZo3hr/115r1lMAe+bNZrPO2fip/wH+nq9iKZkD8ZknLhfq79EQ8MneK7JYpGyov5JShV9oOAjKvnSjeP1LNn6j5EHgWl7akgPF6k/j31PiIGCef09x+jPP+5qSBgGd/2uKcgIHEdCJkBp/EOSaCaHxv00J+tdoDnRJ8V+jtePLHGshaPzvk7P+pGC47SOkYCqDn6FvH42fkAJxuyPdaN01FlIGbnc/37TkFE8o3L4nAmvHCyQ5/S3gw24oYXAvuyKxbLgwktK/xNr+rsFqKpU8sa78Zlz5hSMZ/Znq6Y4UikVMf72oYyYkGNHrT+PvnpgHAVd+3ROt/jT+/ohxEFD//ohOf4rfPzENAurfP1E5AVzPRPH7xx8EuJ1WBoDGPxyH+ruhjlTjbnR9AxMhvYLPHA4YGkjPIMpP4x+WIfUnhYMZx2voMRFCSFlohVqR3XwIIaQc3O5OtrGQJFC9RkKKRCsyRxICi/YuFgvs986ERA3Eh1ahUkT4GQg0Vc9XQqInqP6ODRyTA046VJ7Y1x/XdgmJnmD6M8+bLiGKRVjemy6t9WeeN30aBsGHI/bUP33a6M88bybYIPjs9o3658Gx+tuLmefNgGN1pP55QB0JIYQQQgghhBBCCJGy+T9ftRg+rVNPfAAAAABJRU5ErkJggg==')"}}),o&&s.createPortal(a,document.body))},nt={default:"",xsmall:"k-icon-xs",small:"k-icon-sm",medium:"k-icon-md",large:"k-icon-lg",xlarge:"k-icon-xl",xxlarge:"k-icon-xxl",xxxlarge:"k-icon-xxxl"},rt=globalThis&&globalThis.__assign||function(){return rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rt.apply(this,arguments)},ot=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},it=i.forwardRef((function(e,t){var n=e.className,r=e.name,o=e.themeColor,s=e.size,l=e.flip,a=e.style,c=e.id,u=e.tabIndex,d=ot(e,["className","name","themeColor","size","flip","style","id","tabIndex"]),p=i.useRef(null),h=i.useRef(null);i.useImperativeHandle(p,(function(){return{element:h.current}})),i.useImperativeHandle(t,(function(){return p.current}));var f=i.useMemo((function(){return s||st.size}),[s]),m=i.useMemo((function(){return l||st.flip}),[l]),g=i.useMemo((function(){var e;return Qe("k-icon","k-font-icon",r&&mt(r),((e={})["k-color-".concat(o)]=o,e["k-flip-h"]="horizontal"===m||"both"===m,e["k-flip-v"]="vertical"===m||"both"===m,e),nt[f],n)}),[r,o,f,m,n]),v=function(e,t,n){void 0===n&&(n={});var r=i.useCallback((function(r){n.onMouseDown&&n.onMouseDown.call(void 0,r),e.onMouseDown&&e.onMouseDown.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseDown,e.onMouseDown,t]),o=i.useCallback((function(r){n.onMouseUp&&n.onMouseUp.call(void 0,r),e.onMouseUp&&e.onMouseUp.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseUp,e.onMouseUp,t]);return{onClick:i.useCallback((function(r){n.onClick&&n.onClick.call(void 0,r),e.onClick&&e.onClick.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onClick,e.onClick,t]),onMouseUp:o,onMouseDown:r,onDoubleClick:i.useCallback((function(r){n.onDoubleClick&&n.onDoubleClick.call(void 0,r),e.onDoubleClick&&e.onDoubleClick.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onDoubleClick,e.onDoubleClick,t]),onMouseEnter:i.useCallback((function(r){n.onMouseEnter&&n.onMouseEnter.call(void 0,r),e.onMouseEnter&&e.onMouseEnter.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseEnter,e.onMouseEnter,t]),onMouseLeave:i.useCallback((function(r){n.onMouseLeave&&n.onMouseLeave.call(void 0,r),e.onMouseLeave&&e.onMouseLeave.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseLeave,e.onMouseLeave,t]),onMouseMove:i.useCallback((function(r){n.onMouseMove&&n.onMouseMove.call(void 0,r),e.onMouseMove&&e.onMouseMove.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseMove,e.onMouseMove,t]),onMouseOut:i.useCallback((function(r){n.onMouseOut&&n.onMouseOut.call(void 0,r),e.onMouseOut&&e.onMouseOut.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseOut,e.onMouseOut,t]),onMouseOver:i.useCallback((function(r){n.onMouseOver&&n.onMouseOver.call(void 0,r),e.onMouseOver&&e.onMouseOver.call(void 0,{target:t.current,syntheticEvent:r})}),[n.onMouseOver,e.onMouseOver,t])}}(e,p);return i.createElement("span",rt({ref:h},d,v,{className:g,id:c,tabIndex:u,style:a,role:"presentation"}))}));it.propTypes={style:l.object,classNames:l.string,name:l.string,themeColor:l.oneOf(["inherit","primary","secondary","tertiary","info","success","error","warning","dark","light","inverse"]),size:l.oneOf(["default","xsmall","small","medium","large","xlarge","xxlarge","xxxlarge"]),flip:l.oneOf(["default","horizontal","vertical","both"])};var st={size:"default",flip:"default"};it.displayName="KendoIcon";var lt=globalThis&&globalThis.__assign||function(){return lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lt.apply(this,arguments)},at=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ct=i.forwardRef((function(e,t){var n=e.children,r=e.className,o=e.svgClassName,s=e.icon,l=e.flip,a=e.id,c=e.tabIndex,u=e.size,d=e.style,p=e.svgStyle,h=e.themeColor,f=e.viewBox;e.name;var m=e.onClick,g=at(e,["children","className","svgClassName","icon","flip","id","tabIndex","size","style","svgStyle","themeColor","viewBox","name","onClick"]),v=i.useRef(null);i.useImperativeHandle(t,(function(){return{element:v.current}}));var y=i.useMemo((function(){return s?s.name:ut.icon}),[s]),b=i.useMemo((function(){return u||ut.size}),[u]),w=i.useMemo((function(){return l||ut.flip}),[l]),k=i.useMemo((function(){return f||ut.viewBox}),[f]),x=i.useMemo((function(){var e;return Qe("k-icon","k-svg-icon","k-svg-i-"+y,((e={})["k-color-".concat(h)]=h,e["k-flip-h"]="horizontal"===w||"both"===w,e["k-flip-v"]="vertical"===w||"both"===w,e),nt[b],r)}),[y,h,b,w,r]),S=i.useMemo((function(){return e.width&&e.height?lt({width:e.width,height:e.height},d):e.width?lt({width:e.width,height:e.width},d):e.height?lt({width:e.height,height:e.height},d):lt({},d)}),[e.width,e.height,d]);return i.createElement("span",{className:x,style:S,ref:v,onClick:m},i.createElement("svg",lt({id:a,className:o,style:p,"aria-hidden":!0,tabIndex:c,focusable:!1,xmlns:"http://www.w3.org/2000/svg",viewBox:s?s.viewBox:k,dangerouslySetInnerHTML:s?{__html:s.content}:void 0},g),s?void 0:n))}));ct.propTypes={style:l.object,classNames:l.string,children:l.any,icon:l.object,themeColor:l.oneOf(["inherit","primary","secondary","tertiary","info","success","error","warning","dark","light","inverse"]),size:l.oneOf(["default","xsmall","small","medium","large","xlarge","xxlarge","xxxlarge"]),flip:l.oneOf(["default","horizontal","vertical","both"])};var ut={size:"default",flip:"default",icon:"",viewBox:"0 0 24 24"};ct.displayName="KendoSvgIcon";var dt=i.createContext({type:"svg"});dt.displayName="KendoReactIconsContext";var pt=globalThis&&globalThis.__assign||function(){return pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pt.apply(this,arguments)},ht=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ft=i.forwardRef((function(e,t){var n,r,o=i.useContext(dt),s=o.type,l=o.icons,a=e.icon,c=ht(e,["icon"]),u="svg"===s?(null===(n=e.icon)||void 0===n?void 0:n.name)||e.name:e.name||(null===(r=e.icon)||void 0===r?void 0:r.name),d=(u=u&&l&&l[u]&&"string"==typeof l[u]?l[u]:u)&&l&&l[u]&&"string"!=typeof l[u]?l[u]:a;return"svg"===s&&d?i.createElement(ct,pt({},e,{icon:d,ref:t})):i.createElement(it,pt({},c,{name:u,ref:t}))}));ft.displayName="KendoIconWrap";var mt=function(e){return"k-i-"+e};function gt(e){this.content=e}function vt(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let e=0;o.text[e]==i.text[e];e++)n++;return n}if(o.content.size||i.content.size){let e=vt(o.content,i.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function yt(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};let s=e.child(--o),l=t.child(--i),a=s.nodeSize;if(s!=l){if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let e=0,t=Math.min(s.text.length,l.text.length);for(;e<t&&s.text[s.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let e=yt(s.content,l.content,n-1,r-1);if(e)return e}n-=a,r-=a}else n-=a,r-=a}}l.shape({name:l.string.isRequired,content:l.string.isRequired,viewBox:l.string.isRequired}),gt.prototype={constructor:gt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new gt(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new gt(n)},addToStart:function(e,t){return new gt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new gt(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new gt(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=gt.from(e)).size?new gt(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=gt.from(e)).size?new gt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=gt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},gt.from=function(e){if(e instanceof gt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new gt(t)};class bt{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,o){for(let i=0,s=0;s<t;i++){let l=this.content[i],a=s+l.nodeSize;if(a>e&&!1!==n(l,r+s,o||null,i)&&l.content.size){let o=s+1;l.nodesBetween(Math.max(0,e-o),Math.min(l.content.size,t-o),n,r+o)}s=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,((s,l)=>{s.isText?(o+=s.text.slice(Math.max(e,l)-l,t-l),i=!n):s.isLeaf?(r?o+="function"==typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new bt(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let s=this.content[o],l=i+s.nodeSize;l>e&&((i<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=l}return new bt(n,r)}cutByIndex(e,t){return e==t?bt.empty:0==e&&t==this.content.length?this:new bt(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new bt(r,o)}addToStart(e){return new bt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new bt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return vt(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return yt(this,e,t,n)}findIndex(e,t=-1){if(0==e)return kt(0,e);if(e==this.size)return kt(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?kt(n+1,o):kt(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return bt.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new bt(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return bt.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new bt(t||e,n)}static from(e){if(!e)return bt.empty;if(e instanceof bt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new bt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}bt.empty=new bt([],0);const wt={index:0,offset:0};function kt(e,t){return wt.index=e,wt.offset=t,wt}function xt(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!xt(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!xt(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class St{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&xt(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return St.none;if(e instanceof St)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}St.none=[];class Ct extends Error{}class Et{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Tt(this.content,e+this.openStart,t);return n&&new Et(n,this.openStart,this.openEnd)}removeBetween(e,t){return new Et(Ot(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Et.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Et(bt.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new Et(e,n,r)}}function Ot(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:l}=e.findIndex(n);if(o==t||i.isText){if(l!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(Ot(i.content,t-o-1,n-o-1)))}function Tt(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=Tt(s.content,t-i-1,n);return l&&e.replaceChild(o,s.copy(l))}function Mt(e,t,n){if(n.openStart>e.depth)throw new Ct("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ct("Inconsistent open depths");return At(e,t,n,0)}function At(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=At(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:o,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)r=t.node(o).copy(bt.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return It(i,_t(e,o,s,t,r))}{let r=e.parent,o=r.content;return It(r,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return It(i,Ft(e,t,r))}function Nt(e,t){if(!t.type.compatibleContent(e.type))throw new Ct("Cannot join "+t.type.name+" onto "+e.type.name)}function Pt(e,t,n){let r=e.node(n);return Nt(r,t.node(n)),r}function Rt(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Dt(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Rt(e.nodeAfter,r),i++));for(let l=i;l<s;l++)Rt(o.child(l),r);t&&t.depth==n&&t.textOffset&&Rt(t.nodeBefore,r)}function It(e,t){return e.type.checkContent(t),e.copy(t)}function _t(e,t,n,r,o){let i=e.depth>o&&Pt(e,t,o+1),s=r.depth>o&&Pt(n,r,o+1),l=[];return Dt(null,e,o,l),i&&s&&t.index(o)==n.index(o)?(Nt(i,s),Rt(It(i,_t(e,t,n,r,o+1)),l)):(i&&Rt(It(i,Ft(e,t,o+1)),l),Dt(t,n,o,l),s&&Rt(It(s,Ft(n,r,o+1)),l)),Dt(r,null,o,l),new bt(l)}function Ft(e,t,n){let r=[];return Dt(null,e,n,r),e.depth>n&&Rt(It(Pt(e,t,n+1),Ft(e,t,n+1)),r),Dt(t,null,n,r),new bt(r)}Et.empty=new Et(bt.empty,0,0);class zt{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return St.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Ht(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(o),s=o-t;if(n.push(i,e,r+t),!s)break;if(i=i.child(e),i.isText)break;o=s-1,r+=t+1}return new zt(t,n,o)}static resolveCached(e,t){for(let r=0;r<Bt.length;r++){let n=Bt[r];if(n.pos==t&&n.doc==e)return n}let n=Bt[Lt]=zt.resolve(e,t);return Lt=(Lt+1)%jt,n}}let Bt=[],Lt=0,jt=12;class Ht{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Vt=Object.create(null);let $t=class e{constructor(e,t,n,r=St.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||bt.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&xt(this.attrs,t||e.defaultAttrs||Vt)&&St.sameSet(this.marks,n||St.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return Et.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),l=r.node(i).content.cut(r.pos-s,o.pos-s);return new Et(l,r.depth-i,o.depth-i)}replace(e,t,n){return Mt(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return zt.resolveCached(this,e)}resolveNoCache(e){return zt.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ut(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=bt.empty,r=0,o=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let l=r;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=St.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!St.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=bt.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}};$t.prototype.text=void 0;class Wt extends $t{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ut(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Wt(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Wt(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Ut(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class qt{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Kt(e,t);if(null==n.next)return qt.empty;let r=Jt(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return function n(r){let o=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<o.length;e++)o[e][0]==t&&(r=o[e][1]);en(e,n).forEach((e=>{r||o.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let i=t[r.join(",")]=new qt(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(Zt);i.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return i}(en(e,0))}(function(e){let t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(e(n,i))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(i,s),o(e(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){let s=i;for(let r=0;r<t.min;r++){let r=n();o(e(t.expr,s),r),s=r}if(-1==t.max)o(e(t.expr,s),s);else for(let i=t.min;i<t.max;i++){let i=n();r(s,i),o(e(t.expr,s),i),s=i}return[r(s)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=e(t.exprs[r],i);if(r==t.exprs.length-1)return s;o(s,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function o(i,s){let l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return bt.from(s.map((e=>e.createAndFill())));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:i,next:s}=o.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}qt.empty=new qt(!0);class Kt{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Jt(e){let t=[];do{t.push(Gt(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Gt(e){let t=[];do{t.push(Xt(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Xt(e){let t=function(e){if(e.eat("(")){let t=Jt(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let e=n[i];e.groups.indexOf(t)>-1&&o.push(e)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Qt(e,t)}return t}function Yt(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Qt(e,t){let n=Yt(e),r=n;return e.eat(",")&&(r="}"!=e.next?Yt(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Zt(e,t){return t-e}function en(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let e=0;e<o.length;e++){let{term:r,to:i}=o[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(Zt)}function tn(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function nn(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function rn(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new sn(e[n]);return t}let on=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=rn(n.attrs),this.defaultAttrs=tn(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==qt.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:nn(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $t(this,this.computeAttrs(e),bt.from(t),St.setFrom(n))}createChecked(e=null,t,n){return t=bt.from(t),this.checkContent(t),new $t(this,this.computeAttrs(e),t,St.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=bt.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(bt.empty,!0);return o?new $t(this,e,t.append(o),St.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:St.none:e}static compile(t,n){let r=Object.create(null);t.forEach(((t,o)=>r[t]=new e(t,n,o)));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class sn{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class ln{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=rn(r.attrs),this.excluded=null;let o=tn(this.attrs);this.instance=o?new St(this,o):null}create(e=null){return!e&&this.instance?this.instance:new St(this,nn(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,o)=>n[e]=new ln(e,r++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class an{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=gt.from(e.nodes),t.marks=gt.from(e.marks||{}),this.nodes=on.compile(this.spec.nodes,this),this.marks=ln.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",o=e.spec.marks;e.contentMatch=n[t]||(n[t]=qt.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.markSet="_"==o?null:o?cn(this,o.split(" ")):""!=o&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:cn(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof on))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Wt(n,n.defaultAttrs,e,St.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return $t.fromJSON(this,e)}markFromJSON(e){return St.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function cn(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class un{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new gn(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new gn(this,t,!0);return n.addAll(e,t.from,t.to),Et.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(vn(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=yn(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=yn(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new un(e,un.schemaRules(e)))}}const dn={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},pn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},hn={ol:!0,ul:!0};function fn(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class mn{constructor(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=St.none,this.stashMarks=[],this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(bt.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=bt.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(bt.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):bn(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!dn.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class gn{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,o=t.topNode,i=fn(null,t.preserveWhitespace,0)|(n?4:0);r=o?new mn(o.type,o.attrs,St.none,St.none,!0,t.topMatch||o.type.contentMatch,i):new mn(n?null:e.schema.topNodeType,null,St.none,St.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let r=this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(n));if(!r)return;let[o,i]=r,s=this.top;for(let l=0;l<i.length;l++)this.removePendingMark(i[l],s);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);t();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],s);for(let l=0;l<i.length;l++)this.addPendingMark(i[l])}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();hn.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&hn.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:pn.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let t,n=this.top,i=this.needsBlock;if(dn.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);o&&o.skip?this.addAll(e):this.withStyleRules(e,(()=>this.addAll(e))),t&&this.sync(n),this.needsBlock=i}else this.withStyleRules(e,(()=>{this.addElementByRule(e,o,!1===o.consuming?n:void 0)}))}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=St.none,n=St.none;for(let r=0;r<e.length;r+=2)for(let o;;){let i=this.parser.matchStyle(e[r],e[r+1],this,o);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((e=>{i.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;o=i}return[t,n]}addElementByRule(e,t,n){let r,o,i;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace)):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}addAll(e,t,n){let r=t||0;for(let o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let i=fn(e,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new mn(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,s)=>{for(;e>=0;e--){let l=t[e];if(""==l){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=l&&-1==e.groups.indexOf(l))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function vn(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function yn(e){let t={};for(let n in e)t[n]=e[n];return t}function bn(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}let wn=class e{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=xn(t).createDocumentFragment());let r=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,i=0;for(;n<o.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(t,n){let{dom:r,contentDOM:o}=e.renderSpec(xn(n),this.nodes[t.type.name](t));if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,o)}return r}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(t,n,r={}){let o=this.marks[t.type.name];return o&&e.renderSpec(xn(r),o(t,n))}static renderSpec(t,n,r=null){if("string"==typeof n)return{dom:t.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;let o,i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let l=r?t.createElementNS(r,i):t.createElement(i),a=n[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){c=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):l.setAttribute(e,a[e])}}for(let u=c;u<n.length;u++){let i=n[u];if(0===i){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:n,contentDOM:s}=e.renderSpec(t,i,r);if(l.appendChild(n),s){if(o)throw new RangeError("Multiple content holes");o=s}}}return{dom:l,contentDOM:o}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(e){let t=kn(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return kn(e.marks)}};function kn(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function xn(e){return e.document||window.document}const Sn=Math.pow(2,16);function Cn(e){return 65535&e}class En{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class On{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&On.empty)return On.empty}recover(e){let t=0,n=Cn(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Sn}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?r:0);if(l>e)break;let a=this.ranges[s+o],c=this.ranges[s+i],u=l+a;if(e<=u){let o=l+r+((a?e==l?-1:e==u?1:t:t)<0?0:c);if(n)return o;let i=e==l?2:e==u?1:4;return(t<0?e!=l:e!=u)&&(i|=8),new En(o,i,e==(t<0?l:u)?null:s/3+(e-l)*Sn)}r+=c-a}return n?e+r:new En(e+r,0,null)}touches(e,t){let n=0,r=Cn(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let l=this.ranges[s+o];if(e<=t+l&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),l=i+(this.inverted?0:o),a=this.ranges[r+t],c=this.ranges[r+n];e(s,s+a,l,l+c),o+=c-a}}invert(){return new On(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?On.empty:new On(e<0?[0,-e,0]:[0,0,e])}}On.empty=new On([]);class Tn{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new Tn(this.maps,this.mirror,e,t)}copy(){return new Tn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Tn;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let n=this.maps[o].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(o);if(null!=t&&t>o&&t<this.to){o=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new En(e,r,null)}}const Mn=Object.create(null);class An{getMap(){return On.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Mn[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Mn)throw new RangeError("Duplicate use of step JSON ID "+e);return Mn[e]=t,t.prototype.jsonID=e,t}}class Nn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Nn(e,null)}static fail(e){return new Nn(null,e)}static fromReplace(e,t,n,r){try{return Nn.ok(e.replace(t,n,r))}catch(o){if(o instanceof Ct)return Nn.fail(o.message);throw o}}}function Pn(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(Pn(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return bt.fromArray(r)}class Rn extends An{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new Et(Pn(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return Nn.fromReplace(e,this.from,this.to,o)}invert(){return new Dn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Rn(t.pos,n.pos,this.mark)}merge(e){return e instanceof Rn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Rn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Rn(t.from,t.to,e.markFromJSON(t.mark))}}An.jsonID("addMark",Rn);class Dn extends An{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new Et(Pn(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return Nn.fromReplace(e,this.from,this.to,n)}invert(){return new Rn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Dn(t.pos,n.pos,this.mark)}merge(e){return e instanceof Dn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Dn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Dn(t.from,t.to,e.markFromJSON(t.mark))}}An.jsonID("removeMark",Dn);class In extends An{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new Et(bt.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new In(this.pos,t.marks[n]);return new In(this.pos,this.mark)}}return new _n(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new In(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new In(t.pos,e.markFromJSON(t.mark))}}An.jsonID("addNodeMark",In);class _n extends An{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new Et(bt.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new In(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _n(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _n(t.pos,e.markFromJSON(t.mark))}}An.jsonID("removeNodeMark",_n);class Fn extends An{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&Bn(e,this.from,this.to)?Nn.fail("Structure replace would overwrite content"):Nn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new On([this.from,this.to-this.from,this.slice.size])}invert(e){return new Fn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Fn(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof Fn)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?Et.empty:new Et(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Fn(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?Et.empty:new Et(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Fn(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Fn(t.from,t.to,Et.fromJSON(e,t.slice),!!t.structure)}}An.jsonID("replace",Fn);class zn extends An{constructor(e,t,n,r,o,i,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(e){if(this.structure&&(Bn(e,this.from,this.gapFrom)||Bn(e,this.gapTo,this.to)))return Nn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Nn.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Nn.fromReplace(e,this.from,this.to,n):Nn.fail("Content does not fit in gap")}getMap(){return new On([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new zn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new zn(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zn(t.from,t.to,t.gapFrom,t.gapTo,Et.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Bn(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function Ln(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function jn(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Ln(r,o,i))break}return null}function Hn(e,t,n=null,r=e){let o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let a=r;l&&a<o;a++)l=l.matchType(n.child(a).type);return l&&l.validEnd?s:null}(r,t);return i?o.map(Vn).concat({type:t,attrs:n}).concat(i.map(Vn)):null}function Vn(e){return{type:e,attrs:null}}function $n(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let e=o.node(c),t=o.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let s=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let l=o.indexAfter(i),a=r&&r[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function Wn(e,t){let n=e.resolve(t),r=n.index();return Un(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Un(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function qn(e,t,n=-1){let r=e.resolve(t);for(let o=r.depth;;o--){let e,i,s=r.index(o);if(o==r.depth?(e=r.nodeBefore,i=r.nodeAfter):n>0?(e=r.node(o+1),s++,i=r.node(o).maybeChild(s)):(e=r.node(o).maybeChild(s-1),i=r.node(o+1)),e&&!e.isTextblock&&Un(e,i)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Kn(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let e=r.index(o);if(r.node(o).canReplaceWith(e,e,n))return r.before(o+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let e=r.indexAfter(o);if(r.node(o).canReplaceWith(e,e,n))return r.after(o+1);if(e<r.node(o).childCount)return null}return null}function Jn(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),l=!1;if(1==i)l=s.canReplace(n,n,o);else{let e=s.contentMatchAt(n).findWrapping(o.firstChild.type);l=e&&s.canReplaceWith(n,n,e[0])}if(l)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function Gn(e,t,n=t,r=Et.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return Xn(o,i,r)?new Fn(t,n,r):new Yn(o,i,r).fit()}function Xn(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}An.jsonID("replaceAround",zn);class Yn{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=bt.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=bt.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,i=n.depth,s=r.depth;for(;i&&s&&1==o.childCount;)o=o.firstChild.content,i--,s--;let l=new Et(o,i,s);return e>-1?new zn(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new Fn(n.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=er(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let o=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:s,match:l}=this.frontier[i],a=null;if(1==t&&(o?l.matchType(o.type)||(a=l.fillBefore(bt.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:a};if(2==t&&o&&(e=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&l.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=er(e,t);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new Et(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=er(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new Et(Qn(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new Et(Qn(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let f=0;f<o.length;f++)this.openFrontierNode(o[f]);let i=this.unplaced,s=n?n.content:i.content,l=i.openStart-e,a=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let p=s.size+e-(i.content.size-i.openEnd);for(;a<s.childCount;){let e=s.child(a),t=u.matchType(e.type);if(!t)break;a++,(a>1||0==l||e.content.size)&&(u=t,c.push(tr(e.mark(d.allowedMarks(e.marks)),1==a?l:0,a==s.childCount?p:-1)))}let h=a==s.childCount;h||(p=-1),this.placed=Zn(this.placed,t,bt.from(c)),this.frontier[t].match=u,h&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=s;f<p;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=h?0==e?Et.empty:new Et(Qn(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new Et(Qn(i.content,e,a),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!nr(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=nr(e,t,r,n,o);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=nr(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Zn(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Zn(this.placed,this.depth,bt.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(bt.empty,!0);e.childCount&&(this.placed=Zn(this.placed,this.frontier.length,e))}}function Qn(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Qn(e.firstChild.content,t-1,n)))}function Zn(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Zn(e.lastChild.content,t-1,n)))}function er(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function tr(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,tr(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(bt.empty,!0)))),e.copy(r)}function nr(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,s);return l&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?l:null}function rr(e,t,n,r,o){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(rr(o.content,t+1,n,r,o)))}if(t>r){let t=o.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(bt.empty,!0))}return e}function or(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class ir extends An{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nn.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return Nn.fromReplace(e,this.pos,this.pos+1,new Et(bt.from(r),0,t.isLeaf?0:1))}getMap(){return On.empty}invert(e){return new ir(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ir(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ir(t.pos,t.attr,t.value)}}An.jsonID("attr",ir);let sr=class extends Error{};sr=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(sr.prototype=Object.create(Error.prototype)).constructor=sr,sr.prototype.name="TransformError";class lr{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Tn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new sr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=Et.empty){let r=Gn(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new Et(bt.from(n),0,0))}delete(e,t){return this.replace(e,t,Et.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(Xn(o,i,r))return e.step(new Fn(t,n,r));let s=or(o,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let l=-(o.depth+1);s.unshift(l);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let e=o.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(h)>-1?l=h:o.before(h)==f&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let e=h.firstChild;if(c.push(e),f==r.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h],t=(d=e.type).spec.defining||d.spec.definingForContent;if(t&&!e.sameMarkup(o.node(Math.abs(l)-1)))u=h;else if(t||!e.type.isTextblock)break}var d;for(let h=r.openStart;h>=0;h--){let t=(h+u+1)%(r.openStart+1),l=c[t];if(l)for(let c=0;c<s.length;c++){let u=s[(c+a)%s.length],d=!0;u<0&&(d=!1,u=-u);let p=o.node(u-1),h=o.index(u-1);if(p.canReplaceWith(h,h,l.type,l.marks))return e.replace(o.before(u),d?i.after(u):n,new Et(rr(r.content,0,r.openStart,t),t,r.openEnd))}}let p=e.steps.length;for(let h=s.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>p));h--){let e=s[h];e<0||(t=o.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=Kn(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new Et(bt.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=or(r,o);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),o.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),o.indexAfter(t-1))))return e.delete(r.before(t),o.after(t))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),l=o.after(i+1),a=s,c=l,u=bt.empty,d=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=bt.from(r.node(f).copy(u)),d++):a--;let p=bt.empty,h=0;for(let f=i,m=!1;f>n;f--)m||o.after(f+1)<o.end(f)?(m=!0,p=bt.from(o.node(f).copy(p)),h++):c++;e.step(new zn(a,c,s,l,new Et(u.append(p),d,h),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=new Fn(t-n,t+n,Et.empty,!0);e.step(r)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=bt.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=bt.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new zn(o,i,o,i,new Et(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,o)&&function(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){e.clearIncompatible(e.mapping.slice(i).map(n,1),r);let s=e.mapping.slice(i),l=s.map(n,1),a=s.map(n+t.nodeSize,1);return e.step(new zn(l,a,l+1,a-1,new Et(bt.from(r.create(o,null,t.marks)),0,0),1,!0)),!1}}))}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new zn(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Et(bt.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new ir(e,t,n)),this}addNodeMark(e,t){return this.step(new In(e,t)),this}removeNodeMark(e,t){if(!(t instanceof St)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new _n(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let o=e.doc.resolve(t),i=bt.empty,s=bt.empty;for(let l=o.depth,a=o.depth-n,c=n-1;l>a;l--,c--){i=bt.from(o.node(l).copy(i));let e=r&&r[c];s=bt.from(e?e.type.create(e.attrs,s):o.node(l).copy(s))}e.step(new Fn(t,t,new Et(i.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let o,i,s=[],l=[];e.doc.nodesBetween(t,n,((e,a,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(a,t),d=Math.min(a+e.nodeSize,n),p=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(p)||(o&&o.to==c&&o.mark.eq(u[e])?o.to=d:s.push(o=new Dn(c,d,u[e])));i&&i.to==c?i.to=d:l.push(i=new Rn(c,d,r))}})),s.forEach((t=>e.step(t))),l.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;i++;let l=null;if(r instanceof ln){let t,n=e.marks;for(;t=r.isInSet(n);)(l||(l=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(l=[r]):l=e.marks;if(l&&l.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,a=l[e];for(let e=0;e<o.length;e++){let t=o[e];t.step==i-1&&a.eq(o[e].style)&&(n=t)}n?(n.to=r,n.step=i):o.push({style:a,from:Math.max(s,t),to:r,step:i})}}})),o.forEach((t=>e.step(new Dn(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let o=e.doc.nodeAt(t),i=[],s=t+1;for(let l=0;l<o.childCount;l++){let t=o.child(l),a=s+t.nodeSize,c=r.matchType(t.type);if(c){r=c;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new Dn(s,a,t.marks[r]));if(t.isText&&!n.spec.code){let e,r,o=/\r?\n|\r/g;for(;e=o.exec(t.text);)r||(r=new Et(bt.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),i.push(new Fn(s+e.index,s+e.index+e[0].length,r))}}else i.push(new Fn(s,a,Et.empty));s=a}if(!r.validEnd){let t=r.fillBefore(bt.empty,!0);e.replace(s,s,new Et(t,0,0))}for(let l=i.length-1;l>=0;l--)e.step(i[l])}(this,e,t,n),this}}const ar=Object.create(null);class cr{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new ur(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Et.empty){let n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let o=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:a}=i[s],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(a.pos),s?Et.empty:t),0==s&&wr(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],l=e.mapping.slice(n),a=l.map(i.pos),c=l.map(s.pos);o?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),wr(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new hr(e):br(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let r=t<0?br(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):br(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new vr(e.node(0))}static atStart(e){return br(e,e,0,0,1)||new vr(e)}static atEnd(e){return br(e,e,e.content.size,e.childCount,-1)||new vr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ar[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ar)throw new RangeError("Duplicate use of selection JSON ID "+e);return ar[e]=t,t.prototype.jsonID=e,t}getBookmark(){return hr.between(this.$anchor,this.$head).getBookmark()}}cr.prototype.visible=!0;class ur{constructor(e,t){this.$from=e,this.$to=t}}let dr=!1;function pr(e){dr||e.parent.inlineContent||(dr=!0)}class hr extends cr{constructor(e,t=e){pr(e),pr(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return cr.near(n);let r=e.resolve(t.map(this.anchor));return new hr(r.parent.inlineContent?r:n,n)}replace(e,t=Et.empty){if(super.replace(e,t),t==Et.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof hr&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new fr(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new hr(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=cr.findFrom(t,n,!0)||cr.findFrom(t,-n,!0);if(!e)return cr.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(cr.findFrom(e,-n,!0)||cr.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new hr(e,t)}}cr.jsonID("text",hr);class fr{constructor(e,t){this.anchor=e,this.head=t}map(e){return new fr(e.map(this.anchor),e.map(this.head))}resolve(e){return hr.between(e.resolve(this.anchor),e.resolve(this.head))}}class mr extends cr{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?cr.near(o):new mr(o)}content(){return new Et(bt.from(this.node),0,0)}eq(e){return e instanceof mr&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gr(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new mr(e.resolve(t.anchor))}static create(e,t){return new mr(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}mr.prototype.visible=!1,cr.jsonID("node",mr);class gr{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new fr(n,n):new gr(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&mr.isSelectable(n)?new mr(t):cr.near(t)}}class vr extends cr{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Et.empty){if(t==Et.empty){e.delete(0,e.doc.content.size);let t=cr.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new vr(e)}map(e){return new vr(e)}eq(e){return e instanceof vr}getBookmark(){return yr}}cr.jsonID("all",vr);const yr={map(){return this},resolve:e=>new vr(e)};function br(e,t,n,r,o,i=!1){if(t.inlineContent)return hr.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let r=t.child(s);if(r.isAtom){if(!i&&mr.isSelectable(r))return mr.create(e,n-(o<0?r.nodeSize:0))}else{let t=br(e,r,n+o,o<0?r.childCount:0,o,i);if(t)return t}n+=r.nodeSize*o}return null}function wr(e,t,n){let r=e.steps.length-1;if(r<t)return;let o,i=e.steps[r];(i instanceof Fn||i instanceof zn)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==o&&(o=r)})),e.setSelection(cr.near(e.doc.resolve(o),n)))}class kr extends lr{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return St.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||St.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(cr.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function xr(e,t){return t&&e?e.bind(t):e}class Sr{constructor(e,t,n){this.name=e,this.init=xr(t.init,n),this.apply=xr(t.apply,n)}}const Cr=[new Sr("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Sr("selection",{init:(e,t)=>e.selection||cr.atStart(t.doc),apply:e=>e.selection}),new Sr("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Sr("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class Er{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Cr.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Sr(e.key,e.spec.state,e))}))}}class Or{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let l=r?r[i].n:0,a=r?r[i].state:this,c=l<t.length&&s.spec.appendTransaction.call(s,l?t.slice(l):t,a,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Or(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new kr(this)}static create(e){let t=new Er(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Or(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new Er(this.schema,e.plugins),n=t.fields,r=new Or(t);for(let o=0;o<n.length;o++){let t=n[o].name;r[t]=this.hasOwnProperty(t)?this[t]:n[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Er(e.schema,e.plugins),o=new Or(r);return r.fields.forEach((r=>{if("doc"==r.name)o.doc=$t.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=cr.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],l=s.spec.state;if(s.key==r.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=l.fromJSON.call(s,e,t[i],o))}o[r.name]=r.init(e,o)}})),o}}function Tr(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=Tr(o,t,{})),n[r]=o}return n}class Mr{constructor(e){this.spec=e,this.props={},e.props&&Tr(e.props,this,this.props),this.key=e.key?e.key.key:Nr("plugin")}getState(e){return e[this.key]}}const Ar=Object.create(null);function Nr(e){return e in Ar?e+"$"+ ++Ar[e]:(Ar[e]=0,e+"$")}class Pr{constructor(e="key"){this.key=Nr(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}var Rr="k-parent-node",Dr="k-colgroup-data",Ir="k-resizable-node",_r="k-editor-resize-handle",Fr="data-dir-table-resize",zr="data-dir-image-resize",Br=function(e,t){var n=t.style,r=t.value,o=t.newValue;if(!e)return{changed:!1,style:null};var i=e.split(/\s*;\s*/).filter((function(e){return Boolean(e)})),s=i.filter((function(e){var t=e.split(/\s*:\s*/);return!(t[0].toLowerCase()===n&&r.test(t[1]))}));return o&&s.push(n+": "+o),{style:s.join("; ")+(s.length?";":""),changed:Boolean(o)||s.length!==i.length}},Lr=function(e,t){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1},jr=function(e){return e instanceof $t?e.type.name:e.name},Hr=function(e,t){return void 0===t&&(t=1),function(n){return function(e,t){return void 0===t&&(t=1),function(n){for(var r=n.$from,o=r.depth;o>0;o--){var i=r.node(o);if(e(i)&&0==(t-=1))return{depth:o,node:i}}}}((function(t){return jr(t)===jr(e)}),t)(n)}},Vr=function(e){var t={};for(var n in e)n&&(e[n]||0===e[n])&&(t[n]=e[n]);return t},$r=function(e,t){return function(n,r){var o=n.selection,i=n.tr;o instanceof mr&&o.node.type.name===e.type.name&&e.isLeaf&&!e.isText&&1===e.nodeSize?(i.setNodeMarkup(o.from,null,Je(Je({},Vr(o.node.attrs)),Vr(e.attrs))),i.setSelection(mr.create(i.doc,o.from))):i.replaceSelectionWith(e),t&&i.scrollIntoView(),r(i)}},Wr=function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},Ur=function(e){return(e||"").split(/\s*;\s*/).filter(Boolean).map((function(e){var t,n=e.split(/\s*:\s*/);return(t={})[n[0]]=n[1],t})).reduce((function(e,t){return Je(Je({},e),t)}),{})},qr=function(e,t,n){var r=e.getAttribute(t);void 0!==n&&n!==r?"style"===t?(e.removeAttribute(t),function(e,t){var n=Ur(t);for(var r in n)r&&void 0!==e.style[r]&&(e.style[r]=n[r])}(e,n)):e.setAttribute(t,n):void 0===n&&e.removeAttribute(t)},Kr=function(){function e(e,t){this.nodes=e,this.marks=t}return e.renderSpec=function(t,n,r){if(void 0===r&&(r=null),"string"==typeof n)return{dom:t.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var o,i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));var l=r?t.createElementNS(r,i):t.createElement(i),a=n[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)null!=a[u]&&((s=u.indexOf(" "))>0?l.setAttributeNS(u.slice(0,s),u.slice(s+1),a[u]):qr(l,u,a[u]));for(var d=c;d<n.length;d++){var p=n[d];if(0===p){if(d<n.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}var h=e.renderSpec(t,p,r),f=h.dom,m=h.contentDOM;if(l.appendChild(f),m){if(o)throw new RangeError("Multiple content holes");o=m}}return{dom:l,contentDOM:o}},e.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))},e.nodesFromSchema=function(e){var t=Jr(e.nodes);return t.text||(t.text=function(e){return e.text}),t},e.marksFromSchema=function(e){return Jr(e.marks)},e.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=Gr(t).createDocumentFragment());var o=n,i=[];return e.forEach((function(e){if(i.length||e.marks.length){for(var n=0,s=0;n<i.length&&s<e.marks.length;){var l=e.marks[s];if(r.marks[l.type.name]){if(!l.eq(i[n][0])||!1===l.type.spec.spanning)break;n++,s++}else s++}for(;n<i.length;)o=i.pop()[1];for(;s<e.marks.length;){var a=e.marks[s++],c=r.serializeMark(a,e.isInline,t);c&&(i.push([a,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNodeInner(e,t))})),n},e.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},e.prototype.serializeMark=function(t,n,r){void 0===r&&(r={});var o=this.marks[t.type.name];return o&&e.renderSpec(Gr(r),o(t,n))},e.prototype.serializeNodeInner=function(t,n){var r=e.renderSpec(Gr(n),this.nodes[t.type.name](t)),o=r.dom,i=r.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return o},e}();function Jr(e){var t={};for(var n in e)if(e[n]){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Gr(e){return e.document||window.document}var Xr=["div","ol","ul","li","table","tbody","thead","tfoot","caption","td","th","p","tr","col","colgroup","article","main","nav","header","footer","aside","section"],Yr=function(e,t){var n=(e.ownerDocument||document).createElement(t);Array.from(e.rows).filter((function(e){return e.getAttribute(Rr)===t})).forEach((function(e){e.removeAttribute(Rr),n.appendChild(e)})),n.children.length&&e.appendChild(n)},Qr=function(e,t){var n=t.toUpperCase();e.filter((function(e){return e.nodeName===n})).forEach((function(e){Array.from(e.children).forEach((function(n){n.setAttribute(Rr,t),e.parentNode&&e.parentNode.insertBefore(n,e)})),e.remove()}))},Zr=function(e,t){void 0===t&&(t=Xr);var n=t.join("|");return e.replace(new RegExp("\\s*(<(?:"+n+")(?:\\s[^>]*?)?>)","g"),"$1").replace(new RegExp("(<\\/(?:"+n+")(?:\\s[^>]*?)?>)\\s*","g"),"$1")},eo="data-style",to=" "+eo+"=",no=/<[^>]+>/gm,ro=/\sstyle=/gm,oo=function(e){return e.replace(ro,to)},io=function(e){var t,n=document.createElement("template");return n.innerHTML=function(e){return e.replace(no,oo)}(e),t=n.content,Array.from(t.querySelectorAll("["+eo+"]")).forEach((function(e){var t=e.getAttribute(eo);e.removeAttribute(eo),function(e,t){e.split(";").filter((function(e){return""!==e})).forEach((function(e){var n=e.split(":");t.style[n[0].trim()]=n[1].trim()}))}(t,e)})),n.content},so=function(e){return Array.from(e.childNodes).reduce((function(e,t){return e+(t.outerHTML||t.textContent||"")}),"")},lo=function(e){var t=Kr.fromSchema(e.type.schema).serializeFragment(e.content);return function(e){Array.from(e.querySelectorAll("table")).forEach((function(e){Yr(e,"thead"),Yr(e,"tbody"),Yr(e,"tfoot");var t=Array.from(e.children).find((function(e){return 0===e.children.length}));t&&t.remove();var n=e.parentNode instanceof HTMLDivElement?e.parentNode:null;if(n&&n.matches("div[table]")){e.style.marginLeft=n.style.marginLeft,e.style.marginRight=n.style.marginRight;var r=Array.from(n.children).find((function(e){return e.matches("div[caption]")}));if(r&&"<img>"!==r.innerHTML){var o=e.createCaption();for(r.id&&(o.id=r.id),r.className&&(o.className=r.className),Array.from(r.style).forEach((function(e){o.style[e]=r.style[e]}));r.firstChild;)o.appendChild(r.firstChild)}n.style.width&&!e.style.width&&(e.style.width=n.style.width),n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)}}))}(t),t},ao=function(e,t,n){return un.fromSchema(t).parse(e,n)},co=function(e,t,n){var r,o=io(e);return r=o,Array.from(r.querySelectorAll("table")).forEach((function(e){var t=Array.from(e.children);t.some((function(e){return"THEAD"===e.nodeName||"TFOOT"===e.nodeName}))&&(Qr(t,"thead"),Qr(t,"tbody"),Qr(t,"tfoot"));var n=t.find((function(e){return"COLGROUP"===e.nodeName}));if(n&&(e.setAttribute(Dr,n.outerHTML),n.remove()),e.caption||e.style.marginLeft||e.style.marginRight){var r=document.createElement("div");if(r.setAttribute("table",""),r.style.display="table",r.style.marginLeft=e.style.marginLeft,r.style.marginRight=e.style.marginRight,e.caption){var o=document.createElement("div");for(o.setAttribute("caption",""),e.caption.id&&(o.id=e.caption.id),e.caption.className&&(o.className=e.caption.className),Array.from(e.caption.style).forEach((function(t){o.style[t]=e.caption.style[t]}));e.caption.firstChild;)o.appendChild(e.caption.firstChild);e.removeChild(e.caption),r.appendChild(o)}e.parentNode.insertBefore(r,e),r.appendChild(e),/%/.test(e.style.width)&&(r.style.width=e.style.width,e.style.width="")}})),ao(o,t,n)},uo=function(e){var t=lo(e.doc);return so(t)},po=function(e,t,n){return void 0===t&&(t="setHTML"),void 0===n&&(n={preserveWhitespace:"full"}),function(r,o){return o(r.tr.setSelection(new vr(r.doc)).replaceSelectionWith(co(e,r.schema,n)).setMeta("commandName",t))}},ho=function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,l=0===i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){if(l)return!1;l=e.inlineContent&&e.type.allowsMarkType(n)})),l)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1},fo=function(e,t,n){return function(r,o){var i=r.selection,s=i.empty,l=i.$cursor,a=i.ranges;if(s&&!l||!ho(r.doc,a,e))return!1;if(o)if(l)e.isInSet(r.storedMarks||l.marks())?o(n.removeStoredMark(e)):o(n.addStoredMark(e.create(t)));else{for(var c=!1,u=0;!c&&u<a.length;u++){var d=a[u],p=d.$from,h=d.$to;c=r.doc.rangeHasMark(p.pos,h.pos,e)}for(u=0;u<a.length;u++){var f=a[u];p=f.$from,h=f.$to,c?n.removeMark(p.pos,h.pos,e):n.addMark(p.pos,h.pos,e.create(t))}o(n.scrollIntoView())}return!0}},mo=function(e,t,n,r){void 0===r&&(r=null);var o=[],i=0;return e.doc.nodesBetween(t,n,(function(e,s){if(e.isInline){i++;var l=null;if(r instanceof ln){var a=r.isInSet(e.marks);a&&(l=[a])}else r?r.isInSet(e.marks)&&(l=[r]):l=e.marks;if(l&&l.length)for(var c=Math.min(s+e.nodeSize,n),u=0;u<l.length;u++){for(var d=l[u],p=void 0,h=0;h<o.length;h++){var f=o[h];f.step===i-1&&d.eq(f.style)&&(p=f)}p?(p.to=c,p.step=i):o.push({style:d,from:Math.max(s,t),to:c,step:i})}}})),o.forEach((function(t){return e.step(new Dn(t.from,t.to,t.style))})),e},go=function(e,t){var n,r=e.schema.marks,o=(t.altMarks||[]).filter((function(e){return r[e]})),i=t.altStyle,s=e.selection,l=s.from,a=s.$from,c=s.to,u=s.empty,d=r[t.mark],p=e.doc,h=!1;return u?(n=e.storedMarks||a.marks(),h=d&&d.isInSet(n)||o.some((function(e){return r[e].isInSet(n)}))):h=d&&p.rangeHasMark(l,c,d)||o.some((function(e){return p.rangeHasMark(l,c,r[e])})),!h&&i&&r.style?yo(e,r.style).some((function(e){return null!==vo(e,i)})):Boolean(h)},vo=function(e,t){for(var n=(e&&e.attrs.style||"").split(/\s*;\s*/).filter((function(e){return Boolean(e)})),r=0;r<n.length;r++){var o=n[r].split(/\s*:\s*/);if(o[0].toLowerCase()===t.name&&t.value.test(o[1]))return o[1]}return null},yo=function(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to,s=n.empty,l=[];return s?l.push(t.isInSet(e.storedMarks||o.marks())):e.doc.nodesBetween(r,i,(function(e){e.isInline&&l.push(t.isInSet(e.marks))})),l},bo=function(e,t){var n=yo(e,t),r=n.filter((function(e){return Boolean(e)}));return n.length===r.length?n[0]:void 0},wo=function(e,t){var n=e.find((function(e){return"style"===e.type.name})),r=n&&n.attrs.style;return Br(r,t)},ko=function(e,t,n,r,o){var i=o.create({style:r.style}),s=[],l=[],a=null,c=null;return e.doc.nodesBetween(t,n,(function(e,u,d){if(e.isInline){var p=e.marks;if(!i.isInSet(p)&&d.type.allowsMarkType(i.type)){var h=Math.max(u,t),f=Math.min(u+e.nodeSize,n),m=wo(p,r);if(m.changed||r.newValue){for(var g=m.changed?{style:m.style||null}:{style:[r.style]+": "+r.newValue+";"},v=o.isInSet(p)?p.find((function(e){return"style"===e.type.name})):null,y=v?Je(Je({},v.attrs),g):g,b=o.create(y),w=b.addToSet(p),k=0;k<p.length;k++)p[k].isInSet(w)||(a&&a.to===h&&a.mark.eq(p[k])?a.to=f:(a=new Dn(h,f,p[k]),s.push(a)));var x=c&&c.to===h,S=x&&b.attrs.style===c.mark.attrs.style;x&&S?c.to=f:Object.keys(y).some((function(e){return null!==y[e]}))&&(c=new Rn(h,f,b),l.push(c))}}}})),s.forEach((function(t){return e.step(t)})),l.forEach((function(t){return e.step(t)})),s.length+l.length>0},xo=function(e,t){var n=e.schema.marks.style;return(n?yo(e,n):[]).map((function(e){return vo(e,t)})).filter((function(e){return null!==e}))},So=function(e,t){return function(n,r,o){var i=n.selection,s=i.empty,l=i.ranges,a=n.selection instanceof hr&&n.selection.$cursor;if(s&&!a||!ho(n.doc,l,e))return!1;var c,u,d,p,h=!1;if(r){var f=o||n.tr;if(a){var m=n.storedMarks||a.marks();if(e.isInSet(m)){var g=wo(m,t),v=m.find((function(e){return"style"===e.type.name})),y=Je(Je({},v?v.attrs:{}),{style:g.style||null});if(c=v.attrs,u=y,d=Object.keys(c),p=Object.keys(u),d.length===p.length&&d.every((function(e){return c[e]===u[e]})))return!1;r(f.removeStoredMark(e)),Object.keys(y).some((function(e){return null!==y[e]}))&&r(f.addStoredMark(e.create(y))),h=!0}}else{for(var b=0;b<l.length;b++){var w=l[b],k=w.$from,x=w.$to;h=ko(f,k.pos,x.pos,t,e)||h}h&&(f.scrollIntoView(),r(f))}}return h}},Co=function(e,t,n){return function(r,o){var i=r.schema.marks,s=e.altStyle,l=e.altMarks,a=void 0===l?[]:l,c=e.mark,u=t||r.tr,d=!1,p=!1,h=function(){return p=!0};s&&i.style&&(d=So(i.style,{style:s.name,value:s.value})(r,h,u));var f=Ge([c],a).filter((function(e){return i[e]})).map((function(e){return go(r,{mark:e})&&i[e]})).filter((function(e){return e}));return f.length?function(e,t,n,r){var o=t.selection,i=o.$cursor,s=o.ranges;if(r=r||t.tr,i)e.forEach((function(e){e.isInSet(t.storedMarks||i.marks())&&n(r.removeStoredMark(e))}));else{for(var l=function(t){var n=s[t],o=n.$from,i=n.$to;e.forEach((function(e){mo(r,o.pos,i.pos,e)}))},a=0;a<s.length;a++)l(a);n(r.scrollIntoView())}}(f,r,h,u):d||fo(i[c],n,u)(r,h),p&&o(u),p}},Eo=function(e,t){return function(n,r){var o=n.schema.marks.style,i={style:e.style,value:/^.+$/,newValue:e.value},s=n.tr;t&&s.setMeta("commandName",t),s.setMeta("args",e);var l=n.selection,a=l.empty,c=l.$cursor,u=l.ranges;if(a&&!c||!o||!ho(n.doc,u,o))return!1;if(c){var d=n.storedMarks||c.marks(),p=o.isInSet(d)?d.find((function(e){return"style"===e.type.name})):null,h={style:null};if(p&&p.attrs.style){var f=Br(p.attrs.style,i);f.changed&&f.style&&(h.style=f.style)}else i.newValue&&(h.style=[i.style]+": "+i.newValue+";");var m=p?Je(Je({},p.attrs),h):h;return Object.keys(m).some((function(e){return null!==m[e]}))?r(s.addStoredMark(o.create(m))):r(s.removeStoredMark(o)),!0}return So(o,i)(n,r,s)}},Oo=function(e,t){return function(n,r){var o=n.selection.$cursor;if(o){var i=o.parent,s=o.index(),l=n.schema.marks[e.mark],a=i.child(s).marks.find((function(e){return e.type===l})),c=i.childCount,u=o.pos-o.textOffset,d=i.child(s).nodeSize,p=void 0,h=void 0;for(p=s-1;p>=0&&a.isInSet(i.child(p).marks);)d+=h=i.child(p).nodeSize,u-=h,p-=1;for(p=s+1;p<c&&a.isInSet(i.child(p).marks);)d+=i.child(p).nodeSize,p+=1;r(mo(t||n.tr,u,u+d,a))}else Co(e,t)(n,r)}},To=function(e,t){var n=e.mark,r=e.attrs;return void 0===t&&(t="link"),function(e,o){var i=e.schema.marks,s=e.tr;t&&(s.setMeta("commandName",t),s.setMeta("args",r));var l=!1,a=function(){return l=!0};if(function(e,t){var n=yo(e,t);return 1===n.length&&n[0]?n[0]:null}(e,i[n]))!function(e,t){return function(n,r){var o=n.selection,i=o.$cursor,s=o.from,l=o.to,a=n.schema.marks[e.mark];if(i){var c=i.parent,u=i.index(),d=c.child(u).marks.find((function(e){return e.type===a})),p=c.childCount,h=i.pos-i.textOffset,f=c.child(u).nodeSize,m=void 0,g=void 0;for(m=u-1;m>=0&&d.isInSet(c.child(m).marks);)f+=g=c.child(m).nodeSize,h-=g,m-=1;for(m=u+1;m<p&&d.isInSet(c.child(m).marks);)f+=c.child(m).nodeSize,m+=1;t.removeMark(h,h+f,a),t.addMark(h,h+f,a.create(e.attrs)),r(t)}else t.doc.nodesBetween(s,l,(function(n,o){n.isInline&&a.isInSet(n.marks)&&(t.removeMark(o,o+n.nodeSize,a),t.addMark(o,o+n.nodeSize,a.create(e.attrs)),r(t))}))}}({mark:n,attrs:r},s)(e,a);else{var c=e;go(e,{mark:n})&&(Oo({mark:n,attrs:r},s)(e,a),c=Or.create({doc:s.doc,selection:s.selection})),l?fo(i[n],r,s)(c,a):Co({mark:n},s,r)(c,a)}return l&&o(s),l}},Mo=function(e,t,n,r){if(!n.isTextblock)return!1;e.selection.ranges.forEach((function(o){var i=e.steps.length,s=o.$from.pos,l=o.$to.pos;e.doc.nodesBetween(s,l,(function(o,s){if(o.eq(t)&&o.isTextblock&&!o.hasMarkup(n,r)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(s),n)){e.clearIncompatible(e.mapping.slice(i).map(s,1),n);var l=e.mapping.slice(i),a=l.map(s,1),c=l.map(s+o.nodeSize,1),u=new Et(bt.from(n.create(r,null,o.marks)),0,0);return e.step(new zn(a,c,a+1,c-1,u,1,!0)),!1}}))}))},Ao=function(e,t){void 0===t&&(t={blocksInSelection:!1});var n=e.doc,r=e.selection,o=r.$from,i=r.ranges,s=t.blocksInSelection,l=[],a=r instanceof mr?r.node:void 0;return a?a.isBlock?(l.push(a),a.nodesBetween(0,a.content.size,(function(e){e.isBlock&&l.push(e)}))):!s&&o.parent&&o.parent.isBlock&&l.push(o.parent):i.forEach((function(e){var t=e.$from.pos,r=e.$to.pos;n.nodesBetween(t,r,(function(e,n,o,i){e.isBlock&&(!s||n>=t&&n+e.content.size+2<=r)&&l.push(e)}))})),l},No=function(e,t){return function(n,r){var o=Ao(n),i=n.schema.nodes,s=n.tr;s.setMeta("commandName",t),s.setMeta("args",{value:e}),o.forEach((function(t){if(t.type.isTextblock)if("p"===e){var n=t.attrs,r=n.level,o=Xe(n,["level"]);Mo(s,t,i.paragraph,o)}else if(/^h[1-6]$/i.test(e))r=parseInt(e.substr(1),10),Mo(s,t,i.heading,Je(Je({},t.attrs),{level:r}));else if("blockquote"===e){var l=t.attrs;r=l.level,o=Xe(l,["level"]),Mo(s,t,i.blockquote,o)}}));var l=s.docChanged;return l&&r(s.scrollIntoView()),l}},Po=function(e){var t=Ao(e),n=e.schema.nodes,r=[];return t.forEach((function(e){e.type===n.paragraph?r.push("p"):e.type===n.heading?r.push("h"+e.attrs.level):e.type===n.blockquote&&n.blockquote.isTextblock&&r.push("blockquote")})),r},Ro=function(e,t){var n,r,o=e.attrs.style;return o&&t.forEach((function(e){r={style:e.name,value:/^.+$/,newValue:e.value},n=Br(o,r),o=n.changed?n.style:o})),o=o||t.reduce((function(e,t){return(e&&t.value?e+" ":"")+t.value?t.name+": "+t.value+";":""}),""),Object.assign({},e.attrs,{style:o||null})},Do=function(e,t){var n=e.selection,r=n.from,o=n.to,i=!1;return e.doc.nodesBetween(r,o,(function(e){return!(i=i||e.type===t)})),i},Io=function(e,t){return function(n,r){var o=Ao(n),i=n.tr;i.setMeta("commandName",t),o.forEach((function(t){if(t.type.isTextblock){var n=e.find((function(e){return e.node===t.type.name}));if(n){var r=Ro(t,n.style);Mo(i,t,t.type,r)}}}));var s=i.docChanged;return s&&r(i.scrollIntoView()),s}},_o=function(e,t){var n=Ao(e),r=!1;return n.forEach((function(e){if(!r&&e.type.isTextblock&&e.attrs.style){var n=t.find((function(t){return t.node===e.type.name}));n&&(r=n.style.every((function(t){return!!t.value&&new RegExp(t.name+":\\s?"+t.value,"i").test(e.attrs.style)})))}})),r};const Fo=["ol",0],zo=["ul",0],Bo=["li",0],Lo={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1==e.attrs.order?Fo:["ol",{start:e.attrs.order},0]},jo={parseDOM:[{tag:"ul"}],toDOM:()=>zo},Ho={parseDOM:[{tag:"li"}],toDOM:()=>Bo,defining:!0};function Vo(e,t){let n={};for(let r in e)n[r]=e[r];for(let r in t)n[r]=t[r];return n}function $o(e,t,n){return e.append({ordered_list:Vo(Lo,{content:"list_item+",group:n}),bullet_list:Vo(jo,{content:"list_item+",group:n}),list_item:Vo(Ho,{content:t})})}function Wo(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;let e=n.doc.resolve(s.start-2);a=new Ht(e,e,s.depth),s.endIndex<s.parent.childCount&&(s=new Ht(o,n.doc.resolve(i.end(s.depth)),s.depth)),l=!0}let c=Hn(a,e,t,s);return!!c&&(r&&r(function(e,t,n,r,o){let i=bt.empty;for(let u=n.length-1;u>=0;u--)i=bt.from(n[u].type.create(n[u].attrs,i));e.step(new zn(t.start-(r?2:0),t.end,t.start,t.end,new Et(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let l=n.length-s,a=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,p=!0;u<d;u++,p=!1)!p&&$n(e.doc,a,l)&&(e.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return e}(n.tr,s,c,l,e).scrollIntoView()),!0)}}function Uo(e,t){return function(n,r){let{$from:o,$to:i,node:s}=n.selection;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;let l=o.node(-1);if(l.type!=e)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(3==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(r){let t=bt.empty,i=o.index(-1)?1:o.index(-2)?2:3;for(let e=o.depth-i;e>=o.depth-3;e--)t=bt.from(o.node(e).copy(t));let s=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3;t=t.append(bt.from(e.createAndFill()));let l=o.before(o.depth-(i-1)),a=n.tr.replace(l,o.after(-s),new Et(t,4-i,0)),c=-1;a.doc.nodesBetween(l,a.doc.content.size,((e,t)=>{if(c>-1)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)})),c>-1&&a.setSelection(cr.near(a.doc.resolve(c))),r(a.scrollIntoView())}return!0}let a=i.pos==o.end()?l.contentMatchAt(0).defaultType:null,c=n.tr.delete(o.pos,i.pos),u=a?[t?{type:e,attrs:t}:null,{type:a}]:void 0;return!!$n(c.doc,o.pos,2,u)&&(r&&r(c.split(o.pos,2,u).scrollIntoView()),!0)}}function qo(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!i&&(!n||(r.node(i.depth-1).type==e?function(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new zn(i-1,s,i,s,new Et(bt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ht(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const l=jn(r);if(null==l)return!1;o.lift(r,l);let a=o.mapping.map(i,-1)-1;return Wn(o.doc,a)&&o.join(a),t(o.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let r=e.tr,o=n.parent;for(let h=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)h-=o.child(f).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,a=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?bt.empty:bt.from(o))))return!1;let d=i.pos,p=d+s.nodeSize;return r.step(new zn(d-(l?1:0),p+(a?1:0),d+1,p-1,new Et((l?bt.empty:bt.from(o.copy(bt.empty))).append(a?bt.empty:bt.from(o.copy(bt.empty))),l?0:1,a?0:1),l?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}function Ko(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));if(!i)return!1;let s=i.startIndex;if(0==s)return!1;let l=i.parent,a=l.child(s-1);if(a.type!=e)return!1;if(n){let r=a.lastChild&&a.lastChild.type==l.type,o=bt.from(r?e.create():null),s=new Et(bt.from(e.create(null,bt.from(l.type.create(null,o)))),r?3:1,0),c=i.start,u=i.end;n(t.tr.step(new zn(c-(r?3:1),u,c,u,s,1,!0)).scrollIntoView())}return!0}}var Jo={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"};Je({},Jo),Je({},Jo);var Go={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:Je({},Jo)},Xo={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:Je({},Jo)};const Yo=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0),Qo=(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!r)return!1;let o=ti(r);if(!o){let n=r.blockRange(),o=n&&jn(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let i=o.nodeBefore;if(!i.type.spec.isolating&&yi(e,o,t))return!0;if(0==r.parent.content.size&&(Zo(i,"end")||mr.isSelectable(i))){let n=Gn(e.doc,r.before(),r.after(),Et.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Zo(i,"end")?cr.findFrom(r.doc.resolve(r.mapping.map(o.pos,-1)),-1):mr.create(r.doc,o.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),0))};function Zo(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const ei=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=ti(r)}let s=i&&i.nodeBefore;return!(!s||!mr.isSelectable(s)||(t&&t(e.tr.setSelection(mr.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),0))};function ti(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const ni=(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!r)return!1;let o=oi(r);if(!o)return!1;let i=o.nodeAfter;if(yi(e,o,t))return!0;if(0==r.parent.content.size&&(Zo(i,"start")||mr.isSelectable(i))){let n=Gn(e.doc,r.before(),r.after(),Et.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Zo(i,"start")?cr.findFrom(r.doc.resolve(r.mapping.map(o.pos)),1):mr.create(r.doc,r.mapping.map(o.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))},ri=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=oi(r)}let s=i&&i.nodeAfter;return!(!s||!mr.isSelectable(s)||(t&&t(e.tr.setSelection(mr.create(e.doc,i.pos)).scrollIntoView()),0))};function oi(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const ii=(e,t)=>{let n,r=e.selection,o=r instanceof mr;if(o){if(r.node.isTextblock||!Wn(e.doc,r.from))return!1;n=r.from}else if(n=qn(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);o&&r.setSelection(mr.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0},si=(e,t)=>{let n,r=e.selection;if(r instanceof mr){if(r.node.isTextblock||!Wn(e.doc,r.to))return!1;n=r.to}else if(n=qn(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},li=(e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&jn(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},ai=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function ci(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ui=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=ci(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(cr.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},di=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof vr||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=ci(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(hr.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},pi=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if($n(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),o=r&&jn(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)},hi=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof mr&&e.selection.node.isBlock)return!(!n.parentOffset||!$n(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){let o=r.parentOffset==r.parent.content.size,i=e.tr;(e.selection instanceof hr||e.selection instanceof vr)&&i.deleteSelection();let s=0==n.depth?null:ci(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=fi?[fi]:o&&s?[{type:s}]:void 0,a=$n(i.doc,i.mapping.map(n.pos),1,l);if(l||a||!$n(i.doc,i.mapping.map(n.pos),1,s?[{type:s}]:void 0)||(s&&(l=[{type:s}]),a=!0),a&&(i.split(i.mapping.map(n.pos),1,l),!o&&!n.parentOffset&&n.parent.type!=s)){let e=i.mapping.map(n.before()),t=i.doc.resolve(e);s&&n.node(-1).canReplaceWith(t.index(),t.index()+1,s)&&i.setNodeMarkup(i.mapping.map(n.before()),s)}t(i.scrollIntoView())}return!0};var fi;const mi=(e,t)=>hi(e,t&&(n=>{let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})),gi=(e,t)=>{let n,{$from:r,to:o}=e.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(mr.create(e.doc,n))),!0)},vi=(e,t)=>(t&&t(e.tr.setSelection(new vr(e.doc))),!0);function yi(e,t,n){let r,o,i=t.nodeBefore,s=t.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Wn(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let l=t.parent.canReplace(t.index(),t.index()+1);if(l&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){let o=t.pos+s.nodeSize,l=bt.empty;for(let e=r.length-1;e>=0;e--)l=bt.from(r[e].create(null,l));l=bt.from(i.copy(l));let a=e.tr.step(new zn(t.pos-1,o,t.pos,o,new Et(l,1,0),r.length,!0)),c=o+2*r.length;Wn(a.doc,c)&&a.join(c),n(a.scrollIntoView())}return!0}let a=cr.findFrom(t,1),c=a&&a.$from.blockRange(a.$to),u=c&&jn(c);if(null!=u&&u>=t.depth)return n&&n(e.tr.lift(c,u).scrollIntoView()),!0;if(l&&Zo(s,"start",!0)&&Zo(i,"end")){let r=i,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let l=s,a=1;for(;!l.isTextblock;l=l.firstChild)a++;if(r.canReplace(r.childCount,r.childCount,l.content)){if(n){let r=bt.empty;for(let e=o.length-1;e>=0;e--)r=bt.from(o[e].copy(r));n(e.tr.step(new zn(t.pos-o.length,t.pos+s.nodeSize,t.pos+a,t.pos+s.nodeSize-a,new Et(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function bi(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(hr.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}const wi=bi(-1),ki=bi(1);function xi(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),l=s&&Hn(s,e,t);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}function Si(e,t=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(r,s,((r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{let t=n.doc.resolve(i),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}))}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];o.setBlockType(i,s,e,t)}r(o.scrollIntoView())}return!0}}function Ci(e,t=null){return function(n,r){let{empty:o,$cursor:i,ranges:s}=n.selection;if(o&&!i||!function(e,t,n){for(let r=0;r<t.length;r++){let{$from:o,$to:i}=t[r],s=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,i.pos,(e=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return!0}return!1}(n.doc,s,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let o=!1,i=n.tr;for(let t=0;!o&&t<s.length;t++){let{$from:r,$to:i}=s[t];o=n.doc.rangeHasMark(r.pos,i.pos,e)}for(let n=0;n<s.length;n++){let{$from:r,$to:l}=s[n];if(o)i.removeMark(r.pos,l.pos,e);else{let n=r.pos,o=l.pos,s=r.nodeAfter,a=l.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,u=a&&a.isText?/\s*$/.exec(a.text)[0].length:0;n+c<o&&(n+=c,o-=u),i.addMark(n,o,e.create(t))}}r(i.scrollIntoView())}return!0}}function Ei(e,t){let n=Array.isArray(t)?e=>t.indexOf(e.type.name)>-1:t;return(t,r,o)=>e(t,r&&function(e,t){return n=>{if(!n.isGeneric)return e(n);let r=[];for(let e=0;e<n.mapping.maps.length;e++){let t=n.mapping.maps[e];for(let e=0;e<r.length;e++)r[e]=t.map(r[e]);t.forEach(((e,t,n,o)=>r.push(n,o)))}let o=[];for(let e=0;e<r.length;e+=2){let i=r[e],s=r[e+1],l=n.doc.resolve(i),a=l.sharedDepth(s),c=l.node(a);for(let e=l.indexAfter(a),n=l.after(a+1);n<=s;++e){let r=c.maybeChild(e);if(!r)break;if(e&&-1==o.indexOf(n)){let i=c.child(e-1);i.type==r.type&&t(i,r)&&o.push(n)}n+=r.nodeSize}}o.sort(((e,t)=>e-t));for(let e=o.length-1;e>=0;e--)Wn(n.doc,o[e])&&n.join(o[e]);e(n)}}(r,n),o)}function Oi(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let Ti=Oi(Yo,Qo,ei),Mi=Oi(Yo,ni,ri);const Ai={Enter:Oi(ai,di,pi,hi),"Mod-Enter":ui,Backspace:Ti,"Mod-Backspace":Ti,"Shift-Backspace":Ti,Delete:Mi,"Mod-Delete":Mi,"Mod-a":vi},Ni={"Ctrl-h":Ai.Backspace,"Alt-Backspace":Ai["Mod-Backspace"],"Ctrl-d":Ai.Delete,"Ctrl-Alt-Backspace":Ai["Mod-Delete"],"Alt-Delete":Ai["Mod-Delete"],"Alt-d":Ai["Mod-Delete"],"Ctrl-a":wi,"Ctrl-e":ki};for(let os in Ai)Ni[os]=Ai[os];const Pi=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&"darwin"==os.platform())?Ni:Ai;var Ri=function(e,t,n){return function(r,o){var i=Ao(r),s=r.tr;s.setMeta("commandName",t),i.forEach((function(t){if(t.type.isTextblock){var r=void 0,o=e.find((function(e){return e.node===t.type.name}));if(o){var i="rtl"===n?o.rtlStyle:o.style,l={name:i,value:o.step>0?""+o.step+o.unit:""};if(t.attrs.style){var a=new RegExp(i+":\\s?(\\d+)"+o.unit,"i"),c=t.attrs.style.match(a);if(c){var u=parseFloat(c[1])+o.step;u=u<=0?"":u,l.value=""+u+(u?o.unit:"")}}r=Ro(t,[l])}r&&Mo(s,t,t.type,r)}}));var l=s.docChanged;return l&&o(s.scrollIntoView()),l}},Di=function(e,t,n){var r=Ao(e),o=!1;return r.forEach((function(e){if(!o&&e.type.isTextblock&&e.attrs.style){var r=t.find((function(t){return t.node===e.type.name}));if(r){var i="rtl"===n?r.rtlStyle:r.style,s=new RegExp(i+":\\s?\\d+"+r.unit,"i");o=s.test(e.attrs.style)}}})),o},Ii=function(e,t){return Ko(t)(e)},_i=function(e,t){var n=e.schema.nodes[t.listsTypes.listItem],r=e.schema.nodes[t.listsTypes.orderedList],o=e.schema.nodes[t.listsTypes.bulletList],i=!!Hr(r,2)(e.selection),s=!!Hr(o,2)(e.selection);return(i||s)&&qo(n)(e)},Fi=function(e,t,n){for(var r=t.depth,o=e.nodes[n.bulletList],i=e.nodes[n.orderedList],s=e.nodes[n.listItem],l=t.depth;l>0;l--){var a=t.node(l);if(a.type!==o&&a.type!==i||(r=l),a.type!==o&&a.type!==i&&a.type!==s)break}return r-1};function zi(e,t,n,r){var o=r||e.schema.nodes.listItem,i=t.$from,s=t.$to,l=i.blockRange(s,(function(e){return e.childCount&&e.firstChild.type===o}));if(!l||l.depth<2||i.node(l.depth-1).type!==o)return n;var a=l.end,c=s.end(l.depth);return a<c&&(n.step(new zn(a-1,c,a,c,new Et(bt.from(o.create(void 0,l.parent.copy())),1,0),1,!0)),l=new Ht(n.doc.resolve(i.pos),n.doc.resolve(c),l.depth)),n.lift(l,jn(l)).scrollIntoView()}function Bi(e){return function(t,n){var r=t.tr,o=t.selection,i=o.$from,s=o.$to;return r.doc.nodesBetween(i.pos,s.pos,(function(n,o){if(n.isTextblock||"blockquote"===n.type.name||"div"===n.type.name){var i=new mr(r.doc.resolve(r.mapping.map(o))),s=i.$from.blockRange(i.$to);if(!s||i.$from.parent.type!==t.schema.nodes[e.listItem])return!1;var l=s&&jn(s);if(null==l)return!1;r.lift(s,l)}})),n&&n(r),!0}}var Li=/list\-style\-type:\s?([\w-]+)/,ji=function(e){var t=e.style||"",n=Li.exec(t);return n&&n[1]||""},Hi=function(e,t,n,r,o){var i=r.listType,s=r.listAttrs,l=void 0===s?{style:null}:s,a=e.selection,c=a.$from.node(a.$from.depth-2),u=a.$to.node(a.$to.depth-2);if(c&&c.type.name===i&&ji(c.attrs)===ji(l)&&u&&u.type.name===i&&ji(u.attrs)===ji(l)){var d=n.state.schema.nodes,p={bulletList:d[r.bulletList],orderedList:d[r.orderedList],listItem:d[r.listItem]},h=function(e,t){for(var n,r=t.bulletList,o=t.orderedList,i=t.listItem,s=e.depth-1;s>0;s--){var l=e.node(s);if(l.type!==r&&l.type!==o||(n=s),l.type!==r&&l.type!==o&&l.type!==i)break}return n}(a.$to,p),f=function(e,t,n,r,o,i){i||(i=e.schema.nodes.listItem);var s=!1;return o.doc.nodesBetween(t,n,(function(n,l){if(!s&&n.type===i&&l>t){s=!0;for(var a=r+3;a>r+2;){var c=o.doc.resolve(o.mapping.map(l));a=c.depth;var u=o.doc.resolve(o.mapping.map(l+n.textContent.length)),d=new hr(c,u);o=zi(e,d,o,i)}}})),o}(e,a.$to.pos,a.$to.end(h),h,n.state.tr,p.listItem);return f=function(e,t,n){var r=e.selection,o=r.from,i=r.to,s=e.schema.nodes,l=s.paragraph,a=s.heading,c=[];t.doc.nodesBetween(o,i,(function(e,t){e.type!==l&&e.type!==a||c.push({node:e,pos:t})}));for(var u=c.length-1;u>=0;u--){var d=c[u],p=t.doc.resolve(t.mapping.map(d.pos));if(p.depth>0){var h;h=d.node.textContent&&d.node.textContent.length>0?t.doc.resolve(t.mapping.map(d.pos+d.node.textContent.length)):t.doc.resolve(t.mapping.map(d.pos+1));var f=p.blockRange(h);f&&t.lift(f,Fi(e.schema,p,n))}}return t}(e,f,r),f.setMeta("commandName",o),t(f),!0}return function(e){return function(t,n,r){if(!r)return!1;var o,i,s=(t=r.state).schema.nodes[e.listType],l=t.selection,a=l.$from,c=l.$to,u=a.node(-2),d=a.node(-3),p=function(e,t,n,r){return 0===function(e,t,n){for(var r=Array(),o=function(e,t){var n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;for(var r=t.node(t.depth),o=t;t.depth>=1;)(r=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==n.indexOf(r.type.name)&&(o=t);return o}(e,t).depth,i=e.resolve(t.start(o));i.pos<=n.start(n.depth);){var s=Math.min(i.depth,o),l=i.node(s);if(l&&r.push(l),0===s)break;var a=e.resolve(i.after(s));if(a.start(s)>=e.nodeSize-2)break;a.depth!==i.depth&&(a=e.resolve(a.pos+2)),i=a.depth?e.resolve(a.start(a.depth)):e.resolve(a.end(a.depth))}return r}(e,t,n).filter((function(e){return e.type!==r})).length}(t.doc,a,c,s);return(u&&u.type===s||d&&d.type===s)&&p?Bi(e)(t,n):(p||(Bi(e)(t,n),t=r.state),(o=s,void 0===(i=e.listAttrs)&&(i={}),Ei(Wo(o,i),(function(e,t){return e.type===t.type&&e.type===o})))(t,n))}}(r)(e,t,n)},Vi=function(e,t){return{name:e,value:t}},$i=[{node:"paragraph",style:[Vi("text-align","left")]},{node:"heading",style:[Vi("text-align","left")]},{node:"table_caption_external",style:[Vi("text-align","left")]}],Wi=[{node:"paragraph",style:[Vi("text-align","right")]},{node:"heading",style:[Vi("text-align","right")]},{node:"table_caption_external",style:[Vi("text-align","right")]}],Ui=[{node:"paragraph",style:[Vi("text-align","center")]},{node:"heading",style:[Vi("text-align","center")]},{node:"table_caption_external",style:[Vi("text-align","center")]}],qi=[{node:"paragraph",style:[Vi("text-align","justify")]},{node:"heading",style:[Vi("text-align","justify")]},{node:"table_caption_external",style:[Vi("text-align","justify")]}],Ki=[{node:"paragraph",style:[Vi("text-align","")]},{node:"heading",style:[Vi("text-align","")]},{node:"table_caption_external",style:[Vi("text-align","")]}];const Ji=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Gi=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let Xi=null;const Yi=function(e,t,n){let r=Xi||(Xi=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Qi=function(e,t,n,r){return n&&(es(e,t,n,r,-1)||es(e,t,n,r,1))},Zi=/^(img|br|input|textarea|hr)$/i;function es(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:ts(e))){let n=e.parentNode;if(!n||1!=n.nodeType||ns(e)||Zi.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Ji(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?ts(e):0}}}function ts(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ns(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const rs=function(e){return e.focusNode&&Qi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function is(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const ss="undefined"!=typeof navigator?navigator:null,ls="undefined"!=typeof document?document:null,as=ss&&ss.userAgent||"",cs=/Edge\/(\d+)/.exec(as),us=/MSIE \d/.exec(as),ds=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(as),ps=!!(us||ds||cs),hs=us?document.documentMode:ds?+ds[1]:cs?+cs[1]:0,fs=!ps&&/gecko\/(\d+)/i.test(as);fs&&(/Firefox\/(\d+)/.exec(as)||[0,0])[1];const ms=!ps&&/Chrome\/(\d+)/.exec(as),gs=!!ms,vs=ms?+ms[1]:0,ys=!ps&&!!ss&&/Apple Computer/.test(ss.vendor),bs=ys&&(/Mobile\/\w+/.test(as)||!!ss&&ss.maxTouchPoints>2),ws=bs||!!ss&&/Mac/.test(ss.platform),ks=!!ss&&/Win/.test(ss.platform),xs=/Android \d/.test(as),Ss=!!ls&&"webkitFontSmoothing"in ls.documentElement.style,Cs=Ss?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Es(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Os(e,t){return"number"==typeof e?e:e[t]}function Ts(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Ms(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;s=Gi(s)){if(1!=s.nodeType)continue;let e=s,n=e==i.body,l=n?Es(i):Ts(e),a=0,c=0;if(t.top<l.top+Os(r,"top")?c=-(l.top-t.top+Os(o,"top")):t.bottom>l.bottom-Os(r,"bottom")&&(c=t.bottom-t.top>l.bottom-l.top?t.top+Os(o,"top")-l.top:t.bottom-l.bottom+Os(o,"bottom")),t.left<l.left+Os(r,"left")?a=-(l.left-t.left+Os(o,"left")):t.right>l.right-Os(r,"right")&&(a=t.right-l.right+Os(o,"right")),a||c)if(n)i.defaultView.scrollBy(a,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),a&&(e.scrollLeft+=a);let o=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-o,top:t.top-i,right:t.right-o,bottom:t.bottom-i}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function As(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Gi(r));return t}function Ns(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ps=null;function Rs(e,t){let n,r,o,i,s=2e8,l=0,a=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=Yi(u).getClientRects()}for(let p=0;p<e.length;p++){let h=e[p];if(h.top<=a&&h.bottom>=c){a=Math.max(h.bottom,a),c=Math.min(h.top,c);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<s){n=u,s=e,r=e&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&e&&(l=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!o&&h.left<=t.left&&h.right>=t.left&&(o=u,i={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(l=d+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let n=zs(r,1);if(n.top!=n.bottom&&Ds(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:l}:Rs(n,r)}function Ds(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Is(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let o=e[r];if(Ds(t,o))return Is(n,t,o)}}if((i=(i+1)%r)==o)break}return e}function _s(e,t){let n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}(r,t.left,t.top);i&&({node:n,offset:o}=i);let s,l=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!Ds(t,n))return null;if(l=Is(e.dom,t,n),!l)return null}if(ys)for(let c=l;n&&c;c=Gi(c))c.draggable&&(n=void 0);if(l=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(l,t),n){if(fs&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,r=n.childNodes[o];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=function(e,t,n,r){let o=-1;for(let i=t,s=!1;i!=e.dom;){let t=e.docView.nearestDesc(i,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!s||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!s&&(s=!0,e.left>r.left||e.top>r.top?o=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(o=t.posAfter)),!t.contentDOM&&o<0&&!t.node.isText)return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}i=t.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==s&&(s=function(e,t,n){let{node:r,offset:o}=Rs(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}(e,l,t));let a=e.docView.nearestDesc(l,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function Fs(e){return e.top<e.bottom||e.left<e.right}function zs(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(Fs(e))return e}return Array.prototype.find.call(n,Fs)||e.getBoundingClientRect()}const Bs=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ls(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=Ss||fs;if(3==r.nodeType){if(!s||!Bs.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let e=o,t=o,i=n<0?1:-1;return n<0&&!o?(t++,i=-1):n>=0&&o==r.nodeValue.length?(e--,i=1):n<0?e--:t++,js(zs(Yi(r,e,t),i),i<0)}{let e=zs(Yi(r,o,o),n);if(fs&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let t=zs(Yi(r,o-1,o-1),-1);if(t.top==e.top){let n=zs(Yi(r,o,o+1),-1);if(n.top!=e.top)return js(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&o&&(n<0||o==ts(r))){let e=r.childNodes[o-1];if(1==e.nodeType)return Hs(e.getBoundingClientRect(),!1)}if(null==i&&o<ts(r)){let e=r.childNodes[o];if(1==e.nodeType)return Hs(e.getBoundingClientRect(),!0)}return Hs(r.getBoundingClientRect(),n>=0)}if(null==i&&o&&(n<0||o==ts(r))){let e=r.childNodes[o-1],t=3==e.nodeType?Yi(e,ts(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return js(zs(t,1),!1)}if(null==i&&o<ts(r)){let e=r.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?Yi(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return js(zs(t,-1),!0)}return js(zs(3==r.nodeType?Yi(r):r,-n),n>=0)}function js(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Hs(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Vs(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}const $s=/[\u0590-\u08ac]/;let Ws=null,Us=null,qs=!1;class Ks{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>Ji(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let o,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let o=0;n<this.children.length;n++){let t=this.children[n],i=o+t.size;if(i>e||t instanceof el){r=e-o;break}o=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let o;n&&!(o=this.children[n-1]).size&&o instanceof Js&&o.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?Ji(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?Ji(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let i=n,s=0;;s++){let n=this.children[s],l=i+n.size;if(-1==r&&e<=l){let o=i+n.border;if(e>=o&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=i;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=Ji(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=Ji(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let o=Math.min(e,t),i=Math.max(e,t);for(let p=0,h=0;p<this.children.length;p++){let s=this.children[p],l=h+s.size;if(o>h&&i<l)return s.setSelection(e-h-s.border,t-h-s.border,n,r);h=l}let s=this.domFromPos(e,e?-1:1),l=t==e?s:this.domFromPos(t,t?-1:1),a=n.getSelection(),c=!1;if((fs||ys)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(s=l={node:n.parentNode,offset:Ji(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(fs&&a.focusNode&&a.focusNode!=l.node&&1==a.focusNode.nodeType){let e=a.focusNode.childNodes[a.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&ys)&&Qi(s.node,s.offset,a.anchorNode,a.anchorOffset)&&Qi(l.node,l.offset,a.focusNode,a.focusOffset))return;let u=!1;if((a.extend||e==t)&&!c){a.collapse(s.node,s.offset);try{e!=t&&a.extend(l.node,l.offset),u=!0}catch(d){}}if(!u){if(e>t){let e=s;s=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+o.border,s=i-o.border;if(e>=r&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-r,t-r):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Js extends Ks{constructor(e,t,n,r){let o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r))),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Gs extends Ks{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Xs extends Ks{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let o=r.nodeViews[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=wn.renderSpec(document,t.type.spec.toDOM(t,n))),new Xs(e,t,i.dom,i.contentDOM||i.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=Xs.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=hl(o,t,i,n)),e>0&&(o=hl(o,0,e,n));for(let s=0;s<o.length;s++)o[s].parent=r;return r.children=o,r}}class Ys extends Ks{constructor(e,t,n,r,o,i,s,l,a){super(e,[],o,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,o,i){let s,l=o.nodeViews[t.type.name],a=l&&l(t,o,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:i),n,r),c=a&&a.dom,u=a&&a.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:u}=wn.renderSpec(document,t.type.spec.toDOM(t)));u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=al(c,n,t),a?s=new tl(e,t,n,r,c,u||null,d,a,o,i+1):t.isText?new Zs(e,t,n,r,c,d,o):new Ys(e,t,n,r,c,u||null,d,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>bt.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&cl(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,i=o&&o.pos>-1?o:null,s=o&&o.pos<0,l=new dl(this,i&&i.node,e);!function(e,t,n,r){let o=t.locals(e),i=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,o,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d,p,h;for(;s<o.length&&o[s].to==i;){let e=o[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(pl);for(let e=0;e<d.length;e++)n(d[e],c,!!a)}else n(u,c,!!a);if(a)h=-1,p=a,a=null;else{if(!(c<e.childCount))break;h=c,p=e.child(c++)}for(let e=0;e<l.length;e++)l[e].to<=i&&l.splice(e--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let f=i+p.nodeSize;if(p.isText){let e=f;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<l.length;t++)l[t].to<e&&(e=l[t].to);e<f&&(a=p.cut(e-i),p=p.cut(0,e-i),f=e,h=-1)}r(p,p.isInline&&!p.isLeaf?l.filter((e=>!e.inline)):l.slice(),t.forChild(i,p),h),i=f}}(this.node,this.innerDeco,((t,o,i)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&l.syncToMarks(o==this.node.childCount?St.none:this.node.child(o).marks,n,e),l.placeWidget(t,e,r)}),((t,i,a,c)=>{let u;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,i,a,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(t,i,a,u,e)||l.updateNextNode(t,i,a,e,c,r)||l.addNode(t,i,a,e,r),r+=t.nodeSize})),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),nl(this.contentDOM,this.children,e),bs&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof hr)||n<t||r>t+this.node.content.size)return null;let o=e.domSelectionRange(),i=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=ts(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=function(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<e.childCount;){let t=e.child(o++);if(i+=t.nodeSize,!t.isText)break;a+=t.text}if(i>=n){let e=l<r?a.lastIndexOf(t,r-l-1):-1;if(e>=0&&e+t.length+l>=n)return l+e;if(n==r&&a.length>=r+t.length-l&&a.slice(r-l,r-l+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new Gs(this,o,t,r);e.input.compositionNodes.push(i),this.children=hl(this.children,n,n+r.length,e,i)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(cl(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=sl(this.dom,this.nodeDOM,il(this.outerDeco,this.node,t),il(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Qs(e,t,n,r,o){al(r,t,e);let i=new Ys(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Zs extends Ys{constructor(e,t,n,r,o,i,s){super(e,t,n,r,o,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new Zs(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class el extends Ks{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class tl extends Ys{constructor(e,t,n,r,o,i,s,l,a,c){super(e,t,n,r,o,i,s,a,c),this.spec=l}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nl(e,t,n){let r=e.firstChild,o=!1;for(let i=0;i<t.length;i++){let s=t[i],l=s.dom;if(l.parentNode==e){for(;l!=r;)r=ul(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(l,r);if(s instanceof Xs){let t=r?r.previousSibling:e.lastChild;nl(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=ul(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const rl=function(e){e&&(this.nodeName=e)};rl.prototype=Object.create(null);const ol=[new rl];function il(e,t,n){if(0==e.length)return ol;let r=n?ol[0]:new rl,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new rl(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==o.length&&o.push(r=new rl(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return o}function sl(e,t,n,r){if(n==ol&&r==ol)return t;let o=t;for(let i=0;i<r.length;i++){let t=r[i],s=n[i];if(i){let n;s&&s.nodeName==t.nodeName&&o!=e&&(n=o.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(o),s=ol[0]),o=n}ll(o,s||ol[0],t)}return o}function ll(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function al(e,t,n){return sl(e,e,ol,il(t,n,1!=e.nodeType))}function cl(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ul(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class dl{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof Xs)){l=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=e.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Xs.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let s=this.index,l=Math.min(this.top.children.length,s+5);s<l;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){i=s;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}updateNodeAt(e,t,n,r,o){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,o,i){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof Ys){let a=this.preMatch.matched.get(l);if(null!=a&&a!=o)return!1;let c,u=l.dom,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&3!=l.dirty&&cl(t,l.outerDeco));if(!d&&l.update(e,t,n,r))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(l,e,t,n,r,i)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let s=Ys.create(this.top,t,n,r,o,i);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,o){let i=Ys.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new Js(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Zs)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ys||gs)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new el(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function pl(e,t){return e.type.side-t.type.side}function hl(e,t,n,r,o){let i=[];for(let s=0,l=0;s<e.length;s++){let a=e[s],c=l,u=l+=a.size;c>=n||u<=t?i.push(a):(c<t&&i.push(a.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(a.slice(n-c,a.size,r)))}return i}function fl(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l,a,c=r.resolve(s);if(rs(n)){for(l=c;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&mr.isSelectable(e)&&o.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==ts(e);r||o;){if(e==n)return!0;let t=Ji(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==ts(e)}}(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;a=new mr(s==e?c:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;l=r.resolve(t)}return a||(a=Sl(e,l,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)),a}function ml(e){return e.editable?e.hasFocus():El(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function gl(e,t=!1){let n=e.state.selection;if(kl(e,n),ml(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&gs){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&Qi(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Ji(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&ps&&hs<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,o,{anchor:i,head:s}=n;!vl||n instanceof hr||(n.$from.parent.inlineContent||(r=yl(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=yl(e,n.to))),e.docView.setSelection(i,s,e.root,t),vl&&(r&&wl(r),o&&wl(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{ml(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const vl=ys||gs&&vs<63;function yl(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(ys&&o&&"false"==o.contentEditable)return bl(o);if(!(o&&"false"!=o.contentEditable||i&&"false"!=i.contentEditable)){if(o)return bl(o);if(i)return bl(i)}}function bl(e){return e.contentEditable="true",ys&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function wl(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function kl(e,t){if(t instanceof mr){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(xl(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else xl(e)}function xl(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Sl(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||hr.between(t,n,r)}function Cl(e){return!(e.editable&&!e.hasFocus())&&El(e)}function El(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Ol(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&cr.findFrom(i,t)}function Tl(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ml(e,t,n){let r=e.state.selection;if(!(r instanceof hr)){if(r instanceof mr&&r.node.isInline)return Tl(e,new hr(t>0?r.$to:r.$from));{let n=Ol(e.state,t);return!!n&&Tl(e,n)}}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=Ol(e.state,t);return!!(n&&n instanceof mr)&&Tl(e,n)}if(!(ws&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(mr.isSelectable(i)?Tl(e,new mr(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!Ss&&Tl(e,new hr(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function Al(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Nl(e,t){if("false"==e.contentEditable)return!0;let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Pl(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(fs&&1==n.nodeType&&r<Al(n)&&Nl(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(Nl(e,-1))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Rl(n))break;{let t=n.previousSibling;for(;t&&Nl(t,-1);)o=n.parentNode,i=Ji(t),t=t.previousSibling;if(t)n=t,r=Al(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Dl(e,n,r):o&&Dl(e,o,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=Al(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!Nl(n.childNodes[r],1))break;o=n,i=++r}else{if(Rl(n))break;{let t=n.nextSibling;for(;t&&Nl(t,1);)o=t.parentNode,i=Ji(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=Al(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&Dl(e,o,i)}(e)}function Rl(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Dl(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!ns(e);)t=Ji(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!ns(e);)t=Ji(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(rs(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&gl(e)}),50)}function Il(e,t){let n=e.state.doc.resolve(t);if(!gs&&!ks&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function _l(e,t,n){let r=e.state.selection;if(r instanceof hr&&!r.empty||n.indexOf("s")>-1)return!1;if(ws&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Ol(e.state,t);if(n&&n instanceof mr)return Tl(e,n)}if(!o.parent.inlineContent){let n=t<0?o:i,s=r instanceof vr?cr.near(n,t):cr.findFrom(n,t);return!!s&&Tl(e,s)}return!1}function Fl(e,t){if(!(e.state.selection instanceof hr))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function zl(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Bl(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||wn.fromSchema(e.state.schema),l=Jl(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c,u=a.firstChild,d=0;for(;u&&1==u.nodeType&&(c=ql[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=l.createElement(c[e]);for(;a.firstChild;)t.appendChild(a.firstChild);a.appendChild(t),d++}u=a.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:a,text:e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ll(e,t,n,r,o){let i,s,l=o.parent.type.spec.code;if(!n&&!t)return null;let a=t&&(r||l||!n);if(a){if(e.someProp("transformPastedText",(n=>{t=n(t,l||r,e)})),l)return t?new Et(bt.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Et.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,o,r,e)));if(n)s=n;else{let n=o.marks(),{schema:r}=e.state,s=wn.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=Jl().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&ql[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join("")),r.innerHTML=e,n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),Ss&&function(e){let t=e.querySelectorAll(gs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||un.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!a&&!u),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||jl.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}let{content:o,openStart:i,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=r.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;o=bt.from(e.create(n[a+1],o)),i++,s++}return new Et(o,i,s)}(Ul(s,+u[1],+u[2]),u[4]);else if(s=Et.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach((e=>{if(!i)return;let t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&Vl(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=$l(i[i.length-1],r.length));let t=Hl(e,n);i.push(t),o=o.matchType(t.type),r=n}})),i)return bt.from(i)}return e}(s.content,o),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=Ul(s,e,t)}return e.someProp("transformPasted",(t=>{s=t(s,e)})),s}const jl=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Hl(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,bt.from(e));return e}function Vl(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=Vl(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(bt.from(Hl(n,e,o+1))))}}function $l(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,$l(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(bt.empty,!0);return e.copy(n.append(r))}function Wl(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,l=s.content;return e.childCount>1&&(i=0),o<r-1&&(l=Wl(l,t,n,r,o+1,i)),o>=n&&(l=t<0?s.contentMatchAt(0).fillBefore(l,i<=o).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(bt.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(l))}function Ul(e,t,n){return t<e.openStart&&(e=new Et(Wl(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Et(Wl(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ql={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Kl=null;function Jl(){return Kl||(Kl=document.implementation.createHTMLDocument("title"))}const Gl={},Xl={},Yl={touchstart:!0,touchmove:!0};class Ql{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Zl(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ea(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>ta(e,t))}))}function ta(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function na(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function ra(e){return{left:e.clientX,top:e.clientY}}function oa(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,(t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),o,!0):t(e,n,i.node(s),i.before(s),o,!1))))return!0;return!1}function ia(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function sa(e,t,n,r){return oa(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function la(e,t,n,r){return oa(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(ia(e,hr.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let t=i>o.depth?o.nodeAfter:o.node(i),n=o.before(i);if(t.inlineContent)ia(e,hr.create(r,n+1,n+1+t.content.size),"pointer");else{if(!mr.isSelectable(t))continue;ia(e,mr.create(r,n),"pointer")}return!0}}(e,n,r)}function aa(e){return ma(e)}Xl.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!da(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!xs||!gs||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!bs||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||function(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||ws&&72==n&&"c"==r)return Fl(e,-1)||Pl(e,-1);if(46==n&&!t.shiftKey||ws&&68==n&&"c"==r)return Fl(e,1)||Pl(e,1);if(13==n||27==n)return!0;if(37==n||ws&&66==n&&"c"==r){let t=37==n?"ltr"==Il(e,e.state.selection.from)?-1:1:-1;return Ml(e,t,r)||Pl(e,t)}if(39==n||ws&&70==n&&"c"==r){let t=39==n?"ltr"==Il(e,e.state.selection.from)?1:-1:1;return Ml(e,t,r)||Pl(e,t)}return 38==n||ws&&80==n&&"c"==r?_l(e,-1,r)||Pl(e,-1):40==n||ws&&78==n&&"c"==r?function(e){if(!ys||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;zl(e,n,"true"),setTimeout((()=>zl(e,n,"false")),20)}return!1}(e)||_l(e,1,r)||Pl(e,1):r==(ws?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():Zl(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,is(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},Xl.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Xl.keypress=(e,t)=>{let n=t;if(da(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ws&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof hr&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const ca=ws?"metaKey":"ctrlKey";Gl.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=aa(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[ca]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(ra(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new ua(e,s,n,!!r)):("doubleClick"==i?sa:la)(e,s.pos,s.inside,n)?n.preventDefault():Zl(e,"pointer"))};class ua{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[ca],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,l=s?e.docView.nearestDesc(s,!0):null;this.target=l?l.dom:null;let{selection:a}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||a instanceof mr&&a.from<=i&&a.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!fs||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>gl(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ra(e))),this.updateAllowDefault(e),this.allowDefault||!t?Zl(this.view,"pointer"):function(e,t,n,r,o){return oa(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(o?function(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof mr&&(n=o.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(mr.isSelectable(e)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(ia(e,mr.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&mr.isSelectable(r))&&(ia(e,new mr(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||ys&&this.mightDrag&&!this.mightDrag.node.isAtom||gs&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ia(this.view,cr.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Zl(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zl(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function da(e,t){return!!e.composing||!!(ys&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Gl.touchstart=e=>{e.input.lastTouch=Date.now(),aa(e),Zl(e,"pointer")},Gl.touchmove=e=>{e.input.lastTouch=Date.now(),Zl(e,"pointer")},Gl.contextmenu=e=>aa(e);const pa=xs?5e3:-1;function ha(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>ma(e)),t))}function fa(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ma(e,t=!1){if(!(xs&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),fa(e),t||e.docView&&e.docView.dirty){let t=fl(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}Xl.compositionstart=Xl.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),ma(e,!0),e.markCursor=null;else if(ma(e),fs&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}ha(e,pa)},Xl.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,ha(e,20))};const ga=ps&&hs<15||bs&&Cs<604;function va(e,t,n,r,o){let i=Ll(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,o,i||Et.empty))))return!0;if(!i)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),l=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Gl.copy=Xl.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=ga?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Bl(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,l),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Xl.paste=(e,t)=>{let n=t;if(e.composing&&!xs)return;let r=ga?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&va(e,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?va(e,r.value,null,o,t):va(e,r.textContent,r.innerHTML,o,t)}),50)}(e,n)};class ya{constructor(e,t){this.slice=e,this.move=t}}const ba=ws?"altKey":"ctrlKey";Gl.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(ra(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof mr?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(mr.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(mr.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:l,text:a}=Bl(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(ga?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ga||n.dataTransfer.setData("text/plain",a),e.dragging=new ya(s,!n[ba])},Gl.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},Xl.dragover=Xl.dragenter=(e,t)=>t.preventDefault(),Xl.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(ra(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",(t=>{s=t(s,e)})):s=Ll(e,n.dataTransfer.getData(ga?"Text":"text/plain"),ga?null:n.dataTransfer.getData("text/html"),!1,i);let l=!(!r||n[ba]);if(e.someProp("handleDrop",(t=>t(e,n,s||Et.empty,l))))return void n.preventDefault();if(!s)return;n.preventDefault();let a=s?Jn(e.state.doc,i.pos,s):i.pos;null==a&&(a=i.pos);let c=e.state.tr;l&&c.deleteSelection();let u=c.mapping.map(a),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(p))return;let h=c.doc.resolve(u);if(d&&mr.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new mr(h));else{let t=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),c.setSelection(Sl(e,h,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},Gl.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&gl(e)}),20))},Gl.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Gl.beforeinput=(e,t)=>{if(gs&&xs&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,is(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in Xl)Gl[os]=Xl[os];function wa(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class ka{constructor(e,t){this.toDOM=e,this.spec=t||Oa,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new Ca(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof ka&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wa(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xa{constructor(e,t){this.attrs=e,this.spec=t||Oa}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ca(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof xa&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}static is(e){return e.type instanceof xa}destroy(){}}class Sa{constructor(e,t){this.attrs=e,this.spec=t||Oa}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ca(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Sa&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}destroy(){}}class Ca{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Ca(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Ca(e,e,new ka(t,n))}static inline(e,t,n,r){return new Ca(e,t,new xa(n,r))}static node(e,t,n,r){return new Ca(e,t,new Sa(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof xa}get widget(){return this.type instanceof ka}}const Ea=[],Oa={};class Ta{constructor(e,t){this.local=e.length?e:Ea,this.children=t.length?t:Ea}static create(e,t){return t.length?Da(t,e,0,Oa):Ma}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==Ma||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Oa)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(e,n,r);l&&l.type.valid(t,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){let l=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,i)=>{let s=i-r-(n-t);for(let a=0;a<l.length;a+=3){let i=l[a+1];if(i<0||t>i+u-e)continue;let c=l[a]+u-e;n>=c?l[a+1]=t<=c?-2:-1:r>=o&&s&&(l[a]+=s,l[a+1]+=s)}e+=s})),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(-2==l[c+1]){a=!0,l[c+1]=-1;continue}let t=n.map(e[c]+i),u=t-o;if(u<0||u>=r.content.size){a=!0;continue}let d=n.map(e[c+1]+i,-1)-o,{index:p,offset:h}=r.content.findIndex(u),f=r.maybeChild(p);if(f&&h==u&&h+f.nodeSize==d){let r=l[c+2].mapInner(n,f,t+1,e[c]+i+1,s);r!=Ma?(l[c]=u,l[c+1]=d,l[c+2]=r):(l[c+1]=-2,a=!0)}else a=!0}if(a){let a=function(e,t,n,r,o,i,s){function l(e,t){for(let i=0;i<e.local.length;i++){let l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)l(e.children[n+2],e.children[n]+t+1)}for(let a=0;a<e.length;a+=3)-1==e[a+1]&&l(e[a+2],t[a]+i+1);return n}(l,e,t,n,o,i,s),c=Da(a,r,0,s);t=c.local;for(let e=0;e<l.length;e+=3)l[e+1]<0&&(l.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<l.length&&l[t]<n;)t+=3;l.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Ta(t.sort(Ia),l)}(this.children,i||[],e,t,n,r,o):i?new Ta(i.sort(Ia),Ea):Ma}add(e,t){return t.length?this==Ma?Ta.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,i)=>{let s,l=i+n;if(s=Pa(t,e,l)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,l+1):r.splice(o,0,i,i+e.nodeSize,Da(s,e,l+1,Oa)),o+=3}}));let i=Na(o?Ra(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new Ta(i.length?this.local.concat(i).sort(Ia):this.local,r||this.children)}remove(e){return 0==e.length||this==Ma?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,i=n[o]+t,s=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let l=n[o+2].removeInner(r,i+1);l!=Ma?n[o+2]=l:(n.splice(o,3),o-=3)}if(r.length)for(let o,i=0;i<e.length;i++)if(o=e[i])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ta(r,n):Ma}forChild(e,t){if(this==Ma)return this;if(t.isLeaf)return Ta.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let o=e+1,i=o+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>o&&e.type instanceof xa){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Ta(r.sort(Ia),Ea);return n?new Aa([e,n]):e}return n||Ma}eq(e){if(this==e)return!0;if(!(e instanceof Ta)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return _a(this.localsInner(e))}localsInner(e){if(this==Ma)return Ea;if(e.inlineContent||!this.local.some(xa.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof xa||t.push(this.local[n]);return t}}Ta.empty=new Ta([],[]),Ta.removeOverlap=_a;const Ma=Ta.empty;class Aa{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,Oa)));return Aa.from(n)}forChild(e,t){if(t.isLeaf)return Ta.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Ma&&(o instanceof Aa?n=n.concat(o.members):n.push(o))}return Aa.from(n)}eq(e){if(!(e instanceof Aa)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?_a(n?t:t.sort(Ia)):Ea}static from(e){switch(e.length){case 0:return Ma;case 1:return e[0];default:return new Aa(e.every((e=>e instanceof Ta))?e:e.reduce(((e,t)=>e.concat(t instanceof Ta?t:t.members)),[]))}}}function Na(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Ca(o.from+t,o.to+t,o.type))}return n}function Pa(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function Ra(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Da(e,t,n,r){let o=[],i=!1;t.forEach(((t,s)=>{let l=Pa(e,t,s+n);if(l){i=!0;let e=Da(l,t,n+s+1,r);e!=Ma&&o.push(s,s+t.nodeSize,e)}}));let s=Na(i?Ra(e):e,-n).sort(Ia);for(let l=0;l<s.length;l++)s[l].type.valid(t,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||o.length?new Ta(s,o):Ma}function Ia(e,t){return e.from-t.from||e.to-t.to}function _a(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Fa(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Fa(t,o+1,i.copy(r.to,i.to)))}}return t}function Fa(e,t,n){for(;t<e.length&&Ia(n,e[t])>0;)t++;e.splice(t,0,n)}function za(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=Ma&&t.push(r)})),e.cursorWrapper&&t.push(Ta.create(e.state.doc,[e.cursorWrapper.deco])),Aa.from(t)}const Ba={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},La=ps&&hs<=11;class ja{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Ha{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ja,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);ps&&hs<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),La&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ba)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(Cl(this.view)){if(this.suppressingSelectionUpdates)return gl(this.view);if(ps&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let o=e.focusNode;o;o=Gi(o))n.add(o);for(let o=e.anchorNode;o;o=Gi(o))if(n.has(o)){t=o;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Cl(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,l=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],l);e&&(o=o<0?e.from:Math.min(e.from,o),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(s=!0))}if(fs&&l.length>1){let e=l.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let a=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rs(n)&&(a=fl(e))&&a.eq(cr.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,gl(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),function(e){if(!Va.has(e)&&(Va.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=fs,$a)return;$a=!0}}(e)),this.handleDOMChange(o,i,s,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||gl(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,o=e.nextSibling;if(ps&&hs<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(o=i)}let i=r&&r.parentNode==e.target?Ji(r)+1:0,s=n.localPosFromDOM(e.target,i,-1),l=o&&o.parentNode==e.target?Ji(o):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Va=new WeakMap,$a=!1;function Wa(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(ys&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||ys&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Ua=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function qa(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Sl(e,t.resolve(n.anchor),t.resolve(n.head))}function Ka(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}class Ja{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ql,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Za),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ya(this),Xa(this),this.nodeViews=Qa(this),this.docView=Qs(this.state.doc,Ga(this),za(this),this.dom,this),this.domObserver=new Ha(this,((e,t,n,r)=>function(e,t,n,r,o){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=fl(e,t);if(n&&!e.state.selection.eq(n)){if(gs&&xs&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,is(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),i&&r.setMeta("composition",i),e.dispatch(r)}return}let s=e.state.doc.resolve(t),l=s.sharedDepth(n);t=s.before(l+1),n=e.state.doc.resolve(n).after(l+1);let a,c,u=e.state.selection,d=function(e,t,n){let r,{node:o,fromOffset:i,toOffset:s,from:l,to:a}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],rs(c)||r.push({node:c.focusNode,offset:c.focusOffset})),gs&&8===e.input.lastKeyCode)for(let g=s;g>i;g--){let e=o.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,p=e.someProp("domParser")||un.fromSchema(e.state.schema),h=d.resolve(l),f=null,m=p.parse(o,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=h.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Wa,context:h});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+l,head:t+l}}return{doc:m,sel:f,from:l,to:a}}(e,t,n),p=e.state.doc,h=p.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(a=e.state.selection.to,c="end"):(a=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,o){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);return"end"==o&&(r-=s+Math.max(0,i-Math.min(s,l))-i),s<i&&e.size<t.size?(i-=r<=i&&r>=s?i-r:0,l=i+(l-s),s=i):l<i&&(i-=r<=i&&r>=l?i-r:0,s=i+(s-l),l=i),{start:i,endA:s,endB:l}}(h.content,d.doc.content,d.from,a,c);if((bs&&e.input.lastIOSEnter>Date.now()-225||xs)&&o.some((e=>1==e.nodeType&&!Ua.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,is(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof hr&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=qa(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}if(gs&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let e=f.endB-f.start;d.sel={anchor:d.sel.anchor+e,head:d.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof hr&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),ps&&hs<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&"  "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),v=d.doc.resolveNoCache(f.endB-d.from),y=p.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if((bs&&e.input.lastIOSEnter>Date.now()-225&&(!b||o.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<d.doc.content.size&&!g.sameParent(v)&&(m=cr.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&e.someProp("handleKeyDown",(t=>t(e,is(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Ka(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(Ka(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Ka(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(p,f.start,f.endA,g,v)&&e.someProp("handleKeyDown",(t=>t(e,is(8,"Backspace")))))return void(xs&&gs&&e.domObserver.suppressSelectionUpdates());gs&&xs&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),xs&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,v=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,is(13,"Enter"))}))}),20));let w,k,x,S=f.start,C=f.endA;if(b)if(g.pos==v.pos)ps&&hs<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>gl(e)),20)),w=e.state.tr.delete(S,C),k=p.resolve(f.start).marksAcross(p.resolve(f.endA));else if(f.endA==f.endB&&(x=function(e,t){let n,r,o,i=e.firstChild.marks,s=t.firstChild.marks,l=i,a=s;for(let u=0;u<s.length;u++)l=s[u].removeFromSet(l);for(let u=0;u<i.length;u++)a=i[u].removeFromSet(a);if(1==l.length&&0==a.length)r=l[0],n="add",o=e=>e.mark(r.addToSet(e.marks));else{if(0!=l.length||1!=a.length)return null;r=a[0],n="remove",o=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(o(t.child(u)));if(bt.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start()))))w=e.state.tr,"add"==x.type?w.addMark(S,C,x.mark):w.removeMark(S,C,x.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,S,C,t))))return;w=e.state.tr.insertText(t,S,C)}if(w||(w=e.state.tr.replace(S,C,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let t=qa(e,w.doc,d.sel);t&&!(gs&&xs&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==S||t.head==w.mapping.map(C)-1)||ps&&t.empty&&t.head==S)&&w.setSelection(t)}k&&w.ensureMarks(k),i&&w.setMeta("composition",i),e.dispatch(w.scrollIntoView())}(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in Gl){let n=Gl[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!na(e,t)||ta(e,t)||!e.editable&&t.type in Xl||n(e,t)},Yl[t]?{passive:!0}:void 0)}ys&&e.dom.addEventListener("input",(()=>null)),ea(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ea(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Za),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(fa(this),o=!0),this.state=e;let i=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=Qa(this);(function(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(i||t.handleDOMEvents!=this._props.handleDOMEvents)&&ea(this),this.editable=Ya(this),Xa(this);let s=za(this),l=Ga(this),a=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,l,s);!c&&e.selection.eq(n.selection)||(o=!0);let u="preserve"==a&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(i,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let l=r.getBoundingClientRect();if(l.top>=o-20){t=r,n=l.top;break}}return{refDOM:t,refTop:n,stack:As(e.dom)}}(this);if(o){this.domObserver.stop();let t=c&&(ps||gs)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(c){let n=gs?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,l,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Qs(e.doc,l,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Qi(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?gl(this,t):(kl(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==a?this.dom.scrollTop=0:"to selection"==a?this.scrollToSelection():u&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Ns(n,0==r?0:r-t)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof mr){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&Ms(this,t.getBoundingClientRect(),e)}else Ms(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[e];if(null!=r&&(n=t?t(r):r))return n}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let r=o[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(ps){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Ps)return e.focus(Ps);let t=As(e);e.focus(null==Ps?{get preventScroll(){return Ps={preventScroll:!0},!0}}:void 0),Ps||(Ps=!1,Ns(t,0))}(this.dom),gl(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return _s(this,e)}coordsAtPos(e,t=1){return Ls(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return function(e,t,n){return Ws==t&&Us==n?qs:(Ws=t,Us=n,qs="up"==n||"down"==n?function(e,t,n){let r=t.selection,o="up"==n?r.$from:r.$to;return Vs(e,t,(()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=Ls(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=Yi(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?r.top-o.top>2*(o.bottom-r.top):o.bottom-r.bottom>2*(r.bottom-o.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,l=e.domSelection();return $s.test(r.parent.textContent)&&l.modify?Vs(e,t,(()=>{let{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),a=l.caretBidiLevel;l.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),p=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&o==d;try{l.collapse(i,s),t&&(t!=i||o!=s)&&l.extend&&l.extend(t,o)}catch(h){}return null!=a&&(l.caretBidiLevel=a),p})):"left"==n||"backward"==n?i:s}(e,t,n))}(this,t||this.state,e)}pasteHTML(e,t){return va(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return va(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],za(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){ta(e,t)||!Gl[t.type]||!e.editable&&t.type in Xl||Gl[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return ys&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,l=e.domAtPos(e.state.selection.anchor);return Qi(l.node,l.offset,i,s)&&([r,o,i,s]=[i,s,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Ga(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[Ca.node(0,e.state.doc.content.size,t)]}function Xa(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ca.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Ya(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function Qa(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Za(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var ec={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nc="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),rc="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),oc=0;oc<10;oc++)ec[48+oc]=ec[96+oc]=String(oc);for(oc=1;oc<=24;oc++)ec[oc+111]="F"+oc;for(oc=65;oc<=90;oc++)ec[oc]=String.fromCharCode(oc+32),tc[oc]=String.fromCharCode(oc);for(var ic in ec)tc.hasOwnProperty(ic)||(tc[ic]=ec[ic]);const sc="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function lc(e){let t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let l=0;l<i.length-1;l++){let e=i[l];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);sc?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function ac(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function cc(e){return new Mr({props:{handleKeyDown:uc(e)}})}function uc(e){let t=function(e){let t=Object.create(null);for(let n in e)t[lc(n)]=e[n];return t}(e);return function(e,n){let r,o=function(e){var t=!(nc&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||rc&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?tc:ec)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[ac(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=t[ac(o,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=ec[n.keyCode])&&r!=o){let o=t[ac(r,n)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}var dc,pc;if("undefined"!=typeof WeakMap){let e=new WeakMap;dc=t=>e.get(t),pc=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;dc=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},pc=(r,o)=>(n==t&&(n=0),e[n++]=r,e[n++]=o)}var hc=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let e=1;i<this.width&&this.map[t+e]==n;e++)i++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?0==i:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:l,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,a),right:Math.max(r,l),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;for(;n<r&&this.map[n]<o;)n++;return n==r?i-1:this.map[n]}o=i}}static get(e){return dc(e)||pc(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const o=n.child(e);t+o.attrs.rowspan>r&&(i+=o.attrs.colspan)}}for(let e=0;e<o.childCount;e++){const t=o.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const l=e.child(c);u++;for(let e=0;;e++){for(;o<r.length&&0!=r[o];)o++;if(e==l.childCount)break;const a=l.child(e),{colspan:d,rowspan:p,colwidth:h}=a.attrs;for(let e=0;e<p;e++){if(e+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:p-e});break}const l=o+e*t;for(let e=0;e<d;e++){0==r[l+e]?r[l+e]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:d-e});const n=h&&h[e];if(n){const r=(l+e)%t*2,o=s[r];null==o||o!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):o==n&&s[r+1]++}}}o+=d,u+=a.nodeSize}const a=(c+1)*t;let d=0;for(;o<a;)0==r[o++]&&d++;d&&(i||(i=[])).push({type:"missing",row:c,n:d}),u++}const l=new hc(t,n,r,i);let a=!1;for(let c=0;!a&&c<s.length;c+=2)null!=s[c]&&s[c+1]<n&&(a=!0);return a&&function(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let l=null;const a=s.attrs;for(let n=0;n<a.colspan;n++){const r=t[(o+n)%e.width*2];null==r||a.colwidth&&a.colwidth[n]==r||((l||(l=fc(a)))[n]=r)}l&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:l})}}(l,s,e),l}(e))}};function fc(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function mc(e,t){if("string"==typeof e)return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((e=>Number(e))):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const s in t){const n=t[s].getFromDOM,r=n&&n(e);null!=r&&(i[s]=r)}return i}function gc(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function vc(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>mc(e,t)}],toDOM:e=>["td",gc(e,t),0]},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>mc(e,t)}],toDOM:e=>["th",gc(e,t),0]}}}function yc(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var bc=new Pr("selectingCells");function wc(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function kc(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function xc(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=wc(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Sc(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function Cc(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Ec(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Oc(e){return hc.get(e.node(-1)).findCell(e.pos-e.start(-1))}function Tc(e){return hc.get(e.node(-1)).colCount(e.pos-e.start(-1))}function Mc(e,t,n){const r=e.node(-1),o=hc.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return null==s?null:e.node(0).resolve(i+s)}function Ac(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((e=>e>0))||(r.colwidth=null)),r}function Nc(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}function Pc(e,t,n){const r=yc(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var Rc=class extends cr{constructor(e,t=e){const n=e.node(-1),r=hc.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),s=e.node(0),l=r.cellsInRect(i).filter((e=>e!=t.pos-o));l.unshift(t.pos-o);const a=l.map((e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=o+e+1;return new ur(s.resolve(r),s.resolve(r+t.content.size))}));super(a[0].$from,a[0].$to,a),this.$anchorCell=e,this.$headCell=t}map(e,t){const n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(Sc(n)&&Sc(r)&&Ec(n,r)){const e=this.$anchorCell.node(-1)!=n.node(-1);return e&&this.isRowSelection()?Rc.rowSelection(n,r):e&&this.isColSelection()?Rc.colSelection(n,r):new Rc(n,r)}return hr.between(n,r)}content(){const e=this.$anchorCell.node(-1),t=hc.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let l=r.top;l<r.bottom;l++){const n=[];for(let i=l*t.width+r.left,s=r.left;s<r.right;s++,i++){const s=t.map[i];if(o[s])continue;o[s]=!0;const l=t.findCell(s);let a=e.nodeAt(s);if(!a)throw RangeError(`No cell with offset ${s} found`);const c=r.left-l.left,u=l.right-r.right;if(c>0||u>0){let e=a.attrs;if(c>0&&(e=Ac(e,0,c)),u>0&&(e=Ac(e,e.colspan-u,u)),l.left<r.left){if(a=a.type.createAndFill(e),!a)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else a=a.type.create(e,a.content)}if(l.top<r.top||l.bottom>r.bottom){const e={...a.attrs,rowspan:Math.min(l.bottom,r.bottom)-Math.max(l.top,r.top)};a=l.top<r.top?a.type.createAndFill(e):a.type.create(e,a.content)}n.push(a)}i.push(e.child(l).copy(bt.from(n)))}const s=this.isColSelection()&&this.isRowSelection()?e:i;return new Et(bt.from(s),1,1)}replace(e,t=Et.empty){const n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:o,$to:s}=r[i],l=e.mapping.slice(n);e.replace(l.map(o.pos),l.map(s.pos),i?Et.empty:t)}const o=cr.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new Et(bt.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=hc.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const n=e.node(-1),r=hc.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),l=e.node(0);return i.top<=s.top?(i.top>0&&(e=l.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=l.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(t=l.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=l.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new Rc(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=hc.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(e){return e instanceof Rc&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const n=e.node(-1),r=hc.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),l=e.node(0);return i.left<=s.left?(i.left>0&&(e=l.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=l.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(t=l.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=l.resolve(o+r.map[r.width*(i.top+1)-1]))),new Rc(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Rc(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){return new Rc(e.resolve(t),e.resolve(n))}getBookmark(){return new Dc(this.$anchorCell.pos,this.$headCell.pos)}};Rc.prototype.visible=!1,cr.jsonID("cell",Rc);var Dc=class{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Dc(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&Ec(t,n)?new Rc(t,n):cr.near(n,1)}};function Ic(e){if(!(e.selection instanceof Rc))return null;const t=[];return e.selection.forEachCell(((e,n)=>{t.push(Ca.node(n,n+e.nodeSize,{class:"selectedCell"}))})),Ta.create(e.doc,t)}var _c=new Pr("fix-tables");function Fc(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,l=0;s<i;s++){const i=t.child(s);for(let t=l,r=Math.min(o,s+3);t<r;t++)if(e.child(t)==i){l=t+1,n+=i.nodeSize;continue e}r(i,n),l<o&&e.child(l).sameMarkup(i)?Fc(e.child(l),i,n+1,r):i.nodesBetween(0,i.content.size,r,n+1),n+=i.nodeSize}}function zc(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){const o=hc.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let a=0;a<o.height;a++)i.push(0);for(let a=0;a<o.problems.length;a++){const e=o.problems[a];if("collision"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;const s=o.attrs;for(let t=0;t<s.rowspan;t++)i[e.row+t]+=e.n;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,Ac(s,s.colspan-e.n,e.n))}else if("missing"==e.type)i[e.row]+=e.n;else if("overlong_rowspan"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,rowspan:o.attrs.rowspan-e.n})}else if("colwidth mismatch"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,colwidth:e.colwidth})}}let s,l;for(let a=0;a<i.length;a++)i[a]&&(null==s&&(s=a),l=a);for(let a=0,c=n+1;a<o.height;a++){const n=t.child(a),o=c+n.nodeSize,u=i[a];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const i=[];for(let n=0;n<u;n++){const n=yc(e.schema)[t].createAndFill();n&&i.push(n)}const d=0!=a&&s!=a-1||l!=a?o-1:c+1;r.insert(r.mapping.map(d),i)}c=o}return r.setMeta(_c,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&Fc(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Bc(e,t){const n=e.createAndFill();return new lr(n).replace(0,n.content.size,t).doc}function Lc(e,t,n,r,o,i,s,l){if(0==s||s==t.height)return!1;let a=!1;for(let c=o;c<i;c++){const o=s*t.width+c,i=t.map[o];if(t.map[o-t.width]==i){a=!0;const o=n.nodeAt(i),{top:u,left:d}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(l).map(i+r),null,{...o.attrs,rowspan:s-u}),e.insert(e.mapping.slice(l).map(t.positionAt(s,d,n)),o.type.createAndFill({...o.attrs,rowspan:u+o.attrs.rowspan-s})),c+=o.attrs.colspan-1}}return a}function jc(e,t,n,r,o,i,s,l){if(0==s||s==t.width)return!1;let a=!1;for(let c=o;c<i;c++){const o=c*t.width+s,i=t.map[o];if(t.map[o-1]==i){a=!0;const o=n.nodeAt(i),u=t.colCount(i),d=e.mapping.slice(l).map(i+r);e.setNodeMarkup(d,null,Ac(o.attrs,s-u,o.attrs.colspan-(s-u))),e.insert(d+o.nodeSize,o.type.createAndFill(Ac(o.attrs,0,s-u))),c+=o.attrs.rowspan-1}}return a}function Hc(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=hc.get(i);const{top:l,left:a}=r,c=a+o.width,u=l+o.height,d=e.tr;let p=0;function h(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=hc.get(i),p=d.mapping.maps.length}(function(e,t,n,r,o,i,s){const l=yc(e.doc.type.schema);let a,c;if(o>t.width)for(let u=0,d=0;u<t.height;u++){const i=n.child(u);d+=i.nodeSize;const p=[];let h;h=null==i.lastChild||i.lastChild.type==l.cell?a||(a=l.cell.createAndFill()):c||(c=l.header_cell.createAndFill());for(let e=t.width;e<o;e++)p.push(h);e.insert(e.mapping.slice(s).map(d-1+r),p)}if(i>t.height){const u=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,o);e++){const o=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==l.header_cell;u.push(o?c||(c=l.header_cell.createAndFill()):a||(a=l.cell.createAndFill()))}const d=l.row.create(null,bt.from(u)),p=[];for(let e=t.height;e<i;e++)p.push(d);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),p)}return!(!a&&!c)})(d,s,i,n,c,u,p)&&h(),Lc(d,s,i,n,a,c,l,p)&&h(),Lc(d,s,i,n,a,c,u,p)&&h(),jc(d,s,i,n,l,u,a,p)&&h(),jc(d,s,i,n,l,u,c,p)&&h();for(let f=l;f<u;f++){const e=s.positionAt(f,a,i),t=s.positionAt(f,c,i);d.replace(d.mapping.slice(p).map(e+n),d.mapping.slice(p).map(t+n),new Et(o.rows[f-l],0,0))}h(),d.setSelection(new Rc(d.doc.resolve(n+s.positionAt(l,a,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(d)}var Vc=uc({ArrowLeft:Wc("horiz",-1),ArrowRight:Wc("horiz",1),ArrowUp:Wc("vert",-1),ArrowDown:Wc("vert",1),"Shift-ArrowLeft":Uc("horiz",-1),"Shift-ArrowRight":Uc("horiz",1),"Shift-ArrowUp":Uc("vert",-1),"Shift-ArrowDown":Uc("vert",1),Backspace:qc,"Mod-Backspace":qc,Delete:qc,"Mod-Delete":qc});function $c(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Wc(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof Rc)return $c(n,r,cr.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;const s=Xc(o,e,t);if(null==s)return!1;if("horiz"==e)return $c(n,r,cr.near(n.doc.resolve(i.head+t),t));{const o=n.doc.resolve(s),i=Mc(o,e,t);let l;return l=i?cr.near(i,1):t<0?cr.near(n.doc.resolve(o.before(-1)),-1):cr.near(n.doc.resolve(o.after(-1)),1),$c(n,r,l)}}}function Uc(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof Rc)s=i;else{const r=Xc(o,e,t);if(null==r)return!1;s=new Rc(n.doc.resolve(r))}const l=Mc(s.$headCell,e,t);return!!l&&$c(n,r,new Rc(s.$anchorCell,l))}}function qc(e,t){const n=e.selection;if(!(n instanceof Rc))return!1;if(t){const r=e.tr,o=yc(e.schema).cell.createAndFill().content;n.forEachCell(((e,t)=>{e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Et(o,0,0))})),r.docChanged&&t(r)}return!0}function Kc(e,t){const n=wc(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new Rc(n))),!0)}function Jc(e,t,n){if(!kc(e.state))return!1;let r=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,l=[];if("row"==i)for(let a=0;a<t.childCount;a++){let e=t.child(a).content;const o=a?0:Math.max(0,n-1),i=a<t.childCount-1?0:Math.max(0,r-1);(o||i)&&(e=Bc(yc(s).row,new Et(e,o,i)).content),l.push(e)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||r?Bc(yc(s).row,new Et(t,n,r)).content:t)}return function(e,t){const n=[];for(let o=0;o<t.length;o++){const e=t[o];for(let t=e.childCount-1;t>=0;t--){const{rowspan:r,colspan:i}=e.child(t).attrs;for(let e=o;e<o+r;e++)n[e]=(n[e]||0)+i}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(bt.empty),n[o]<r){const i=yc(e).cell.createAndFill(),s=[];for(let e=n[o];e<r;e++)s.push(i);t[o]=t[o].append(bt.from(s))}return{height:t.length,width:r,rows:t}}(s,l)}(n);const o=e.state.selection;if(o instanceof Rc){r||(r={width:1,height:1,rows:[bt.from(Bc(yc(e.state.schema).cell,n))]});const t=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),s=hc.get(t).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=function({width:e,height:t,rows:n},r,o){if(e!=r){const t=[],o=[];for(let e=0;e<n.length;e++){const i=n[e],s=[];for(let n=t[e]||0,o=0;n<r;o++){let l=i.child(o%i.childCount);n+l.attrs.colspan>r&&(l=l.type.createChecked(Ac(l.attrs,l.attrs.colspan,n+l.attrs.colspan-r),l.content)),s.push(l),n+=l.attrs.colspan;for(let n=1;n<l.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+l.attrs.colspan}o.push(bt.from(s))}n=o,e=r}if(t!=o){const e=[];for(let r=0,i=0;r<o;r++,i++){const s=[],l=n[i%t];for(let e=0;e<l.childCount;e++){let t=l.child(e);r+t.attrs.rowspan>o&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,o-t.attrs.rowspan)},t.content)),s.push(t)}e.push(bt.from(s))}n=e,t=o}return{width:e,height:t,rows:n}}(r,s.right-s.left,s.bottom-s.top),Hc(e.state,e.dispatch,i,s,r),!0}if(r){const t=xc(e.state),n=t.start(-1);return Hc(e.state,e.dispatch,n,hc.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function Gc(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=Yc(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof Rc)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=wc(e.state.selection.$anchor))&&(null==(n=Qc(e,t))?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(t,n){let r=Qc(e,n);const o=null==bc.getState(e.state);if(!r||!Ec(t,r)){if(!o)return;r=t}const i=new Rc(t,r);if(o||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);o&&n.setMeta(bc,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",l),null!=bc.getState(e.state)&&e.dispatch(e.state.tr.setMeta(bc,-1))}function l(n){const o=n,l=bc.getState(e.state);let a;if(null!=l)a=e.state.doc.resolve(l);else if(Yc(e,o.target)!=r&&(a=Qc(e,t),!a))return s();a&&i(a,o)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",l)}function Xc(e,t,n){if(!(e.state.selection instanceof hr))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){const i=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?i:null}}return null}function Yc(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Qc(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?wc(e.state.doc.resolve(n.pos)):null}var Zc=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),eu(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,eu(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function eu(e,t,n,r,o,i){var s;let l=0,a=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:s,colwidth:d}=u.child(e).attrs;for(let e=0;e<s;e++,n++){const s=o==n?i:d&&d[e],u=s?s+"px":"";l+=s||r,s||(a=!1),c?(c.style.width!=u&&(c.style.width=u),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=u}}for(;c;){const e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}a?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var tu=new Pr("tableColumnResizing");function nu({handleWidth:e=5,cellMinWidth:t=25,View:n=Zc,lastColumnResizable:r=!0}={}){const o=new Mr({key:tu,state:{init:(e,r)=>(o.spec.props.nodeViews[yc(r.schema).table.name]=(e,r)=>new n(e,t,r),new ru(-1,!1)),apply:(e,t)=>t.apply(e)},props:{attributes:e=>{const t=tu.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r,o){const i=tu.getState(e.state);if(i&&!i.dragging){const r=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target);let s=-1;if(r){const{left:o,right:i}=r.getBoundingClientRect();t.clientX-o<=n?s=ou(e,t,"left",n):i-t.clientX<=n&&(s=ou(e,t,"right",n))}if(s!=i.activeHandle){if(!o&&-1!==s){const t=e.state.doc.resolve(s),n=t.node(-1),r=hc.get(n),o=t.start(-1);if(r.colCount(t.pos-o)+t.nodeAfter.attrs.colspan-1==r.width-1)return}su(e,s)}}}(t,n,e,0,r)},mouseleave:e=>{!function(e){const t=tu.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&su(e,-1)}(e)},mousedown:(e,n)=>{!function(e,t,n){const r=tu.getState(e.state);if(!r||-1==r.activeHandle||r.dragging)return!1;const o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t);let s=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let a=0;a<n;a++)r[a]&&(s-=r[a],l--);return s/l}(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",l);const r=tu.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=hc.get(o),s=r.start(-1),l=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=e.state.tr;for(let u=0;u<i.height;u++){const e=u*i.width+l;if(u&&i.map[e]==i.map[e-i.width])continue;const t=i.map[e],r=o.nodeAt(t).attrs,d=1==r.colspan?0:l-i.colCount(t);if(r.colwidth&&r.colwidth[d]==n)continue;const p=r.colwidth?r.colwidth.slice():(c=r.colspan,Array(c).fill(0));p[d]=n,a.setNodeMarkup(s+t,null,{...r,colwidth:p})}var c;a.docChanged&&e.dispatch(a)}(e,r.activeHandle,iu(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(tu,{setDragging:null})))}function l(t){if(!t.which)return s(t);const r=tu.getState(e.state);if(r&&r.dragging){const o=iu(r.dragging,t,n);!function(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),l=hc.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let a=e.domAtPos(o.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;a&&eu(i,a.firstChild,a,r,l,n)}(e,r.activeHandle,o,n)}}e.dispatch(e.state.tr.setMeta(tu,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",l),t.preventDefault()}(e,n,t)}},decorations:e=>{const t=tu.getState(e);if(t&&t.activeHandle>-1)return function(e,t){const n=[],r=e.doc.resolve(t),o=r.node(-1);if(!o)return Ta.empty;const i=hc.get(o),s=r.start(-1),l=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let a=0;a<i.height;a++){const e=l+a*i.width-1;if(!(l!=i.width&&i.map[e]==i.map[e+1]||0!=a&&i.map[e]==i.map[e-i.width])){const t=i.map[e],r=s+t+o.nodeAt(t).nodeSize-1,l=document.createElement("div");l.className="column-resize-handle",n.push(Ca.widget(r,l))}}return Ta.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}});return o}var ru=class{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,n=e.getMeta(tu);if(n&&null!=n.setHandle)return new ru(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new ru(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){let n=e.mapping.map(t.activeHandle,-1);return Sc(e.doc.resolve(n))||(n=-1),new ru(n,t.dragging)}return t}};function ou(e,t,n,r){const o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:s}=i,l=wc(e.state.doc.resolve(s));if(!l)return-1;if("right"==n)return l.pos;const a=hc.get(l.node(-1)),c=l.start(-1),u=a.map.indexOf(l.pos-c);return u%a.width==0?-1:c+a.map[u-1]}function iu(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function su(e,t){e.dispatch(e.state.tr.setMeta(tu,{setHandle:t}))}function lu(e){const t=e.selection,n=xc(e),r=n.node(-1),o=n.start(-1),i=hc.get(r);return{...t instanceof Rc?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function au(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;Pc(t,r,o+i)&&(i=0==o||o==t.width?null:0);for(let s=0;s<t.height;s++){const l=s*t.width+o;if(o>0&&o<t.width&&t.map[l-1]==t.map[l]){const i=t.map[l],a=r.nodeAt(i);e.setNodeMarkup(e.mapping.map(n+i),null,Nc(a.attrs,o-t.colCount(i))),s+=a.attrs.rowspan-1}else{const a=null==i?yc(r.type.schema).cell:r.nodeAt(t.map[l+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),a.createAndFill())}}return e}function cu(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const l=s*t.width+o,a=t.map[l],c=n.nodeAt(a),u=c.attrs;if(o>0&&t.map[l-1]==a||o<t.width-1&&t.map[l+1]==a)e.setNodeMarkup(e.mapping.slice(i).map(r+a),null,Ac(u,o-t.colCount(a)));else{const t=e.mapping.slice(i).map(r+a);e.delete(t,t+c.nodeSize)}s+=u.rowspan}}function uu(e,t,n){var r;const o=yc(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0}function du(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const l=[];let a=o>0?-1:0;uu(t,r,o+a)&&(a=0==o||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const o=t.map[u],i=r.nodeAt(o).attrs;e.setNodeMarkup(n+o,null,{...i,rowspan:i.rowspan+1}),c+=i.colspan-1}else{const e=null==a?yc(r.type.schema).cell:null==(i=r.nodeAt(t.map[u+a*t.width]))?void 0:i.type,n=null==e?void 0:e.createAndFill();n&&l.push(n)}return e.insert(s,yc(r.type.schema).row.create(null,l)),e}function pu(e,{map:t,table:n,tableStart:r},o){let i=0;for(let a=0;a<o;a++)i+=n.child(a).nodeSize;const s=i+n.child(o).nodeSize,l=e.mapping.maps.length;e.delete(i+r,s+r);for(let a=0,c=o*t.width;a<t.width;a++,c++){const i=t.map[c];if(o>0&&i==t.map[c-t.width]){const t=n.nodeAt(i).attrs;e.setNodeMarkup(e.mapping.slice(l).map(i+r),null,{...t,rowspan:t.rowspan-1}),a+=t.colspan-1}else if(o<t.width&&i==t.map[c+t.width]){const s=n.nodeAt(i),c=s.attrs,u=s.type.create({...c,rowspan:s.attrs.rowspan-1},s.content),d=t.positionAt(o+1,a,n);e.insert(e.mapping.slice(l).map(r+d),u),a+=c.colspan-1}}}function hu(e,t){if(!kc(e))return!1;if(t){const n=lu(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;pu(r,n,e),e!=n.top;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=hc.get(n.table)}t(r)}return!0}function fu(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function mu(e,t){const n=e.selection;if(!(n instanceof Rc)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=lu(e),{map:o}=r;if(function({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,l=o+(r.right-r.left-1);for(let a=r.top;a<r.bottom;a++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[l]==n[l+1])return!0;i+=e,l+=e}for(let a=r.left;a<r.right;a++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}(o,r))return!1;if(t){const n=e.tr,i={};let s,l,a=bt.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){const c=o.map[e*o.width+t],u=r.table.nodeAt(c);if(!i[c]&&u)if(i[c]=!0,null==s)s=c,l=u;else{fu(u)||(a=a.append(u.content));const e=n.mapping.map(c+r.tableStart);n.delete(e,e+u.nodeSize)}}if(null==s||null==l)return!0;if(n.setNodeMarkup(s+r.tableStart,null,{...Nc(l.attrs,l.attrs.colspan,r.right-r.left-l.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const e=s+1+l.content.size,t=fu(l)?s+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,a)}n.setSelection(new Rc(n.doc.resolve(s+r.tableStart))),t(n)}return!0}function gu(e,t){const n=yc(e.schema);return vu((({node:e})=>n[e.type.spec.tableRole]))(e,t)}function vu(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof Rc){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=function(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from),!i)return!1;s=null==(r=wc(o.$from))?void 0:r.pos}if(null==i||null==s)return!1;if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(n){let r=i.attrs;const l=[],a=r.colwidth;r.rowspan>1&&(r={...r,rowspan:1}),r.colspan>1&&(r={...r,colspan:1});const c=lu(t),u=t.tr;for(let e=0;e<c.right-c.left;e++)l.push(a?{...r,colwidth:a&&a[e]?[a[e]]:null}:r);let d;for(let t=c.top;t<c.bottom;t++){let n=c.map.positionAt(t,c.left,c.table);t==c.top&&(n+=i.nodeSize);for(let r=c.left,o=0;r<c.right;r++,o++)r==c.left&&t==c.top||u.insert(d=u.mapping.map(n+c.tableStart,1),e({node:i,row:t,col:r}).createAndFill(l[o]))}u.setNodeMarkup(s,e({node:i,row:c.top,col:c.left}),l[0]),o instanceof Rc&&u.setSelection(new Rc(u.doc.resolve(o.$anchorCell.pos),d?u.doc.resolve(d):void 0)),n(u)}return!0}}function yu(e,t){return function(n,r){if(!kc(n))return!1;const o=xc(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof Rc?n.selection.forEachCell(((n,r)=>{n.attrs[e]!==t&&i.setNodeMarkup(r,null,{...n.attrs,[e]:t})})):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function bu(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let o=0;o<r.length;o++){const e=t.table.nodeAt(r[o]);if(e&&e.type!==n.header_cell)return!1}return!0}function wu(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!kc(t))return!1;if(n){const r=yc(t.schema),o=lu(t),i=t.tr,s=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),l=s.map((e=>o.table.nodeAt(e)));for(let e=0;e<s.length;e++)l[e].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[e],r.cell,l[e].attrs);if(0==i.steps.length)for(let e=0;e<s.length;e++)i.setNodeMarkup(o.tableStart+s[e],r.header_cell,l[e].attrs);n(i)}return!0}}(e):function(t,n){if(!kc(t))return!1;if(n){const r=yc(t.schema),o=lu(t),i=t.tr,s=bu("row",o,r),l=bu("column",o,r),a=("column"===e?s:"row"===e&&l)?1:0,c="column"==e?{left:0,top:a,right:1,bottom:o.map.height}:"row"==e?{left:a,top:0,right:o.map.width,bottom:1}:o,u="column"==e?l?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach((e=>{const t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)})),n(i)}return!0}}var ku=wu("row",{useDeprecatedLogic:!0}),xu=wu("column",{useDeprecatedLogic:!0}),Su=wu("cell",{useDeprecatedLogic:!0});function Cu(e){return function(t,n){if(!kc(t))return!1;const r=function(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,r=e.before();n>=0;n--){const t=e.node(-1).child(n),o=t.lastChild;if(o)return r-1-o.nodeSize;r-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(xc(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(hr.between(e,Cc(e))).scrollIntoView())}return!0}}function Eu(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Ou({allowTableNodeSelection:e=!1}={}){return new Mr({key:bc,state:{init:()=>null,apply(e,t){const n=e.getMeta(bc);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:o}=e.mapping.mapResult(t);return r?null:o}},props:{decorations:Ic,handleDOMEvents:{mousedown:Gc},createSelectionBetween:e=>null!=bc.getState(e.state)?e.state.selection:null,handleTripleClick:Kc,handleKeyDown:Vc,handlePaste:Jc},appendTransaction:(t,n,r)=>function(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof mr&&(s=r.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)i=Rc.create(o,r.from);else if("row"==s){const e=o.resolve(r.from+1);i=Rc.rowSelection(e,e)}else if(!n){const e=hc.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];i=Rc.create(o,t+1,n)}}else r instanceof hr&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}(r)?i=hr.create(o,r.from):r instanceof hr&&function({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const t=e.node(o);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}for(let o=t.depth;o>0;o--){const e=t.node(o);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){r=e;break}}return n!==r&&0===t.parentOffset}(r)&&(i=hr.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}(r,zc(r,n),e)})}var Tu=["blockquote",0],Mu=["hr"],Au=["pre",["code",0]],Nu=["ol",0],Pu=["ul",0],Ru=["li",0],Du=function(e){for(var t,n={},r=e.attributes,o=0;o<r.length;o++)n[(t=r[o]).name]=t.value;return n},Iu=function(e){var t={};return e.forEach((function(e){t[e]={default:null}})),t},_u=function(){return Iu(["style","class","id"])},Fu=function(e,t){for(var n in e)if(n&&null!==e[n]&&n!==t)return!0;return!1},zu=function(e,t){void 0===t&&(t=[]);var n={},r=function(r){r&&null!==e[r]&&!t.find((function(e){return e===r}))&&(n[r]=e[r])};for(var o in e)r(o);return n},Bu=function(e){var t;return(t={})[e]={name:e,inclusive:!0,parseDOM:[{tag:e}],toDOM:function(){return[e,0]}},t},Lu=Je(Je(Je(Je(Je(Je(Je(Je(Je(Je({link:{attrs:Je(Je({},_u()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:Du}],toDOM:function(e){return["a",zu(e.attrs),0]}}},Bu("strong")),Bu("b")),Bu("em")),Bu("i")),Bu("del")),Bu("sub")),Bu("sup")),Bu("code")),{style:{attrs:Je({},_u()),parseDOM:[{tag:"span",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["span",zu(e.attrs),0]:["span",0]}}}),Bu("u")),ju=function(e){var t;return(t={})[e]={default:null,getFromDOM:function(t){return t.getAttribute(e)},setDOMAttr:function(t,n){n[e]=t}},t},Hu=Je(Je(Je(Je(Je({},ju("style")),ju("class")),ju("id")),ju("headers")),ju("scope")),Vu={doc:{content:"colgroup*"},col:{attrs:Iu(["id","class","style","span"]),parseDOM:[{getAttrs:Du,tag:"col"}],toDOM:function(e){return["col",e.attrs]}},colgroup:{attrs:Iu(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:Du,tag:"colgroup"}],toDOM:function(e){return["colgroup",e.attrs,0]}},text:{inline:!0,group:"inline"}},$u=new an({nodes:Vu,marks:{}}),Wu=function(e){var t=ao(io(e),$u,{preserveWhitespace:!1});return lo(t).firstChild},Uu=vc({tableGroup:"block",cellContent:"block+",cellAttributes:Hu});Uu.table_row.attrs=Je(Je({},Uu.table_row.attrs),Iu([Rr,"style","class","id"])),Uu.table_row.toDOM=function(e){return["tr",zu(e.attrs),0]},Uu.table_row.parseDOM=[{tag:"tr",getAttrs:Du}],Uu.table.attrs=Je(Je({},Uu.table.attrs),Iu(["style","class","id",Dr,Ir])),Uu.table.toDOM=function(e){var t=Fu(e.attrs)?zu(e.attrs,[Dr,Ir]):{},n=null;if(e.attrs[Dr]&&!function(e){for(var t=!1,n=e.child(0),r=0;r<n.childCount;r++)if(n.child(r).attrs.colwidth){t=!0;break}return t}(e)){var r=Wu(e.attrs[Dr]);if(r){var o=Array.from(r.children).map((function(e){return["col",Du(e)]}));n=["colgroup",Du(r)].concat(o)}}return n?["table",t,n,["tbody",0]]:["table",t,["tbody",0]]},Uu.table.parseDOM=[{tag:"table",getAttrs:function(e){var t=Du(e),n=Array.from(e.childNodes).find((function(e){return"COLGROUP"===e.nodeName}));return n&&(t[Dr]=n.outerHTML),t}}];var qu=Je({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:Je({},_u()),parseDOM:[{tag:"p",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["p",zu(e.attrs),0]:["p",0]}},table_wrapper:{content:"(table_caption_external | table)+",group:"block",defining:!0,attrs:{table:{default:null},style:{default:null}},parseDOM:[{tag:"div[table]",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["div",zu(e.attrs),0]:["div",0]}},table_caption_external:{content:"inline+",group:"block",attrs:Je({caption:{default:null}},_u()),parseDOM:[{tag:"div[caption]",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["div",zu(e.attrs),0]:["div",0]}},div:{content:"block*",group:"block",attrs:Je({},_u()),parseDOM:[{tag:"div",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["div",zu(e.attrs),0]:["div",0]}},blockquote:{attrs:Je({},_u()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["blockquote",zu(e.attrs),0]:Tu}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return Mu}},heading:{attrs:Je(Je({},_u()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(e){return Je(Je({},Du(e)),{level:1})}},{tag:"h2",getAttrs:function(e){return Je(Je({},Du(e)),{level:2})}},{tag:"h3",getAttrs:function(e){return Je(Je({},Du(e)),{level:3})}},{tag:"h4",getAttrs:function(e){return Je(Je({},Du(e)),{level:4})}},{tag:"h5",getAttrs:function(e){return Je(Je({},Du(e)),{level:5})}},{tag:"h6",getAttrs:function(e){return Je(Je({},Du(e)),{level:6})}}],toDOM:function(e){return Fu(e.attrs,"level")?["h"+e.attrs.level,zu(e.attrs,["level"]),0]:["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return Au}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:Je({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},_u()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["img",zu(e.attrs)]:["img"]}},hard_break:{inline:!0,attrs:Je({},_u()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["br",zu(e.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:Je(Je({},_u()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(e){return Je(Je({},Du(e)),{order:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"1",10):1})}}],toDOM:function(e){return 1===e.attrs.order?Fu(e.attrs,"order")?["ol",zu(e.attrs,["order"]),0]:Nu:["ol",Je(Je({},zu(e.attrs,["order"])),{start:e.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:Je({},_u()),parseDOM:[{tag:"ul",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["ul",zu(e.attrs),0]:Pu}},list_item:{content:"(paragraph | heading) block*",attrs:Je({},_u()),parseDOM:[{tag:"li",getAttrs:Du}],toDOM:function(e){return Fu(e.attrs)?["li",zu(e.attrs),0]:Ru},defining:!0}},Uu),Ku=200,Ju=function(){};Ju.prototype.append=function(e){return e.length?(e=Ju.from(e),!this.length&&e||e.length<Ku&&this.leafAppend(e)||this.length<Ku&&e.leafPrepend(this)||this.appendInner(e)):this},Ju.prototype.prepend=function(e){return e.length?Ju.from(e).append(this):this},Ju.prototype.appendInner=function(e){return new Xu(this,e)},Ju.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Ju.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Ju.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Ju.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Ju.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},Ju.from=function(e){return e instanceof Ju?e:e&&e.length?new Gu(e):Ju.empty};var Gu=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Ku)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Ku)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ju);Ju.empty=new Gu([]);var Xu=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Ju);class Yu{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--)if(this.items.get(o-1).selection){--o;break}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let i,s,l=e.tr,a=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new Qu(e.map));let t,o=e.step.map(n.slice(r));o&&l.maybeStep(o).doc&&(t=l.mapping.maps[l.mapping.maps.length-1],a.push(new Qu(t,void 0,void 0,a.length+c.length))),r--,t&&n.appendMap(t,r)}else l.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,s=new Yu(this.items.slice(0,o).append(c.reverse().concat(a)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:l,selection:i}}addTransform(e,t,n,r){let o=[],i=this.eventCount,s=this.items,l=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,a=e.steps[c].invert(e.docs[c]),u=new Qu(e.mapping.maps[c],a,t);(n=l&&l.merge(u))&&(u=n,c?o.pop():s=s.slice(0,s.length-1)),o.push(u),t&&(i++,t=void 0),r||(l=u)}let a=i-n.depth;return a>ed&&(s=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(s,a),i-=a),new Yu(s.append(o),i)}remapping(e,t){let n=new Tn;return this.items.forEach(((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new Yu(this.items.append(e.map((e=>new Qu(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let l=t;this.items.forEach((t=>{let r=o.getMirror(--l);if(null==r)return;i=Math.min(i,r);let a=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(l+1,r));c&&s++,n.push(new Qu(a,i,c))}else n.push(new Qu(a))}),r);let a=[];for(let d=t;d<i;d++)a.push(new Qu(o.maps[d]));let c=this.items.slice(0,r).append(a).append(n),u=new Yu(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(((i,s)=>{if(s>=e)r.push(i),i.selection&&o++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let l=i.selection&&i.selection.map(t.slice(n));l&&o++;let a,c=new Qu(s.invert(),e,l),u=r.length-1;(a=r.length&&r[u].merge(c))?r[u]=a:r.push(c)}}else i.map&&n--}),this.items.length,0),new Yu(Ju.from(r.reverse()),o)}}Yu.empty=new Yu(Ju.empty,0);class Qu{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Qu(t.getMap().invert(),t,this.selection)}}}class Zu{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}const ed=20;function td(e){let t=[];return e.forEach(((e,n,r,o)=>t.push(r,o))),t}function nd(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function rd(e,t,n,r){let o=sd(t),i=ld.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!s)return;let l=s.selection.resolve(s.transform.doc),a=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),c=new Zu(r?a:s.remaining,r?s.remaining:a,null,0,-1);n(s.transform.setSelection(l).setMeta(ld,{redo:r,historyState:c}).scrollIntoView())}let od=!1,id=null;function sd(e){let t=e.plugins;if(id!=t){od=!1,id=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){od=!0;break}}return od}const ld=new Pr("history"),ad=new Pr("closeHistory");function cd(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Mr({key:ld,state:{init:()=>new Zu(Yu.empty,Yu.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let o,i=n.getMeta(ld);if(i)return i.historyState;n.getMeta(ad)&&(e=new Zu(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(ld))return s.getMeta(ld).redo?new Zu(e.done.addTransform(n,void 0,r,sd(t)),e.undone,td(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new Zu(e.done,e.undone.addTransform(n,void 0,r,sd(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Zu(e.done.rebased(n,o),e.undone.rebased(n,o),nd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Zu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),nd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),l=s?nd(e.prevRanges,n.mapping):td(n.mapping.maps[n.steps.length-1]);return new Zu(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,sd(t)),Yu.empty,l,n.time,null==o?e.prevComposition:o)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?ud:"historyRedo"==n?dd:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const ud=(e,t)=>{let n=ld.getState(e);return!(!n||0==n.done.eventCount||(t&&rd(n,e,t,!1),0))},dd=(e,t)=>{let n=ld.getState(e);return!(!n||0==n.undone.eventCount||(t&&rd(n,e,t,!0),0))};function pd(e){let t=ld.getState(e);return t?t.done.eventCount:0}function hd(e){let t=ld.getState(e);return t?t.undone.eventCount:0}class fd{constructor(e,t){var n;this.match=e,this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){let i=n;if(t[1]){let e=t[0].lastIndexOf(t[1]);i+=t[0].slice(e+t[1].length);let n=(r+=e)-o;n>0&&(i=t[0].slice(e-n,e)+i,r=o)}return e.tr.insertText(i,r,o)}):t}}function md({rules:e}){let t=new Mr({state:{init:()=>null,apply(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,o,i)=>gd(n,r,o,i,e,t),handleDOMEvents:{compositionend:n=>{setTimeout((()=>{let{$cursor:r}=n.state.selection;r&&gd(n,r.pos,r.pos,"",e,t)}))}}},isInputRules:!0});return t}function gd(e,t,n,r,o,i){if(e.composing)return!1;let s=e.state,l=s.doc.resolve(t);if(l.parent.type.spec.code)return!1;let a=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,null,"￼")+r;for(let c=0;c<o.length;c++){let l=o[c].match.exec(a),u=l&&o[c].handler(s,l,t-(l[0].length-r.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:r})),!0}return!1}const vd=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let o,i=n[r];if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1},yd=new fd(/--$/,"—"),bd=new fd(/\.\.\.$/,"…"),wd=new fd(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),kd=new fd(/"$/,"”"),xd=new fd(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),Sd=new fd(/'$/,"’"),Cd=[wd,kd,xd,Sd];function Ed(e,t,n=null,r){return new fd(e,((e,o,i,s)=>{let l=n instanceof Function?n(o):n,a=e.tr.delete(i,s),c=a.doc.resolve(i).blockRange(),u=c&&Hn(c,t,l);if(!u)return null;a.wrap(c,u);let d=a.doc.resolve(i-1).nodeBefore;return d&&d.type==t&&Wn(a.doc,i-1)&&(!r||r(o,d))&&a.join(i-1),a}))}function Od(e,t,n=null){return new fd(e,((e,r,o,i)=>{let s=e.doc.resolve(o),l=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,l):null}))}var Td={mark:"link"},Md=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,Ad=function(e){return/^MsoListParagraph/.test(e.className)},Nd=function(e){var t=e.innerHTML;return(t=t.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},Pd=function(e,t){var n=document.createElement(e);return n.style.listStyleType=t,n},Rd=function(e){var t=null;return/^\d/.test(e)||(t=(/^[a-z]/.test(e)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(e)?"roman":"alpha")),t},Dd=function(e,t){var n=[];Array.from(e).forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var r=e;r.getAttribute("datalist")?(n.push(e),t.add(n)):Ad(r)&&n.length?n.push(e):(n=[],"DIV"===r.nodeName?Dd(r.children,t):"TABLE"===r.nodeName&&Array.from(r.querySelectorAll("td,th")).forEach((function(e){Dd(e.children,t)})))}}))},Id=function(e){var t,n=e.innerHTML,r=function(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return n=n.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(n)?{tag:"ul",style:(t=r(Nd(e)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(t)?null:/^o/.test(t)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(n)?{tag:"ol",style:Rd(r(Nd(e)))}:void 0},_d=function(e){var t,n=e.nodeName.toLowerCase();e.firstChild&&e.firstChild.nodeType===Node.COMMENT_NODE&&e.removeChild(e.firstChild),1===e.childNodes.length?t=e.firstChild.nodeType===Node.TEXT_NODE?Nd(e):e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(e.removeChild(e.firstChild),3===e.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue)&&e.removeChild(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&e.removeChild(e.firstChild),t="p"!==n?"<"+n+">"+e.innerHTML+"</"+n+">":e.innerHTML),e.parentNode.removeChild(e);var r=document.createElement("li");return r.appendChild(io(t)),r},Fd=function(e){var t=io(function(e){return e.replace(Md,(function(e,t,n){return'datalist="'+t+'" datalevel="'+n+'" '+e}))}(e)),n=new Set;return Dd(t.children,n),n.forEach((function(e){return function(e){var t,n,r,o,i,s,l,a,c,u,d,p,h,f=-1,m={};for(a=0;a<e.length;a++){var g=(h={datalist:(c=e[a]).getAttribute("datalist"),datalevel:c.getAttribute("datalevel")}).datalist,v=Id(c);if(u=v&&v.tag){if(d=h.datalevel||parseFloat(c.style.marginLeft||0),h.datalevel||c.style.marginLeft){var y=u+g;m[d]||(m[d]={}),(!n||n<0)&&(n=d,r=g,o=(l=e.filter((function(e){return e.getAttribute("datalist")===String(r)})))[l.length-1],s=Pd(u,v&&v.style),c.parentNode.insertBefore(s,c),f=d,m[d][y]=s),i=o===c,p=m[d][y],(d>f||!p)&&(p=Pd(u,v&&v.style),m[d][y]=p,t.appendChild(p)),t=_d(c),p.appendChild(t),i?n=f=-1:f=d}}else!t||i&&!Ad(c)||(c.style.marginLeft&&(c.style.marginLeft=""),c.style.marginLeft&&(c.style.margin=""),t.appendChild(c))}}(e)})),so(t)},zd=function(e,t){return e.replace(new RegExp("<\\/?("+t+")(?:\\s[^>]*?)?>","gi"),"")},Bd=function(e){e.ownerElement&&e.ownerElement.removeAttribute(e.name)},Ld=/\s*;\s*/,jd=/\s*:\s*/;function Hd(e){for(var t=e.length,n=new Array(t/2),r=0;r<t;r+=2)n[r]=String.fromCharCode(parseInt(e.substring(r,r+2),16));return btoa(n.join(""))}var Vd=/<img\s[^>]*?src=(?:'|")file:\/[^'"]+(?:'|")[^>]*>/gi,$d=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,Wd=new RegExp("(?:("+$d.source+"))([\\da-fA-F\\s]+)\\}","g"),Ud=/[^\da-fA-F]/g,qd=/file:\/[^'"]+\.(jpg|png|gif)/i,Kd=/\\(png|jpeg)blip\\/,Jd="text/rtf",Gd=function(e,t,n,r,o){var i,s,l,a,c,u,d=[],p=[],h=t.matchCase,f=t.matchWord,m=t.useRegExp,g=t.text;if(m&&(/^\\$/.test(g)||/[^\\]\\$/.test(g))&&(g=g.substring(0,g.length-1)),!g)return d;var v=h?"g":"gi",y=m?new RegExp(g,v):Zd(g,v);return e.nodesBetween(n,r,(function(t,h,m){if(o(d))return!1;t.inlineContent&&h+t.content.size>=n&&(p.length=0,t.nodesBetween(0,t.content.size,(function(t,m,g,v){if(o(d))return!1;var b=1+h+m;if(t.isText&&b+t.nodeSize>=n){if(c=t.text||"",u=g.childCount-1>=v+1&&g.child(v+1),p.push(n<=b?{text:c,start:b}:{text:c.slice(n-b),start:n}),u&&u.isText)return;for(s=p.map((function(e){return e.text})).join(""),i=y.exec(s);null!==i&&(l=p[0].start+i.index,a=l+i[0].length,n<=l&&r>=a&&Qd(i,f)&&d.push(hr.create(e,l,a)),!o(d));)i=y.exec(s)}else p.length=0})))})),d},Xd=function(e,t){return Gd(e,t,0,e.content.size,(function(){return!1}))},Yd=/^[\s0-9~`!@#$%\^&*\(\)_\-=+\\|\[\]{};:'"\?/.,<>]?$/,Qd=function(e,t){if(t){if(!0===t){var n=e.input,r=n.charAt(e.index-1),o=n.charAt(e.index+e[0].length);return Yd.test(r)&&Yd.test(o)}return t(e)}return!0},Zd=function(e,t){var n=e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/\s/g,"\\s");return new RegExp(n,t)},ep=/\s+/g,tp=/text-align/,np=function(e,t){for(var n in t)n&&qr(e,n,t[n])},rp=function(e,t,n,r){void 0===r&&(r=!1),this.node=e,this.view=t,this.dom=document.createElement(n),np(this.dom,e.attrs),this.contentDOM=r?void 0:this.dom},op=function(e,t,n){this.mark=e,this.view=t,this.dom=document.createElement("span"),np(this.dom,e.attrs),this.contentDOM=this.dom},ip=new Pr("highlight"),sp={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},lp=Object.keys(sp),ap=new Pr("image-resize"),cp=function(e,t,n){e.style[t]=n+"px"},up=/[^\-]width:|[^\-]height:/,dp=/^.+$/,pp=function(){function e(e,t,n,r){this.activeHandle=e,this.dragging=t,this.rect=n,this.nodePosition=r}return e.prototype.apply=function(t){var n=t.getMeta(ap);return n?new e(n.activeHandle,n.setDragging,n.rect,n.nodePosition):this},e}(),hp=new Pr("caret-color"),fp=function(){function e(e,t){this.node=e,this.view=t,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),e.attrs[Dr]&&this.renderColgroup(e.attrs[Dr]);var n=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,e.attrs),this.resizeHandles=lp.map((function(e){var t=document.createElement("span");return t.className=_r+" "+e,t.setAttribute(Fr,e),t})),this.contentDOM=n}return e.prototype.update=function(e){var t=this;if(e.type!==this.node.type)return!1;var n=this.node;return this.node=e,e.attrs[Ir]?this.resizeHandles.forEach((function(e){t.dom.appendChild(e)})):Array.from(this.dom.children).filter((function(e){return e.classList.contains(_r)})).forEach((function(e){return e.remove()})),this.setAttributes(this.table,e.attrs),n.attrs[Dr]!==e.attrs[Dr]&&this.renderColgroup(e.attrs[Dr]),!0},e.prototype.ignoreMutation=function(e){return"attributes"===e.type&&(e.target===this.table||e.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(e.target))},e.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},e.prototype.renderColgroup=function(e){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),e&&(this.colgroup=Wu(e),this.table.insertBefore(this.colgroup,this.table.firstChild))},e.prototype.setAttributes=function(e,t){var n=[Dr,Ir];for(var r in t)r&&-1===n.indexOf(r)&&qr(e,r,t[r]);/%$/.test(e.style.width)?(this.dom.style.width=e.style.width,e.style.width=""):this.dom.style.width=""},e}(),mp=function(){function e(e,t){this.node=e,this.view=t,this.dom=document.createElement("div"),this.setAttributes(this.dom,e.attrs),this.contentDOM=this.dom}return e.prototype.update=function(e){return e.type===this.node.type&&(this.node=e,this.setAttributes(this.dom,e.attrs),!0)},e.prototype.ignoreMutation=function(e){return"attributes"===e.type&&"style"===e.attributeName},e.prototype.destroy=function(){this.node=void 0,this.view=void 0},e.prototype.setAttributes=function(e,t){for(var n in t)n&&qr(e,n,t[n]);if(e.setAttribute("table",""),/%/.test(e.style.width)){var r=this.node&&this.node.lastChild,o=(r?Ur(r.attrs.style):{}).width||"";o&&!/%/.test(o)&&(e.style.width="")}},e}(),gp=/^.+$/;function vp(e,t,n){var r;if(new RegExp("[^-]?"+t+":").test(e.style||"")){var o=Br(e.style||"",{style:t,value:gp,newValue:n}).style;r=Je(Je({},e),{style:o})}else r=e.style?Je(Je({},e),{style:e.style.replace(/;$/,"")+"; "+t+": "+n+";"}):Je(Je({},e),{style:t+": "+n+";"});return r}var yp=new Pr("table-resize"),bp=new Pr("table-column-resizing"),wp=new Pr("table-row-resizing");function kp(e,t){var n=!1;return(n=(n=n||e!==yp&&Boolean(yp.get(t))&&yp.getState(t).dragging)||e!==bp&&Boolean(bp.get(t))&&bp.getState(t).dragging)||e!==wp&&Boolean(wp.get(t))&&wp.getState(t).dragging}function xp(e,t){var n=!1;return(n=n||e!==bp&&Boolean(bp.get(t))&&bp.getState(t).activeHandle>-1)||e!==wp&&Boolean(wp.get(t))&&wp.getState(t).activeHandle>-1}function Sp(e){return e&&e.firstChild&&"TABLE"===e.firstChild.nodeName?e.firstChild:e}function Cp(e){for(;e&&"TD"!==e.nodeName&&"TH"!==e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Ep(e){for(var t=function(e){var t=Array.from(e&&e.rows||[]),n=Array.from(t&&t[0]&&t[0].cells||[]).map((function(e){return e.colSpan})).reduce((function(e,t){return e+t}),0),r=t.map((function(){return new Array(n)}));return t.forEach((function(e,t){var n=0;Array.from(e.cells).forEach((function(e){for(var o=0;o<e.colSpan;o++){for(var i=0;i<e.rowSpan;i++){var s=r[t+i].findIndex((function(e,t){return t>=n&&!e}));r[t+i][s]=e}n++}}))})),r}(e.closest("table")),n=null,r=function(r){if(t[r].forEach((function(t,o){e===t&&(n={rowIndex:r,cellIndex:o})})),n)return"break"},o=0;o<t.length&&"break"!==r(o);o++);return n||{rowIndex:-1,cellIndex:-1}}function Op(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{node:r,depth:n}}return null}function Tp(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;var o=e.state.doc.resolve(r.pos),i=Op(o,(function(e){return"table"===e.type.spec.tableRole}));if(null===i)return-1;var s=o.start(i.depth),l=i.node,a=hc.get(l);return s+a.map[a.width*n.rowIndex+n.cellIndex]}var Mp=function(){function e(e,t){this.activeHandle=e,this.dragging=t}return e.prototype.apply=function(t){var n,r=this,o=t.getMeta(bp);if(o&&null!=o.setHandle)return new e(o.setHandle,null);if(o&&void 0!==o.setDragging)return new e(r.activeHandle,o.setDragging);if(r.activeHandle>-1&&t.docChanged){var i=t.mapping.map(r.activeHandle,-1);n=t.doc.resolve(i),Boolean("row"===n.parent.type.spec.tableRole&&n.nodeAfter)||(i=-1),r=new e(i,r.dragging)}return r},e}();function Ap(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Np(e,t){var n=e.state.tr;n.setMeta("addToHistory",!1),n.setMeta(bp,{setHandle:t}),e.dispatch(n)}var Pp={southeast:!0,southwest:!0,northwest:!0,northeast:!0},Rp=Je({east:!0,west:!0},Pp),Dp=Je({south:!0,north:!0},Pp),Ip=function(){function e(e,t,n){this.activeHandle=e,this.dragging=t,this.nodePosition=n}return e.prototype.apply=function(t){var n=t.getMeta(yp);return n?new e(n.activeHandle,n.setDragging,n.nodePosition):this},e}(),_p=function(e){var t=Array.from(e.firstChild.children).map((function(e){return e.offsetWidth})),n=Array.from(e.rows).map((function(e){return e.offsetHeight})),r=t.reduce((function(e,t){return e+t}),0),o=n.reduce((function(e,t){return e+t}),0),i=e.offsetHeight;return{width:r,height:o,colsWidth:t,rowsHeight:n,offsetWidth:e.offsetWidth,offsetHeight:i}},Fp=function(e,t){var n=t.target.getAttribute(Fr);if(!n)return!1;var r=yp.getState(e.state);t.preventDefault();var o=e.state.tr;o.setMeta(yp,{setDragging:{startX:t.clientX,startY:t.clientY},activeHandle:n,nodePosition:r.nodePosition}),o.setMeta("addToHistory",!1),function(e,t,n){var r=e.state.doc.nodeAt(n),o=Sp(e.nodeDOM(n)),i=_p(o),s=i.width,l=i.height,a=i.colsWidth,c=i.rowsHeight,u=i.offsetWidth,d=i.offsetHeight,p=o.firstChild,h=Array.from(p&&p.children||[]),f=!1;h.forEach((function(e,t){e.style.width&&!/%$/.test(e.style.width)&&(e.style.width=100*a[t]/s+"%",f=!0)}));var m=!1;r.forEach((function(e,r,o){var i=Ur(e.attrs.style).height;i&&!/%$/.test(i)&&(t.setNodeMarkup(n+r+1,null,vp(e.attrs,"height",100*c[o]/l+"%")),m=!0)}));var g=r.attrs;Ur(g.style).width!==u+"px"&&(g=vp(g,"width",u+"px")),f&&(g[Dr]=p.outerHTML),m&&(g=vp(g,"height",d+"px")),(f||m)&&t.setNodeMarkup(n,null,g)}(e,o,r.nodePosition),e.dispatch(o);var i=t.view||window;function s(t){!function(e,t){var n,r=yp.getState(e.state),o=r.dragging,i=r.nodePosition,s=r.activeHandle;if(!(i<0)&&o){var l=Sp(e.nodeDOM(i)),a=l.getBoundingClientRect(),c=sp[s],u=(t.clientX-o.startX)*c.x,d=(t.clientY-o.startY)*c.y,p=(l.ownerDocument&&l.ownerDocument.defaultView||window).getComputedStyle(l),h=/px/.test(p.width)?parseFloat(p.width):l.offsetWidth,f=/px/.test(p.height)?parseFloat(p.height):l.offsetHeight,m=c.x?u+h:a.width,g=c.y?d+f:a.height;if(o.startX=c.x?t.clientX:o.startX,o.startY=c.y?t.clientY:o.startY,Rp[s]&&(l.style.width=m+"px"),Dp[s]&&(l.style.height=g+"px"),/px/.test(l.style.width)){var v=null===(n=l.parentNode)||void 0===n?void 0:n.parentNode;v instanceof HTMLDivElement&&v.matches("div[table]")&&/%/.test(v.style.width)&&(v.style.width="")}}}(e,t)}return i.addEventListener("mouseup",(function t(n){i.removeEventListener("mouseup",t),i.removeEventListener("mousemove",s),function(e){var t=yp.getState(e.state),n=t.dragging,r=t.nodePosition,o=t.activeHandle;if(n){var i=e.state.doc.nodeAt(r),s=Sp(e.nodeDOM(r)),l=_p(s);if(i){var a=l.offsetWidth+"px",c=l.offsetHeight+"px",u=e.state.tr,d=i.attrs,p=Ur(d.style);if(Rp[o]&&s.style.width&&p.width!==a&&(d=vp(d,"width",a)),Dp[o]&&s.style.height&&p.height!==c&&(d=vp(d,"height",c)),d=function(e,t,n,r){var o=e.state.doc.nodeAt(n),i=Sp(e.nodeDOM(n)),s=(i.ownerDocument&&i.ownerDocument.defaultView||window).getComputedStyle,l=Array.from(i.rows);o.forEach((function(e,r,o){var i=Ur(e.attrs.style).height;i&&!/px$/.test(i)&&t.setNodeMarkup(n+r+1,null,vp(e.attrs,"height",s(l[o]).height))}));var a=i.firstChild,c=Array.from(a&&a.children||[]),u=!1;c.forEach((function(e,t){e.style.width&&!/px$/.test(e.style.width)&&(e.style.width=s(c[t]).width,u=!0)}));var d=Je({},r);return u&&(d[Dr]=a.outerHTML),d}(e,u,r,d),u.setNodeMarkup(r,null,d),u.setMeta("commandName","node-resize"),u.setMeta("args",d),u.setMeta(yp,{setDragging:null,activeHandle:null,nodePosition:r}),!/%/.test(Ur(d.style).width||"")){var h=u.doc.resolve(r),f=Op(h,(function(e){return"table_wrapper"===e.type.name}));if(f&&/%/.test(Ur(f.node.attrs.style).width||"")){var m=vp(f.node.attrs,"width",""),g=h.start(f.depth)-1;u.setNodeMarkup(g,null,m)}}e.dispatch(u)}}}(e)})),i.addEventListener("mousemove",s),!0},zp=function(){function e(){}return e.prototype.ignoreMutation=function(e){return"attributes"===e.type&&"style"===e.attributeName&&"TR"===e.target.nodeName},e}();function Bp(){var e=new Mr({key:wp,state:{init:function(e,t){return this.spec.props.nodeViews[yc(t.schema).row.name]=function(e,t){return new zp},new Lp(-1,null)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return xp(wp,e)?null:wp.getState(e).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(e,t){return kp(wp,e.state)||function(e,t){var n=wp.getState(e.state);if(!n.dragging){var r=Cp(t.target),o=-1;if(r){var i=Ep(r),s=r.getBoundingClientRect(),l=s.top,a=s.bottom;Math.abs(t.clientY-l)<=5&&i.rowIndex>0?(i.rowIndex-=r.rowSpan,o=Tp(e,t,i)):a-t.clientY>0&&a-t.clientY<=5&&(o=Tp(e,t,i))}o!==n.activeHandle&&jp(e,o)}}(e,t),!1},mouseleave:function(e){return function(e){var t=wp.getState(e.state);t.activeHandle>-1&&!t.dragging&&jp(e,-1)}(e),!1},mousedown:function(e,t){return function(e,t){var n=wp.getState(e.state);if(-1===n.activeHandle||n.dragging)return!1;var r=e.state.doc.resolve(n.activeHandle),o=r.parent,i=r.node(-1),s=Ur(o.attrs.style).height,l=Ur(i.attrs.style).height,a=s?parseFloat(s):0;function c(t){t.view.removeEventListener("mouseup",c),t.view.removeEventListener("mousemove",u);var n=wp.getState(e.state);if(n.dragging){var r=e.state.tr.setMeta(wp,{setDragging:null});!function(e,t,n){var r=e.state.doc,o=r.resolve(n),i=o.parent,s=o.posAtIndex(0)-1,l=e.nodeDOM(s),a=l.ownerDocument&&l.ownerDocument.defaultView||window;l.style.height=a.getComputedStyle(l).height,t.setNodeMarkup(s,null,vp(i.attrs,"height",l.style.height));var c=l&&l.closest("table"),u=c&&c.style.height;if(u){var d=r.resolve(s),p=d.start(d.depth)-1;t.setNodeMarkup(p,null,vp(d.parent.attrs,"height",u))}}(e,r,n.activeHandle),e.dispatch(r)}}function u(t){if(!t.which)return c(t);var n=wp.getState(e.state),r=function(e,t){var n=t.clientY-e.startY;return e.startHeight.rowHeight+n}(n.dragging,t),o=t.clientY-n.dragging.startY;!function(e,t,n,r,o){var i=e.nodeDOM(t),s=i&&i.parentNode;if(s){s.style.height=n+"px";var l=s.ownerDocument&&s.ownerDocument.defaultView||window;s.style.height=l.getComputedStyle(s).height;var a=s.closest("table"),c=parseFloat(o)+r+"px",u=a&&a.style.height;u&&u!==c&&(a.style.height=parseFloat(o)+r+"px",a.style.height=l.getComputedStyle(a).height)}}(e,n.activeHandle,r,o,l)}return s||(a=e.nodeDOM(n.activeHandle).offsetHeight),e.dispatch(e.state.tr.setMeta(wp,{setDragging:{startY:t.clientY,startHeight:{rowHeight:a,tableHeight:l}}})),t.view.addEventListener("mouseup",c),t.view.addEventListener("mousemove",u),t.preventDefault(),!0}(e,t)}},decorations:function(e){if(kp(wp,e))return Ta.empty;var t=wp.getState(e);return t.activeHandle>-1?function(e,t){var n=[];if("number"!=typeof t)return Ta.empty;for(var r=e.doc.resolve(t),o=r.node(-1),i=hc.get(o),s=r.start(-1),l=[],a=t-s,c=-1,u=0;u<i.height;u++)l.push(i.map.slice(u*i.width,u*i.width+i.width)),-1!==l[u].indexOf(a)&&(c=u);var d=[];return l[c].forEach((function(e,t){l[c+1]&&e===l[c+1][t]||d.push(e)})),d.forEach((function(e){var t=o.nodeAt(e),r=s+e+(t?t.nodeSize:0)-1,i=document.createElement("div");i.className="row-resize-handle",n.push(Ca.widget(r,i))})),Ta.create(e.doc,n)}(e,t.activeHandle):void 0},nodeViews:{}}});return e}var Lp=function(){function e(e,t){this.activeHandle=e,this.dragging=t}return e.prototype.apply=function(t){var n,r=this,o=t.getMeta(wp);if(o&&null!=o.setHandle)return new e(o.setHandle,null);if(o&&void 0!==o.setDragging)return new e(r.activeHandle,o.setDragging);if(r.activeHandle>-1){var i=t.mapping.map(r.activeHandle,-1);"row"===(n=t.doc.resolve(i)).parent.type.spec.tableRole&&n.nodeAfter||(i=null),r=new e(i,r.dragging)}return r},e}();function jp(e,t){var n=e.state.tr;n.setMeta("addToHistory",!1),n.setMeta(wp,{setHandle:t}),e.dispatch(n)}function Hp(e={}){return new Mr({view:t=>new Vp(t,e)})}class Vp{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t)))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let o=t.getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,o,i=this.editorView.dom.offsetParent;if(this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!i||i==document.body&&"static"==getComputedStyle(i).position)r=-pageXOffset,o=-pageYOffset;else{let e=i.getBoundingClientRect();r=e.left-i.scrollLeft,o=e.top-i.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-o+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Jn(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class $p extends cr{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return $p.valid(n)?new $p(n):cr.near(n)}content(){return Et.empty}eq(e){return e instanceof $p&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new $p(e.resolve(t.pos))}getBookmark(){return new Wp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&$p.valid(e))return e;let r=e.pos,o=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){o=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if($p.valid(s))return s}for(;;){let i=t>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!mr.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=i,r+=t;let s=e.doc.resolve(r);if($p.valid(s))return s}return null}}}$p.prototype.visible=!1,$p.findFrom=$p.findGapCursorFrom,cr.jsonID("gapcursor",$p);class Wp{constructor(e){this.pos=e}map(e){return new Wp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return $p.valid(t)?new $p(t):cr.near(t)}}function Up(){return new Mr({props:{decorations:Xp,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&$p.valid(n)?new $p(n):null,handleClick:Jp,handleKeyDown:qp,handleDOMEvents:{beforeinput:Gp}}})}const qp=uc({ArrowLeft:Kp("horiz",-1),ArrowRight:Kp("horiz",1),ArrowUp:Kp("vert",-1),ArrowDown:Kp("vert",1)});function Kp(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let i=e.selection,s=t>0?i.$to:i.$from,l=i.empty;if(i instanceof hr){if(!o.endOfTextblock(n)||0==s.depth)return!1;l=!1,s=e.doc.resolve(t>0?s.after():s.before())}let a=$p.findGapCursorFrom(s,t,l);return!!a&&(r&&r(e.tr.setSelection(new $p(a))),!0)}}function Jp(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!$p.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&mr.isSelectable(e.state.doc.nodeAt(o.inside))||(e.dispatch(e.state.tr.setSelection(new $p(r))),0))}function Gp(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof $p))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=bt.empty;for(let s=r.length-1;s>=0;s--)o=bt.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new Et(o,0,0));return i.setSelection(hr.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function Xp(e){if(!(e.selection instanceof $p))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ta.create(e.doc,[Ca.widget(e.selection.head,t,{key:"gapcursor"})])}var Yp,Qp,Zp,eh,th=function(e,t,n){for(var r,o=e.table,i=e.table_row,s=e.table_cell,l=[],a=0;a<t+1;a++){r=[];for(var c=0;c<n+1;c++)r.push(s.createAndFill());l.push(i.createAndFill(void 0,r))}return o.createAndFill(void 0,l)},nh=/^table$/,rh=/^table_row$/,oh=/^table_cell|table_header$/,ih=function(e,t){for(var n=e.$head,r=n.depth;r>0;r--){var o=n.node(r);if(t.test(o.type.name))return{pos:n.before(r),node:o}}return null},sh=function(e,t){var n=t&&function(e){var n,r=ih(e.selection,rh),o=ih(e.selection,nh);if(r&&o&&r.node.attrs[Rr]){for(var i=0,s=0;s<o.node.nodeSize;s++)if(o.node.child(s).eq(r.node)){i=s;break}var l=o.node.child(i-1),a=r.pos-l.nodeSize;e.setNodeMarkup(a,void 0,((n={})[Rr]=r.node.attrs[Rr],n))}return t(e)};return function(e,t){if(!kc(e))return!1;if(t){const n=lu(e);t(du(e.tr,n,n.top))}return!0}(e,n)},lh=function(e,t){return function(e,t){if(!kc(e))return!1;if(t){const n=lu(e);t(du(e.tr,n,n.bottom))}return!0}(e,t&&function(e){var n,r=ih(e.selection,rh);if(r&&r.node.attrs[Rr]){var o=r.pos+r.node.nodeSize;e.setNodeMarkup(o,void 0,((n={})[Rr]=r.node.attrs[Rr],n))}return t(e)})},ah=function(e,t){if(!e)return-1;var n=hc.get(e.node),r=ih(t,oh),o=n.map.indexOf(r.pos-e.pos-1),i=-1;return-1!==o&&(i=o%n.width),i},ch=function(e,t,n){var r,o=ah(t,e.selection),i=Wu(t.node.attrs[Dr]);i.insertBefore(i.ownerDocument.createElement("col"),i.children[o+n]),e.setNodeMarkup(t.pos,null,Je(Je({},t.node.attrs),((r={})[Dr]=i.outerHTML,r)))},uh=function(e,t){return function(e,t){if(!kc(e))return!1;if(t){const n=lu(e);t(au(e.tr,n,n.left))}return!0}(e,t&&function(e){var n=ih(e.selection,nh);return n.node.attrs[Dr]?(ch(e,n,-1),t(e)):t(e)})},dh=function(e,t){return function(e,t){if(!kc(e))return!1;if(t){const n=lu(e);t(au(e.tr,n,n.right))}return!0}(e,t&&function(e){var n=ih(e.selection,nh);return n.node.attrs[Dr]?(ch(e,n,1),t(e)):t(e)})},ph=function(e,t){var n=ih(e.selection,nh),r=n&&n.node.attrs[Dr],o=ah(n,e.selection),i=t&&function(e){if(!r)return t(e);var i=e.doc.nodeAt(n.pos);return function(e,t,n){var r,o=Wu(t.node.attrs[Dr]);o.removeChild(o.children[n]),e.setNodeMarkup(t.pos,null,Je(Je({},t.node.attrs),((r={})[Dr]=o.outerHTML,r)))}(e,{node:i,pos:n.pos},o),t(e)};return function(e,t){if(!kc(e))return!1;if(t){const n=lu(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;cu(r,n,e),e!=n.left;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=hc.get(e)}t(r)}return!0}(e,i)},hh='\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  word-wrap: break-word;\n  padding: 8px;\n}\n\nbody > .k-content {\n  outline: 0;\n  height: 100%;\n  white-space: pre-wrap;\n}\n\n.k-content > p {\n  margin: 0 0 1em;\n}\n\n.k-content table {\n  white-space: pre-wrap;\n}\n\n.k-content .k-text-selected, .k-content::selection {\n  color: HighlightText;\n  background-color: Highlight;\n}\n\n.k-content .k-text-highlighted {\n  background-color: #bbdefb;\n}\n\n.k-content .ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n',fh='\n  .ProseMirror .tableWrapper {\n    overflow-x: auto;\n    margin: 1em 0;\n  }\n\n  .ProseMirror table {\n    margin: 0;\n    border-collapse: collapse;\n    table-layout: fixed;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  .ProseMirror td, .ProseMirror th {\n    min-width: 1em;\n    border: 1px solid #ddd;\n    padding: 3px 5px;\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .ProseMirror th {\n    font-weight: bold;\n    text-align: left;\n  }\n\n  /* Give selected cells a blue overlay */\n  .ProseMirror .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n',mh="editor.bold",gh="editor.italic",vh="editor.underline",yh="editor.strikethrough",bh="editor.subscript",wh="editor.superscript",kh="editor.hyperlink",xh="editor.insertFile",Sh="editor.print",Ch="editor.selectAll",Eh="editor.cleanFormatting",Oh="editor.pdf",Th="editor.foregroundColor",Mh="editor.backgroundColor",Ah="editor.createTable",Nh="editor.insertTableHint",Ph="editor.addRowBefore",Rh="editor.addRowAfter",Dh="editor.addColumnBefore",Ih="editor.addColumnAfter",_h="editor.deleteRow",Fh="editor.deleteColumn",zh="editor.deleteTable",Bh="editor.mergeCells",Lh="editor.splitCell",jh="editor.hyperlink-dialog-title",Hh="editor.hyperlink-dialog-content-address",Vh="editor.hyperlink-dialog-content-title",$h="editor.hyperlink-dialog-content-newwindow",Wh="editor.hyperlink-dialog-cancel",Uh="editor.hyperlink-dialog-insert",qh="editor.insertfile-dialog-title",Kh="editor.insertfile-dialog-content-address",Jh="editor.insertfile-dialog-content-title",Gh="editor.insertfile-dialog-cancel",Xh="editor.insertfile-dialog-insert",Yh="editor.image",Qh="editor.image-dialog-title",Zh="editor.image-address",ef="editor.image-title",tf="editor.image-altText",nf="editor.image-width",rf="editor.image-height",of="editor.image-cancel",sf="editor.image-insert",lf="editor.viewHtml",af="editor.viewHtml-dialog-title",cf="editor.viewHtml-cancel",uf="editor.viewHtml-update",df="editor.unlink",pf="editor.undo",hf="editor.redo",ff="editor.fontSize",mf="editor.fontName",gf="editor.format",vf="editor.alignLeft",yf="editor.alignRight",bf="editor.alignCenter",wf="editor.alignJustify",kf="editor.indent",xf="editor.outdent",Sf="editor.orderedList",Cf="editor.bulletList",Ef="editor.findReplace-tool-title",Of="editor.findReplace-dialog-title",Tf="editor.findReplace-tab-find",Mf="editor.findReplace-tab-replace",Af="editor.findReplace-findWhat",Nf="editor.findReplace-replaceWith",Pf="editor.findReplace-replace",Rf="editor.findReplace-replaceAll",Df="editor.findReplace-matchCase",If="editor.findReplace-matchWord",_f="editor.findReplace-matchCyclic",Ff="editor.findReplace-useRegExp",zf="editor.findReplace-prevMatch",Bf="editor.findReplace-nextMatch",Lf="editor.findReplace-matches",jf="editor.iframeTitle",Hf="editorTools.foreColorLabel",Vf="editorTools.backColorLabel",$f="editor.cellProperties",Wf="editor.cellPropertiesLeftTop",Uf="editor.cellPropertiesCenterTop",qf="editor.cellPropertiesRightTop",Kf="editor.cellPropertiesLeftMiddle",Jf="editor.cellPropertiesCenterMiddle",Gf="editor.cellPropertiesRightMiddle",Xf="editor.cellPropertiesLeftBottom",Yf="editor.cellPropertiesCenterBottom",Qf="editor.cellPropertiesRightBottom",Zf="editor.cellPropertiesNoAlignment",em="editor.cellPropertiesWrap",tm="editor.cellPropertiesFitToCell",nm="editor.cellPropertiesApplyToAllCells",rm="editor.cellPropertiesWidth",om="editor.cellPropertiesApplyToColumn",im="editor.cellPropertiesHeight",sm="editor.cellPropertiesApplyToRow",lm="editor.cellPropertiesAlignment",am="editor.cellPropertiesTextControl",cm="editor.cellPropertiesCellPadding",um="editor.cellPropertiesBackground",dm="editor.cellPropertiesBorderWidth",pm="editor.cellPropertiesBorderColor",hm="editor.cellPropertiesBorderStyle",fm="editor.cellPropertiesId",mm="editor.cellPropertiesCssClass",gm="editor.cellPropertiesSave",vm="editor.cellPropertiesCancel",ym="editor.tableProperties",bm="editor.tablePropertiesAlignLeft",wm="editor.tablePropertiesAlignCenter",km="editor.tablePropertiesAlignRight",xm="editor.tablePropertiesNoAlignment",Sm="editor.tablePropertiesLeft",Cm="editor.tablePropertiesCenter",Em="editor.tablePropertiesRight",Om="editor.tablePropertiesTop",Tm="editor.tablePropertiesBottom",Mm="editor.tablePropertiesNone",Am="editor.tablePropertiesUsingScopeAttribute",Nm="editor.tablePropertiesUsingIdAttributes",Pm="editor.tablePropertiesRows",Rm="editor.tablePropertiesColumns",Dm="editor.tablePropertiesWidth",Im="editor.tablePropertiesHeight",_m="editor.tablePropertiesPosition",Fm="editor.tablePropertiesAlignment",zm="editor.tablePropertiesCellSpacing",Bm="editor.tablePropertiesCellPadding",Lm="editor.tablePropertiesTableBackground",jm="editor.tablePropertiesBorderWidth",Hm="editor.tablePropertiesBorderColor",Vm="editor.tablePropertiesBorderStyle",$m="editor.tablePropertiesCollapseBorders",Wm="editor.tablePropertiesID",Um="editor.tablePropertiesCssClass",qm="editor.tablePropertiesAccessibility",Km="editor.tablePropertiesCaption",Jm="editor.tablePropertiesCaptionPosition",Gm="editor.tablePropertiesCaptionAlignment",Xm="editor.tablePropertiesHeaderRows",Ym="editor.tablePropertiesHeaderCols",Qm="editor.tablePropertiesAssociateHeaders",Zm="editor.tablePropertiesGeneral",eg="editor.tablePropertiesAdvanced",tg="editor.tablePropertiesSave",ng="editor.tablePropertiesCancel",rg="editor.borderStyleNone",og="editor.borderStyleSolid",ig="editor.borderStyleDotted",sg="editor.borderStyleDashed",lg="editor.borderStyleDouble",ag="editor.borderStyleGroove",cg="editor.borderStyleRidge",ug="editor.borderStyleInset",dg="editor.borderStyleOutset",pg="editor.borderStyleInitial",hg="editor.borderStyleInherit",fg="editor.borderStyleHidden",mg="editor.sizeAuto",gg=((Yp={})[mh]="Bold",Yp[gh]="Italic",Yp[vh]="Underline",Yp[yh]="Strikethrough",Yp[bh]="Subscript",Yp[wh]="Superscript",Yp[df]="Remove hyperlink",Yp[pf]="Undo",Yp[hf]="Redo",Yp[ff]="Font Size",Yp[mf]="Font Name",Yp[gf]="Format",Yp[vf]="Align text left",Yp[yf]="Align text right",Yp[bf]="Center text",Yp[wf]="Justify",Yp[kf]="Indent",Yp[xf]="Outdent",Yp[Sf]="Insert ordered list",Yp[Cf]="Insert unordered list",Yp[Sh]="Print",Yp[Ch]="Select All",Yp[Eh]="Clean formatting",Yp[Oh]="Export as PDF",Yp[Th]="Color",Yp[Mh]="Background color",Yp[Ah]="Create a table",Yp[Nh]="Create a {0} x {1} table",Yp[Ph]="Add row above",Yp[Rh]="Add row below",Yp[Dh]="Add column on the left",Yp[Ih]="Add column on the right",Yp[_h]="Delete row",Yp[Fh]="Delete column",Yp[zh]="Delete table",Yp[Bh]="Merge cells",Yp[Lh]="Split cell",Yp[kh]="Insert hyperlink",Yp[jh]="Insert hyperlink",Yp[Hh]="Web address",Yp[Vh]="Title",Yp[$h]="Open link in new window",Yp[Wh]="Cancel",Yp[Uh]="Insert",Yp[xh]="Insert file",Yp[qh]="Insert file",Yp[Kh]="Web address",Yp[Jh]="Title",Yp[Gh]="Cancel",Yp[Xh]="Insert",Yp[Yh]="Insert image",Yp[Qh]="Insert image",Yp[Zh]="Web address",Yp[ef]="Title",Yp[tf]="Alternate text",Yp[nf]="Width (px)",Yp[rf]="Height (px)",Yp[of]="Cancel",Yp[sf]="Insert",Yp[lf]="View HTML",Yp[af]="View HTML",Yp[cf]="Cancel",Yp[uf]="Update",Yp[Ef]="Find and Replace",Yp[Of]="Find and Replace",Yp[Tf]="Find",Yp[Mf]="Replace",Yp[Af]="Find What:",Yp[Nf]="Replace With",Yp[Pf]="Replace",Yp[Rf]="Replace All",Yp[Df]="Match Case",Yp[If]="Match whole word only",Yp[_f]="Match cyclic (Wrap around)",Yp[Ff]="Regular Expression",Yp[zf]="Prev",Yp[Bf]="Next",Yp[Lf]="{0} of {1} matches",Yp[jf]="Editable area. Press Alt + F10 for toolbar.",Yp[Hf]="Fore Color",Yp[Vf]="Back Color",Yp[$f]="Cell properties",Yp[Wf]="Left Top",Yp[Uf]="Center Top",Yp[qf]="Right Top",Yp[Kf]="Left Middle",Yp[Jf]="Center Middle",Yp[Gf]="Right Middle",Yp[Xf]="Left Bottom",Yp[Yf]="Center Bottom",Yp[Qf]="Right Bottom",Yp[Zf]="No Alignment",Yp[em]="Wrap",Yp[tm]="Fit to cell",Yp[nm]="Apply to all cells",Yp[rm]="Width",Yp[om]="apply to column",Yp[im]="Height",Yp[sm]="apply to row",Yp[lm]="Alignment",Yp[am]="Text control",Yp[cm]="Cell padding",Yp[um]="Background",Yp[dm]="Border width",Yp[pm]="Border color",Yp[hm]="Border style",Yp[fm]="ID",Yp[mm]="CSS class",Yp[gm]="Save",Yp[vm]="Cancel",Yp[ym]="Table properties",Yp[bm]="Align Left",Yp[wm]="Align Center",Yp[km]="Align Right",Yp[xm]="No Alignment",Yp[Sm]="Left",Yp[Cm]="Center",Yp[Em]="Right",Yp[Om]="Top",Yp[Tm]="Bottom",Yp[Mm]="None",Yp[Am]="Using 'scope' attribute",Yp[Nm]="Using 'id' attributes",Yp[Pm]="Rows",Yp[Rm]="Columns",Yp[Dm]="Width",Yp[Im]="Height",Yp[_m]="Position",Yp[Fm]="Alignment",Yp[zm]="Cell spacing",Yp[Bm]="Cell padding",Yp[Lm]="Table background",Yp[jm]="Border width",Yp[Hm]="Border color",Yp[Vm]="Border style",Yp[$m]="Collapse borders",Yp[Wm]="ID",Yp[Um]="CSS class",Yp[qm]="Accessibility",Yp[Km]="Caption",Yp[Jm]="Position",Yp[Gm]="Alignment",Yp[Xm]="Header rows",Yp[Ym]="Header cols",Yp[Qm]="Associate headers",Yp[Zm]="General",Yp[eg]="Advanced",Yp[tg]="Save",Yp[ng]="Cancel",Yp[rg]="None",Yp[og]="Solid",Yp[ig]="Dotted",Yp[sg]="Dashed",Yp[lg]="Double",Yp[ag]="Groove",Yp[cg]="Ridge",Yp[ug]="Inset",Yp[dg]="Outset",Yp[pg]="Initial",Yp[hg]="Inherit",Yp[fg]="Hidden",Yp[mg]="Auto",Yp),vg={bold:mh,italic:gh,underline:vh,strikethrough:yh,subscript:bh,superscript:wh,unlink:df,undo:pf,redo:hf,fontSize:ff,fontName:mf,format:gf,alignLeft:vf,alignRight:yf,alignCenter:bf,alignJustify:wf,indent:kf,outdent:xf,orderedList:Sf,bulletList:Cf,print:Sh,selectAll:Ch,cleanFormatting:Eh,pdf:Oh,foregroundColor:Th,backgroundColor:Mh,createTable:Ah,createTableHint:Nh,addRowBefore:Ph,addRowAfter:Rh,addColumnBefore:Dh,addColumnAfter:Ih,deleteRow:_h,deleteColumn:Fh,deleteTable:zh,mergeCells:Bh,splitCell:Lh,insertHyperlink:kh,insertHyperlinkDialogTitle:jh,insertHyperlinkAddress:Hh,insertHyperlinkTitle:Vh,insertHyperlinkNewWindow:$h,insertHyperlinkCancel:Wh,insertHyperlinkInsert:Uh,insertFile:xh,insertFileDialogTitle:qh,insertFileAddress:Kh,insertFileTitle:Jh,insertFileCancel:Gh,insertFileInsert:Xh,insertImage:Yh,insertImageDialogTitle:Qh,insertImageAddress:Zh,insertImageTitle:ef,insertImageAltText:tf,insertImageWidth:nf,insertImageHeight:rf,insertImageCancel:of,insertImageInsert:sf,viewHtml:lf,viewHtmlDialogTitle:af,viewHtmlCancel:cf,viewHtmlUpdate:uf,findReplaceToolTitle:Ef,findReplaceDialogTitle:Of,findReplaceTabFind:Tf,findReplaceTabReplace:Mf,findReplaceFindWhat:Af,findReplaceReplaceWith:Nf,findReplaceReplace:Pf,findReplaceReplaceAll:Rf,findReplaceMatchCase:Df,findReplaceMatchWord:If,findReplaceMatchCyclic:_f,findReplaceUseRegExp:Ff,findReplacePrevMatch:zf,findReplaceNextMatch:Bf,findReplaceMatches:Lf,iframeTitle:jf,foreColorLabel:Hf,backColorLabel:Vf,cellProperties:$f,cellPropertiesLeftTop:Wf,cellPropertiesCenterTop:Uf,cellPropertiesRightTop:qf,cellPropertiesLeftMiddle:Kf,cellPropertiesCenterMiddle:Jf,cellPropertiesRightMiddle:Gf,cellPropertiesLeftBottom:Xf,cellPropertiesCenterBottom:Yf,cellPropertiesRightBottom:Qf,cellPropertiesNoAlignment:Zf,cellPropertiesWrap:em,cellPropertiesFitToCell:tm,cellPropertiesApplyToAllCells:nm,cellPropertiesWidth:rm,cellPropertiesApplyToColumn:om,cellPropertiesHeight:im,cellPropertiesApplyToRow:sm,cellPropertiesAlignment:lm,cellPropertiesTextControl:am,cellPropertiesCellPadding:cm,cellPropertiesBackground:um,cellPropertiesBorderWidth:dm,cellPropertiesBorderColor:pm,cellPropertiesBorderStyle:hm,cellPropertiesId:fm,cellPropertiesCssClass:mm,cellPropertiesSave:gm,cellPropertiesCancel:vm,tableProperties:ym,tablePropertiesAlignLeft:bm,tablePropertiesAlignCenter:wm,tablePropertiesAlignRight:km,tablePropertiesNoAlignment:xm,tablePropertiesLeft:Sm,tablePropertiesCenter:Cm,tablePropertiesRight:Em,tablePropertiesTop:Om,tablePropertiesBottom:Tm,tablePropertiesNone:Mm,tablePropertiesUsingScopeAttribute:Am,tablePropertiesUsingIdAttributes:Nm,tablePropertiesRows:Pm,tablePropertiesColumns:Rm,tablePropertiesWidth:Dm,tablePropertiesHeight:Im,tablePropertiesPosition:_m,tablePropertiesAlignment:Fm,tablePropertiesCellSpacing:zm,tablePropertiesCellPadding:Bm,tablePropertiesTableBackground:Lm,tablePropertiesBorderWidth:jm,tablePropertiesBorderColor:Hm,tablePropertiesBorderStyle:Vm,tablePropertiesCollapseBorders:$m,tablePropertiesId:Wm,tablePropertiesCssClass:Um,tablePropertiesAccessibility:qm,tablePropertiesCaption:Km,tablePropertiesCaptionPosition:Jm,tablePropertiesCaptionAlignment:Gm,tablePropertiesHeaderRows:Xm,tablePropertiesHeaderCols:Ym,tablePropertiesAssociateHeaders:Qm,tablePropertiesGeneral:Zm,tablePropertiesAdvanced:eg,tablePropertiesSave:tg,tablePropertiesCancel:ng,borderStyleNone:rg,borderStyleSolid:og,borderStyleDotted:ig,borderStyleDashed:sg,borderStyleDouble:lg,borderStyleGroove:ag,borderStyleRidge:cg,borderStyleInset:ug,borderStyleOutset:dg,borderStyleInitial:pg,borderStyleInherit:hg,borderStyleHidden:fg,sizeAuto:mg},yg=globalThis&&globalThis.__assign||function(){return yg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yg.apply(this,arguments)},bg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},wg=yg({},Go.listsTypes);eh={type:"button"},(Zp=Qp||(Qp={})).bold=yg(yg({},{mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}}),{props:yg({icon:"bold",svgIcon:d},eh),messages:{title:vg.bold},commandName:"Bold"}),Zp.italic=yg(yg({},{mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}}),{props:yg({icon:"italic",svgIcon:p},eh),messages:{title:vg.italic},commandName:"Italic"}),Zp.underline=yg(yg({},{mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}}),{props:yg({icon:"underline",svgIcon:h},eh),messages:{title:vg.underline},commandName:"Underline"}),Zp.strikethrough=yg(yg({},{mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}}),{props:yg({icon:"strikethrough",svgIcon:f},eh),messages:{title:vg.strikethrough},commandName:"Strikethrough"}),Zp.subscript=yg(yg({},{mark:"sub"}),{props:yg({icon:"subscript",svgIcon:m},eh),messages:{title:vg.subscript},commandName:"Subscript"}),Zp.superscript=yg(yg({},{mark:"sup"}),{props:yg({icon:"supscript",svgIcon:g},eh),messages:{title:vg.superscript},commandName:"Superscript"}),Zp.link=yg(yg({},Td),{props:yg({icon:"link",svgIcon:v},eh),messages:{insertHyperlink:vg.insertHyperlink,insertHyperlinkDialogTitle:vg.insertHyperlinkDialogTitle,insertHyperlinkAddress:vg.insertHyperlinkAddress,insertHyperlinkTitle:vg.insertHyperlinkTitle,insertHyperlinkNewWindow:vg.insertHyperlinkNewWindow,insertHyperlinkCancel:vg.insertHyperlinkCancel,insertHyperlinkInsert:vg.insertHyperlinkInsert},commandName:"Link"}),Zp.insertFile=yg(yg({},Td),{props:yg({icon:"file-add",svgIcon:y},eh),messages:{insertHyperlink:vg.insertFile,insertHyperlinkDialogTitle:vg.insertFileDialogTitle,insertHyperlinkAddress:vg.insertFileAddress,insertHyperlinkTitle:vg.insertFileTitle,insertHyperlinkNewWindow:"",insertHyperlinkCancel:vg.insertFileCancel,insertHyperlinkInsert:vg.insertFileInsert},commandName:"InsertFile",linkTarget:!1}),Zp.insertTable={props:yg({icon:"table-add",svgIcon:b},eh),messages:{createTable:vg.createTable,createTableHint:vg.createTableHint},commandName:"InsertTable"},Zp.addRowBefore={props:yg({icon:"table-row-insert-above",svgIcon:w},eh),messages:{title:vg.addRowBefore},commandName:"AddRowBefore"},Zp.addRowAfter={props:yg({icon:"table-row-insert-below",svgIcon:k},eh),messages:{title:vg.addRowAfter},commandName:"AddRowAfter"},Zp.addColumnBefore={props:yg({icon:"table-column-insert-left",svgIcon:x},eh),messages:{title:vg.addColumnBefore},commandName:"AddColumnBefore"},Zp.addColumnAfter={props:yg({icon:"table-column-insert-right",svgIcon:S},eh),messages:{title:vg.addColumnAfter},commandName:"AddColumnAfter"},Zp.deleteRow={props:yg({icon:"table-row-delete",svgIcon:C},eh),messages:{title:vg.deleteRow},commandName:"DeleteRow"},Zp.deleteColumn={props:yg({icon:"table-column-delete",svgIcon:E},eh),messages:{title:vg.deleteColumn},commandName:"DeleteColumn"},Zp.deleteTable={props:yg({icon:"table-delete",svgIcon:O},eh),messages:{title:vg.deleteTable},commandName:"DeleteTable"},Zp.mergeCells={props:yg({icon:"cells-merge",svgIcon:T},eh),messages:{title:vg.mergeCells},commandName:"MergeCells"},Zp.splitCell={props:yg({icon:"cell-split-horizontally",svgIcon:M},eh),messages:{title:vg.splitCell},commandName:"SplitCell"},Zp.print={props:yg({icon:"print",svgIcon:A},eh),messages:{title:vg.print}},Zp.selectAll={props:yg({icon:"select-all",svgIcon:N},eh),messages:{title:vg.selectAll}},Zp.pdf={props:yg({icon:"file-pdf",svgIcon:P},eh),messages:{title:vg.pdf}},Zp.savePdfOptions={fileName:"editor.pdf",paperSize:"A4",margin:"1cm"},Zp.cleanFormatting={props:yg({icon:"clear-css",svgIcon:R},eh),messages:{title:vg.cleanFormatting},commandName:"CleanFormatting"},Zp.image={node:"image",props:yg({icon:"image",svgIcon:D},eh),messages:{insertImage:vg.insertImage,insertImageDialogTitle:vg.insertImageDialogTitle,insertImageAddress:vg.insertImageAddress,insertImageTitle:vg.insertImageTitle,insertImageAltText:vg.insertImageAltText,insertImageWidth:vg.insertImageWidth,insertImageHeight:vg.insertImageHeight,insertImageCancel:vg.insertImageCancel,insertImageInsert:vg.insertImageInsert},commandName:"InsertImage"},Zp.viewHtml={props:yg({icon:"code",svgIcon:I},eh),messages:{viewHtml:vg.viewHtml,viewHtmlDialogTitle:vg.viewHtmlDialogTitle,viewHtmlCancel:vg.viewHtmlCancel,viewHtmlUpdate:vg.viewHtmlUpdate},commandName:"SetContent"},Zp.findAndReplace={props:yg({icon:"find",svgIcon:_},eh),messages:{findReplaceToolTitle:vg.findReplaceToolTitle,findReplaceDialogTitle:vg.findReplaceDialogTitle,findReplaceTabFind:vg.findReplaceTabFind,findReplaceTabReplace:vg.findReplaceTabReplace,findReplaceFindWhat:vg.findReplaceFindWhat,findReplaceReplaceWith:vg.findReplaceReplaceWith,findReplaceReplace:vg.findReplaceReplace,findReplaceReplaceAll:vg.findReplaceReplaceAll,findReplaceMatchCase:vg.findReplaceMatchCase,findReplaceMatchWord:vg.findReplaceMatchWord,findReplaceMatchCyclic:vg.findReplaceMatchCyclic,findReplaceUseRegExp:vg.findReplaceUseRegExp,findReplacePrevMatch:vg.findReplacePrevMatch,findReplaceNextMatch:vg.findReplaceNextMatch,findReplaceMatches:vg.findReplaceMatches}},Zp.unlink=yg(yg({},Td),{props:yg({icon:"unlink",svgIcon:F},eh),messages:{title:vg.unlink},commandName:"Unlink"}),Zp.undo={props:yg({icon:"undo",svgIcon:z},eh),messages:{title:vg.undo},commandName:"Undo"},Zp.redo={props:yg({icon:"redo",svgIcon:B},eh),messages:{title:vg.redo},commandName:"Redo"},Zp.fontSize={style:"font-size",defaultItem:{text:gg[vg.fontSize],value:"",localizationKey:vg.fontSize},items:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],commandName:"FontSize"},Zp.fontName={style:"font-family",defaultItem:{text:gg[vg.fontName],value:"",localizationKey:vg.fontName},items:[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}],commandName:"FontName"},Zp.formatBlock={defaultItem:{text:gg[vg.format],value:"",localizationKey:vg.format},items:[{text:"Paragraph",value:"p",style:{display:"block",marginLeft:0}},{text:"Heading 1",value:"h1",style:{display:"block",fontSize:"2em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 2",value:"h2",style:{display:"block",fontSize:"1.5em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 3",value:"h3",style:{display:"block",fontSize:"1.17em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 4",value:"h4",style:{display:"block",fontSize:"1em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 5",value:"h5",style:{display:"block",fontSize:"0.83em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 6",value:"h6",style:{display:"block",fontSize:"0.67em",marginLeft:0,fontWeight:"bold"}}],commandName:"FormatBlock"},Zp.foreColor={style:"color",colorPickerProps:{icon:"foreground-color",svgIcon:L,view:"palette",title:vg.foregroundColor,ariaLabel:vg.foreColorLabel},commandName:"ForeColor"},Zp.backColor={style:"background-color",colorPickerProps:{icon:"droplet",svgIcon:j,view:"palette",title:vg.backgroundColor,ariaLabel:vg.backColorLabel},commandName:"BackColor"},Zp.alignLeft={actions:bg([],$i,!0),props:yg({icon:"align-left",svgIcon:H},eh),messages:{title:vg.alignLeft},commandName:"AlignLeft"},Zp.alignRight={actions:bg([],Wi,!0),props:yg({icon:"align-right",svgIcon:V},eh),messages:{title:vg.alignRight},commandName:"AlignRight"},Zp.alignCenter={actions:bg([],Ui,!0),props:yg({icon:"align-center",svgIcon:$},eh),messages:{title:vg.alignCenter},commandName:"AlignCenter"},Zp.alignJustify={actions:bg([],qi,!0),props:yg({icon:"align-justify",svgIcon:W},eh),messages:{title:vg.alignJustify},commandName:"AlignJustify"},Zp.alignRemove={actions:bg([],Ki,!0),props:yg({icon:"align-remove",svgIcon:U},eh),messages:{},commandName:"AlignRemove"},Zp.indent={actions:Go.nodes,listsTypes:wg,props:yg({icon:"indent",svgIcon:q},eh),messages:{title:vg.indent},commandName:"Indent"},Zp.outdent={actions:Xo.nodes,listsTypes:wg,props:yg({icon:"outdent",svgIcon:K},eh),messages:{title:vg.outdent},commandName:"Outdent"},Zp.orderedList={listType:wg.orderedList,props:yg({icon:"list-ordered",svgIcon:J},eh),messages:{title:vg.orderedList},commandName:"OrderedList",types:yg({},wg)},Zp.bulletList={listType:wg.bulletList,props:yg({icon:"list-unordered",svgIcon:G},eh),messages:{title:vg.bulletList},commandName:"UnorderedList",types:yg({},wg)};var kg=i.createContext(null),xg=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={},r=function(e){return e.filter((function(e){return!0!==e&&!!e})).map((function(e){return Array.isArray(e)?r(e):function(e){return"object"==typeof e?Object.keys(e).forEach((function(t){n[t]=e[t]})):n[e]=!0}(e)}))};return r(e),Object.keys(n).map((function(e){return n[e]&&e||null})).filter((function(e){return null!==e})).join(" ")};function Sg(e){var t={};return Cg(e,t),t}function Cg(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]=Eg(r,t[n])}}function Eg(e,t){if(Array.isArray(e))return e.map((function(e){return Eg(e,void 0)}));if(e instanceof Date)return(r=e)?new Date(r.getTime()):null;if(i.isValidElement(e))return i.cloneElement(e,e.props);if(e&&"object"==typeof e){var n=t||{};return Cg(e,n),n}return e;var r}var Og=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;function Tg(e){var t=[];return e.replace(Og,(function(e,n,r,o){t.push(void 0!==n?n:r||o)})),t}var Mg,Ag={undefined:function(){}},Ng=function(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n},Pg={undefined:function(e){return e}},Rg=function(e,t){return t&&t.arrays&&!isNaN(Number(e))?[]:{}},Dg={sizeMap:{small:"sm",medium:"md",large:"lg"},roundedMap:{small:"sm",medium:"md",large:"lg"}},Ig={name:"@progress/kendo-react-form",productName:"KendoReact",productCodes:["KENDOUIREACT","KENDOUICOMPLETE"],publishDate:1695801520,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-react-ui/my-license/?utm_medium=product&utm_source=kendoreact&utm_campaign=kendo-ui-react-purchase-license-keys-warning"},_g=globalThis&&globalThis.__extends||(Mg=function(e,t){return(Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Mg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Fg=globalThis&&globalThis.__assign||function(){return Fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fg.apply(this,arguments)},zg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Bg=function(e){function t(t){var n,r=e.call(this,t)||this;return r._id=Ng(),r._touched={},r._visited={},r._modified={},r._validatorsByField={},r._values={},r._fields={},r._unmounted=!1,r._submitted=!1,r.isValid=function(){return r.isFormValid(r.errors)},r.accumulatedForceUpdate=function(){r._accumulatorTimeout&&clearTimeout(r._accumulatorTimeout),r._accumulatorTimeout=window.setTimeout((function(){r._accumulatorTimeout=void 0,r.forceUpdate()}),0)},r.resetForm=function(){r.values=Sg(r.props.initialValues),r._id=Ng(),r._touched={},r._visited={},r._modified={},r._validatorsByField={},r._fields={},r._submitted=!1,r.forceUpdate()},r.onReset=function(){return r.resetForm()},r.addField=function(e){r._fields[e]=!0},r.onSubmit=function(e){var t={},n=r.fields;e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),n.forEach((function(e){t[e]=!0})),r.visited=Fg({},t),r.touched=Fg({},t);var o=r.values,i=r.isFormValid(r.errors),s=r.isFormModified(r.modified,n);r.props.onSubmitClick&&r.props.onSubmitClick.call(void 0,{values:o,isValid:i,isModified:s,event:e}),i&&(r.props.ignoreModified||s)&&r.props.onSubmit&&(r._submitted=!0,r.props.onSubmit.call(void 0,o,e)),r.forceUpdate()},r.onChange=function(e,t){var n,o=t.value;r.addField(e),r.modified[e]||(r.modified=Fg(Fg({},r.modified),((n={})[e]=!0,n))),r.valueSetter(e,o),r.forceUpdate()},r.onFocus=function(e,t){var n;r.visited[e]||(r.visited=Fg(Fg({},r.visited),((n={})[e]=!0,n)),t||r.forceUpdate())},r.onBlur=function(e,t){var n;r.touched[e]||(r.onFocus(e,t),r.touched=Fg(Fg({},r.touched),((n={})[e]=!0,n)),t||r.forceUpdate())},r.onFieldRegister=function(e,t){var n;r.addField(e);var o=r.validatorsByField[e]||[],i=o.length;return r.validatorsByField=Fg(Fg({},r.validatorsByField),((n={})[e]=zg(zg([],o,!0),[t],!1),n)),r.accumulatedForceUpdate(),function(){var t;if(!r._unmounted){var n=zg([],r.validatorsByField[e]||[],!0),o=Boolean(n[i]);n[i]=void 0,r.validatorsByField=Fg(Fg({},r.validatorsByField),((t={})[e]=n,t)),o&&r.accumulatedForceUpdate()}}},r.isFormValid=function(e){return!Object.keys(e).some((function(t){return Boolean(e[t])}))},r.isFormModified=function(e,t){return t.some((function(t){return e[t]}))},r.isFormHasNotTouched=function(e,t){return t.some((function(t){return!e[t]}))},r.isFormTouched=function(e,t){return t.some((function(t){return e[t]}))},r.isFormVisited=function(e,t){return t.some((function(t){return e[t]}))},r.valueGetter=function(e){return function(e){if(Ag[e])return Ag[e];var t=Tg(e);return Ag[e]=function(e){for(var n=e,r=0;r<t.length&&n;r++)n=n[t[r]];return n},Ag[e]}(e)(r.values)},r.valueSetter=function(e,t){return function(e){if(Pg[e])return Pg[e];var t=Tg(e);return Pg[e]=function(e,n,r){for(var o=e,i=t.length-1,s=0;s<i&&o;s++)o=o[t[s]]=o[t[s]]||Rg(t[s+1],r);o[t[i]]=n},Pg[e]}(e)(r.values,t)},r.onArrayAction=function(e){var t;r.addField(e),r.modified[e]||(r.modified=Fg(Fg({},r.modified),((t={})[e]=!0,t))),r.onBlur(e,!0)},r.onInsert=function(e,t){r.onArrayAction(e);var n=zg([],r.valueGetter(e)||[],!0);n.splice(t.index,0,t.value),r.valueSetter(e,n),r.forceUpdate()},r.onUnshift=function(e,t){r.onInsert(e,{value:t.value,index:0})},r.onPush=function(e,t){r.onArrayAction(e);var n=zg(zg([],r.valueGetter(e)||[],!0),[t.value],!1);r.valueSetter(e,n),r.forceUpdate()},r.onPop=function(e){r.onArrayAction(e);var t=zg([],r.valueGetter(e)||[],!0),n=t.pop();return r.valueSetter(e,t),r.forceUpdate(),n},r.onRemove=function(e,t){r.onArrayAction(e);var n=zg([],r.valueGetter(e)||[],!0),o=n.splice(t.index,1);return r.valueSetter(e,n),r.forceUpdate(),o},r.onReplace=function(e,t){r.onArrayAction(e);var n=zg([],r.valueGetter(e)||[],!0);n.splice(t.index,1,t.value),r.valueSetter(e,n),r.forceUpdate()},r.onMove=function(e,t){r.onArrayAction(e);var n=zg([],r.valueGetter(e)||[],!0),o=n[t.prevIndex];n.splice(t.prevIndex,1),n.splice(t.nextIndex,0,o),r.valueSetter(e,n),r.forceUpdate()},n=Ig,void 0!==c?u(n):("License activation failed for ".concat(n.name,"\n"),"See ".concat(n.licensingDocsUrl," for more information.\n")),r.values=Sg(t.initialValues),r}return _g(t,e),Object.defineProperty(t.prototype,"touched",{get:function(){return this._touched},set:function(e){this._touched=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visited",{get:function(){return this._visited},set:function(e){this._visited=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modified",{get:function(){return this._modified},set:function(e){this._modified=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validatorsByField",{get:function(){return this._validatorsByField},set:function(e){this._validatorsByField=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},set:function(e){this._values=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return Object.keys(this._fields)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){if(this.props.validator)return this.props.validator(this.values,this.valueGetter)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){var e=this,t={},n=this.fields,r=this.validatorsByField;return n.forEach((function(n){if(t[n]="",r[n]){var o=[];r[n].forEach((function(e){Array.isArray(e)?o.push.apply(o,e):o.push(e)})),o.find((function(r){if(r){var o=r(e.valueGetter(n),e.valueGetter,{name:n});if(o)return t[n]=o,!0}return!1}))}})),this.formErrors&&Cg(this.formErrors,t),t},enumerable:!1,configurable:!0}),t.prototype.componentWillUnmount=function(){this._unmounted=!0,this._accumulatorTimeout&&clearTimeout(this._accumulatorTimeout)},t.prototype.render=function(){var e=this.props.render,t=this.touched,n=this.visited,r=this.modified,o=this.fields,s=this.errors,l=this.isFormValid(s),a=this.isFormModified(r,o),c=this.isFormTouched(t,o),u=this.isFormVisited(n,o),d=this.isFormHasNotTouched(t,o)&&!l||l&&(this.props.ignoreModified||a);return i.createElement(kg.Provider,{key:this._id,value:{id:this._id,valueGetter:this.valueGetter,errors:s,modified:r,touched:t,visited:n,registerField:this.onFieldRegister,onSubmit:this.onSubmit,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onUnshift:this.onUnshift,onPush:this.onPush,onInsert:this.onInsert,onPop:this.onPop,onRemove:this.onRemove,onReplace:this.onReplace,onMove:this.onMove}},e({valid:l,modified:a,touched:c,visited:u,submitted:this._submitted,valueGetter:this.valueGetter,errors:s,allowSubmit:d,onChange:this.onChange,onSubmit:this.onSubmit,onFormReset:this.resetForm}))},t.displayName="KendoReactForm",t.propTypes={initialValues:l.any,onSubmit:l.func,onSubmitClick:l.func,render:l.func.isRequired},t}(i.Component),Lg=function(e){var t=xg({"k-form-field":!0,"k-rtl":"rtl"===e.dir},e.className);return i.createElement("div",{className:t,style:e.style},e.children)};Lg.displayName="KendoReactFieldWrapper";var jg=globalThis&&globalThis.__assign||function(){return jg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jg.apply(this,arguments)},Hg=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Vg=i.forwardRef((function(e,t){var n,r=i.useRef(null),o=i.useRef(null);i.useImperativeHandle(o,(function(){return{element:r.current,props:e}})),i.useImperativeHandle(t,(function(){return o.current}));var s=i.useContext(kg),l=e.className;e.onSubmit,e.style;var a=e.horizontal,c=e.size,u=Hg(e,["className","onSubmit","style","horizontal","size"]),d=xg(((n={"k-form":!0})["k-form-".concat(Dg.sizeMap[c]||c)]=c,n["k-form-horizontal"]=!0===a,n),l);return i.createElement("form",jg({ref:r},u,{style:e.style,className:d,onSubmit:s?s.onSubmit:void 0}),e.children)}));Vg.displayName="KendoReactFormElement",Vg.defaultProps={size:"medium"};var $g=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ug=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.href=null,t.title=null,t.target=null,t.onClose=function(){t.props.view.focus(),t.props.onClose()},t.onInsert=function(){var e=t.props.view,n=t.props.settings.mark,r={href:t.href?t.href.value:void 0,title:t.title?t.title.value:void 0,target:t.target&&t.target.element&&t.target.element.checked?"_blank":void 0};To({mark:n,attrs:r},t.props.settings.commandName)(e.state,e.dispatch),t.onClose()},t}return $g(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.view,r=t.settings,o=t.dir,s=t.render,l=X(this),c=r.messages,u=c.insertHyperlinkDialogTitle,d=c.insertHyperlinkAddress,p=c.insertHyperlinkTitle,h=c.insertHyperlinkNewWindow,f=c.insertHyperlinkCancel,m=c.insertHyperlinkInsert,g=!!n&&bo(n.state,n.state.schema.marks[r.mark]),v=i.createElement(Bg,{render:function(){return i.createElement(Vg,{horizontal:!0},i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-link-url",className:"k-form-label"},l.toLanguageString(d,gg[d])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-link-url",ref:function(t){return e.href=t},defaultValue:g&&g.attrs.href||void 0,autoFocus:!0}))),i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-link-text",className:"k-form-label"},l.toLanguageString(p,gg[p])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-link-text",ref:function(t){return e.title=t},defaultValue:g&&g.attrs.title||void 0}))),!1!==r.linkTarget&&i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-link-target",className:"k-checkbox-label"},i.createElement(Q,{id:"k-editor-link-target",ref:function(t){return e.target=t},defaultChecked:g&&!!g.attrs.target||void 0}),l.toLanguageString(h,gg[h]))))}}),y=[i.createElement(Z,{onClick:this.onClose,dir:o,key:"cancel"},l.toLanguageString(f,gg[f])),i.createElement(Z,{onClick:this.onInsert,themeColor:"primary",dir:o,key:"insert"},l.toLanguageString(m,gg[m]))],b=i.createElement(ee,{initialWidth:450,initialHeight:250,className:"k-editor-window",title:l.toLanguageString(u,gg[u]),onClose:this.onClose,style:"rtl"===o?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},v,i.createElement.apply(a,Wg([te,null],y,!1)));return s?s(b,{content:v,actionButtons:y}):b},t}(i.Component);ne(Ug);var qg=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Jg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.src=null,t.altText=null,t.title=null,t.width=null,t.height=null,t.onClose=function(){t.props.view.focus(),t.props.onClose()},t.onInsert=function(){var e=t.props,n=e.view,r=e.settings,o=n.state.schema.nodes[r.node],i={src:t.src?t.src.value:null,title:t.title?t.title.value:null,alt:t.altText?t.altText.value:null,width:t.width?t.width.value:null,height:t.height?t.height.value:null},s=Object.keys(i).filter((function(e){return null!==i[e]&&""!==i[e]})).reduce((function(e,t){var n;return Object.assign(e,((n={})[t]=i[t],n))}),{}),l=o.createAndFill(s);l&&$r(l,!0)(n.state,(function(e){return n.dispatch(e.setMeta("commandName",r.commandName).setMeta("args",s))})),t.onClose()},t}return qg(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.view,r=t.settings,o=t.dir,s=t.render,l=r.messages,c=l.insertImageDialogTitle,u=l.insertImageAddress,d=l.insertImageTitle,p=l.insertImageAltText,h=l.insertImageWidth,f=l.insertImageHeight,m=l.insertImageCancel,g=l.insertImageInsert,v=X(this),y=n&&n.state,b={};y&&y.selection instanceof mr&&y.selection.node.type===y.schema.nodes[r.node]&&(b=y.selection.node.attrs);var w=i.createElement(Bg,{render:function(){return i.createElement(Vg,{horizontal:!0},i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-image-url",className:"k-form-label"},v.toLanguageString(u,gg[u])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-image-url",defaultValue:b.src,ref:function(t){return e.src=t},autoFocus:!0}))),i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-image-url",className:"k-form-label"},v.toLanguageString(p,gg[p])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-image-alt",defaultValue:b.alt,ref:function(t){return e.altText=t}}))),i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-image-title",className:"k-form-label"},v.toLanguageString(d,gg[d])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-image-title",defaultValue:b.title,ref:function(t){return e.title=t}}))),i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-image-width",className:"k-form-label"},v.toLanguageString(h,gg[h])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{type:"text",id:"k-editor-image-width",defaultValue:b.width,ref:function(t){return e.width=t}}))),i.createElement(Lg,null,i.createElement("label",{htmlFor:"k-editor-image-height",className:"k-form-label"},v.toLanguageString(f,gg[f])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{id:"k-editor-image-height",defaultValue:b.height,ref:function(t){return e.height=t}}))))}}),k=[i.createElement(Z,{onClick:this.onClose,dir:o,key:"cancel"},v.toLanguageString(m,gg[m])),i.createElement(Z,{onClick:this.onInsert,themeColor:"primary",dir:o,key:"insert"},v.toLanguageString(g,gg[g]))],x=i.createElement(ee,{initialWidth:500,initialHeight:350,className:"k-editor-window",title:v.toLanguageString(c,gg[c]),onClose:this.onClose,key:"dialog",style:"rtl"===o?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},w,i.createElement.apply(a,Kg([te,null],k,!1)));return s?s(x,{content:w,actionButtons:k}):x},t}(i.Component);ne(Jg);var Gg=new Pr("editor-props"),Xg=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Qg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.htmlArea=null,t.textAreaRef=function(e){t.htmlArea=e;var n=e&&e.element.current;n&&(n.style.resize="none")},t.onUpdate=function(){var e=t.props,n=e.view,r=e.settings,o=Zr(t.htmlArea&&t.htmlArea.value||""),i=Gg.getState(n.state).preserveWhitespace;po(o,r.commandName,{preserveWhitespace:i})(n.state,n.dispatch),t.onClose()},t.onClose=function(){t.props.view.focus(),t.props.onClose()},t}return Xg(t,e),t.prototype.render=function(){var e=this.props,t=e.view,n=e.settings,r=e.dir,o=e.render,s=X(this),l=n.messages,c=l.viewHtmlDialogTitle,u=l.viewHtmlCancel,d=l.viewHtmlUpdate,p=i.createElement(re,{className:"k-editor-textarea",defaultValue:Wr(uo(t.state)),autoFocus:!0,autoSize:!1,ref:this.textAreaRef}),h=[i.createElement(Z,{onClick:this.onClose,dir:r,key:"cancel"},s.toLanguageString(u,gg[u])),i.createElement(Z,{onClick:this.onUpdate,themeColor:"primary",dir:r,key:"update"},s.toLanguageString(d,gg[d]))],f=i.createElement(ee,{className:"k-editor-window",title:s.toLanguageString(c,gg[c]),onClose:this.onClose,key:"dialog",style:"rtl"===r?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!0,initialHeight:400,initialWidth:500},p,i.createElement.apply(a,Yg([te,null],h,!1)));return o?o(f,{content:p,actionButtons:h}):f},t}(i.Component);ne(Qg);var Zg={onMouseDown:function(e){return e.preventDefault()},onPointerDown:function(e){return e.preventDefault()}},ev={userSelect:"none"},tv=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t,n){e=e.replace("{"+n+"}",String(t))})),e},nv=function(e,t){return t.dataItem.style?i.cloneElement(e,e.props,i.createElement("span",{style:t.dataItem.style},e.props.children)):e},rv=["px","em","%"],ov={animate:{openDuration:150,closeDuration:150}},iv=[{textKey:vg.borderStyleNone,text:gg[vg.borderStyleNone],value:"none"},{textKey:vg.borderStyleSolid,text:gg[vg.borderStyleSolid],value:"solid"},{textKey:vg.borderStyleDotted,text:gg[vg.borderStyleDotted],value:"dotted"},{textKey:vg.borderStyleDashed,text:gg[vg.borderStyleDashed],value:"dashed"},{textKey:vg.borderStyleDouble,text:gg[vg.borderStyleDouble],value:"double"},{textKey:vg.borderStyleGroove,text:gg[vg.borderStyleGroove],value:"groove"},{textKey:vg.borderStyleRidge,text:gg[vg.borderStyleRidge],value:"ridge"},{textKey:vg.borderStyleInset,text:gg[vg.borderStyleInset],value:"inset"},{textKey:vg.borderStyleOutset,text:gg[vg.borderStyleOutset],value:"outset"},{textKey:vg.borderStyleInitial,text:gg[vg.borderStyleInitial],value:"initial"},{textKey:vg.borderStyleInherit,text:gg[vg.borderStyleInherit],value:"inherit"},{textKey:vg.borderStyleHidden,text:gg[vg.borderStyleHidden],value:"hidden"}];function sv(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{node:r,depth:n}}return null}var lv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),av=globalThis&&globalThis.__assign||function(){return av=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},av.apply(this,arguments)},cv=Qp.findAndReplace,uv=function(e){function t(t){var n,r,o,i,s,l,a,c,u,d=e.call(this,t)||this;return d.onTabSelect=function(e){d.setState({selectedTab:e.selected})},d.onClose=function(){var e=d.props.view,t=e.state,n=t.tr.setSelection(hr.create(t.doc,t.selection.from,t.selection.to));e.updateState(t.apply(n)),e.focus(),d.props.onClose.call(void 0)},d.matchesMessage=function(e){var t=d.state.matches,n=d.state.nextMatch,r=0,o=0;if(t&&n){var i=t.findIndex((function(e){return e.eq(n)}));r=-1===i?t.length:i+1,o=t.length}return tv(e,r,o)},d.onFindNext=function(){d.onFind()},d.onFindPrev=function(){d.onFind(!0)},d.onFind=function(e){void 0===e&&(e=!1);var t=d.props.view,n=d.state,r=n.searchText,o=n.matchCase,i=n.matchCyclic,s={text:r,matchWord:n.matchWord,matchCase:o,useRegExp:n.useRegExp,backward:e,matchCyclic:i},l=function(e,t){var n=t.backward,r=t.matchCyclic,o=Xe(t,["backward","matchCyclic"]),i=n?function(){return!1}:function(e){return e.length>0},s=e.doc,l=e.selection,a=[];return n?!(a=Gd(s,o,0,l.from,i)).length&&r&&(a=Gd(s,o,l.from,s.content.size,i)):!(a=Gd(s,o,l.to,s.content.size,i)).length&&r&&(a=Gd(s,o,0,l.to,i)),a.length?a[a.length-1]:null}(t.state,s);if(l){var a=t.state.tr.setSelection(l);a.scrollIntoView(),t.updateState(t.state.apply(a)),d.setState({nextMatch:l})}},d.onReplace=function(){var e=d.props.view,t=e.state.selection,n=d.state.replaceText;if(!t.empty){var r=t.from,o=r+n.length,i=function(e,t,n){var r=e.from,o=e.to;return n.insertText(t,r,o).setSelection(hr.create(n.doc,r,r+t.length)),n}(t,n,e.state.tr);i.setSelection(hr.create(i.doc,r,o)),i.scrollIntoView(),e.dispatch(i),d.setNextState({})}},d.onReplaceAll=function(){var e=d.props.view,t=d.state,n=t.searchText,r=t.replaceText,o=t.matchCase,i={text:n,matchWord:t.matchWord,matchCase:o,useRegExp:t.useRegExp},s=function(e,t,n){var r=Xd(e.doc,n);if(0===r.length)return null;for(var o=e.tr,i=r.length-1;i>=0;i--)o.insertText(t,r[i].from,r[i].to);return o}(e.state,r,i);s&&e.dispatch(s),d.setNextState({})},d.onKeyDown=function(e){13===e.keyCode?d.onFindNext():27===e.keyCode&&d.onClose()},d.onMatchCaseChecked=function(e){return d.setNextState({matchCase:e.value})},d.onMatchWordChecked=function(e){return d.setNextState({matchWord:e.value})},d.onMatchCyclicChecked=function(e){return d.setNextState({matchCyclic:e.value})},d.onUseRegExpChecked=function(e){return d.setNextState({useRegExp:e.value})},d.onSearchChange=function(e){return d.setNextState({searchText:e.target.value})},d.onReplaceChange=function(e){return d.setNextState({replaceText:e.target.value})},d.setNextState=function(e){var t=av(av(av({},d.state),e),{matches:void 0,nextMatch:void 0}),n=d.props.view;if(t.searchText){var r=t.searchText,o=t.matchWord,i=t.matchCase,s=t.useRegExp,l=t.matchCyclic,a={text:r,matchWord:o,matchCase:i,useRegExp:s},c=n.state.selection,u=Xd(n.state.doc,a),p=!d.state.searchText&&u[0]||u.find((function(e){return e.from>=c.from}))||l&&u[0]||void 0;d.setState(av(av({},t),{matches:u,nextMatch:p}))}else d.setState(t)},d.state={selectedTab:0,searchText:(n=t.view.state,r="",o=!1,i=n.selection,s=n.doc,l=i.$from,a=i.$to,c=i.from,u=i.to,l.sameParent(a)&&(s.nodesBetween(c,u,(function(e){o=o||e.isLeaf&&!e.isText})),o||(r=function(e){var t=e.selection;if(t instanceof hr||t instanceof vr){var n=t.content().content;return n.textBetween(0,n.size)}return""}(n))),r),replaceText:"",matchCase:!1,matchWord:!1,matchCyclic:!1,useRegExp:!1},d}return lv(t,e),Object.defineProperty(t.prototype,"settings",{get:function(){return this.props.settings||cv},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e,t){var n=this.props.view,r=this.state,o=r.matches,i=void 0===o?[]:o,s=r.nextMatch;if(t.nextMatch!==s){var l=n.state,a=l.tr,c=[];i.forEach((function(e){c.push({from:e.from,to:e.to,attrs:{class:s&&e.eq(s)?"k-text-selected":"k-text-highlighted"}})})),a.setMeta(ip,c),a.setSelection(s||hr.create(l.doc,l.selection.from)),n.dispatch(a)}},t.prototype.render=function(){var e=this,t=X(this),n=this.settings.messages,r=n.findReplaceDialogTitle,o=n.findReplaceTabFind,s=n.findReplaceTabReplace,l=n.findReplaceFindWhat,a=n.findReplaceReplaceWith,c=n.findReplaceReplace,u=n.findReplaceReplaceAll,d=n.findReplaceMatchCase,p=n.findReplaceMatchWord,h=n.findReplaceMatchCyclic,f=n.findReplaceUseRegExp,m=n.findReplacePrevMatch,g=n.findReplaceNextMatch,v=n.findReplaceMatches,y=this.state,b=y.matchCase,w=y.matchWord,k=y.matchCyclic,x=y.useRegExp,S=y.searchText,C=y.replaceText,E=y.nextMatch,O=i.createElement("div",{className:"k-search-options"},i.createElement("span",null,i.createElement(Q,{id:"match-case",checked:b,onChange:this.onMatchCaseChecked}),i.createElement("label",{htmlFor:"match-case",className:"k-checkbox-label"},t.toLanguageString(d,gg[d]))),i.createElement("span",null,i.createElement(Q,{id:"match-whole",checked:w,onChange:this.onMatchWordChecked}),i.createElement("label",{htmlFor:"match-whole",className:"k-checkbox-label"},t.toLanguageString(p,gg[p]))),i.createElement("span",null,i.createElement(Q,{id:"match-cyclic",checked:k,onChange:this.onMatchCyclicChecked}),i.createElement("label",{htmlFor:"match-cyclic",className:"k-checkbox-label"},t.toLanguageString(h,gg[h]))),i.createElement("span",null,i.createElement(Q,{id:"regular-expression",checked:x,onChange:this.onUseRegExpChecked}),i.createElement("label",{htmlFor:"regular-expression",className:"k-checkbox-label"},t.toLanguageString(f,gg[f])))),T=i.createElement("div",{className:"k-matches-container"},i.createElement(Z,{fillMode:"flat",themeColor:"primary",onClick:this.onFindPrev},i.createElement(ft,{name:"chevron-left",icon:oe}),t.toLanguageString(m,gg[m])),i.createElement("span",null,this.matchesMessage(t.toLanguageString(v,gg[v]))),i.createElement(Z,{fillMode:"flat",themeColor:"primary",onClick:this.onFindNext},t.toLanguageString(g,gg[g]),i.createElement(ft,{name:"chevron-right",icon:ie}))),M=i.createElement(Bg,{render:function(){return i.createElement(Vg,{horizontal:!0},i.createElement(Lg,null,i.createElement("label",{htmlFor:"findWhat",className:"k-form-label"},t.toLanguageString(l,gg[l])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{id:"findWhat",type:"text",value:S,onChange:e.onSearchChange,onFocus:e.onSearchChange,onKeyDown:e.onKeyDown,autoFocus:!0}))))}}),A=i.createElement(Bg,{render:function(){return i.createElement(Vg,{horizontal:!0},i.createElement(Lg,null,i.createElement("label",{htmlFor:"replaceWith",className:"k-form-label"},t.toLanguageString(a,gg[a])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Y,{id:"replaceWith",type:"text",value:C,onChange:e.onReplaceChange}))))}});return i.createElement(ee,{title:t.toLanguageString(r,gg[r]),onClose:this.onClose,style:{width:"auto",height:"auto",userSelect:"none"},resizable:!1,minimizeButton:function(){return null},maximizeButton:function(){return null}},i.createElement(se,{selected:this.state.selectedTab,className:"k-editor-find-replace",onSelect:this.onTabSelect,animation:!1},i.createElement(le,{title:t.toLanguageString(o,gg[o])},M,O,T),i.createElement(le,{title:t.toLanguageString(s,gg[s])},M,A,i.createElement("div",{className:"k-actions k-hstack k-justify-content-end"},i.createElement(Z,{disabled:!Boolean(E),onClick:this.onReplace},t.toLanguageString(c,gg[c])),i.createElement(Z,{disabled:!Boolean(E),onClick:this.onReplaceAll},t.toLanguageString(u,gg[u]))),O,T)))},t}(i.Component);ne(uv);var dv,pv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),t}(Ug);e.InsertLinkDialog=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),t}(Jg);e.InsertImageDialog=n;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),t}(Qg);e.ViewHtmlDialog=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pv(t,e),t}(uv);e.FindAndReplaceDialog=o}(dv||(dv={}));var hv,fv,mv=globalThis&&globalThis.__assign||function(){return mv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mv.apply(this,arguments)},gv=Qp.bold,vv=Qp.underline,yv=Qp.italic,bv="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),wv=globalThis&&globalThis.__assign||function(){return wv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wv.apply(this,arguments)};(fv=hv||(hv={})).alignBlocks=function(e,t,n){return Boolean(Io(t,n)(e.state,e.dispatch))},fv.applyInlineStyle=function(e,t,n){return Eo(t,n)(e.state,e.dispatch)},fv.applyLink=function(e,t,n){return To(t,n)(e.state,e.dispatch)},fv.canIndentList=function(e,t){return Ii(e,t)},fv.canInsert=function(e,t){return Lr(e,t)},fv.canOutdentList=function(e,t){return _i(e,{listsTypes:t,nodes:[]})},fv.convertMsLists=function(e){return Fd(e)},fv.createDocument=function(e,t,n){return co(Zr(t),e,void 0!==n?n:{preserveWhitespace:"full"})},fv.createTable=function(e,t,n){return th(e,t,n)},fv.formatBlockElements=function(e,t,n){return No(t,n)(e.state,e.dispatch)},fv.getBlockFormats=function(e){return Po(e)},fv.getHtml=function(e){return uo(e)},fv.getInlineStyles=function(e,t){return xo(e,t)},fv.getMark=function(e,t){return bo(e,t)},fv.hasMark=function(e,t){return go(e,t)},fv.hasNode=function(e,t){return Do(e,t)},fv.indentBlocks=function(e,t,n,r){return Boolean(Ri(t,n,r)(e.state,e.dispatch))},fv.indentHtml=function(e){return Wr(e)},fv.insertNode=function(e,t,n){$r(t,n)(e.state,e.dispatch)},fv.isAligned=function(e,t){return _o(e,t)},fv.isIndented=function(e,t,n){return Di(e,t,n)},fv.removeComments=function(e){return function(e){return e.replace(/<!--[\s\S]+?-->/g,"")}(e)},fv.removeTag=function(e,t){return zd(e,t)},fv.pasteCleanup=function(e,t){return function(e,t){var n=e;if(t.convertMsLists&&(n=Fd(n)),t.stripTags&&(n=zd(n,t.stripTags)),t.attributes){var r=io(n);Array.from(r.querySelectorAll("*")).forEach((function(e){return function(e,t){if(e.nodeType===Node.ELEMENT_NODE){for(var n=e.attributes.length-1;n>=0;n--){var r=e.attributes[n];t[r.name]?t[r.name](r):t["*"]&&t["*"](r)}"SPAN"===e.nodeName&&0===e.attributes.length&&function(e){var t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}}(e)}}(e,t.attributes)})),n=so(r)}return n}(e,t)},fv.sanitizeClassAttr=function(e){!function(e){/^Mso/.test(e.value)&&Bd(e)}(e)},fv.sanitizeStyleAttr=function(e){!function(e){var t,n,r=e.value.split(Ld).filter((function(e){return Boolean(e)})),o=e.ownerElement.style,i="";r.forEach((function(e){var r;r=e.split(jd),t=r[0],n=r[1],void 0!==o[t]&&(i+=t+": "+n+"; ")})),(i=i.trim())?e.value=i:Bd(e)}(e)},fv.removeAttribute=function(e){Bd(e)},fv.sanitize=function(e){return function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")}(e)},fv.replaceImageSourcesFromRtf=function(e,t){return function(e,t){var n=e.match(Vd);if(!n||-1===t.types.indexOf(Jd))return e;var r=t.getData(Jd),o=[],i=r.match(Wd);if(!r||!i)return e;for(var s=0,l=i;s<l.length;s++){var a=l[s],c=Kd.exec(a);if(c){var u=a.replace($d,"").replace(Ud,"");o.push("data:image/"+c[1]+";base64,"+Hd(u))}}return n.length!==o.length?e:e.replace(Vd,(function(e){var t=o.shift()||"";return e.replace(qd,t)}))}(e,t)},fv.textHighlight=function(e){return function(e){return void 0===e&&(e=ip),new Mr({key:e,state:{init:function(){return null},apply:function(e){return e.getMeta(this.spec.key)}},props:{decorations:function(e){var t=(this.spec.key.getState(e)||[]).map((function(e){return Ca.inline(e.from,e.to,e.attrs)}));return Ta.create(e.doc,t)}}})}(e)},fv.imageResizing=function(e){return function(e){return void 0===e&&(e={node:"image",lockRatio:!0}),new Mr({key:ap,view:function(t){return{resize:function(){ap.getState(t.state).rect&&t.dispatch(t.state.tr.setMeta("resize",!0))},get window(){return t.dom.ownerDocument&&t.dom.ownerDocument.defaultView},attachResize:function(){var e=this.window;e&&(e.removeEventListener("resize",this.resize),e.addEventListener("resize",this.resize))},removeResize:function(){var e=this.window;e&&e.removeEventListener("resize",this.resize)},update:function(t,n){var r=t.state,o=r.selection,i=r.schema.nodes[e.node],s=ap.getState(r),l=s.rect;if(o instanceof mr&&i===o.node.type){var a=t.nodeDOM(o.from),c={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight};if(!n.selection.eq(o)||l&&(l.width!==c.width||l.height!==c.height||l.top!==c.top||l.left!==c.left)){var u=r.tr;u.setMeta(ap,{rect:c,nodePosition:o.from}),t.dispatch(u),this.attachResize()}}else l&&(s.rect=null,s.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new pp("",null,null,-1)},apply:function(e,t){return t.apply(e)}},props:{handleDOMEvents:{mousedown:function(t,n){return function(e,t,n){var r=t.target.getAttribute(zr);if(!r)return!1;var o=ap.getState(e.state);t.preventDefault();var i=e.state.tr;function s(t){!function(e,t,n){var r=ap.getState(e.state),o=r.rect,i=r.dragging,s=r.nodePosition,l=r.activeHandle;if(i&&o){var a=e.nodeDOM(s),c=sp[l],u=(t.clientX-i.startX)*c.x,d=(t.clientY-i.startY)*c.y,p=c.x?u+a.width:o.width,h=c.y?d+a.height:o.height;if(n.lockRatio&&c.x&&c.y){var f=Math.min(p/a.width,h/a.height),m=a.width*f,g=a.height*f;i.startX=t.clientX-(p-m)*c.x,i.startY=t.clientY-(h-g)*c.y,p=m,h=g}else i.startX=c.x?t.clientX:i.startX,i.startY=c.y?t.clientY:i.startY;cp(a,"width",p),cp(a,"height",h),o.top=a.offsetTop,o.left=a.offsetLeft,o.width=a.offsetWidth,o.height=a.offsetHeight;var v=a.nextElementSibling;v.style.width=o.width+"px",v.style.height=o.height+"px",v.style.top=o.top+"px",v.style.left=o.left+"px"}}(e,t,n)}return i.setMeta(ap,{setDragging:{startX:t.clientX,startY:t.clientY},activeHandle:r,rect:o.rect,nodePosition:o.nodePosition}),i.setMeta("addToHistory",!1),e.dispatch(i),t.view.addEventListener("mouseup",(function t(n){n.view.removeEventListener("mouseup",t),n.view.removeEventListener("mousemove",s),function(e){var t=ap.getState(e.state),n=t.rect,r=t.dragging,o=t.nodePosition;if(r&&n){var i=e.state.selection;if(i instanceof mr){var s=i.node.attrs,l=n.width,a=n.height,c=void 0;if(up.test(s.style||"")){var u=Br(s.style,{style:"width",value:dp,newValue:l+"px"}),d=Br(u.style||"",{style:"height",value:dp,newValue:a+"px"}).style;c=Je(Je({},s),{style:d})}else c=Je(Je({},s),{width:l,height:a});var p=i.node.type.createAndFill(c);if(p){var h=e.state.tr;h.replaceWith(o,o+1,p),h.setSelection(mr.create(h.doc,o)),h.setMeta("commandName","image-resize"),h.setMeta("args",c),h.setMeta(ap,{setDragging:null,activeHandle:null,rect:n,nodePosition:o}),e.dispatch(h)}}}}(e)})),t.view.addEventListener("mousemove",s),!0}(t,n,e)}},decorations:function(t){var n=t.selection,r=t.schema.nodes[e.node],o=ap.getState(t).rect;if(o&&n instanceof mr&&r===n.node.type){var i=document.createElement("div");i.className="k-editor-resize-handles-wrapper",i.style.width=o.width+"px",i.style.height=o.height+"px",i.style.top=o.top+"px",i.style.left=o.left+"px";for(var s=0;s<lp.length;s++){var l=document.createElement("div");l.className=_r+" "+lp[s],l.setAttribute(zr,lp[s]),i.appendChild(l)}return Ta.create(t.doc,[Ca.widget(t.selection.from+1,i)])}return Ta.empty}}})}(e)},fv.tableResizing=function(){return[(void 0===t&&(t={node:"table"}),new Mr({key:yp,view:function(e){return{selectedNode:function(e,t){var n=e.selection;if(n instanceof mr&&t===n.node.type&&n instanceof mr)return{node:n.node,pos:n.from};var r=Op(n.$from,(function(e){return e.type===t})),o=r&&r.node;return o?{node:o,pos:n.$from.start(r.depth)-1}:null},update:function(e,n){var r,o,i,s,l,a=e.state,c=a.schema.nodes[t.node],u=this.selectedNode(a,c),d=this.selectedNode(n,c);if((u||!d||n.doc.eq(e.state.doc))&&(u||d)){var p=a.tr;if(p.setMeta("addToHistory",!1),u&&d&&u.pos!==d.pos){p.setMeta(yp,{nodePosition:u.pos});var h=p.doc.nodeAt(d.pos);h&&h.type.name===c.name&&p.setNodeMarkup(d.pos,c,Je(Je({},d.node.attrs),((r={})[Ir]=!1,r))),p.setNodeMarkup(u.pos,c,Je(Je({},u.node.attrs),((o={})[Ir]=!0,o))),e.dispatch(p)}else u&&d&&u.pos===d.pos&&!u.node.attrs[Ir]&&!a.selection.eq(n.selection)?(p.setMeta(yp,{nodePosition:u.pos}),e.dispatch(p.setNodeMarkup(u.pos,c,Je(Je({},u.node.attrs),((i={})[Ir]=!0,i))))):u&&!d?(p.setMeta(yp,{nodePosition:u.pos}),e.dispatch(p.setNodeMarkup(u.pos,c,Je(Je({},u.node.attrs),((s={})[Ir]=!0,s))))):!u&&d&&(p.setMeta(yp,{nodePosition:-1}),e.dispatch(p.setNodeMarkup(d.pos,c,Je(Je({},d.node.attrs),((l={})[Ir]=!1,l)))))}}}},state:{init:function(){return new Ip("",null,-1)},apply:function(e,t){return t.apply(e)}},props:{handleDOMEvents:{mousedown:function(e,t){return Fp(e,t)}}}})),(e=new Mr({key:bp,state:{init:function(e,t){return new Mp(-1,null)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return xp(bp,e)?null:bp.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,t){return kp(bp,e.state)||function(e,t){var n=bp.getState(e.state);if(!n.dragging){var r=Cp(t.target),o=-1;if(r){var i=Ep(r),s=r.getBoundingClientRect(),l=s.left,a=s.right;Math.abs(t.clientX-l)<=5&&i.cellIndex>0?(i.cellIndex-=r.colSpan,o=Tp(e,t,i)):a-t.clientX>0&&a-t.clientX<=5&&(o=Tp(e,t,i))}o!==n.activeHandle&&Np(e,o)}}(e,t),!1},mouseleave:function(e){return function(e){var t=bp.getState(e.state);t.activeHandle>-1&&!t.dragging&&Np(e,-1)}(e),!1},mousedown:function(e,t){return function(e,t){var n,r=bp.getState(e.state);if(-1===r.activeHandle||r.dragging)return!1;for(var o=e.state.doc.resolve(r.activeHandle),i=o.parent,s=o.index(),l=0,a=0;a<=s;a++)l+=i.child(a).attrs.colspan;var c,u,d=o.node(o.depth-1),p=e.domAtPos(r.activeHandle),h=p.node.childNodes[p.offset].closest("table");if(d.attrs[Dr])(c=(m=h.firstChild).children[l-1]).style.width||(c.style.width=c.offsetWidth+"px");else{var f=0;for(a=0;a<i.childCount;a++)f+=i.child(a).attrs.colspan;var m=document.createElement("colgroup"),g=new Array(f);for(a=0;a<f;a++)g[a]=document.createElement("col"),m.appendChild(g[a]);h.insertBefore(m,h.firstChild),(c=g[s]).style.width=c.offsetWidth+"px",u=Je(Je({},d.attrs),((n={})[Dr]="<colgroup>"+g.reduce((function(e,t){return e+t.outerHTML}),"")+"</colgroup>",n))}var v=parseFloat(c.style.width),y=e.state.tr.setMeta(bp,{setDragging:{startX:t.clientX,startWidth:v}});if(!h.style.width){var b=Array.from(c.parentNode.children).map((function(e){return e.style.width}));if(b.every(Boolean)){var w=b.reduce((function(e,t){return e+parseFloat(t)}),0);u=vp(u||d.attrs,"width",w+"px")}}if(u){var k=o.posAtIndex(0,o.depth-1)-1;y.setNodeMarkup(k,null,u)}function x(t){t.view.removeEventListener("mouseup",x),t.view.removeEventListener("mousemove",S);var n=bp.getState(e.state);if(n.dragging){var r=e.state.tr;!function(e,t,n){var r,o=e.state.doc.resolve(n),i=o.node(-1),s=o.start(-1),l=o.posAtIndex(0,o.depth-1)-1,a=e.nodeDOM(s).closest("table"),c=i.attrs;if(i&&c[Dr]){var u=a.firstChild;c=Je(Je({},c),((r={})[Dr]=u.outerHTML,r))}var d=a.style.width;a&&d&&Ur(c.style).width!==d&&(c=vp(c,"width",d)),t.setNodeMarkup(l,null,c)}(e,r,n.activeHandle,Ap(n.dragging,t,25)),e.dispatch(r.setMeta(bp,{setDragging:null}))}}function S(t){if(!t.which)return x(t);var n=bp.getState(e.state),r=Ap(n.dragging,t,25);!function(e,t,n){var r=e.state.doc.resolve(t),o=r.node(-1),i=r.start(-1),s=hc.get(o).colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=e.domAtPos(r.start(-1)).node;"TABLE"!==l.nodeName&&(l=l.closest("table"));var a=l,c=a.firstChild,u=Array.from(c.children);if(u[s].style.width=n+"px",a.style.width){var d=u.map((function(e){return e.style.width}));if(d.every(Boolean)){var p=d.reduce((function(e,t){return e+parseFloat(t)}),0);a.style.width=p+"px"}}}(e,n.activeHandle,r)}return e.dispatch(y),t.view.addEventListener("mouseup",x),t.view.addEventListener("mousemove",S),t.preventDefault(),!0}(e,t)}},decorations:function(e){if(!kp(bp,e)){var t=bp.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=hc.get(o),s=r.start(-1),l=[],a=t-s,c=-1,u=0;u<i.height;u++)l.push(i.map.slice(u*i.width,u*i.width+i.width)),-1===c&&(c=l[u].lastIndexOf(a));var d=[];return l.forEach((function(e){var t=e[c];e[c]!==e[c+1]&&d.push(t)})),d.forEach((function(e){var t=s+e+o.nodeAt(e).nodeSize-1,r=document.createElement("div");r.className="column-resize-handle",n.push(Ca.widget(t,r))})),Ta.create(e.doc,n)}(e,t.activeHandle)}return Ta.empty},nodeViews:{table_wrapper:function(e,t){return new mp(e,t)},table:function(e,t){return new fp(e,t)}}}}),e),Bp()];var e,t},fv.setHtml=function(e,t,n,r){var o=Zr(t);po(o,n,r)(e.state,e.dispatch)},fv.toggleInlineFormat=function(e,t,n,r){return Co(t,n,r)(e.state,e.dispatch)},fv.toggleList=function(e,t,n){return Hi(e.state,e.dispatch,e,t,n)},fv.getShortcuts=function(e){return function(e){var t=Oi(ui,(function(t,n){var r=e&&e.types&&e.types.hardBreak||"hard_break",o=t.schema.nodes[r];return n&&n(t.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0})),n=e&&e.types&&e.types.listItem||"list_item",r=e&&e.toolsSettings||{};return mv(mv(mv(mv({"Mod-b":function(e,t){return Co(r.bold||gv)(e,t)},"Mod-i":function(e,t){return Co(r.italic||yv)(e,t)},"Mod-u":function(e,t){return Co(r.underline||vv)(e,t)},"Mod-z":ud,"Shift-Mod-z":dd},mv({},bv?{}:{"Mod-y":dd})),{Backspace:vd,"Mod-Enter":t,"Shift-Enter":t}),mv({},bv?{"Ctrl-Enter":t}:{})),{Enter:function(e,t){return Uo(e.schema.nodes[n])(e,t)},Tab:Cu(1),"Shift-Tab":Cu(-1)})}(e)},fv.propsKey=Gg,fv.imageResizeKey=ap,fv.marks=wv({},Lu),fv.nodes=wv({},qu);var kv=function(e,t){var n=t.tr||e.state.tr.setSelection(new vr(e.state.doc)).replaceSelectionWith(t.doc||hv.createDocument(e.state.schema,t.html||"")).setMeta("commandName","setHTML");e.updateState(e.state.apply(n))},xv="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent),Sv={name:"@progress/kendo-react-editor",productName:"KendoReact",productCodes:["KENDOUIREACT","KENDOUICOMPLETE"],publishDate:1695801887,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-react-ui/my-license/?utm_medium=product&utm_source=kendoreact&utm_campaign=kendo-ui-react-purchase-license-keys-warning"},Cv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ev=globalThis&&globalThis.__assign||function(){return Ev=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ev.apply(this,arguments)},Ov=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Tv=Qp.link,Mv=Qp.bold,Av=Qp.italic,Nv=Qp.underline,Pv=function(e){function t(t){var n,r=e.call(this,t)||this;return r.state={view:void 0,linkDialog:!1},r._element=null,r._contentElement=null,r.iframe=null,r.trOnChange=null,r.htmlOnChange=null,r.showLicenseWatermark=!1,r.focus=function(){r.view&&r.view.focus()},r.renderDialog=function(e,t,n){return r.state[n]&&i.createElement(e,{view:r.view,settings:t,dir:r.props.dir,onClose:function(){var e;return r.setState(((e={})[n]=!1,e))}})},r.renderTool=function(e,t){var n=i.createElement(e,{view:r.view,dir:r.props.dir,key:t});return n.type===ae?i.createElement(e,{key:t}):n},r.updateTools=function(e,t){r.setState({view:e})},r.filterTransaction=function(e,t){var n={target:r,transaction:e,state:t};return!1!==(r.props.onExecute&&r.props.onExecute.call(void 0,n))},r.onPasteHtml=function(e){if(r.props.onPasteHtml&&r.pasteEvent){var t={target:r,pastedHtml:e,nativeEvent:r.pasteEvent},n=r.props.onPasteHtml.call(void 0,t);if(r.pasteEvent=void 0,"string"==typeof n)return n}return e},r.dispatchTransaction=function(e){var t=e.docChanged;if(r.props.onChange&&t){r.trOnChange=e;var n=e.doc,o=e.doc.type.schema,i=r,s={target:i,value:n,get html(){return i.htmlOnChange=hv.getHtml({doc:n,schema:o}),i.htmlOnChange},transaction:e,schema:o};r.props.onChange.call(void 0,s)}!r.view||void 0!==r.props.value&&t||r.view.updateState(r.view.state.apply(e))},r.onFocus=function(e,t){if(r.props.onFocus){var n={target:r,nativeEvent:t};r.props.onFocus.call(void 0,n)}return!1},r.onBlur=function(e,t){if(r.props.onBlur){var n={target:r,nativeEvent:t};r.props.onBlur.call(void 0,n)}return!1},r.onPaste=function(e,t){return r.props.onPasteHtml&&(r.pasteEvent=t),!1},n=Sv,void 0!==c?u(n):("License activation failed for ".concat(n.name,"\n"),"See ".concat(n.licensingDocsUrl," for more information.\n")),r.showLicenseWatermark=function(e){return!Ze.some((function(e){var t;return null===(t=globalThis.document)||void 0===t?void 0:t.location.hostname.endsWith(e)}))&&!(null==c?void 0:u(e))}(Sv),r}return Cv(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return null!==this.trOnChange?this.trOnChange.doc:void 0!==this.props.value?this.props.value:this.view?this.view.state.doc:this.props.defaultContent||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.iframe&&xv||this.initialize()},t.prototype.componentDidUpdate=function(e){var t=this.props.value,n=this.view;void 0!==t&&n&&(function(e,t,n,r,o){"string"==typeof t?r&&t===o?kv(e,{tr:r}):t!==n&&kv(e,{html:t}):r&&t.eq(r.doc)?kv(e,{tr:r}):e.state.doc.eq(t)||kv(e,{doc:t})}(n,t,e.value,this.trOnChange,this.htmlOnChange),this.trOnChange=null,this.htmlOnChange=null)},t.prototype.componentWillUnmount=function(){this.view&&this.view.destroy(),this._view=void 0;var e=this.iframe&&this.iframe.contentWindow;if(e){this._contentElement&&this._contentElement.parentNode&&this._contentElement.parentNode.removeChild(this._contentElement);for(var t=e.document.head;t&&t.firstChild;)t.removeChild(t.firstChild)}},t.prototype.render=function(){var e=this,t=this.props,n=t.tools,r=void 0===n?[]:n,o=t.defaultEditMode,s=void 0===o?"iframe":o,l=t.preserveWhitespace,a=void 0===l?"full":l,c=t.style,u=t.className,d=X(this);this.view&&(Gg.getState(this.view.state).preserveWhitespace=a);var p=this.props.contentStyle;void 0===p&&void 0===(c||{}).height&&(p={height:"300px"});var h=r.map((function(t,n){return Array.isArray(t)?i.createElement(ce,{key:n},t.map(e.renderTool,n)):e.renderTool(t,n)}));return i.createElement("div",{ref:function(t){return e._element=t},className:Qe("k-editor",u,{"k-editor-resizable":this.props.resizable}),dir:this.props.dir,style:c},h.length>0&&i.createElement(ue,{className:"k-editor-toolbar",keyboardNavigation:this.props.keyboardNavigation},h),"iframe"===s?i.createElement("div",{className:"k-editor-content"},i.createElement("iframe",{onLoad:xv?function(){e.initialize()}:void 0,ref:function(t){return e.iframe=t},frameBorder:"0",title:d.toLanguageString(vg.iframeTitle,gg[vg.iframeTitle]),style:p,className:"k-iframe"})):i.createElement("div",{style:p,className:"k-editor-content"},i.createElement("div",{ref:function(t){return e._contentElement=t},suppressContentEditableWarning:!0,role:"textbox","aria-labelledby":this.props.ariaLabelledBy,"aria-describedby":this.props.ariaDescribedBy,"aria-label":this.props.ariaLabel})),this.renderDialog(dv.InsertLinkDialog,Tv,"linkDialog"),this.showLicenseWatermark&&i.createElement(tt,null))},t.prototype.initialize=function(){var e=this,t=this.iframe&&this.iframe.contentWindow;if(t){var n=t.document;[hh,fh,"rtl"===this.props.dir?"body { direction: rtl }":void 0].forEach((function(e){if(e){var t=n.createElement("style");t.appendChild(n.createTextNode(e)),n.head.appendChild(t)}}));var r=n.createElement("meta");r.setAttribute("charset","utf-8"),n.head.appendChild(r),this._contentElement=n.createElement("div"),n.body.appendChild(this._contentElement),this._contentElement.classList.add("k-content")}var o=this._contentElement;if(o){var i=this.props.preserveWhitespace,s=void 0===i?"full":i,l=[new Mr({view:function(){return{update:e.updateTools}},key:new Pr("toolbar-tools-update-plugin")}),new Mr({filterTransaction:this.filterTransaction,key:new Pr("onExecute-event-plugin")}),new Mr({key:Gg,state:{init:function(){return{preserveWhitespace:s}},apply:function(e,t){return t}}}),new Mr({key:new Pr("spaces-fix"),props:{decorations:function(e){var t,n,r,o,i=[],s=e.doc;return s.nodesBetween(0,s.content.size,(function(e,s,l){if(e.type.isText&&function(e){return tp.test(e&&e.attrs&&e.attrs.style||"")}(l))for(n=ep.exec(e.text||"");null!==n;){if(t=s+n.index,r=n[0].length,n.index+r<n.input.length)for(o=0;o<=r-1;o+=2)i.push(Ca.inline(t+o,t+o+1,{style:"white-space: normal"}));n=ep.exec(e.text||"")}})),Ta.create(s,i)}}}),new Mr({key:hp,props:{decorations:function(e){var t=e.doc,n=e.selection,r=e.storedMarks;if(!n.empty||!r)return Ta.empty;var o=vo((r||[]).find((function(e){return"style"===e.type.name})),{name:"color",value:/^.+$/});if(!o)return Ta.empty;var i=n.$anchor.parent,s=[];return t.descendants((function(e,t){e.eq(i)&&s.push(Ca.node(t,t+e.nodeSize,{style:"caret-color: "+o}))})),Ta.create(t,s)}}}),cd(),Hp(),Up(),Ou(),new Mr({key:new Pr("csp-fix"),props:{nodeViews:{paragraph:function(e,t){return new rp(e,t,"p")},div:function(e,t){return new rp(e,t,"div")},table_wrapper:function(e,t){return new rp(e,t,"div")},table_caption_external:function(e,t){return new rp(e,t,"div")},table:function(e,t){return new rp(e,t,"table")},table_row:function(e,t){return new rp(e,t,"tr")},table_cell:function(e,t){return new rp(e,t,"td")},table_header:function(e,t){return new rp(e,t,"th")},image:function(e,t){return new rp(e,t,"img",!0)}},markViews:{style:function(e,t,n){return new op(e,t,n)}}}})],a=Ev(Ev({},hv.getShortcuts({types:{listItem:"list_item",hardBreak:"hard_break"},toolsSettings:{bold:Mv,italic:Av,underline:Nv}})),{"Mod-k":function(){var t=e.state.linkDialog,n=e.view;if(n){var r=n.state,o=r.selection.empty,i=bo(r,r.schema.marks[Tv.mark]);t||o&&!i||e.setState({linkDialog:!0})}return!t},"Alt-F10":function(){var t,n=null===(t=e.element)||void 0===t?void 0:t.querySelector(".k-toolbar");if(n){var r=n.querySelector(de.join(","));if(r)return r.focus(),!0}return!1}}),c=this.props,u=c.defaultContent,d=void 0===u?"":u,p=c.value,h=c.onMount,f=p&&"string"!=typeof p?p:hv.createDocument(new an({nodes:qu,marks:Lu}),p||d,{preserveWhitespace:s}),m={state:Or.create({plugins:Ov(Ov([],l,!0),[cc(a),cc(Pi)],!1),doc:f}),transformPastedHTML:this.onPasteHtml,dispatchTransaction:this.dispatchTransaction,handleDOMEvents:{focus:this.onFocus,blur:this.onBlur,paste:this.onPaste},handleDrop:function(e,t,n,r){var o=!1;return n.content.nodesBetween(0,n.content.size,(function(e){o=o||"table_caption_external"===e.type.name})),o}},g={plugins:l,shortcuts:a,target:this,viewProps:m,dom:o},v=this._view=h&&h.call(void 0,g)||new Ja({mount:o},m);this.setState({view:v})}},t.propTypes={defaultContent:l.string,value:l.oneOfType([l.object,l.string]),defaultEditMode:l.oneOf(["iframe","div"]),contentStyle:l.object,dir:l.string,className:l.string,ariaDescribedBy:l.string,ariaLabelledBy:l.string,ariaLabel:l.string,style:l.object,tools:l.arrayOf(l.any),keyboardNavigation:l.bool,resizable:l.bool,preserveWhitespace:l.oneOf([!0,!1,"full"]),onMount:l.func,onFocus:l.func,onBlur:l.func,onChange:l.func,onPasteHtml:l.func,onExecute:l.func},t}(i.Component);ne(Pv);var Rv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dv=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={row:-1,col:-1},t}return Rv(t,e),t.prototype.renderCell=function(e,t,n){var r=this,o=Math.floor(e/this.props.columns),s=e%this.props.columns,l=s<=n&&o<=t;return i.createElement("span",{className:"k-ct-cell k-disabled"+(l?" ".concat("k-selected"):""),onMouseEnter:function(){return r.setState({row:o,col:s})},onClick:function(){return r.props.onCellClick.call(void 0,o,s)},key:e})},t.prototype.render=function(){var e=this,t=[],n=this.props.columns*this.props.rows,r=this.state,o=r.row,s=r.col,l=this.props.onDown,a=this.props.createTableMessage;s>-1&&(a=tv(this.props.createTableHintMessage,o+1,s+1));for(var c=0;c<n;c++)t.push(this.renderCell(c,o,s));return[i.createElement("div",{onMouseLeave:function(){return e.setState({row:-1,col:-1})},key:"cells",style:{borderColor:"inherit"},onPointerDown:l,onMouseDown:l},t),i.createElement("div",{className:"k-status",key:"status",onPointerDown:l,onMouseDown:l},a)]},t}(i.Component);const Iv=Dv;var _v,Fv,zv,Bv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Fv=_v||(_v={}),zv=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointerdown=!1,t.onWindowDown=function(e){var n=t.props.anchor;(!n||n!==e.target&&n.firstElementChild!==e.target)&&(t.props.show&&!t.pointerdown&&t.props.onClose(),t.pointerdown=!1)},t.onPointerDown=function(){return t.pointerdown=!0},t}return Bv(t,e),t.prototype.componentDidUpdate=function(e){e.show&&this.props.show&&this.props.onClose()},t.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onWindowDown),window.addEventListener("pointerdown",this.onWindowDown)},t.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onWindowDown),window.removeEventListener("pointerdown",this.onWindowDown)},t.prototype.render=function(){var e=this.props,n=e.show,r=e.anchor,o=e.dir,s=e.rows,l=void 0===s?t.defaultProps.rows:s,a=e.columns,c=void 0===a?t.defaultProps.columns:a,u="rtl"===o?"right":"left";return i.createElement(pe,{anchor:r,anchorAlign:{horizontal:u,vertical:"bottom"},popupAlign:{horizontal:u,vertical:"top"},popupClass:"k-ct-popup k-group k-reset k-state-border-up",show:n,style:"rtl"===o?{direction:"rtl"}:void 0},i.createElement(Iv,{rows:l,columns:c,createTableMessage:this.props.createTableMessage,createTableHintMessage:this.props.createTableHintMessage,onCellClick:this.props.onTableInsert,onDown:this.onPointerDown}))},t.propTypes={show:l.bool.isRequired,createTableMessage:l.string.isRequired,createTableHintMessage:l.string.isRequired,onClose:l.func.isRequired,onTableInsert:l.func.isRequired,anchor:l.any,rows:l.number,columns:l.number,dir:l.string},t.defaultProps={rows:6,columns:8},t}(i.Component),Fv.InsertTablePopup=zv;var Lv,jv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hv=globalThis&&globalThis.__assign||function(){return Hv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hv.apply(this,arguments)},Vv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(Lv||(Lv={})).createInsertTableTool=function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={openedPopup:!1},e.button=null,e.togglePopup=function(){e.setState({openedPopup:!e.state.openedPopup})},e.closePopup=function(){e.state.openedPopup&&e.togglePopup()},e.onTableInsert=function(t,n){var r=e.props.view;if(r){var o=r.state.schema.nodes,i=o.table,s=o.table_row,l=o.table_cell,a=th({table:i,table_row:s,table_cell:l},t,n);a&&$r(a,!0)(r.state,r.dispatch),r.focus(),e.closePopup()}},e}return jv(n,t),n.prototype.render=function(){var t=this,n=this.props,r=n.view,o=n.render,s=Vv(n,["view","render"]),l=r&&r.state,a=X(this),c=e.messages,u=c.createTable,d=c.createTableHint,p=a.toLanguageString(u,gg[u]),h=a.toLanguageString(d,gg[d]),f=Boolean(!l||!Lr(l,l.schema.nodes.table)||sv(l.selection.$from,(function(e){return"table_caption_external"===e.type.name}))),m=[i.createElement(Z,Hv({onClick:f?void 0:this.togglePopup,"aria-disabled":!!f||void 0,ref:function(e){return t.button=e&&e.element},key:"InsertTable"},Zg,{title:p},e.props,s,{className:Qe(s.className,e.props.className,{"k-disabled":f})})),r&&!f&&i.createElement(_v.InsertTablePopup,{key:"insertTablePopup",createTableMessage:p,createTableHintMessage:h,dir:s.dir,anchor:this.button,show:this.state.openedPopup,onClose:this.closePopup,onTableInsert:this.onTableInsert})||null];return o?o.call(void 0,m,{view:r}):m},n}(i.Component);return ne(t),t};var $v,Wv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uv=globalThis&&globalThis.__assign||function(){return Uv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Uv.apply(this,arguments)},qv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Kv=Qp.alignRemove,Jv=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gv=globalThis&&globalThis.__assign||function(){return Gv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gv.apply(this,arguments)},Xv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};($v||($v={})).createStyleDropDownList=function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.onChange=function(t){var r=t.target.value,o=n.props.view,i=e.style;if(o){Eo({style:i,value:r.value},e.commandName)(o.state,o.dispatch);var s=t.syntheticEvent;s&&"click"===s.type&&o.focus()}},n}return Jv(n,t),n.prototype.render=function(){var t=e.style,n=this.props,r=n.view,o=n.render,s=n.data,l=n.defaultItem,a=Xv(n,["view","render","data","defaultItem"]),c=s||e.items,u=l||e.defaultItem,d=r?xo(r.state,{name:t,value:/^.+$/}):[],p=X(this);u&&u.localizationKey&&((u=Gv({},u)).text=u.localizationKey?p.toLanguageString(u.localizationKey,gg[u.localizationKey]):u.text);var h=1===new Set(d).size?d[0]:null,f=i.createElement(he,Gv({value:h?c.find((function(e){return e.value===h})):h,data:c,defaultItem:u,itemRender:nv,textField:"text",dataItemKey:"value",onChange:this.onChange,style:ev,leftRightKeysNavigation:!1,title:u.text},a));return o?o.call(void 0,f,{view:r}):f},n}(i.Component);return ne(t),t};var Yv,Qv=globalThis&&globalThis.__assign||function(){return Qv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qv.apply(this,arguments)},Zv=function(e){var t=e.view,n=e.style,r=e.colorPickerProps,o=e.commandName,s=r.title,l=r.ariaLabel,a=r.view,c=void 0===a?"palette":a,u=i.useCallback((function(e){t&&(Eo({style:n,value:e.value},o)(t.state,t.dispatch),"palette"===c&&t.focus())}),[t,n,c,o]);return i.createElement(fe,Qv({onChange:u,onActiveColorClick:u},r,{title:s?me().toLanguageString(s,gg[s]):s,ariaLabel:l?me().toLanguageString(l,gg[l]):l}))},ey=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ty=globalThis&&globalThis.__assign||function(){return ty=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ty.apply(this,arguments)},ny=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(Yv||(Yv={})).createFormatBlockDropDownList=function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.onChange=function(t){var r=t.target.value,o=n.props.view;if(o&&No(r.value,e.commandName)(o.state,o.dispatch)){var i=t.syntheticEvent;i&&"click"===i.type&&o.focus()}},n}return ey(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=t.data,s=t.defaultItem,l=ny(t,["view","render","data","defaultItem"]),a=o||e.items,c=s||e.defaultItem,u=n&&n.state,d=u?Po(u):[],p=X(this);c&&c.localizationKey&&((c=ty({},c)).text=c.localizationKey?p.toLanguageString(c.localizationKey,gg[c.localizationKey]):c.text);var h=1===new Set(d).size?d[0]:null,f=i.createElement(he,ty({value:h?a.find((function(e){return e.value===h})):h,onChange:this.onChange,itemRender:nv,data:a,defaultItem:c,textField:"text",dataItemKey:"value",style:ev,leftRightKeysNavigation:!1,title:c.text},l));return r?r.call(void 0,f,{view:n}):f},n}(i.Component);return ne(t),t};var ry,oy,iy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sy=globalThis&&globalThis.__assign||function(){return sy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sy.apply(this,arguments)},ly=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ay=function(e,t){var n=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return iy(r,n),r.prototype.render=function(){var n=this.props,r=n.view,o=n.render,s=ly(n,["view","render"]),l=X(this),a=e.messages.title,c=r&&r.state,u=!!c&&!t(c),d=i.createElement(Z,sy({onClick:u?void 0:function(){return r&&t(r.state,(function(t){return r.dispatch(t.setMeta("commandName",e.commandName))}))},"aria-disabled":!!u||void 0},Zg,{title:l.toLanguageString(a,gg[a])},e.props,s,{className:Qe(s.className,e.props.className,{"k-disabled":u})}));return o?o.call(void 0,d,{view:r}):d},r}(i.Component);return ne(n),n};(oy=ry||(ry={})).createUndoTool=function(e){return ay(e,ud)},oy.createRedoTool=function(e){return ay(e,dd)};var cy,uy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dy=globalThis&&globalThis.__assign||function(){return dy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dy.apply(this,arguments)},py=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(cy||(cy={})).createIndentTool=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return uy(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=py(t,["view","render"]),s=o.dir,l=n&&n.state,a=l&&l.schema.nodes,c=a&&a[e.listsTypes.listItem],u=e.actions,d=!!l&&!!c&&(Di(l,u,s)||u.some((function(e){return a&&a[e.node]&&Do(l,a[e.node])})))&&!Do(l,c),p=!!l&&Ii(l,c),h=d||p,f=X(this),m=e.messages.title,g=!h,v=i.createElement(Z,dy({onClick:g?void 0:function(){n&&p&&c?Ko(c)(n.state,n.dispatch):n&&d&&Ri(u,e.commandName,s)(n.state,n.dispatch)},"aria-disabled":!!g||void 0,title:f.toLanguageString(m,gg[m])},Zg,e.props,o,{className:Qe(o.className,e.props.className,{"k-disabled":g})}));return r?r.call(void 0,v,{view:n}):v},n}(i.Component);return ne(t),t};var hy,fy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),my=globalThis&&globalThis.__assign||function(){return my=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},my.apply(this,arguments)},gy=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(hy||(hy={})).createInlineFormatTool=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return fy(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=gy(t,["view","render"]),s=n&&n.state,l={mark:e.mark,altMarks:e.altMarks,altStyle:e.altStyle},a=X(this),c=e.messages.title,u=i.createElement(Z,my({onClick:function(){return n&&Co(l,s&&s.tr.setMeta("commandName",e.commandName))(n.state,n.dispatch)},selected:!!s&&go(s,l),togglable:!0},Zg,{title:a.toLanguageString(c,gg[c])},e.props,o));return r?r.call(void 0,u,{view:n}):u},n}(i.Component);return ne(t),t};var vy,yy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),by=globalThis&&globalThis.__assign||function(){return by=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},by.apply(this,arguments)},wy=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ky=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xy.apply(this,arguments)},Sy=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(vy||(vy={})).createLinkTool=function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={openedDialog:!1},e.toggleDialog=function(){e.setState({openedDialog:!e.state.openedDialog})},e}return ky(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=Sy(t,["view","render"]),s=n&&n.state,l=!s||s.selection.empty,a=s&&bo(s,s.schema.marks[e.mark]),c=X(this),u=e.messages.insertHyperlink,d=l&&!a,p=[i.createElement(Z,xy({onClick:d?void 0:this.toggleDialog,"aria-disabled":!!d||void 0,key:"link"},Zg,{title:c.toLanguageString(u,gg[u])},e.props,o,{className:Qe(o.className,e.props.className,{"k-disabled":d})})),this.state.openedDialog&&n&&i.createElement(dv.InsertLinkDialog,{key:"insertLinkDialog",settings:e,dir:o.dir,view:n,onClose:this.toggleDialog})||null];return r?r.call(void 0,p,{view:n}):p},n}(i.Component);return ne(t),t};var Cy,Ey=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oy=globalThis&&globalThis.__assign||function(){return Oy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oy.apply(this,arguments)},Ty=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(Cy||(Cy={})).createListTool=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ey(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=Ty(t,["view","render"]),s=!1,l=X(this),a=e.messages.title,c=e.types,u=e.listType;if(n){var d=n.state,p=d.schema.nodes,h=Do(d,p[c.orderedList]),f=Do(d,p[c.bulletList]);s=u===c.orderedList?h&&!f:!h&&f}var m=i.createElement(Z,Oy({onClick:function(){return n&&Hi(n.state,n.dispatch,n,Oy({listType:u},c),e.commandName)},togglable:!0,selected:s,title:l.toLanguageString(a,gg[a])},Zg,e.props,o));return r?r.call(void 0,m,{view:n}):m},n}(i.Component);return ne(t),t};var My,Ay=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ny=globalThis&&globalThis.__assign||function(){return Ny=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ny.apply(this,arguments)},Py=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(My||(My={})).createOutdentTool=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ay(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=Py(t,["view","render"]),s=n&&n.state,l=o.dir,a=!!s&&Di(s,e.actions,l),c=s&&s.schema.nodes[e.listsTypes.listItem],u=!!s&&_i(s,{nodes:e.actions,listsTypes:e.listsTypes}),d=a||u,p=X(this),h=e.messages.title,f=!d,m=i.createElement(Z,Ny({onClick:f?void 0:function(){n&&u&&c?qo(c)(n.state,n.dispatch):n&&a&&Ri(e.actions,e.commandName,l)(n.state,n.dispatch)},"aria-disabled":!!f||void 0,title:p.toLanguageString(h,gg[h])},Zg,e.props,o,{className:Qe(o.className,e.props.className,{"k-disabled":f})}));return r?r.call(void 0,m,{view:n}):m},n}(i.Component);return ne(t),t};var Ry,Dy,Iy=function(e,t){var n=ph(e,t);if(n&&!t){var r=xc(e),o=r&&r.node(r.depth);if(o&&1===o.content.childCount)return!1}return n},_y=function(e,t){var n=hu(e,t);if(n&&!t){var r=xc(e),o=r&&r.node(r.depth-1);if(o&&1===o.content.childCount)return!1}return n};(Dy=Ry||(Ry={})).createAddRowBeforeTool=function(e){return ay(e,sh)},Dy.createAddRowAfterTool=function(e){return ay(e,lh)},Dy.createAddColumnBeforeTool=function(e){return ay(e,uh)},Dy.createAddColumnAfterTool=function(e){return ay(e,dh)},Dy.createDeleteRowTool=function(e){return ay(e,_y)},Dy.createDeleteColumnTool=function(e){return ay(e,Iy)},Dy.createDeleteTableTool=function(e){return ay(e,Eu)},Dy.createMergeCellsTool=function(e){return ay(e,mu)},Dy.createSplitCellTool=function(e){return ay(e,gu)};var Fy,zy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),By=globalThis&&globalThis.__assign||function(){return By=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},By.apply(this,arguments)},Ly=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(Fy||(Fy={})).createUnlinkTool=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return zy(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=Ly(t,["view","render"]),s={mark:e.mark},l=!!n&&go(n.state,s),a=X(this),c=e.messages.title,u=!l,d=i.createElement(Z,By({onClick:u?void 0:function(){return n&&Oo(s,n.state.tr.setMeta("commandName",e.commandName))(n.state,n.dispatch)},"aria-disabled":!!u||void 0},Zg,{title:a.toLanguageString(c,gg[c])},e.props,o,{className:Qe(o.className,e.props.className,{"k-disabled":u})}));return r?r.call(void 0,d,{view:n}):d},n}(i.Component);return ne(t),t};var jy,Hy=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vy=globalThis&&globalThis.__assign||function(){return Vy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vy.apply(this,arguments)},$y=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};(jy||(jy={})).createViewHtmlTool=function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={openedDialog:!1},e.toggleDialog=function(){e.setState({openedDialog:!e.state.openedDialog})},e}return Hy(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=$y(t,["view","render"]),s=X(this),l=e.messages.viewHtml,a=[i.createElement(Z,Vy({onClick:this.toggleDialog,key:"viewHtml"},Zg,{title:s.toLanguageString(l,gg[l])},e.props,o)),this.state.openedDialog&&n&&i.createElement(dv.ViewHtmlDialog,{key:"viewHtmlDialog",view:n,settings:e,dir:o.dir,onClose:this.toggleDialog})||null];return r?r.call(void 0,a,{view:n}):a},n}(i.Component);return ne(t),t};var Wy=globalThis&&globalThis.__assign||function(){return Wy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wy.apply(this,arguments)},Uy=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},qy=Qp.print,Ky=function(e){var t=e.view,n=e.render,r=e.settings,o=void 0===r?qy:r,s=Uy(e,["view","render","settings"]),l=t&&t.dom,a=l&&l.ownerDocument,c=a&&a.defaultView,u=o.messages.title,d=!c||c===window,p=i.useCallback((function(){c&&c.print()}),[c]),h=i.createElement(Z,Wy({onClick:d?void 0:p,"aria-disabled":!!d||void 0,title:me().toLanguageString(u,gg[u])},Zg,o.props,s,{className:Qe(s.className,o.props.className,{"k-disabled":d})}));return n?n.call(void 0,h,{view:t}):h};function Jy(e,t,n){void 0===n&&(n={});var r=Zy;if(n.forceProxy&&!n.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");n.forceProxy||(Xy()&&(r=Qy),navigator.msSaveBlob&&(r=Yy)),r(e,t,n)}var Gy=function(){return document.createElement("a")},Xy=function(){return"download"in Gy()};function Yy(e,t){var n=e;if("string"==typeof e){for(var r=e.split(";base64,"),o=r[0],i=atob(r[1]),s=new Uint8Array(i.length),l=0;l<i.length;l++)s[l]=i.charCodeAt(l);n=new Blob([s.buffer],{type:o})}navigator.msSaveBlob(n,t)}function Qy(e,t){var n=e;window.Blob&&e instanceof Blob&&(n=URL.createObjectURL(e));var r=Gy();r.download=t,r.href=n;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(o),setTimeout((function(){return URL.revokeObjectURL(n)}))}function Zy(e,t,n){if(n.proxyURL){var r=document.createElement("form");r.setAttribute("action",n.proxyURL),r.setAttribute("method","POST"),r.setAttribute("target",n.proxyTarget||"_self");var o=n.proxyData||{};o.fileName=t;var i=e.split(";base64,");for(var s in o.contentType=i[0].replace("data:",""),o.base64=i[1],o)if(o.hasOwnProperty(s)){var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name",s),l.setAttribute("value",o[s]),r.appendChild(l)}document.body.appendChild(r),r.submit(),document.body.removeChild(r)}}var eb={},tb=i;function nb(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rb=Object.prototype.hasOwnProperty,ob=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ib={},sb={};function lb(e){return!!rb.call(sb,e)||!rb.call(ib,e)&&(ob.test(e)?sb[e]=!0:(ib[e]=!0,!1))}function ab(e,t,n,r,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var cb={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){cb[e]=new ab(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];cb[t]=new ab(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){cb[e]=new ab(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){cb[e]=new ab(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){cb[e]=new ab(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){cb[e]=new ab(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){cb[e]=new ab(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){cb[e]=new ab(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){cb[e]=new ab(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ub=/[\-:]([a-z])/g;function db(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ub,db);cb[t]=new ab(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ub,db);cb[t]=new ab(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ub,db);cb[t]=new ab(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){cb[e]=new ab(e,1,!1,e.toLowerCase(),null,!1,!1)})),cb.xlinkHref=new ab("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){cb[e]=new ab(e,1,!1,e.toLowerCase(),null,!0,!0)}));var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach((function(e){hb.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pb[t]=pb[e]}))}));var fb=/["'&<>]/;function mb(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=fb.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var gb=/([A-Z])/g,vb=/^ms-/,yb=Array.isArray;function bb(e,t){return{insertionMode:e,selectedValue:t}}var wb=new Map;function kb(e,t,n){if("object"!=typeof n)throw Error(nb(62));for(var r in t=!0,n)if(rb.call(n,r)){var o=n[r];if(null!=o&&"boolean"!=typeof o&&""!==o){if(0===r.indexOf("--")){var i=mb(r);o=mb((""+o).trim())}else{i=r;var s=wb.get(i);void 0!==s||(s=mb(i.replace(gb,"-$1").toLowerCase().replace(vb,"-ms-")),wb.set(i,s)),i=s,o="number"==typeof o?0===o||rb.call(pb,r)?""+o:o+"px":mb((""+o).trim())}t?(t=!1,e.push(' style="',i,":",o)):e.push(";",i,":",o)}}t||e.push('"')}function xb(e,t,n,r){switch(n){case"style":return void kb(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=cb.hasOwnProperty(n)?cb[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:!0===r?e.push(" ",n,'=""'):!1!==r&&e.push(" ",n,'="',mb(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',mb(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',mb(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',mb(r),'"')}}else if(lb(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',mb(r),'"')}}function Sb(e,t,n){if(null!=t){if(null!=n)throw Error(nb(60));if("object"!=typeof t||!("__html"in t))throw Error(nb(61));null!=(t=t.__html)&&e.push(""+t)}}function Cb(e,t,n,r){e.push(Tb(n));var o,i=n=null;for(o in t)if(rb.call(t,o)){var s=t[o];if(null!=s)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:xb(e,r,o,s)}}return e.push(">"),Sb(e,i,n),"string"==typeof n?(e.push(mb(n)),null):n}var Eb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ob=new Map;function Tb(e){var t=Ob.get(e);if(void 0===t){if(!Eb.test(e))throw Error(nb(65,e));t="<"+e,Ob.set(e,t)}return t}function Mb(e,t,n){if(e.push('\x3c!--$?--\x3e<template id="'),null===n)throw Error(nb(395));return e.push(n),e.push('"></template>')}var Ab=/[<\u2028\u2029]/g;function Nb(e){return JSON.stringify(e).replace(Ab,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function Pb(e,t,n,r){return n.generateStaticMarkup?(e.push(mb(t)),!1):(""===t?e=r:(r&&e.push("\x3c!-- --\x3e"),e.push(mb(t)),e=!0),e)}var Rb=Object.assign,Db=Symbol.for("react.element"),Ib=Symbol.for("react.portal"),_b=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),zb=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),Lb=Symbol.for("react.context"),jb=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),Vb=Symbol.for("react.suspense_list"),$b=Symbol.for("react.memo"),Wb=Symbol.for("react.lazy"),Ub=Symbol.for("react.scope"),qb=Symbol.for("react.debug_trace_mode"),Kb=Symbol.for("react.legacy_hidden"),Jb=Symbol.for("react.default_value"),Gb=Symbol.iterator;function Xb(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _b:return"Fragment";case Ib:return"Portal";case zb:return"Profiler";case Fb:return"StrictMode";case Hb:return"Suspense";case Vb:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Lb:return(e.displayName||"Context")+".Consumer";case Bb:return(e._context.displayName||"Context")+".Provider";case jb:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case $b:return null!==(t=e.displayName||null)?t:Xb(e.type)||"Memo";case Wb:t=e._payload,e=e._init;try{return Xb(e(t))}catch(n){}}return null}var Yb={};function Qb(e,t){if(!(e=e.contextTypes))return Yb;var n,r={};for(n in e)r[n]=t[n];return r}var Zb=null;function ew(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(nb(401))}else{if(null===n)throw Error(nb(401));ew(e,n)}t.context._currentValue2=t.value}}function tw(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&tw(e)}function nw(e){var t=e.parent;null!==t&&nw(t),e.context._currentValue2=e.value}function rw(e,t){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(nb(402));e.depth===t.depth?ew(e,t):rw(e,t)}function ow(e,t){var n=t.parent;if(null===n)throw Error(nb(402));e.depth===n.depth?ew(e,n):ow(e,n),t.context._currentValue2=t.value}function iw(e){var t=Zb;t!==e&&(null===t?nw(e):null===e?tw(t):t.depth===e.depth?ew(t,e):t.depth>e.depth?rw(t,e):ow(t,e),Zb=e)}var sw={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function lw(e,t,n,r){var o=void 0!==e.state?e.state:null;e.updater=sw,e.props=n,e.state=o;var i={queue:[],replace:!1};e._reactInternals=i;var s=t.contextType;if(e.context="object"==typeof s&&null!==s?s._currentValue2:r,"function"==typeof(s=t.getDerivedStateFromProps)&&(o=null==(s=s(n,o))?o:Rb({},o,s),e.state=o),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&sw.enqueueReplaceState(e,e.state,null),null!==i.queue&&0<i.queue.length)if(t=i.queue,s=i.replace,i.queue=null,i.replace=!1,s&&1===t.length)e.state=t[0];else{for(i=s?t[0]:e.state,o=!0,s=s?1:0;s<t.length;s++){var l=t[s];null!=(l="function"==typeof l?l.call(e,i,n,r):l)&&(o?(o=!1,i=Rb({},i,l)):Rb(i,l))}e.state=i}else i.queue=null}var aw={id:1,overflow:""};function cw(e,t,n){var r=e.id;e=e.overflow;var o=32-uw(r)-1;r&=~(1<<o),n+=1;var i=32-uw(t)+o;if(30<i){var s=o-o%5;return i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,{id:1<<32-uw(t)+o|n<<o|r,overflow:i+e}}return{id:1<<i|n<<o|r,overflow:e}}var uw=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(dw(e)/pw|0)|0},dw=Math.log,pw=Math.LN2,hw="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},fw=null,mw=null,gw=null,vw=null,yw=!1,bw=!1,ww=0,kw=null,xw=0;function Sw(){if(null===fw)throw Error(nb(321));return fw}function Cw(){if(0<xw)throw Error(nb(312));return{memoizedState:null,queue:null,next:null}}function Ew(){return null===vw?null===gw?(yw=!1,gw=vw=Cw()):(yw=!0,vw=gw):null===vw.next?(yw=!1,vw=vw.next=Cw()):(yw=!0,vw=vw.next),vw}function Ow(){mw=fw=null,bw=!1,gw=null,xw=0,vw=kw=null}function Tw(e,t){return"function"==typeof t?t(e):t}function Mw(e,t,n){if(fw=Sw(),vw=Ew(),yw){var r=vw.queue;if(t=r.dispatch,null!==kw&&void 0!==(n=kw.get(r))){kw.delete(r),r=vw.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return vw.memoizedState=r,[r,t]}return[vw.memoizedState,t]}return e=e===Tw?"function"==typeof t?t():t:void 0!==n?n(t):t,vw.memoizedState=e,e=(e=vw.queue={last:null,dispatch:null}).dispatch=Nw.bind(null,fw,e),[vw.memoizedState,e]}function Aw(e,t){if(fw=Sw(),t=void 0===t?null:t,null!==(vw=Ew())){var n=vw.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++)if(!hw(t[o],r[o])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),vw.memoizedState=[e,t],e}function Nw(e,t,n){if(25<=xw)throw Error(nb(301));if(e===fw)if(bw=!0,e={action:n,next:null},null===kw&&(kw=new Map),void 0===(n=kw.get(t)))kw.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function Pw(){throw Error(nb(394))}function Rw(){}var Dw={readContext:function(e){return e._currentValue2},useContext:function(e){return Sw(),e._currentValue2},useMemo:Aw,useReducer:Mw,useRef:function(e){fw=Sw();var t=(vw=Ew()).memoizedState;return null===t?(e={current:e},vw.memoizedState=e):t},useState:function(e){return Mw(Tw,e)},useInsertionEffect:Rw,useLayoutEffect:function(){},useCallback:function(e,t){return Aw((function(){return e}),t)},useImperativeHandle:Rw,useEffect:Rw,useDebugValue:Rw,useDeferredValue:function(e){return Sw(),e},useTransition:function(){return Sw(),[!1,Pw]},useId:function(){var e=mw.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-uw(e)-1)).toString(32)+t;var n=Iw;if(null===n)throw Error(nb(404));return t=ww++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Sw(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(nb(407));return n()}},Iw=null,_w=tb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Fw(e){return null}function zw(){}function Bw(e,t,n,r,o,i,s,l){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var a={node:t,ping:function(){var t=e.pingedTasks;t.push(a),1===t.length&&Zw(e)},blockedBoundary:n,blockedSegment:r,abortSet:o,legacyContext:i,context:s,treeContext:l};return o.add(a),a}function Lw(e,t,n,r,o,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:o,textEmbedded:i}}function jw(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Hw(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Vw(e,t,n,r,o){for(fw={},mw=t,ww=0,e=n(r,o);bw;)bw=!1,ww=0,xw+=1,vw=null,e=n(r,o);return Ow(),e}function $w(e,t,n,r){var o=n.render(),i=r.childContextTypes;if(null!=i){var s=t.legacyContext;if("function"!=typeof n.getChildContext)r=s;else{for(var l in n=n.getChildContext())if(!(l in i))throw Error(nb(108,Xb(r)||"Unknown",l));r=Rb({},s,n)}t.legacyContext=r,qw(e,t,o),t.legacyContext=s}else qw(e,t,o)}function Ww(e,t){if(e&&e.defaultProps){for(var n in t=Rb({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Uw(e,t,n,r,o){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){o=Qb(n,t.legacyContext);var i=n.contextType;lw(i=new n(r,"object"==typeof i&&null!==i?i._currentValue2:o),n,r,o),$w(e,t,i,n)}else{o=Vw(e,t,n,r,i=Qb(n,t.legacyContext));var s=0!==ww;if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof)lw(o,n,r,i),$w(e,t,o,n);else if(s){r=t.treeContext,t.treeContext=cw(r,1,0);try{qw(e,t,o)}finally{t.treeContext=r}}else qw(e,t,o)}else{if("string"!=typeof n){switch(n){case Kb:case qb:case Fb:case zb:case _b:case Vb:return void qw(e,t,r.children);case Ub:throw Error(nb(343));case Hb:e:{n=t.blockedBoundary,o=t.blockedSegment,i=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},a=Lw(0,o.chunks.length,l,o.formatContext,!1,!1);o.children.push(a),o.lastPushedText=!1;var c=Lw(0,0,null,o.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=c;try{if(Jw(e,t,r),e.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("\x3c!-- --\x3e"),c.status=1,Yw(l,c),0===l.pendingTasks)break e}catch(u){c.status=4,l.forceClientRender=!0,l.errorDigest=jw(e,u)}finally{t.blockedBoundary=n,t.blockedSegment=o}t=Bw(e,i,n,a,s,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case jb:if(r=Vw(e,t,n.render,r,o),0!==ww){n=t.treeContext,t.treeContext=cw(n,1,0);try{qw(e,t,r)}finally{t.treeContext=n}}else qw(e,t,r);return;case $b:return void Uw(e,t,n=n.type,r=Ww(n,r),o);case Bb:if(o=r.children,n=n._context,r=r.value,i=n._currentValue2,n._currentValue2=r,Zb=r={parent:s=Zb,depth:null===s?0:s.depth+1,context:n,parentValue:i,value:r},t.context=r,qw(e,t,o),null===(e=Zb))throw Error(nb(403));return r=e.parentValue,e.context._currentValue2=r===Jb?e.context._defaultValue:r,e=Zb=e.parent,void(t.context=e);case Lb:return void qw(e,t,r=(r=r.children)(n._currentValue2));case Wb:return void Uw(e,t,n=(o=n._init)(n._payload),r=Ww(n,r),void 0)}throw Error(nb(130,null==n?n:typeof n,""))}switch(i=function(e,t,n,r,o){switch(t){case"select":e.push(Tb("select"));var i=null,s=null;for(u in n)if(rb.call(n,u)){var l=n[u];if(null!=l)switch(u){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;case"defaultValue":case"value":break;default:xb(e,r,u,l)}}return e.push(">"),Sb(e,s,i),i;case"option":s=o.selectedValue,e.push(Tb("option"));var a=l=null,c=null,u=null;for(i in n)if(rb.call(n,i)){var d=n[i];if(null!=d)switch(i){case"children":l=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":a=d;default:xb(e,r,i,d)}}if(null!=s)if(n=null!==a?""+a:function(e){var t="";return tb.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(l),yb(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){e.push(' selected=""');break}}else""+s===n&&e.push(' selected=""');else c&&e.push(' selected=""');return e.push(">"),Sb(e,u,l),l;case"textarea":for(l in e.push(Tb("textarea")),u=s=i=null,n)if(rb.call(n,l)&&null!=(a=n[l]))switch(l){case"children":u=a;break;case"value":i=a;break;case"defaultValue":s=a;break;case"dangerouslySetInnerHTML":throw Error(nb(91));default:xb(e,r,l,a)}if(null===i&&null!==s&&(i=s),e.push(">"),null!=u){if(null!=i)throw Error(nb(92));if(yb(u)&&1<u.length)throw Error(nb(93));i=""+u}return"string"==typeof i&&"\n"===i[0]&&e.push("\n"),null!==i&&e.push(mb(""+i)),null;case"input":for(s in e.push(Tb("input")),a=u=l=i=null,n)if(rb.call(n,s)&&null!=(c=n[s]))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(nb(399,"input"));case"defaultChecked":a=c;break;case"defaultValue":l=c;break;case"checked":u=c;break;case"value":i=c;break;default:xb(e,r,s,c)}return null!==u?xb(e,r,"checked",u):null!==a&&xb(e,r,"checked",a),null!==i?xb(e,r,"value",i):null!==l&&xb(e,r,"value",l),e.push("/>"),null;case"menuitem":for(var p in e.push(Tb("menuitem")),n)if(rb.call(n,p)&&null!=(i=n[p]))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(nb(400));default:xb(e,r,p,i)}return e.push(">"),null;case"title":for(d in e.push(Tb("title")),i=null,n)if(rb.call(n,d)&&null!=(s=n[d]))switch(d){case"children":i=s;break;case"dangerouslySetInnerHTML":throw Error(nb(434));default:xb(e,r,d,s)}return e.push(">"),i;case"listing":case"pre":for(a in e.push(Tb(t)),s=i=null,n)if(rb.call(n,a)&&null!=(l=n[a]))switch(a){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;default:xb(e,r,a,l)}if(e.push(">"),null!=s){if(null!=i)throw Error(nb(60));if("object"!=typeof s||!("__html"in s))throw Error(nb(61));null!=(n=s.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}return"string"==typeof i&&"\n"===i[0]&&e.push("\n"),i;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var h in e.push(Tb(t)),n)if(rb.call(n,h)&&null!=(i=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(nb(399,t));default:xb(e,r,h,i)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Cb(e,n,t,r);case"html":return 0===o.insertionMode&&e.push("<!DOCTYPE html>"),Cb(e,n,t,r);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return Cb(e,n,t,r);for(c in e.push(Tb(t)),s=i=null,n)if(rb.call(n,c)&&null!=(l=n[c]))switch(c){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;case"style":kb(e,r,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:lb(c)&&"function"!=typeof l&&"symbol"!=typeof l&&e.push(" ",c,'="',mb(l),'"')}return e.push(">"),Sb(e,s,i),i}}((o=t.blockedSegment).chunks,n,r,e.responseState,o.formatContext),o.lastPushedText=!1,s=o.formatContext,o.formatContext=function(e,t,n){switch(t){case"select":return bb(1,null!=n.value?n.value:n.defaultValue);case"svg":return bb(2,null);case"math":return bb(3,null);case"foreignObject":return bb(1,null);case"table":return bb(4,null);case"thead":case"tbody":case"tfoot":return bb(5,null);case"colgroup":return bb(7,null);case"tr":return bb(6,null)}return 4<=e.insertionMode||0===e.insertionMode?bb(1,null):e}(s,n,r),Jw(e,t,i),o.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push("</",n,">")}o.lastPushedText=!1}}function qw(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case Db:return void Uw(e,t,n.type,n.props,n.ref);case Ib:throw Error(nb(257));case Wb:var r=n._init;return void qw(e,t,n=r(n._payload))}if(yb(n))return void Kw(e,t,n);if((r=null===n||"object"!=typeof n?null:"function"==typeof(r=Gb&&n[Gb]||n["@@iterator"])?r:null)&&(r=r.call(n))){if(!(n=r.next()).done){var o=[];do{o.push(n.value),n=r.next()}while(!n.done);Kw(e,t,o)}return}throw e=Object.prototype.toString.call(n),Error(nb(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(r=t.blockedSegment).lastPushedText=Pb(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"==typeof n&&((r=t.blockedSegment).lastPushedText=Pb(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function Kw(e,t,n){for(var r=n.length,o=0;o<r;o++){var i=t.treeContext;t.treeContext=cw(i,r,o);try{Jw(e,t,n[o])}finally{t.treeContext=i}}}function Jw(e,t,n){var r=t.blockedSegment.formatContext,o=t.legacyContext,i=t.context;try{return qw(e,t,n)}catch(a){if(Ow(),"object"!=typeof a||null===a||"function"!=typeof a.then)throw t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=i,iw(i),a;n=a;var s=t.blockedSegment,l=Lw(0,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(l),s.lastPushedText=!1,e=Bw(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=i,iw(i)}}function Gw(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,Qw(this,t,e)}function Xw(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(nb(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return Xw(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function Yw(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&Yw(e,n)}else e.completedSegments.push(t)}function Qw(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(nb(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=zw,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&Yw(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Gw,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(Yw(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function Zw(e){if(2!==e.status){var t=Zb,n=_w.current;_w.current=Dw;var r=Iw;Iw=e.responseState;try{var o,i=e.pingedTasks;for(o=0;o<i.length;o++){var s=i[o],l=e,a=s.blockedSegment;if(0===a.status){iw(s.context);try{qw(l,s,s.node),l.responseState.generateStaticMarkup||a.lastPushedText&&a.textEmbedded&&a.chunks.push("\x3c!-- --\x3e"),s.abortSet.delete(s),a.status=1,Qw(l,s.blockedBoundary,a)}catch(h){if(Ow(),"object"==typeof h&&null!==h&&"function"==typeof h.then){var c=s.ping;h.then(c,c)}else{s.abortSet.delete(s),a.status=4;var u=s.blockedBoundary,d=h,p=jw(l,d);null===u?Hw(l,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=p,u.parentFlushed&&l.clientRenderedBoundaries.push(u))),l.allPendingTasks--,0===l.allPendingTasks&&(0,l.onAllReady)()}}}}i.splice(0,o),null!==e.destination&&ik(e,e.destination)}catch(h){jw(e,h),Hw(e,h)}finally{Iw=r,_w.current=n,n===Dw&&iw(t)}}}function ek(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var o=!0;r=n.chunks;var i=0;n=n.children;for(var s=0;s<n.length;s++){for(o=n[s];i<o.index;i++)t.push(r[i]);o=tk(e,t,o)}for(;i<r.length-1;i++)t.push(r[i]);return i<r.length&&(o=t.push(r[i])),o;default:throw Error(nb(390))}}function tk(e,t,n){var r=n.boundary;if(null===r)return ek(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),r&&(t.push(' data-dgst="'),r=mb(r),t.push(r),t.push('"')),t.push("></template>")),ek(e,t,n),!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var o=e.responseState,i=o.nextSuspenseID++;return o=o.boundaryPrefix+i.toString(16),r=r.id=o,Mb(t,e.responseState,r),ek(e,t,n),t.push("\x3c!--/$--\x3e")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),Mb(t,e.responseState,r.id),ek(e,t,n),t.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e"),1!==(n=r.completedSegments).length)throw Error(nb(391));return tk(e,t,n[0]),!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function nk(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(nb(397))}}(t,e.responseState,n.formatContext,n.id),tk(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(nb(397))}}(t,n.formatContext)}function rk(e,t,n){for(var r=n.completedSegments,o=0;o<r.length;o++)ok(e,t,n,r[o]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===r)throw Error(nb(395));return n=n.toString(16),t.push(r),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function ok(e,t,n,r){if(2===r.status)return!0;var o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(nb(392));return nk(e,t,r)}return nk(e,t,r),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),o=o.toString(16),t.push(o),t.push('","'),t.push(e.placeholderPrefix),t.push(o),t.push('")<\/script>')}function ik(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){tk(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)t.push(r[n]);n<r.length&&t.push(r[n])}var o,i=e.clientRenderedBoundaries;for(o=0;o<i.length;o++){var s=i[o];r=t;var l=e.responseState,a=s.id,c=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(l.startInlineScript),l.sentClientRenderFunction?r.push('$RX("'):(l.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===a)throw Error(nb(395));if(r.push(a),r.push('"'),c||u||d){r.push(",");var p=Nb(c||"");r.push(p)}if(u||d){r.push(",");var h=Nb(u||"");r.push(h)}if(d){r.push(",");var f=Nb(d);r.push(f)}if(!r.push(")<\/script>"))return e.destination=null,o++,void i.splice(0,o)}i.splice(0,o);var m=e.completedBoundaries;for(o=0;o<m.length;o++)if(!rk(e,t,m[o]))return e.destination=null,o++,void m.splice(0,o);m.splice(0,o);var g=e.partialBoundaries;for(o=0;o<g.length;o++){var v=g[o];e:{i=e,s=t;var y=v.completedSegments;for(l=0;l<y.length;l++)if(!ok(i,s,v,y[l])){l++,y.splice(0,l);var b=!1;break e}y.splice(0,l),b=!0}if(!b)return e.destination=null,o++,void g.splice(0,o)}g.splice(0,o);var w=e.completedBoundaries;for(o=0;o<w.length;o++)if(!rk(e,t,w[o]))return e.destination=null,o++,void w.splice(0,o);w.splice(0,o)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function sk(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Xw(n,e,t)})),n.clear(),null!==e.destination&&ik(e,e.destination)}catch(r){jw(e,r),Hw(e,r)}}function lk(){}function ak(e,t,n,r){var o=!1,i=null,s="",l={push:function(e){return null!==e&&(s+=e),!0},destroy:function(e){o=!0,i=e}},a=!1;if(e=function(e,t,n,r,o,i,s){var l=[],a=new Set;return(n=Lw(t={destination:null,responseState:t,progressiveChunkSize:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:a,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?Fw:o,onAllReady:zw,onShellReady:void 0===s?zw:s,onShellError:zw,onFatalError:zw},0,null,n,!1,!1)).parentFlushed=!0,e=Bw(t,e,null,n,a,Yb,null,aw),l.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,lk,0,(function(){a=!0})),Zw(e),sk(e,r),1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{ik(e,l)}catch(c){jw(e,c),Hw(e,c)}}if(o)throw i;if(!a)throw Error(nb(426));return s}eb.renderToNodeStream=function(){throw Error(nb(207))},eb.renderToStaticMarkup=function(e,t){return ak(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},eb.renderToStaticNodeStream=function(){throw Error(nb(208))},eb.renderToString=function(e,t){return ak(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},eb.version="18.3.1";var ck={},uk=i;function dk(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pk=null,hk=0;function fk(e,t){if(0!==t.length)if(512<t.length)0<hk&&(e.enqueue(new Uint8Array(pk.buffer,0,hk)),pk=new Uint8Array(512),hk=0),e.enqueue(t);else{var n=pk.length-hk;n<t.length&&(0===n?e.enqueue(pk):(pk.set(t.subarray(0,n),hk),e.enqueue(pk),t=t.subarray(n)),pk=new Uint8Array(512),hk=0),pk.set(t,hk),hk+=t.length}}function mk(e,t){return fk(e,t),!0}function gk(e){pk&&0<hk&&(e.enqueue(new Uint8Array(pk.buffer,0,hk)),pk=null,hk=0)}var vk=new TextEncoder;function yk(e){return vk.encode(e)}function bk(e){return vk.encode(e)}function wk(e,t){"function"==typeof e.error?e.error(t):e.close()}var kk=Object.prototype.hasOwnProperty,xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sk={},Ck={};function Ek(e){return!!kk.call(Ck,e)||!kk.call(Sk,e)&&(xk.test(e)?Ck[e]=!0:(Sk[e]=!0,!1))}function Ok(e,t,n,r,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Tk={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Tk[e]=new Ok(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Tk[t]=new Ok(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Tk[e]=new Ok(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Tk[e]=new Ok(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Tk[e]=new Ok(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Tk[e]=new Ok(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Tk[e]=new Ok(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){Tk[e]=new Ok(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){Tk[e]=new Ok(e,5,!1,e.toLowerCase(),null,!1,!1)}));var Mk=/[\-:]([a-z])/g;function Ak(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Mk,Ak);Tk[t]=new Ok(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Mk,Ak);Tk[t]=new Ok(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Mk,Ak);Tk[t]=new Ok(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){Tk[e]=new Ok(e,1,!1,e.toLowerCase(),null,!1,!1)})),Tk.xlinkHref=new Ok("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){Tk[e]=new Ok(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Nk={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pk=["Webkit","ms","Moz","O"];Object.keys(Nk).forEach((function(e){Pk.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nk[t]=Nk[e]}))}));var Rk=/["'&<>]/;function Dk(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=Rk.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var Ik=/([A-Z])/g,_k=/^ms-/,Fk=Array.isArray,zk=bk("<script>"),Bk=bk("<\/script>"),Lk=bk('<script src="'),jk=bk('<script type="module" src="'),Hk=bk('" async=""><\/script>'),Vk=/(<\/|<)(s)(cript)/gi;function $k(e,t,n,r){return t+("s"===n?"\\u0073":"\\u0053")+r}function Wk(e,t){return{insertionMode:e,selectedValue:t}}var Uk=bk("\x3c!-- --\x3e");function qk(e,t,n,r){return""===t?r:(r&&e.push(Uk),e.push(yk(Dk(t))),!0)}var Kk=new Map,Jk=bk(' style="'),Gk=bk(":"),Xk=bk(";");function Yk(e,t,n){if("object"!=typeof n)throw Error(dk(62));for(var r in t=!0,n)if(kk.call(n,r)){var o=n[r];if(null!=o&&"boolean"!=typeof o&&""!==o){if(0===r.indexOf("--")){var i=yk(Dk(r));o=yk(Dk((""+o).trim()))}else{i=r;var s=Kk.get(i);void 0!==s||(s=bk(Dk(i.replace(Ik,"-$1").toLowerCase().replace(_k,"-ms-"))),Kk.set(i,s)),i=s,o="number"==typeof o?0===o||kk.call(Nk,r)?yk(""+o):yk(o+"px"):yk(Dk((""+o).trim()))}t?(t=!1,e.push(Jk,i,Gk,o)):e.push(Xk,i,Gk,o)}}t||e.push(ex)}var Qk=bk(" "),Zk=bk('="'),ex=bk('"'),tx=bk('=""');function nx(e,t,n,r){switch(n){case"style":return void Yk(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=Tk.hasOwnProperty(n)?Tk[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=yk(t.attributeName),t.type){case 3:r&&e.push(Qk,n,tx);break;case 4:!0===r?e.push(Qk,n,tx):!1!==r&&e.push(Qk,n,Zk,yk(Dk(r)),ex);break;case 5:isNaN(r)||e.push(Qk,n,Zk,yk(Dk(r)),ex);break;case 6:!isNaN(r)&&1<=r&&e.push(Qk,n,Zk,yk(Dk(r)),ex);break;default:t.sanitizeURL&&(r=""+r),e.push(Qk,n,Zk,yk(Dk(r)),ex)}}else if(Ek(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(Qk,yk(n),Zk,yk(Dk(r)),ex)}}var rx=bk(">"),ox=bk("/>");function ix(e,t,n){if(null!=t){if(null!=n)throw Error(dk(60));if("object"!=typeof t||!("__html"in t))throw Error(dk(61));null!=(t=t.__html)&&e.push(yk(""+t))}}var sx=bk(' selected=""');function lx(e,t,n,r){e.push(dx(n));var o,i=n=null;for(o in t)if(kk.call(t,o)){var s=t[o];if(null!=s)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:nx(e,r,o,s)}}return e.push(rx),ix(e,i,n),"string"==typeof n?(e.push(yk(Dk(n))),null):n}var ax=bk("\n"),cx=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ux=new Map;function dx(e){var t=ux.get(e);if(void 0===t){if(!cx.test(e))throw Error(dk(65,e));t=bk("<"+e),ux.set(e,t)}return t}var px=bk("<!DOCTYPE html>");var hx=bk("</"),fx=bk(">"),mx=bk('<template id="'),gx=bk('"></template>'),vx=bk("\x3c!--$--\x3e"),yx=bk('\x3c!--$?--\x3e<template id="'),bx=bk('"></template>'),wx=bk("\x3c!--$!--\x3e"),kx=bk("\x3c!--/$--\x3e"),xx=bk("<template"),Sx=bk('"'),Cx=bk(' data-dgst="');bk(' data-msg="'),bk(' data-stck="');var Ex=bk("></template>");function Ox(e,t,n){if(fk(e,yx),null===n)throw Error(dk(395));return fk(e,n),mk(e,bx)}var Tx=bk('<div hidden id="'),Mx=bk('">'),Ax=bk("</div>"),Nx=bk('<svg aria-hidden="true" style="display:none" id="'),Px=bk('">'),Rx=bk("</svg>"),Dx=bk('<math aria-hidden="true" style="display:none" id="'),Ix=bk('">'),_x=bk("</math>"),Fx=bk('<table hidden id="'),zx=bk('">'),Bx=bk("</table>"),Lx=bk('<table hidden><tbody id="'),jx=bk('">'),Hx=bk("</tbody></table>"),Vx=bk('<table hidden><tr id="'),$x=bk('">'),Wx=bk("</tr></table>"),Ux=bk('<table hidden><colgroup id="'),qx=bk('">'),Kx=bk("</colgroup></table>"),Jx=bk('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Gx=bk('$RS("'),Xx=bk('","'),Yx=bk('")<\/script>'),Qx=bk('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Zx=bk('$RC("'),eS=bk('","'),tS=bk('")<\/script>'),nS=bk('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),rS=bk('$RX("'),oS=bk('"'),iS=bk(")<\/script>"),sS=bk(","),lS=/[<\u2028\u2029]/g;function aS(e){return JSON.stringify(e).replace(lS,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var cS=Object.assign,uS=Symbol.for("react.element"),dS=Symbol.for("react.portal"),pS=Symbol.for("react.fragment"),hS=Symbol.for("react.strict_mode"),fS=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),vS=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),bS=Symbol.for("react.suspense_list"),wS=Symbol.for("react.memo"),kS=Symbol.for("react.lazy"),xS=Symbol.for("react.scope"),SS=Symbol.for("react.debug_trace_mode"),CS=Symbol.for("react.legacy_hidden"),ES=Symbol.for("react.default_value"),OS=Symbol.iterator;function TS(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case pS:return"Fragment";case dS:return"Portal";case fS:return"Profiler";case hS:return"StrictMode";case yS:return"Suspense";case bS:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case gS:return(e.displayName||"Context")+".Consumer";case mS:return(e._context.displayName||"Context")+".Provider";case vS:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case wS:return null!==(t=e.displayName||null)?t:TS(e.type)||"Memo";case kS:t=e._payload,e=e._init;try{return TS(e(t))}catch(n){}}return null}var MS={};function AS(e,t){if(!(e=e.contextTypes))return MS;var n,r={};for(n in e)r[n]=t[n];return r}var NS=null;function PS(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(dk(401))}else{if(null===n)throw Error(dk(401));PS(e,n)}t.context._currentValue=t.value}}function RS(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&RS(e)}function DS(e){var t=e.parent;null!==t&&DS(t),e.context._currentValue=e.value}function IS(e,t){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(dk(402));e.depth===t.depth?PS(e,t):IS(e,t)}function _S(e,t){var n=t.parent;if(null===n)throw Error(dk(402));e.depth===n.depth?PS(e,n):_S(e,n),t.context._currentValue=t.value}function FS(e){var t=NS;t!==e&&(null===t?DS(e):null===e?RS(t):t.depth===e.depth?PS(t,e):t.depth>e.depth?IS(t,e):_S(t,e),NS=e)}var zS={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function BS(e,t,n,r){var o=void 0!==e.state?e.state:null;e.updater=zS,e.props=n,e.state=o;var i={queue:[],replace:!1};e._reactInternals=i;var s=t.contextType;if(e.context="object"==typeof s&&null!==s?s._currentValue:r,"function"==typeof(s=t.getDerivedStateFromProps)&&(o=null==(s=s(n,o))?o:cS({},o,s),e.state=o),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&zS.enqueueReplaceState(e,e.state,null),null!==i.queue&&0<i.queue.length)if(t=i.queue,s=i.replace,i.queue=null,i.replace=!1,s&&1===t.length)e.state=t[0];else{for(i=s?t[0]:e.state,o=!0,s=s?1:0;s<t.length;s++){var l=t[s];null!=(l="function"==typeof l?l.call(e,i,n,r):l)&&(o?(o=!1,i=cS({},i,l)):cS(i,l))}e.state=i}else i.queue=null}var LS={id:1,overflow:""};function jS(e,t,n){var r=e.id;e=e.overflow;var o=32-HS(r)-1;r&=~(1<<o),n+=1;var i=32-HS(t)+o;if(30<i){var s=o-o%5;return i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,{id:1<<32-HS(t)+o|n<<o|r,overflow:i+e}}return{id:1<<i|n<<o|r,overflow:e}}var HS=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(VS(e)/$S|0)|0},VS=Math.log,$S=Math.LN2,WS="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},US=null,qS=null,KS=null,JS=null,GS=!1,XS=!1,YS=0,QS=null,ZS=0;function eC(){if(null===US)throw Error(dk(321));return US}function tC(){if(0<ZS)throw Error(dk(312));return{memoizedState:null,queue:null,next:null}}function nC(){return null===JS?null===KS?(GS=!1,KS=JS=tC()):(GS=!0,JS=KS):null===JS.next?(GS=!1,JS=JS.next=tC()):(GS=!0,JS=JS.next),JS}function rC(){qS=US=null,XS=!1,KS=null,ZS=0,JS=QS=null}function oC(e,t){return"function"==typeof t?t(e):t}function iC(e,t,n){if(US=eC(),JS=nC(),GS){var r=JS.queue;if(t=r.dispatch,null!==QS&&void 0!==(n=QS.get(r))){QS.delete(r),r=JS.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return JS.memoizedState=r,[r,t]}return[JS.memoizedState,t]}return e=e===oC?"function"==typeof t?t():t:void 0!==n?n(t):t,JS.memoizedState=e,e=(e=JS.queue={last:null,dispatch:null}).dispatch=lC.bind(null,US,e),[JS.memoizedState,e]}function sC(e,t){if(US=eC(),t=void 0===t?null:t,null!==(JS=nC())){var n=JS.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++)if(!WS(t[o],r[o])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),JS.memoizedState=[e,t],e}function lC(e,t,n){if(25<=ZS)throw Error(dk(301));if(e===US)if(XS=!0,e={action:n,next:null},null===QS&&(QS=new Map),void 0===(n=QS.get(t)))QS.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function aC(){throw Error(dk(394))}function cC(){}var uC,dC,pC={readContext:function(e){return e._currentValue},useContext:function(e){return eC(),e._currentValue},useMemo:sC,useReducer:iC,useRef:function(e){US=eC();var t=(JS=nC()).memoizedState;return null===t?(e={current:e},JS.memoizedState=e):t},useState:function(e){return iC(oC,e)},useInsertionEffect:cC,useLayoutEffect:function(){},useCallback:function(e,t){return sC((function(){return e}),t)},useImperativeHandle:cC,useEffect:cC,useDebugValue:cC,useDeferredValue:function(e){return eC(),e},useTransition:function(){return eC(),[!1,aC]},useId:function(){var e=qS.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-HS(e)-1)).toString(32)+t;var n=hC;if(null===n)throw Error(dk(404));return t=YS++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return eC(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(dk(407));return n()}},hC=null,fC=uk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function mC(e){return null}function gC(){}function vC(e,t,n,r,o,i,s,l){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var a={node:t,ping:function(){var t=e.pingedTasks;t.push(a),1===t.length&&RC(e)},blockedBoundary:n,blockedSegment:r,abortSet:o,legacyContext:i,context:s,treeContext:l};return o.add(a),a}function yC(e,t,n,r,o,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:o,textEmbedded:i}}function bC(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function wC(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,wk(e.destination,t)):(e.status=1,e.fatalError=t)}function kC(e,t,n,r,o){for(US={},qS=t,YS=0,e=n(r,o);XS;)XS=!1,YS=0,ZS+=1,JS=null,e=n(r,o);return rC(),e}function xC(e,t,n,r){var o=n.render(),i=r.childContextTypes;if(null!=i){var s=t.legacyContext;if("function"!=typeof n.getChildContext)r=s;else{for(var l in n=n.getChildContext())if(!(l in i))throw Error(dk(108,TS(r)||"Unknown",l));r=cS({},s,n)}t.legacyContext=r,EC(e,t,o),t.legacyContext=s}else EC(e,t,o)}function SC(e,t){if(e&&e.defaultProps){for(var n in t=cS({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function CC(e,t,n,r,o){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){o=AS(n,t.legacyContext);var i=n.contextType;BS(i=new n(r,"object"==typeof i&&null!==i?i._currentValue:o),n,r,o),xC(e,t,i,n)}else{o=kC(e,t,n,r,i=AS(n,t.legacyContext));var s=0!==YS;if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof)BS(o,n,r,i),xC(e,t,o,n);else if(s){r=t.treeContext,t.treeContext=jS(r,1,0);try{EC(e,t,o)}finally{t.treeContext=r}}else EC(e,t,o)}else{if("string"!=typeof n){switch(n){case CS:case SS:case hS:case fS:case pS:case bS:return void EC(e,t,r.children);case xS:throw Error(dk(343));case yS:e:{n=t.blockedBoundary,o=t.blockedSegment,i=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},a=yC(0,o.chunks.length,l,o.formatContext,!1,!1);o.children.push(a),o.lastPushedText=!1;var c=yC(0,0,null,o.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=c;try{if(TC(e,t,r),c.lastPushedText&&c.textEmbedded&&c.chunks.push(Uk),c.status=1,NC(l,c),0===l.pendingTasks)break e}catch(u){c.status=4,l.forceClientRender=!0,l.errorDigest=bC(e,u)}finally{t.blockedBoundary=n,t.blockedSegment=o}t=vC(e,i,n,a,s,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case vS:if(r=kC(e,t,n.render,r,o),0!==YS){n=t.treeContext,t.treeContext=jS(n,1,0);try{EC(e,t,r)}finally{t.treeContext=n}}else EC(e,t,r);return;case wS:return void CC(e,t,n=n.type,r=SC(n,r),o);case mS:if(o=r.children,n=n._context,r=r.value,i=n._currentValue,n._currentValue=r,NS=r={parent:s=NS,depth:null===s?0:s.depth+1,context:n,parentValue:i,value:r},t.context=r,EC(e,t,o),null===(e=NS))throw Error(dk(403));return r=e.parentValue,e.context._currentValue=r===ES?e.context._defaultValue:r,e=NS=e.parent,void(t.context=e);case gS:return void EC(e,t,r=(r=r.children)(n._currentValue));case kS:return void CC(e,t,n=(o=n._init)(n._payload),r=SC(n,r),void 0)}throw Error(dk(130,null==n?n:typeof n,""))}switch(i=function(e,t,n,r,o){switch(t){case"select":e.push(dx("select"));var i=null,s=null;for(u in n)if(kk.call(n,u)){var l=n[u];if(null!=l)switch(u){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;case"defaultValue":case"value":break;default:nx(e,r,u,l)}}return e.push(rx),ix(e,s,i),i;case"option":s=o.selectedValue,e.push(dx("option"));var a=l=null,c=null,u=null;for(i in n)if(kk.call(n,i)){var d=n[i];if(null!=d)switch(i){case"children":l=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":a=d;default:nx(e,r,i,d)}}if(null!=s)if(n=null!==a?""+a:function(e){var t="";return uk.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(l),Fk(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){e.push(sx);break}}else""+s===n&&e.push(sx);else c&&e.push(sx);return e.push(rx),ix(e,u,l),l;case"textarea":for(l in e.push(dx("textarea")),u=s=i=null,n)if(kk.call(n,l)&&null!=(a=n[l]))switch(l){case"children":u=a;break;case"value":i=a;break;case"defaultValue":s=a;break;case"dangerouslySetInnerHTML":throw Error(dk(91));default:nx(e,r,l,a)}if(null===i&&null!==s&&(i=s),e.push(rx),null!=u){if(null!=i)throw Error(dk(92));if(Fk(u)&&1<u.length)throw Error(dk(93));i=""+u}return"string"==typeof i&&"\n"===i[0]&&e.push(ax),null!==i&&e.push(yk(Dk(""+i))),null;case"input":for(s in e.push(dx("input")),a=u=l=i=null,n)if(kk.call(n,s)&&null!=(c=n[s]))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(dk(399,"input"));case"defaultChecked":a=c;break;case"defaultValue":l=c;break;case"checked":u=c;break;case"value":i=c;break;default:nx(e,r,s,c)}return null!==u?nx(e,r,"checked",u):null!==a&&nx(e,r,"checked",a),null!==i?nx(e,r,"value",i):null!==l&&nx(e,r,"value",l),e.push(ox),null;case"menuitem":for(var p in e.push(dx("menuitem")),n)if(kk.call(n,p)&&null!=(i=n[p]))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(dk(400));default:nx(e,r,p,i)}return e.push(rx),null;case"title":for(d in e.push(dx("title")),i=null,n)if(kk.call(n,d)&&null!=(s=n[d]))switch(d){case"children":i=s;break;case"dangerouslySetInnerHTML":throw Error(dk(434));default:nx(e,r,d,s)}return e.push(rx),i;case"listing":case"pre":for(a in e.push(dx(t)),s=i=null,n)if(kk.call(n,a)&&null!=(l=n[a]))switch(a){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;default:nx(e,r,a,l)}if(e.push(rx),null!=s){if(null!=i)throw Error(dk(60));if("object"!=typeof s||!("__html"in s))throw Error(dk(61));null!=(n=s.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push(ax,yk(n)):e.push(yk(""+n)))}return"string"==typeof i&&"\n"===i[0]&&e.push(ax),i;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var h in e.push(dx(t)),n)if(kk.call(n,h)&&null!=(i=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(dk(399,t));default:nx(e,r,h,i)}return e.push(ox),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return lx(e,n,t,r);case"html":return 0===o.insertionMode&&e.push(px),lx(e,n,t,r);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return lx(e,n,t,r);for(c in e.push(dx(t)),s=i=null,n)if(kk.call(n,c)&&null!=(l=n[c]))switch(c){case"children":i=l;break;case"dangerouslySetInnerHTML":s=l;break;case"style":Yk(e,r,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Ek(c)&&"function"!=typeof l&&"symbol"!=typeof l&&e.push(Qk,yk(c),Zk,yk(Dk(l)),ex)}return e.push(rx),ix(e,s,i),i}}((o=t.blockedSegment).chunks,n,r,e.responseState,o.formatContext),o.lastPushedText=!1,s=o.formatContext,o.formatContext=function(e,t,n){switch(t){case"select":return Wk(1,null!=n.value?n.value:n.defaultValue);case"svg":return Wk(2,null);case"math":return Wk(3,null);case"foreignObject":return Wk(1,null);case"table":return Wk(4,null);case"thead":case"tbody":case"tfoot":return Wk(5,null);case"colgroup":return Wk(7,null);case"tr":return Wk(6,null)}return 4<=e.insertionMode||0===e.insertionMode?Wk(1,null):e}(s,n,r),TC(e,t,i),o.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push(hx,yk(n),fx)}o.lastPushedText=!1}}function EC(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case uS:return void CC(e,t,n.type,n.props,n.ref);case dS:throw Error(dk(257));case kS:var r=n._init;return void EC(e,t,n=r(n._payload))}if(Fk(n))return void OC(e,t,n);if((r=null===n||"object"!=typeof n?null:"function"==typeof(r=OS&&n[OS]||n["@@iterator"])?r:null)&&(r=r.call(n))){if(!(n=r.next()).done){var o=[];do{o.push(n.value),n=r.next()}while(!n.done);OC(e,t,o)}return}throw e=Object.prototype.toString.call(n),Error(dk(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(r=t.blockedSegment).lastPushedText=qk(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"==typeof n&&((r=t.blockedSegment).lastPushedText=qk(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function OC(e,t,n){for(var r=n.length,o=0;o<r;o++){var i=t.treeContext;t.treeContext=jS(i,r,o);try{TC(e,t,n[o])}finally{t.treeContext=i}}}function TC(e,t,n){var r=t.blockedSegment.formatContext,o=t.legacyContext,i=t.context;try{return EC(e,t,n)}catch(a){if(rC(),"object"!=typeof a||null===a||"function"!=typeof a.then)throw t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=i,FS(i),a;n=a;var s=t.blockedSegment,l=yC(0,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(l),s.lastPushedText=!1,e=vC(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=o,t.context=i,FS(i)}}function MC(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,PC(this,t,e)}function AC(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(dk(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return AC(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function NC(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&NC(e,n)}else e.completedSegments.push(t)}function PC(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(dk(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=gC,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&NC(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(MC,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(NC(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function RC(e){if(2!==e.status){var t=NS,n=fC.current;fC.current=pC;var r=hC;hC=e.responseState;try{var o,i=e.pingedTasks;for(o=0;o<i.length;o++){var s=i[o],l=e,a=s.blockedSegment;if(0===a.status){FS(s.context);try{EC(l,s,s.node),a.lastPushedText&&a.textEmbedded&&a.chunks.push(Uk),s.abortSet.delete(s),a.status=1,PC(l,s.blockedBoundary,a)}catch(h){if(rC(),"object"==typeof h&&null!==h&&"function"==typeof h.then){var c=s.ping;h.then(c,c)}else{s.abortSet.delete(s),a.status=4;var u=s.blockedBoundary,d=h,p=bC(l,d);null===u?wC(l,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=p,u.parentFlushed&&l.clientRenderedBoundaries.push(u))),l.allPendingTasks--,0===l.allPendingTasks&&(0,l.onAllReady)()}}}}i.splice(0,o),null!==e.destination&&BC(e,e.destination)}catch(h){bC(e,h),wC(e,h)}finally{hC=r,fC.current=n,n===pC&&FS(t)}}}function DC(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,fk(t,mx),fk(t,e.placeholderPrefix),fk(t,e=yk(r.toString(16))),mk(t,gx);case 1:n.status=2;var o=!0;r=n.chunks;var i=0;n=n.children;for(var s=0;s<n.length;s++){for(o=n[s];i<o.index;i++)fk(t,r[i]);o=IC(e,t,o)}for(;i<r.length-1;i++)fk(t,r[i]);return i<r.length&&(o=mk(t,r[i])),o;default:throw Error(dk(390))}}function IC(e,t,n){var r=n.boundary;if(null===r)return DC(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,mk(t,wx),fk(t,xx),r&&(fk(t,Cx),fk(t,yk(Dk(r))),fk(t,Sx)),mk(t,Ex),DC(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var o=e.responseState,i=o.nextSuspenseID++;o=bk(o.boundaryPrefix+i.toString(16)),r=r.id=o,Ox(t,e.responseState,r),DC(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),Ox(t,e.responseState,r.id),DC(e,t,n);else{if(mk(t,vx),1!==(n=r.completedSegments).length)throw Error(dk(391));IC(e,t,n[0])}return mk(t,kx)}function _C(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return fk(e,Tx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,Mx);case 2:return fk(e,Nx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,Px);case 3:return fk(e,Dx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,Ix);case 4:return fk(e,Fx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,zx);case 5:return fk(e,Lx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,jx);case 6:return fk(e,Vx),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,$x);case 7:return fk(e,Ux),fk(e,t.segmentPrefix),fk(e,yk(r.toString(16))),mk(e,qx);default:throw Error(dk(397))}}(t,e.responseState,n.formatContext,n.id),IC(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return mk(e,Ax);case 2:return mk(e,Rx);case 3:return mk(e,_x);case 4:return mk(e,Bx);case 5:return mk(e,Hx);case 6:return mk(e,Wx);case 7:return mk(e,Kx);default:throw Error(dk(397))}}(t,n.formatContext)}function FC(e,t,n){for(var r=n.completedSegments,o=0;o<r.length;o++)zC(e,t,n,r[o]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,fk(t,e.startInlineScript),e.sentCompleteBoundaryFunction?fk(t,Zx):(e.sentCompleteBoundaryFunction=!0,fk(t,Qx)),null===r)throw Error(dk(395));return n=yk(n.toString(16)),fk(t,r),fk(t,eS),fk(t,e.segmentPrefix),fk(t,n),mk(t,tS)}function zC(e,t,n,r){if(2===r.status)return!0;var o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(dk(392));return _C(e,t,r)}return _C(e,t,r),fk(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?fk(t,Gx):(e.sentCompleteSegmentFunction=!0,fk(t,Jx)),fk(t,e.segmentPrefix),fk(t,o=yk(o.toString(16))),fk(t,Xx),fk(t,e.placeholderPrefix),fk(t,o),mk(t,Yx)}function BC(e,t){pk=new Uint8Array(512),hk=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){IC(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)fk(t,r[n]);n<r.length&&mk(t,r[n])}var o,i=e.clientRenderedBoundaries;for(o=0;o<i.length;o++){var s=i[o];r=t;var l=e.responseState,a=s.id,c=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(fk(r,l.startInlineScript),l.sentClientRenderFunction?fk(r,rS):(l.sentClientRenderFunction=!0,fk(r,nS)),null===a)throw Error(dk(395));fk(r,a),fk(r,oS),(c||u||d)&&(fk(r,sS),fk(r,yk(aS(c||"")))),(u||d)&&(fk(r,sS),fk(r,yk(aS(u||"")))),d&&(fk(r,sS),fk(r,yk(aS(d)))),mk(r,iS)}i.splice(0,o);var p=e.completedBoundaries;for(o=0;o<p.length;o++)FC(e,t,p[o]);p.splice(0,o),gk(t),pk=new Uint8Array(512),hk=0;var h=e.partialBoundaries;for(o=0;o<h.length;o++){var f=h[o];e:{i=e,s=t;var m=f.completedSegments;for(l=0;l<m.length;l++)if(!zC(i,s,f,m[l])){l++,m.splice(0,l);var g=!1;break e}m.splice(0,l),g=!0}if(!g)return e.destination=null,o++,void h.splice(0,o)}h.splice(0,o);var v=e.completedBoundaries;for(o=0;o<v.length;o++)FC(e,t,v[o]);v.splice(0,o)}finally{gk(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function LC(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return AC(n,e,t)})),n.clear(),null!==e.destination&&BC(e,e.destination)}catch(r){bC(e,r),wC(e,r)}}ck.renderToReadableStream=function(e,t){return new Promise((function(n,r){var o,i,s=new Promise((function(e,t){i=e,o=t})),l=function(e,t,n,r,o,i,s,l,a){var c=[],u=new Set;return(n=yC(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?mC:o,onAllReady:void 0===i?gC:i,onShellReady:void 0===s?gC:s,onShellError:void 0===l?gC:l,onFatalError:void 0===a?gC:a},0,null,n,!1,!1)).parentFlushed=!0,e=vC(t,e,null,n,u,MS,null,LS),c.push(e),t}(e,function(e,t,n,r,o){e=void 0===e?"":e,t=void 0===t?zk:bk('<script nonce="'+Dk(t)+'">');var i=[];if(void 0!==n&&i.push(t,yk((""+n).replace(Vk,$k)),Bk),void 0!==r)for(n=0;n<r.length;n++)i.push(Lk,yk(Dk(r[n])),Hk);if(void 0!==o)for(r=0;r<o.length;r++)i.push(jk,yk(Dk(o[r])),Hk);return{bootstrapChunks:i,startInlineScript:t,placeholderPrefix:bk(e+"P:"),segmentPrefix:bk(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return Wk("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,i,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===l.status)l.status=2,wk(e,l.fatalError);else if(2!==l.status&&null===l.destination){l.destination=e;try{BC(l,e)}catch(t){bC(l,t),wC(l,t)}}},cancel:function(){LC(l)}},{highWaterMark:0});e.allReady=s,n(e)}),(function(e){s.catch((function(){})),r(e)}),o);if(t&&t.signal){var a=t.signal,c=function(){LC(l,a.reason),a.removeEventListener("abort",c)};a.addEventListener("abort",c)}RC(l)}))},ck.version="18.3.1",dC=ck,(uC=eb).version,uC.renderToString;var jC=uC.renderToStaticMarkup;uC.renderToNodeStream,uC.renderToStaticNodeStream,dC.renderToReadableStream;var HC=function(){function e(e,t,n,r,o){void 0===o&&(o={});var s=this;this.drawDOM=e,this.exportPDF=t,this.saveAs=n,this.domElement=r,this.options=o,this.convertPageTemplateToHtml=function(e){var t=jC(i.createElement(s.options.pageTemplate,{pageNum:e.pageNum,totalPages:e.totalPages}));return"<span>".concat(t,"</span>")}}return e.prototype.savePDF=function(e){var t=this,n=this.drawDOM(this.domElement,this.getDrawOptions()).then((function(e){return t.exportPDF(e,t.getPDFOptions())})).then((function(e){return t.saveAs(e,t.options.fileName||"export.pdf",t.getSaveOptions())}));e&&n.then(e,e)},e.prototype.getDrawOptions=function(){return{avoidLinks:this.options.avoidLinks,forcePageBreak:this.options.forcePageBreak,keepTogether:this.options.keepTogether,margin:this.options.margin,paperSize:this.options.paperSize,landscape:this.options.landscape,repeatHeaders:this.options.repeatHeaders,scale:this.options.scale,template:this.options.pageTemplate&&this.convertPageTemplateToHtml}},e.prototype.getPDFOptions=function(){return{author:this.options.author,creator:this.options.creator||"KendoReact PDF Generator",date:this.options.date,imgDPI:this.options.imageResolution,keywords:this.options.keywords,landscape:this.options.landscape,margin:this.options.margin,multiPage:!0,paperSize:this.options.paperSize,producer:this.options.producer,subject:this.options.subject,title:this.options.title}},e.prototype.getSaveOptions=function(){return{forceProxy:this.options.forceProxy,proxyData:this.options.proxyData,proxyTarget:this.options.proxyTarget,proxyURL:this.options.proxyURL}},e}();const VC=HC;var $C,WC=globalThis&&globalThis.__assign||function(){return WC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WC.apply(this,arguments)},UC=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},qC=Qp.pdf,KC=Qp.savePdfOptions,JC=function(e){var t=e.view,n=e.render,r=e.settings,o=void 0===r?qC:r,s=e.savePdfOptions,l=e.savePdfCallback,a=UC(e,["view","render","settings","savePdfOptions","savePdfCallback"]),c=o.messages.title,u=i.useCallback((function(){var e,n,r;t&&(e=t.dom,n=WC(WC({},KC),s||{}),r=l,void 0===n&&(n={}),new VC(ge,ve,Jy,e,n).savePDF(r))}),[t,s,l]),d=i.createElement(Z,WC({onClick:u,title:me().toLanguageString(c,gg[c])},Zg,o.props,a));return n?n.call(void 0,d,{view:t}):d},GC=globalThis&&globalThis.__assign||function(){return GC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GC.apply(this,arguments)},XC=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},YC=Qp.selectAll,QC=function(e){var t=e.view,n=e.render,r=e.settings,o=void 0===r?YC:r,s=XC(e,["view","render","settings"]),l=o.messages.title,a=i.useCallback((function(){t&&(vi(t.state,t.dispatch),t.focus())}),[t]),c=i.createElement(Z,GC({onClick:a,title:me().toLanguageString(l,gg[l])},Zg,o.props,s));return n?n.call(void 0,c,{view:t}):c},ZC=globalThis&&globalThis.__assign||function(){return ZC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ZC.apply(this,arguments)},eE=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},tE=Qp.cleanFormatting,nE=(void 0===$C&&($C={blocksInSelection:!0}),function(e,t){var n=e.tr,r=$C.blocksInSelection,o=$C.blockNodeType;!function(e,t){var n=t.except,r=e.doc,o=e.selection,i=r.type.schema,s=o.empty,l=o.ranges,a=(n||[]).map((function(e){return e.name}));if(!s){var c=Object.keys(i.marks).map((function(e){return i.marks[e]})).filter((function(e){return-1===a.indexOf(e.name)}));l.forEach((function(t){var n=t.$from,r=t.$to;c.forEach((function(t){return e.removeMark(n.pos,r.pos,t)}))}))}}(n,{except:($C.exceptMarks||[e.schema.marks.link]).filter(Boolean)}),function(e,t){void 0===t&&(t={blocksInSelection:!0});var n=e.doc,r=e.selection,o=t.blocksInSelection,i=t.blockNodeType;Ao({doc:n,selection:r},{blocksInSelection:o}).filter((function(e){return e.isTextblock})).forEach((function(t){var n=t.attrs||{},r=n.style,o=void 0===r?"":r,s=n.class,l=void 0===s?"":s,a=Xe(n,["style","class"]),c=i||t.type;(o||l||c!==t.type)&&Mo(e,t,c,a)}))}(n,{blocksInSelection:r,blockNodeType:o});var i=n.docChanged;return i&&t&&t(n),i}),rE=function(e){var t=e.view,n=e.render,r=e.settings,o=void 0===r?tE:r,s=eE(e,["view","render","settings"]),l=o.messages.title,a=!t||!nE(t.state),c=i.useCallback((function(){t&&nE(t.state,(function(e){e.setMeta("commandName",o.commandName),t.dispatch(e)}))}),[t]),u=i.createElement(Z,ZC({onClick:a?void 0:c,"aria-disabled":!!a||void 0,title:me().toLanguageString(l,gg[l])},Zg,o.props,s,{className:Qe(e.className,o.props.className,{"k-disabled":a})}));return n?n.call(void 0,u,{view:t}):u},oE=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iE=globalThis&&globalThis.__assign||function(){return iE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iE.apply(this,arguments)},sE=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},lE=Qp.findAndReplace,aE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showDialog:!1},t.onClose=function(){return t.setState({showDialog:!1})},t.onOpen=function(){return t.setState({showDialog:!0})},t}return oE(t,e),t.prototype.render=function(){var e=this.props,t=e.view,n=sE(e,["view"]),r=lE.props,o=X(this),s=lE.messages.findReplaceToolTitle,l=!t;return[i.createElement(Z,iE({onClick:l?void 0:this.onOpen,"aria-disabled":!!l||void 0},Zg,{title:o.toLanguageString(s,gg[s]),key:"tool"},r,n,{className:Qe(n.className,r.className,{"k-disabled":l})})),this.state.showDialog&&t&&i.createElement(uv,{view:t,onClose:this.onClose,dir:n.dir,key:"dialog"})]},t}(i.Component);ne(aE);var cE=globalThis&&globalThis.__assign||function(){return cE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cE.apply(this,arguments)},uE=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},dE=function(e,t){var n=e.selection,r=n.from,o=n.to,i=null;return e.doc.nodesBetween(r,o,(function(e){return!(i=i||(e.type===t?e:null))})),i},pE=function(e){var t,n,r=!1,o=e.view,s=wg,l=e.listType,a=me(),c=uE([],e.items||[],!0);if(o){var u=o.state,d=u&&u.schema.nodes;t=d&&dE(u,d[s.orderedList]),n=d&&dE(u,d[s.bulletList]),r=Boolean(l===s.orderedList?t&&!n:!t&&n)}if(r&&(t||n)){var p=ji((t||n).attrs);c=c.map((function(e,t){return cE(cE({},e),{selected:p?e.style===p:0===t})}))}return i.createElement("span",{onMouseDown:function(e){e.preventDefault()}},i.createElement(ye,{textField:"text",items:c,icon:e.icon,svgIcon:e.svgIcon,onButtonClick:function(e){o&&(Hi(o.state,o.dispatch,o,cE(cE({listType:l},s),{listAttrs:{}}),"InsertList"),o.focus())},onItemClick:function(e){if(o){var r=e.item.style?{style:"list-style-type: "+e.item.style+";"}:{},i=t||n;if(i&&ji(i.attrs)!==e.item.style){var a=o.state.selection.$head.posAtIndex(0,-2)-1;o.dispatch(o.state.tr.setNodeMarkup(a,o.state.schema.nodes[l],r))}else Hi(o.state,o.dispatch,o,cE(cE({listType:l},s),{listAttrs:r}),"InsertList");o.focus()}},buttonClass:r?"k-selected":void 0,title:void 0!==e.title?e.title:a.toLanguageString(e.titleKey,gg[e.titleKey])}))},hE=globalThis&&globalThis.__assign||function(){return hE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hE.apply(this,arguments)},fE=/[\D]+$/,mE=function(e){var t=e.match(fE);return t?t[0]:""},gE=function(e,t){var n,r,o=vE((null===(r=e.attrs)||void 0===r?void 0:r.style)||"")[t]||"";return(n={})[t]=parseFloat(o)||null,n[t+"Unit"]=mE(o),n},vE=function(e){return(e||"").split(/\s*;\s*/).filter(Boolean).map((function(e){var t,n=e.split(/\s*:\s*/);return(t={})[n[0]]=n[1],t})).reduce((function(e,t){return hE(hE({},e),t)}),{})},yE=/^.+$/;function bE(e,t,n){var r;if(new RegExp("[^-]?"+t+":").test(e.style||"")){var o=function(e,t){var n=t.style,r=t.value,o=t.newValue;if(!e)return{changed:!1,style:null};var i=e.split(/\s*;\s*/).filter((function(e){return Boolean(e)})),s=i.filter((function(e){var t=e.split(/\s*:\s*/);return!(t[0].toLowerCase()===n&&r.test(t[1]))}));return o&&s.push("".concat(n,": ").concat(o)),{style:s.join("; ")+(s.length?";":""),changed:Boolean(o)||s.length!==i.length}}(e.style||"",{style:t,value:yE,newValue:n}).style;r=hE(hE({},e),{style:o})}else if(e.style){var i=vE(e.style);i[t]=n,r=hE(hE({},e),{style:Object.keys(i).filter((function(e){return Boolean(i[e])})).reduce((function(e,t){return e+t+": "+i[t]+"; "}),"").trim()})}else r=n?hE(hE({},e),{style:t+": "+n+";"}):hE({},e);return r}var wE,kE=function(e){var t=sv(e.selection.$from,(function(e){return"table"===e.type.name})),n=sv(e.selection.$to,(function(e){return"table"===e.type.name}));return t&&n&&t.depth===n.depth&&t.node.eq(n.node)?function(e){var t=e.doc,n=e.selection,r=[];return n.ranges.forEach((function(e){var n=e.$from.pos,o=e.$to.pos;t.nodesBetween(n,o,(function(e,t,n,o){"table_cell"!==e.type.name&&"table_header"!==e.type.name||r.push({node:e,pos:t})}))})),r}(e).filter((function(n){var r=n.pos,o=sv(e.doc.resolve(r),(function(e){return"table"===e.type.name}));return o&&o.depth===t.depth&&t.node.eq(o.node)})):[]},xE=function(e){var t=[];if(kE(e).length){var n=e.selection.$from,r=sv(n,(function(e){return"table"===e.type.spec.tableRole}));if(null===r)return t;var o=n.start(r.depth),i=r.node,s=hc.get(i),l=e.doc;s.map.forEach((function(e){var n=e+o;t.push({pos:n,node:l.nodeAt(n)})}))}return t},SE=globalThis&&globalThis.__assign||function(){return SE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},SE.apply(this,arguments)},CE="k-colgroup-data",EE=function(e,t){var n=new Set,r="";return e.forEach((function(e){var o;r=vE((null===(o=e.node.attrs)||void 0===o?void 0:o.style)||"")[t]||"",n.add(r)})),1===n.size&&r?r:""},OE=function(e,t){var n=new Set,r="";return e.forEach((function(e){r=(e.node.attrs||{})[t]||"",n.add(r)})),1===n.size&&r?r:""},TE={applyToAll:!1,cellWidth:null,widthUnit:"",cellHeight:null,heightUnit:"",alignment:{x:"",y:""},textControl:"",backgroundColor:void 0,cellPadding:null,borderWidth:null,borderColor:void 0,borderStyle:null,id:"",className:""},ME=globalThis&&globalThis.__assign||function(){return ME=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ME.apply(this,arguments)},AE=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},NE=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},PE=function(e){var t=e.view,n=AE(e,["view"]),r=i.useState(!1),o=r[0],s=r[1],l=me(),a=Boolean(t&&sv(t.state.selection.$from,(function(e){return"table"===e.type.spec.tableRole}))),c=i.useCallback((function(){s(!0)}),[]),u=i.useCallback((function(){s(!1),null==t||t.focus()}),[t]),d=i.useCallback((function(e){if(t&&e){var n=function(e,t){var n=e.tr;return function(e,t,n){n.forEach((function(n){var r=n.node,o=n.pos,i=SE({},r.attrs);i=bE(i,"border-color",t.borderColor||""),i=bE(i,"border-style",t.borderStyle||""),i=bE(i,"border-width","number"==typeof t.borderWidth?t.borderWidth+"px":""),i=bE(i,"padding","number"==typeof t.cellPadding?t.cellPadding+"px":""),i=bE(i,"background-color",t.backgroundColor||""),i=bE(i,"text-align",t.alignment.x||""),i=bE(i,"vertical-align",t.alignment.y||""),(i=bE(i,"white-space",t.textControl||"")).id=t.id||null,i.class=t.className||null,e.setNodeMarkup(o,null,i),"number"==typeof t.cellWidth&&function(e,t,n){for(var r,o,i=e.doc.resolve(t),s=i.parent,l=i.index(),a=0,c=0;c<=l;c++)a+=s.child(c).attrs.colspan;var u=i.node(i.depth-1),d=i.posAtIndex(0,i.depth-1)-1,p=u.attrs;if(p&&p[CE])(f=io(p[CE]).firstChild).children[a-1].style.width=n,p=SE(SE({},p),((r={})[CE]=f.outerHTML,r)),e.setNodeMarkup(d,null,p);else{var h=0;for(c=0;c<s.childCount;c++)h+=s.child(c).attrs.colspan;var f=document.createElement("colgroup"),m=new Array(h);for(c=0;c<h;c++)m[c]=document.createElement("col"),f.appendChild(m[c]);m[l].style.width=n,p=SE(SE({},p),((o={})[CE]="<colgroup>"+m.reduce((function(e,t){return e+t.outerHTML}),"")+"</colgroup>",o)),e.setNodeMarkup(d,null,p)}}(e,o,t.cellWidth+(t.widthUnit||"px")),"number"==typeof t.cellHeight&&function(e,t,n){var r=e.doc.resolve(t),o=r.parent,i=r.posAtIndex(0)-1;e.setNodeMarkup(i,null,bE(o.attrs,"height",n))}(e,o,t.cellHeight+(t.heightUnit||"px"))}))}(n,t,t.applyToAll?xE(e):kE(e)),n}(t.state,e);n.docChanged&&t.dispatch(n)}u()}),[t,u]);return i.createElement(i.Fragment,null,i.createElement(Z,ME({type:"button",title:l.toLanguageString(vg.cellProperties,gg[vg.cellProperties]),icon:"table-cell-properties",svgIcon:be,onClick:c,disabled:!a},Zg,n)),o&&t&&i.createElement(FE,{view:t,onCancel:u,onSave:d}))},RE=[{textKey:vg.cellPropertiesLeftTop,text:gg[vg.cellPropertiesLeftTop],icon:"table-align-top-left",svgIcon:we,value:{x:"left",y:"top"}},{textKey:vg.cellPropertiesCenterTop,text:gg[vg.cellPropertiesCenterTop],icon:"table-align-top-center",svgIcon:ke,value:{x:"center",y:"top"}},{textKey:vg.cellPropertiesRightTop,text:gg[vg.cellPropertiesRightTop],icon:"table-align-top-right",svgIcon:xe,value:{x:"right",y:"top"}},{textKey:vg.cellPropertiesLeftMiddle,text:gg[vg.cellPropertiesLeftMiddle],icon:"table-align-middle-left",svgIcon:Se,value:{x:"left",y:"middle"}},{textKey:vg.cellPropertiesCenterMiddle,text:gg[vg.cellPropertiesCenterMiddle],icon:"table-align-middle-center",svgIcon:Ce,value:{x:"center",y:"middle"}},{textKey:vg.cellPropertiesRightMiddle,text:gg[vg.cellPropertiesRightMiddle],icon:"table-align-middle-right",svgIcon:Ee,value:{x:"right",y:"middle"}},{textKey:vg.cellPropertiesLeftBottom,text:gg[vg.cellPropertiesLeftBottom],icon:"table-align-bottom-left",svgIcon:Oe,value:{x:"left",y:"bottom"}},{textKey:vg.cellPropertiesCenterBottom,text:gg[vg.cellPropertiesCenterBottom],icon:"table-align-bottom-center",svgIcon:Te,value:{x:"center",y:"bottom"}},{textKey:vg.cellPropertiesRightBottom,text:gg[vg.cellPropertiesRightBottom],icon:"table-align-bottom-right",svgIcon:Me,value:{x:"right",y:"bottom"}},{textKey:vg.cellPropertiesNoAlignment,text:gg[vg.cellPropertiesNoAlignment],icon:"align-remove",svgIcon:Ae,value:{x:"",y:""}}],DE=[{textKey:vg.cellPropertiesWrap,text:gg[vg.cellPropertiesWrap],value:"",icon:"text-wrap",svgIcon:Ne},{textKey:vg.cellPropertiesFitToCell,text:gg[vg.cellPropertiesFitToCell],value:"nowrap",icon:"parameter-string",svgIcon:Pe}],IE=function(e,t){return t?i.createElement(i.Fragment,null,i.createElement(_e,null,i.createElement(ft,{icon:t.svgIcon,name:t.icon})),e):e},_E=function(e,t){var n=i.createElement(i.Fragment,null,i.createElement(_e,null,i.createElement(ft,{icon:t.dataItem.svgIcon,name:t.dataItem.icon})),e.props.children);return i.cloneElement(e,e.props,n)},FE=function(e){var t=i.useMemo((function(){return t=e.view.state,n=kE(t),r=t.selection.$from,(o=n.length?sv(r,(function(e){return"table"===e.type.spec.tableRole})):null)?SE(SE(SE(SE({},TE),function(e,t,n){var r={cellWidth:null,widthUnit:""},o=t.node,i=n.start(t.depth);if(!o.attrs[CE])return r;var s=new Set,l="",a=io(o.attrs[CE]).firstChild;return e.forEach((function(e){for(var t=o.resolve(e.pos-i),n=t.parent,r=t.index(),c=0,u=0;u<=r;u++)c+=n.child(u).attrs.colspan;var d=a.children[c-1];d&&(l=d.style.width,s.add(l))})),1===s.size&&l&&(r.cellWidth=parseFloat(l)||null,r.widthUnit=mE(l)),r}(n,o,r)),function(e,t,n){var r={cellHeight:null,heightUnit:""},o=t.node,i=n.start(t.depth),s=new Set,l="";return e.forEach((function(e){var t,n=o.resolve(e.pos-i).parent;l=vE((null===(t=n.attrs)||void 0===t?void 0:t.style)||"").height||"",s.add(l)})),1===s.size&&l&&(r.cellHeight=parseFloat(l)||null,r.heightUnit=mE(l)),r}(n,o,r)),{alignment:{x:EE(n,"text-align"),y:EE(n,"vertical-align")},textControl:EE(n,"white-space"),backgroundColor:EE(n,"background-color")||void 0,cellPadding:parseFloat(EE(n,"padding"))||null,borderWidth:parseFloat(EE(n,"border-width"))||null,borderColor:EE(n,"border-color")||void 0,borderStyle:EE(n,"border-style")||null,id:OE(n,"id"),className:OE(n,"class")}):TE;var t,n,r,o}),[e.view]),n=me(),r=i.useRef(null),o=t.applyToAll,s=i.useRef(null),l=t.cellWidth,c=i.useRef(null);t.widthUnit&&!rv.includes(t.widthUnit)&&rv.push(t.widthUnit);var u=t.widthUnit||"",d=i.useRef(null),p=t.cellHeight,h=i.useRef(null);t.heightUnit&&!rv.includes(t.heightUnit)&&rv.push(t.heightUnit);var f=t.heightUnit||"",m=i.useRef(null),g=RE.find((function(e){return void 0!==e.value.x&&t.alignment&&e.value.x===t.alignment.x&&e.value.y===t.alignment.y}))||null,v=i.useRef(null),y=DE.find((function(e){return e.value===t.textControl})),b=i.useRef(null),w=t.backgroundColor,k=i.useRef(null),x=t.cellPadding,S=i.useRef(null),C=t.borderWidth,E=i.useRef(null),O=t.borderColor,T=i.useRef(null),M=iv.find((function(e){return e.value===t.borderStyle})),A=i.useRef(null),N=t.id,P=i.useRef(null),R=t.className,D=i.useCallback((function(){var t,n,o,i,l,a,u,p,f,g,y,w,x,C,O,M,N,R,D,I,_={applyToAll:Boolean(null===(n=null===(t=r.current)||void 0===t?void 0:t.element)||void 0===n?void 0:n.checked),cellWidth:(null===(o=s.current)||void 0===o?void 0:o.value)||null,widthUnit:(null===(i=c.current)||void 0===i?void 0:i.value)||"",cellHeight:(null===(l=d.current)||void 0===l?void 0:l.value)||null,heightUnit:(null===(a=h.current)||void 0===a?void 0:a.value)||"",alignment:null===(p=null===(u=m.current)||void 0===u?void 0:u.value)||void 0===p?void 0:p.value,textControl:null===(g=null===(f=v.current)||void 0===f?void 0:f.value)||void 0===g?void 0:g.value,backgroundColor:null===(y=b.current)||void 0===y?void 0:y.value,cellPadding:"number"==typeof(null===(w=k.current)||void 0===w?void 0:w.value)?null===(x=k.current)||void 0===x?void 0:x.value:null,borderWidth:"number"==typeof(null===(C=S.current)||void 0===C?void 0:C.value)?null===(O=S.current)||void 0===O?void 0:O.value:null,borderColor:null===(M=E.current)||void 0===M?void 0:M.value,borderStyle:(null===(R=null===(N=T.current)||void 0===N?void 0:N.value)||void 0===R?void 0:R.value)||null,id:String((null===(D=A.current)||void 0===D?void 0:D.value)||""),className:String((null===(I=P.current)||void 0===I?void 0:I.value)||"")};e.onSave.call(void 0,_)}),[e.onSave]),I=i.createElement("div",{className:"k-form k-form-md"},i.createElement("fieldset",{className:"k-form-fieldset"},i.createElement("div",{className:"k-form-layout k-d-grid k-grid-cols-4 k-gap-x-4"},i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("div",{className:"k-form-field-wrap"},i.createElement("span",{className:"k-checkbox-wrap"},i.createElement(Q,{ref:r,defaultChecked:o})),i.createElement("label",{className:"k-checkbox-label"},n.toLanguageString(vg.cellPropertiesApplyToAllCells,gg[vg.cellPropertiesApplyToAllCells])))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesWidth,gg[vg.cellPropertiesWidth])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:s,defaultValue:l,min:0,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto])}),i.createElement("div",{className:"k-form-hint"},n.toLanguageString(vg.cellPropertiesApplyToColumn,gg[vg.cellPropertiesApplyToColumn])))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"}," "),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(De,{ref:c,defaultValue:u,data:rv,popupSettings:ov}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesHeight,gg[vg.cellPropertiesHeight])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:d,defaultValue:p,min:0,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto])}),i.createElement("div",{className:"k-form-hint"},n.toLanguageString(vg.cellPropertiesApplyToRow,gg[vg.cellPropertiesApplyToRow])))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"}," "),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(De,{ref:h,defaultValue:f,data:rv,popupSettings:ov}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesAlignment,gg[vg.cellPropertiesAlignment])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:m,defaultValue:g,data:RE.map((function(e){return ME(ME({},e),{text:n.toLanguageString(e.textKey,e.text)})})),textField:"text",dataItemKey:"text",popupSettings:ov,valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesTextControl,gg[vg.cellPropertiesTextControl])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:v,defaultValue:y,data:DE.map((function(e){return ME(ME({},e),{text:n.toLanguageString(e.textKey,e.text)})})),textField:"text",dataItemKey:"value",popupSettings:ov,valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesCellPadding,gg[vg.cellPropertiesCellPadding])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:k,defaultValue:x,min:0}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesBackground,gg[vg.cellPropertiesBackground])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(fe,{ref:b,defaultValue:w}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesBorderWidth,gg[vg.cellPropertiesBorderWidth])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:S,defaultValue:C,min:0}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesBorderColor,gg[vg.cellPropertiesBorderColor])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(fe,{ref:E,defaultValue:O}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesBorderStyle,gg[vg.cellPropertiesBorderStyle])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:T,defaultValue:M,popupSettings:ov,data:iv,textField:"text",dataItemKey:"value"}))),i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesId,gg[vg.cellPropertiesId])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Ie,{ref:A,defaultValue:N}))),i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.cellPropertiesCssClass,gg[vg.cellPropertiesCssClass])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Ie,{ref:P,defaultValue:R})))))),_=[i.createElement(Z,{themeColor:"primary",key:"save",onClick:D},n.toLanguageString(vg.cellPropertiesSave,gg[vg.cellPropertiesSave])),i.createElement(Z,{onClick:e.onCancel,key:"cancel"},n.toLanguageString(vg.cellPropertiesCancel,gg[vg.cellPropertiesCancel]))];return i.createElement(ee,{className:"k-editor-window k-editor-table-wizard-window",title:n.toLanguageString(vg.cellProperties,gg[vg.cellProperties]),onClose:e.onCancel,key:"dialog",style:{userSelect:"none"},width:408,height:587,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},I,i.createElement.apply(a,NE([te,{layout:"start"}],_,!1)))},zE=globalThis&&globalThis.__assign||function(){return zE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zE.apply(this,arguments)},BE={rows:0,columns:0,width:null,widthUnit:"",height:null,heightUnit:"",position:null,textAlign:"",cellPadding:null,cellSpacing:null,backgroundColor:void 0,borderWidth:null,borderColor:void 0,borderStyle:null,collapseBorders:!1,id:"",className:"",caption:"",captionAlignment:null,captionPosition:null,headerRows:0,headerColumns:0,associateHeaders:"none"},LE={left:{"margin-left":"","margin-right":"auto"},center:{"margin-left":"auto","margin-right":"auto"},right:{"margin-left":"auto","margin-right":""},"":{}},jE=function(e){for(var t=[],n=0;n<e.height;n++){var r=n*e.width,o=r+e.width;t.push(e.map.slice(r,o))}return t},HE=function(e){var t=!0,n=!0;return e.content.forEach((function(e){e.content.forEach((function(e){var r="table_header"===e.type.name,o="table_cell"===e.type.name;r&&!e.attrs.scope&&(t=!1),(r&&!e.attrs.id||o&&!e.attrs.headers)&&(n=!1)}))})),t?"scope":n?"id":"none"},VE=function(e){var t=e.lastChild.lastChild;return{node:t,pos:e.content.size-t.nodeSize}},$E=function(e,t,n,r,o){var i=t+VE(n).pos;if(!e.doc.nodeAt(i))return e;for(var s=e.doc.resolve(i),l=new Rc(s,s),a=e.tr.setSelection(l),c=e.apply(a),u=0;u<r;u++)o(c,(function(e){c=c.apply(e)}));return c},WE=function(e,t,n,r){for(var o=e,i=0;i<n;i++){var s=o.doc.nodeAt(t);if(s){var l=t+VE(s).pos,a=o.doc.resolve(l),c=new Rc(a,a),u=o.tr.setSelection(c);r(o=o.apply(u),(function(e){o=o.apply(e)}))}}return o},UE=function(e,t,n,r,o){if(t.type.name!==r.name||Object.keys(o).length>0){var i=e.tr.setNodeMarkup(n,r,zE(zE({},t.attrs),o));return e.apply(i)}return e},qE=function(e,t){return co("<p>"+e+"</p>",t).content.firstChild.content},KE=function(e,t){if(e.caption){var n={caption:"",style:"display: table-caption"};e.captionAlignment&&(n=bE(n,"text-align",e.captionAlignment)),e.captionPosition&&(n=bE(n,"caption-side",e.captionPosition));var r=qE(e.caption,t);return r&&t.nodes.table_caption_external.createAndFill(n,r)||void 0}},JE=function(e){return e.firstChild&&"table_caption_external"===e.firstChild.type.name},GE=function(e,t){var n=e.selection.$from,r=sv(n,(function(e){return"table"===e.type.spec.tableRole}));if(r){var o=n.start(r.depth)-1,i=function(e,t,n,r){var o=e,i=o.doc.nodeAt(t);if(!i)return o;var s=hc.get(i);return s.width===r&&s.height===n?o:(r>s.width?o=$E(o,t,i,r-s.width,dh):r<s.width&&(o=WE(o,t,s.width-r,Iy)),(i=o.doc.nodeAt(t))?(n>(s=hc.get(i)).height?o=$E(o,t,i,n-s.height,lh):n<s.height&&(o=WE(o,t,s.height-n,_y)),o):o)}(e,o,t.rows,t.columns);if(i){var s=i.tr;xE(i).forEach((function(e){var n=zE({},e.node.attrs);n=bE(n,"padding","number"==typeof t.cellPadding?t.cellPadding+"px":""),s.setNodeMarkup(e.pos,null,n)})),i=function(e,t,n){var r=e.doc.nodeAt(n);if(!r)return e;var o=zE({},r.attrs),i=null!==t.width&&("%"!==t.widthUnit||!t.caption&&!t.position);o=bE(o,"width",i?t.width+t.widthUnit:""),o=bE(o,"height",null!==t.height?t.height+t.heightUnit:""),o=bE(o,"text-align",t.textAlign||""),o=bE(o,"background-color",t.backgroundColor||""),o=bE(o,"border-width",t.borderWidth?t.borderWidth+"px":""),o=bE(o,"border-style",t.borderStyle||""),o=bE(o,"border-color",t.borderColor||""),o=bE(o,"border-spacing",null!==t.cellSpacing?t.cellSpacing+"px":""),o=null!==t.cellSpacing?bE(o,"border-collapse","unset"):bE(o,"border-collapse",t.collapseBorders?"collapse":"");var s=LE[t.position||""]||{};Object.keys(s).forEach((function(e){o=bE(o,e,s[e])})),o.id=t.id||null,o.class=t.className||null;var l=e.tr.setNodeMarkup(n,null,o);return e.apply(l)}(i=i.apply(s),t,o),i=function(e,t,n){var r=e.doc.nodeAt(n),o=r&&hc.get(r);if(!r||!o)return e;var i=jE(o),s=e,l=e.schema.nodes,a=l.table_header,c=l.table_cell,u=String((new Date).getTime()),d=[],p=function(e,t,n,r){var o=[];if(r)for(var i=0;i<e;i++)d[i]&&d[i][t]&&o.push(d[i][t]);if(n)for(var s=0;s<t;s++)d[e]&&d[e][s]&&o.push(d[e][s]);return o.join(" ")};return i.forEach((function(e,o){e.forEach((function(e,i){var l=r.nodeAt(e);if(l){var h=i<t.headerColumns,f=o<t.headerRows,m=zE({},l.attrs);!function(e,t){/^cell-[0-9]+-[0-9]+$/.test(e.attrs.id||"")&&(t.id=null)}(l,m),m.headers=null,m.scope=null,f||h?("scope"===t.associateHeaders&&(m.scope=f?"col":"row"),"id"===t.associateHeaders&&(m.id=function(e,t){var n="cell-".concat(e).concat(t,"-").concat(u);return d[e]||d.push([]),d[e][t]||d[e].push([]),d[e][t]=n,n}(o,i),(i>0||o>0)&&(m.headers=p(o,i,h,f)||null)),s=UE(s,l,n+e+1,a,m)):("id"===t.associateHeaders&&(m.headers=p(o,i,t.headerColumns>0,t.headerRows>0)||null),s=UE(s,l,n+e+1,c,m))}}))})),s}(i,t,o);var l=sv(n,(function(e){return"table_wrapper"===e.type.name})),a=n.start((null==l?void 0:l.depth)||0)-1,c=function(e,t,n,r,o){var i={state:e,pos:n};if(r||!t.position&&!t.caption)r&&(t.position||t.caption||!t.caption&&JE(r.node))?(e=function(e,t,n,r){var o=zE({},t.attrs);return o=bE(o,"margin-left",""),o=bE(o,"margin-right",""),Object.keys(r||{}).forEach((function(e){o=bE(o,e,(r||{})[e]||"")})),e.apply(e.tr.setNodeMarkup(n,null,o))}(e,r.node,o,t.position&&LE[t.position]),e=function(e,t,n,r){var o,i=e,s=n+2,l=n+1,a=i.schema;if(JE(t))if(o=t.firstChild,r.caption){var c=qE(r.caption,a);if(o=(i=i.apply(i.tr.replaceWith(s,s+o.content.size,c))).doc.nodeAt(l)){var u=zE({},o.attrs);u=bE(u,"text-align",r.captionAlignment||""),u=bE(u,"caption-side",r.captionPosition||""),i=i.apply(i.tr.setNodeAttribute(l,"style",u.style))}}else i=i.apply(i.tr.deleteRange(s,s+o.content.size));else(o=KE(r,a))&&(i=i.apply(i.tr.replaceWith(l,l,o)));return i}(e,r.node,o,t),i={state:e,pos:o}):i=!r||t.position||t.caption?{state:e,pos:n}:{state:e,node:r.node,pos:e.selection.$from.start(r.depth)-1};else{var s={table:"",style:"display: table"},l=[],a=t.position,c=a&&LE[a];c&&Object.keys(c).forEach((function(e){s=bE(s,e,c[e]||"")})),"number"==typeof t.width&&"%"===t.widthUnit&&(s=bE(s,"width",t.width+t.widthUnit));var u=KE(t,e.schema);u&&l.push(u);var d=e.doc.nodeAt(n);l.push(d);var p=e.schema.nodes.table_wrapper.createAndFill(s,l);if(p){var h=e.tr.replaceWith(n,n+d.content.size,p);i={state:e=e.apply(h),pos:n}}}var f=r&&i.state.doc.nodeAt(o);if(f){var m=void 0;"number"==typeof t.width&&"%"===t.widthUnit?m=bE(f.attrs,"width",t.width+t.widthUnit):"%"!==t.widthUnit&&/%/.test(vE(f.attrs.style||"").width||"")&&(m=bE(f.attrs,"width","")),m&&(i.state=i.state.apply(i.state.tr.setNodeMarkup(o,null,m)))}return i}(i,t,o,l,a);i=c.state;var u=c.pos,d=i.doc.nodeAt(c.pos);if(d){var p=u+(l||r).node.content.size,h=e.tr.replaceWith(u,p,d),f=cr.atEnd(d),m=hr.create(h.doc,u+f.to+1);return h.setSelection(m),h}}}},XE=globalThis&&globalThis.__assign||function(){return XE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XE.apply(this,arguments)},YE=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},QE=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ZE=function(e){var t=e.view,n=YE(e,["view"]),r=me(),o=i.useState(!1),s=o[0],l=o[1],a=Boolean(t&&sv(t.state.selection.$from,(function(e){return"table"===e.type.spec.tableRole}))),c=i.useCallback((function(){l(!0)}),[]),u=i.useCallback((function(){l(!1),null==t||t.focus()}),[t]),d=i.useCallback((function(e){if(t&&e){var n=GE(t.state,e);n&&t.dispatch(n)}u()}),[t,u]);return i.createElement(i.Fragment,null,i.createElement(Z,XE({type:"button",title:r.toLanguageString(vg.tableProperties,gg[vg.tableProperties]),icon:"table-properties",svgIcon:Fe,onClick:c,disabled:!a},Zg,n)),s&&i.createElement(oO,{onClose:u,onSave:d,view:t}))},eO=[{textKey:vg.tablePropertiesAlignLeft,text:gg[vg.tablePropertiesAlignLeft],value:"left",icon:"table-align-middle-left",svgIcon:Se},{textKey:vg.tablePropertiesAlignCenter,text:gg[vg.tablePropertiesAlignCenter],value:"center",icon:"table-align-middle-center",svgIcon:Ce},{textKey:vg.tablePropertiesAlignRight,text:gg[vg.tablePropertiesAlignRight],value:"right",icon:"table-align-middle-right",svgIcon:Ee},{textKey:vg.tablePropertiesNoAlignment,text:gg[vg.tablePropertiesNoAlignment],value:"",icon:"align-remove",svgIcon:Ae}],tO=[{textKey:vg.tablePropertiesLeft,text:gg[vg.tablePropertiesLeft],value:"left",style:{},icon:"table-position-left",svgIcon:ze},{textKey:vg.tablePropertiesCenter,text:gg[vg.tablePropertiesCenter],value:"center",style:{},icon:"table-position-center",svgIcon:Be},{textKey:vg.tablePropertiesRight,text:gg[vg.tablePropertiesRight],value:"right",style:{},icon:"table-position-right",svgIcon:Le}].map((function(e){return XE(XE({},e),{style:LE[e.value]})})),nO=[{textKey:vg.tablePropertiesTop,text:gg[vg.tablePropertiesTop],value:"top",icon:"position-top",svgIcon:je},{textKey:vg.tablePropertiesBottom,text:gg[vg.tablePropertiesBottom],value:"bottom",icon:"position-bottom",svgIcon:He}],rO=[{textKey:vg.tablePropertiesNone,text:gg[vg.tablePropertiesNone],value:"none"},{textKey:vg.tablePropertiesUsingScopeAttribute,text:gg[vg.tablePropertiesUsingScopeAttribute],value:"scope"},{textKey:vg.tablePropertiesUsingIdAttributes,text:gg[vg.tablePropertiesUsingIdAttributes],value:"id"}],oO=function(e){var t=i.useMemo((function(){var t=e.view&&e.view.state;return t?function(e){var t,n,r,o=kE(e),i=e.selection.$from,s=o.length?sv(i,(function(e){return"table"===e.type.spec.tableRole})):null;if(!s)return BE;var l=sv(i,(function(e){return"table_wrapper"===e.type.name})),a="",c={},u={};l&&(u=vE(l.node.attrs.style),l.node.content.forEach((function(e){if("table_caption_external"===e.type.name){var t=lo(e);a="<img>"===(a=so(t))?"":a,c=vE(e.attrs.style)}})));var d=vE((null===(t=s.node.attrs)||void 0===t?void 0:t.style)||""),p=hc.get(s.node),h="auto"===u["margin-left"]&&"auto"===u["margin-right"]?"center":"auto"===u["margin-right"]?"left":"auto"===u["margin-left"]?"right":null,f=function(e,t){var n=0,r=0,o=jE(t);o.forEach((function(t){var r=!0;t.forEach((function(t){var n=e.nodeAt(t);n&&"table_header"!==n.type.name&&(r=!1)})),r&&n++}));for(var i=0;i<t.width;i++){for(var s=!0,l=0;l<t.height;l++){var a=o[l]&&o[l][i],c="number"==typeof a&&e.nodeAt(a);c&&"table_header"!==c.type.name&&(s=!1)}s&&r++}return{rows:n,columns:r}}(s.node,p),m=function(e){var t=new Set;return e.content.forEach((function(e){e.content.forEach((function(e){t.add(vE(e.attrs.style).padding||"")}))})),1===t.size?Array.from(t)[0]:""}(s.node);return zE(zE(zE(zE(zE(zE({},BE),{columns:p.width,rows:p.height}),gE(s.node,"width")),l&&/%/.test(u.width||"")?gE(l.node,"width"):{}),gE(s.node,"height")),{textAlign:d["text-align"]||"",position:h||null,cellPadding:m?parseFloat(m):null,cellSpacing:d["border-spacing"]?parseFloat(d["border-spacing"]):null,backgroundColor:d["background-color"],borderWidth:d["border-width"]?parseFloat(d["border-width"]):null,borderColor:d["border-color"],borderStyle:d["border-style"]||null,collapseBorders:"collapse"===d["border-collapse"],caption:a||void 0,captionAlignment:c["text-align"]||"",captionPosition:c["caption-side"]||null,headerRows:f.rows,headerColumns:f.columns,associateHeaders:f.rows||f.columns?HE(s.node):"none",id:(null===(n=s.node.attrs)||void 0===n?void 0:n.id)||"",className:(null===(r=s.node.attrs)||void 0===r?void 0:r.class)||""})}(t):BE}),[e.view]),n=me(),r=i.useState(0),o=r[0],s=r[1],l=i.useCallback((function(e){s(e.selected)}),[]),c=i.useRef(null),u=i.useRef(null),d=i.useRef(null),p=i.useRef(null),h=i.useRef(null),f=i.useRef(null),m=i.useRef(null),g=i.useRef(null),v=i.useRef(null),y=i.useRef(null),b=i.useRef(null),w=i.useRef(null),k=i.useRef(null),x=i.useRef(null),S=i.useRef(null),C=i.useRef(null),E=i.useRef(null),O=i.useRef(null),T=i.useRef(null),M=i.useRef(null),A=i.useRef(null),N=i.useRef(null),P=i.useRef(null),R=i.useCallback((function(){var t,n,r,o,i,s,l,a,R,D,I,_,F,z,B,L,j,H,V,$,W={rows:(null===(t=c.current)||void 0===t?void 0:t.value)||0,columns:(null===(n=u.current)||void 0===n?void 0:n.value)||0,width:d.current?d.current.value:null,height:p.current?p.current.value:null,cellSpacing:h.current?h.current.value:null,cellPadding:f.current?f.current.value:null,borderWidth:m.current?m.current.value:null,widthUnit:(null===(r=g.current)||void 0===r?void 0:r.value)||"",heightUnit:(null===(o=v.current)||void 0===o?void 0:o.value)||"",position:(null===(s=null===(i=y.current)||void 0===i?void 0:i.value)||void 0===s?void 0:s.value)||null,textAlign:(null===(l=b.current)||void 0===l?void 0:l.value)?b.current.value.value:null,borderStyle:(null===(a=w.current)||void 0===a?void 0:a.value)?w.current.value.value:null,backgroundColor:null===(R=k.current)||void 0===R?void 0:R.value,borderColor:null===(D=x.current)||void 0===D?void 0:D.value,collapseBorders:Boolean(null===(_=null===(I=S.current)||void 0===I?void 0:I.element)||void 0===_?void 0:_.checked),id:String((null===(F=C.current)||void 0===F?void 0:F.value)||""),className:String((null===(z=E.current)||void 0===z?void 0:z.value)||""),caption:String((null===(B=O.current)||void 0===B?void 0:B.value)||""),headerRows:(null===(L=T.current)||void 0===L?void 0:L.value)||0,headerColumns:(null===(j=M.current)||void 0===j?void 0:j.value)||0,captionAlignment:(null===(H=A.current)||void 0===H?void 0:H.value)?A.current.value.value:null,captionPosition:(null===(V=N.current)||void 0===V?void 0:V.value)?N.current.value.value:null,associateHeaders:(null===($=P.current)||void 0===$?void 0:$.value)?P.current.value.value:"none"};e.onSave.call(void 0,W)}),[e.onSave]),D=i.createElement("div",{className:"k-form k-form-md"},i.createElement("fieldset",{className:"k-form-fieldset"},i.createElement("div",{className:"k-form-layout k-d-grid k-grid-cols-4 k-gap-x-4"},i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesRows,gg[vg.tablePropertiesRows])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:c,defaultValue:t.rows,min:1}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesColumns,gg[vg.tablePropertiesColumns])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:u,defaultValue:t.columns,min:1}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesWidth,gg[vg.tablePropertiesWidth])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:d,defaultValue:t.width,min:0,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto])}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"}," "),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(De,{ref:g,defaultValue:t.widthUnit,data:rv,popupSettings:ov}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesHeight,gg[vg.tablePropertiesHeight])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:p,defaultValue:t.height,min:0,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto])}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"}," "),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(De,{ref:v,defaultValue:t.heightUnit,data:rv.filter((function(e){return"%"!==e})),popupSettings:ov}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesPosition,gg[vg.tablePropertiesPosition])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:y,defaultValue:tO.find((function(e){return e.value===t.position})),popupSettings:ov,data:tO.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),textField:"text",dataItemKey:"value",valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesAlignment,gg[vg.tablePropertiesAlignment])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:b,defaultValue:eO.find((function(e){return e.value===t.textAlign})),data:eO.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),textField:"text",dataItemKey:"value",popupSettings:ov,valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCellSpacing,gg[vg.tablePropertiesCellSpacing])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:h,defaultValue:t.cellSpacing,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto]),min:0}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCellPadding,gg[vg.tablePropertiesCellPadding])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:f,defaultValue:t.cellPadding,placeholder:n.toLanguageString(vg.sizeAuto,gg[vg.sizeAuto]),min:0}))),i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesTableBackground,gg[vg.tablePropertiesTableBackground])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(fe,{ref:k,defaultValue:t.backgroundColor}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesBorderWidth,gg[vg.tablePropertiesBorderWidth])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:m,defaultValue:t.borderWidth,min:0}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesBorderColor,gg[vg.tablePropertiesBorderColor])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(fe,{ref:x,defaultValue:t.borderColor}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesBorderStyle,gg[vg.tablePropertiesBorderStyle])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:w,defaultValue:iv.find((function(e){return e.value===t.borderStyle})),popupSettings:ov,data:iv.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),textField:"text",dataItemKey:"value"}))),i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Q,{ref:S,className:"k-checkbox-wrap",label:n.toLanguageString(vg.tablePropertiesCollapseBorders,gg[vg.tablePropertiesCollapseBorders]),defaultChecked:t.collapseBorders})))))),I=i.createElement("div",{className:"k-form k-form-md"},i.createElement("fieldset",{className:"k-form-fieldset"},i.createElement("div",{className:"k-form-layout k-d-grid"},i.createElement("div",{className:"k-form-field"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesId,gg[vg.tablePropertiesId])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Ie,{ref:C,defaultValue:t.id}))),i.createElement("div",{className:"k-form-field"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCssClass,gg[vg.tablePropertiesCssClass])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Ie,{ref:E,defaultValue:t.className}))),i.createElement("fieldset",{className:"k-form-fieldset"},i.createElement("legend",{className:"k-form-legend"},n.toLanguageString(vg.tablePropertiesAccessibility,gg[vg.tablePropertiesAccessibility])),i.createElement("div",{className:"k-d-grid k-grid-cols-4 k-gap-x-4"},i.createElement("div",{className:"k-form-field k-col-span-full"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCaption,gg[vg.tablePropertiesCaption])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Ie,{ref:O,defaultValue:t.caption}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCaptionPosition,gg[vg.tablePropertiesCaptionPosition])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:N,defaultValue:nO.find((function(e){return e.value===t.captionPosition})),data:nO.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),popupSettings:ov,textField:"text",dataItemKey:"value",valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesCaptionAlignment,gg[vg.tablePropertiesCaptionAlignment])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:A,defaultValue:eO.find((function(e){return e.value===t.captionAlignment})),data:eO.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),popupSettings:ov,textField:"text",dataItemKey:"value",valueRender:IE,itemRender:_E}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesHeaderRows,gg[vg.tablePropertiesHeaderRows])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:T,defaultValue:t.headerRows,min:0}))),i.createElement("div",{className:"k-form-field k-col-span-1"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesHeaderCols,gg[vg.tablePropertiesHeaderCols])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(Re,{ref:M,defaultValue:t.headerColumns,min:0}))),i.createElement("div",{className:"k-form-field k-col-span-2"},i.createElement("label",{className:"k-label k-form-label"},n.toLanguageString(vg.tablePropertiesAssociateHeaders,gg[vg.tablePropertiesAssociateHeaders])),i.createElement("div",{className:"k-form-field-wrap"},i.createElement(he,{ref:P,defaultValue:rO.find((function(e){return e.value===t.associateHeaders})),data:rO.map((function(e){return XE(XE({},e),{text:n.toLanguageString(e.textKey,e.text)})})),popupSettings:ov,textField:"text",dataItemKey:"value"})))))))),_=i.createElement(se,{selected:o,onSelect:l,animation:!1,keepTabsMounted:!0},i.createElement(le,{title:n.toLanguageString(vg.tablePropertiesGeneral,gg[vg.tablePropertiesGeneral])},D),i.createElement(le,{title:n.toLanguageString(vg.tablePropertiesAdvanced,gg[vg.tablePropertiesAdvanced])},I)),F=[i.createElement(Z,{themeColor:"primary",key:"save",onClick:R},n.toLanguageString(vg.tablePropertiesSave,gg[vg.tablePropertiesSave])),i.createElement(Z,{onClick:e.onClose,key:"cancel"},n.toLanguageString(vg.tablePropertiesCancel,gg[vg.tablePropertiesCancel]))];return i.createElement(ee,{className:"k-editor-window k-editor-table-wizard-window",title:n.toLanguageString(vg.tableProperties,gg[vg.tableProperties]),onClose:e.onClose,key:"dialog",style:{userSelect:"none"},width:480,height:630,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},_,i.createElement.apply(a,QE([te,{layout:"start"}],F,!1)))},iO=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sO=globalThis&&globalThis.__assign||function(){return sO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sO.apply(this,arguments)};!function(e){function t(e){return function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Wv(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=qv(t,["view","render"]),s=n&&n.state,l=!!s&&_o(s,e.actions),a=l?Kv.actions:e.actions,c=l?Kv.commandName:e.commandName,u=X(this),d=e.messages.title,p=i.createElement(Z,Uv({onClick:function(){return n&&Io(a,c)(n.state,n.dispatch)},selected:l,togglable:!0},Zg,{title:u.toLanguageString(d,gg[d])},e.props,o));return r?r.call(void 0,p,{view:n}):p},n}(i.Component);return ne(t),t}(e)}e.createAlignTool=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(t(Qp.alignLeft));e.AlignLeft=n;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(t(Qp.alignRight));e.AlignRight=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(t(Qp.alignCenter));e.AlignCenter=o;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(t(Qp.alignJustify));function l(e){return Lv.createInsertTableTool(e)}e.AlignJustify=s,e.createInsertTableTool=l;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(l(Qp.insertTable));e.InsertTable=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(_v.InsertTablePopup);function u(e){return $v.createStyleDropDownList(e)}e.InsertTablePopup=c,e.createStyleDropDownList=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(u(Qp.fontSize));e.FontSize=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(u(Qp.fontName));function h(e){return Yv.createFormatBlockDropDownList(e)}e.FontName=p,e.ForeColor=function(e){return i.createElement(Zv,sO({},Qp.foreColor,e))},e.BackColor=function(e){return i.createElement(Zv,sO({},Qp.backColor,e))},e.createFormatBlockDropDownList=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(h(Qp.formatBlock));function m(e){return ry.createUndoTool(e)}function g(e){return ry.createRedoTool(e)}e.FormatBlock=f,e.createUndoTool=m,e.createRedoTool=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(m(Qp.undo));e.Undo=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(g(Qp.redo));function b(e){return cy.createIndentTool(e)}e.Redo=y,e.createIndentTool=b;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(b(Qp.indent));function k(e){return hy.createInlineFormatTool(e)}e.Indent=w,e.createInlineFormatTool=k;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.bold));e.Bold=x;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.italic));e.Italic=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.underline));e.Underline=C;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.strikethrough));e.Strikethrough=E;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.subscript));e.Subscript=O;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(k(Qp.superscript));function M(e){return function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={openedDialog:!1},e.toggleDialog=function(){e.setState({openedDialog:!e.state.openedDialog})},e}return yy(n,t),n.prototype.render=function(){var t=this.props,n=t.view,r=t.render,o=wy(t,["view","render"]),s=n&&n.state,l=s?s.schema.nodes[e.node]:void 0,a=X(this),c=e.messages.insertImage,u=!l||!s||!Lr(s,l),d=[i.createElement(Z,by({onClick:u?void 0:this.toggleDialog,"aria-disabled":!!u||void 0,key:"insertImage"},Zg,{title:a.toLanguageString(c,gg[c])},e.props,o,{className:Qe(o.className,e.props.className,{"k-disabled":u})})),this.state.openedDialog&&n&&i.createElement(dv.InsertImageDialog,{key:"insertImageDialog",view:n,settings:e,dir:o.dir,onClose:this.toggleDialog})||null];return r?r.call(void 0,d,{view:n}):d},n}(i.Component);return ne(t),t}(e)}e.Superscript=T,e.createInsertImageTool=M;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(M(Qp.image));function N(e){return vy.createLinkTool(e)}e.InsertImage=A,e.createLinkTool=N;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(N(Qp.link));e.Link=P;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(N(Qp.insertFile));function D(e){return Cy.createListTool(e)}e.InsertFile=R,e.createListTool=D;var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(D(Qp.orderedList));e.OrderedList=I;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(D(Qp.bulletList));function F(e){return My.createOutdentTool(e)}e.UnorderedList=_,e.BulletedList=function(e){var t=[{icon:"list-unordered",svgIcon:G,text:"Disc",style:"disc"},{icon:"list-unordered-outline",svgIcon:Ve,text:"Circle",style:"circle"},{icon:"list-unordered-square",svgIcon:$e,text:"Square",style:"square"}];return i.createElement(pE,sO({listType:Qp.bulletList.listType,items:t,icon:"list-unordered",svgIcon:G,titleKey:Qp.bulletList.messages.title},e))},e.NumberedList=function(e){var t=[{icon:"list-ordered",svgIcon:J,text:"Decimal"},{icon:"list-roman-upper",svgIcon:We,text:"Upper roman",style:"upper-roman"},{icon:"list-roman-lower",svgIcon:Ue,text:"Lower roman",style:"lower-roman"},{icon:"list-latin-big",svgIcon:qe,text:"Upper latin",style:"upper-latin"},{icon:"list-latin-small",svgIcon:Ke,text:"Lower latin",style:"lower-latin"}];return i.createElement(pE,sO({listType:Qp.orderedList.listType,items:t,icon:"list-ordered",svgIcon:J,titleKey:Qp.orderedList.messages.title},e))},e.TableCellProperties=PE,e.TableProperties=ZE,e.createOutdentTool=F;var z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(F(Qp.outdent));function B(e){return Ry.createAddRowBeforeTool(e)}function L(e){return Ry.createAddRowAfterTool(e)}function j(e){return Ry.createAddColumnBeforeTool(e)}function H(e){return Ry.createAddColumnAfterTool(e)}function V(e){return Ry.createDeleteRowTool(e)}function $(e){return Ry.createDeleteColumnTool(e)}function W(e){return Ry.createDeleteTableTool(e)}function U(e){return Ry.createMergeCellsTool(e)}function q(e){return Ry.createSplitCellTool(e)}e.Outdent=z,e.Print=function(e){return i.createElement(Ky,sO({},e))},e.Pdf=function(e){return i.createElement(JC,sO({},e))},e.SelectAll=function(e){return i.createElement(QC,sO({},e))},e.CleanFormatting=function(e){return i.createElement(rE,sO({},e))},e.createAddRowBeforeTool=B,e.createAddRowAfterTool=L,e.createAddColumnBeforeTool=j,e.createAddColumnAfterTool=H,e.createDeleteRowTool=V,e.createDeleteColumnTool=$,e.createDeleteTableTool=W,e.createMergeCellsTool=U,e.createSplitCellTool=q;var K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(B(Qp.addRowBefore));e.AddRowBefore=K;var Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(L(Qp.addRowAfter));e.AddRowAfter=Y;var Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(j(Qp.addColumnBefore));e.AddColumnBefore=Q;var ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(H(Qp.addColumnAfter));e.AddColumnAfter=ee;var te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(V(Qp.deleteRow));e.DeleteRow=te;var re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}($(Qp.deleteColumn));e.DeleteColumn=re;var oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(W(Qp.deleteTable));e.DeleteTable=oe;var ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(U(Qp.mergeCells));e.MergeCells=ie;var se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(q(Qp.splitCell));function le(e){return Fy.createUnlinkTool(e)}e.SplitCell=se,e.createUnlinkTool=le;var ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(le(Qp.unlink));function ce(e){return jy.createViewHtmlTool(e)}e.Unlink=ae,e.createViewHtmlTool=ce;var ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(ce(Qp.viewHtml));e.ViewHtml=ue;var de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iO(t,e),t}(aE);e.FindAndReplace=de}(wE||(wE={}));export{si as $,vr as A,Hn as B,qt as C,Ca as D,hv as E,bt as F,On as G,En as H,Tn as I,Rn as J,Dn as K,Fn as L,St as M,mr as N,zn as O,Mr as P,Gn as Q,zt as R,cr as S,hr as T,Ye as U,Yo as V,Qo as W,ei as X,ni as Y,ri as Z,ii as _,Pv as a,hc as a$,li as a0,ai as a1,ui as a2,di as a3,pi as a4,hi as a5,mi as a6,gi as a7,vi as a8,xi as a9,Lo as aA,jo as aB,Ho as aC,$o as aD,Wo as aE,Uo as aF,qo as aG,Ko as aH,Hp as aI,Up as aJ,Ou as aK,zc as aL,_c as aM,wc as aN,kc as aO,xc as aP,Cc as aQ,Ec as aR,Oc as aS,Tc as aT,Mc as aU,Ac as aV,Nc as aW,Pc as aX,vc as aY,yc as aZ,Rc as a_,Si as aa,Ci as ab,Ei as ac,Oi as ad,Ai as ae,Ni as af,Pi as ag,cd as ah,ud as ai,dd as aj,pd as ak,hd as al,fd as am,md as an,vd as ao,yd as ap,bd as aq,wd as ar,kd as as,xd as at,Sd as au,Cd as av,Ed as aw,Od as ax,cc as ay,uc as az,wE as b,bc as b0,nu as b1,tu as b2,eu as b3,lu as b4,au as b5,uh as b6,dh as b7,ph as b8,uu as b9,du as ba,sh as bb,lh as bc,hu as bd,mu as be,gu as bf,vu as bg,yu as bh,wu as bi,ku as bj,xu as bk,Su as bl,Cu as bm,Eu as bn,dv as bo,ur as c,Or as d,Pr as e,kr as f,Ta as g,Ja as h,$t as i,Ht as j,Et as k,Ct as l,an as m,on as n,ln as o,un as p,wn as q,lr as r,An as s,Nn as t,qn as u,Wn as v,$n as w,Kn as x,Jn as y,jn as z};
