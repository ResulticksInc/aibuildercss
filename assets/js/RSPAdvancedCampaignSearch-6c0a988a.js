import{j as e}from"./pdf-editor-8270ab34.js";import{r as a}from"./react-vendor-379f659a.js";import{aj as t,ad as l,M as n,ap as r,Y as i,aq as s,ar as o,as as c,at as d,au as m,B as u,E as p,aw as h,ax as g,ay as y}from"./index-74701706.js";import{A as v}from"./kendo-5d73125a.js";import{b as j,c as x}from"./RSKendoDropdown-01650470.js";import"./RSCheckbox-2fef59cb.js";import"./style-a86a43a5.js";import{K as S}from"./IconDropdown-25594384.js";import{h as f}from"./utils-16c7e021.js";import{R as C}from"./RSFormGroup-183a553e.js";import"./RSDropdowns-57ad4a66.js";import{F as b}from"./FormLabel-e5a81960.js";import{R as N}from"./RSDatePicker-8e013858.js";import{R as T,a as D}from"./ui-e848d714.js";const w=w=>{var E;const[B,F]=a.useState(null),[R,L]=a.useState(null),[A,$]=a.useState(null),[O,P]=a.useState(null),[K,z]=a.useState(null),[Y,_]=a.useState(null),[W,U]=a.useState(null),[V,Q]=a.useState(null),[q,G]=a.useState(null),[Z,H]=a.useState(!1),[J,X]=a.useState(!1),[ee,ae]=a.useState({}),[te,le]=a.useState(""),[ne,re]=a.useState("Communication name"),[ie,se]=a.useState(null),[oe,ce]=a.useState("");a.useState("");const[de,me]=a.useState([]),[ue,pe]=a.useState([]),[he,ge]=a.useState(["Smartlink communication","Single dimension","Event trigger"]),[ye,ve]=a.useState(""),[je,xe]=a.useState("");a.useState("");const[Se,fe]=a.useState(""),[Ce,be]=a.useState(""),[Ne,Te]=a.useState(""),[De,we]=a.useState(["Draft","Scheduled","In progress","Completed","Multi select"]),[Ie,Me]=a.useState(""),[ke,Ee]=a.useState(!1);a.useEffect((()=>{Be();let e=t();pe((null==e?void 0:e.productCategorysList)||[]),me((null==e?void 0:e.campaignAttributeList)||[])}),[]);const Be=()=>{const e={clientId:l()};n({path:r,params:e,ok:e=>{var a;if(e.status&&e.data.length){const t=i();null==(a=null==e?void 0:e.data)||a.map((e=>{e.userId===t.userId&&(e.firstName=e.firstName+" (You)")})),F(e.data)}},fail:e=>{}})},Fe={tooltip:J?"collapse":"Expand",icon:`${h} flip-item ${J?"flip-vertical":"flip-disabled"} `,size:"sm",iconClass:"white",onClick:()=>{X(!J),w.onPeriyaMenuChange(!J)}},Re={tooltip:Z?"Close":"Search",icon:`${Z?g:y}`,size:"sm",iconClass:`top8 ${Z?" icons-sm":"icons-md "} white cp`,onClick:()=>{if(setTimeout((()=>{Ae()}),1e3),Z&&(L(null),$(null),P(null),z(null),U(null),Q(null),G(null),_(null),Object.keys(ee).length)){let e=!1;Object.keys(ee).map((a=>{if(ee[a]){if(!0===e)return;e=!0}}))}H(!Z),!0!==(null==w?void 0:w.normal)?(X(!1),w.onPeriyaMenuChange(!1),ae({}),re("Communication name"),le(""),L({userId:0,firstName:"-- Select created by --"}),Z&&w.onSearchDataReceived({})):(null==te?void 0:te.length)>0&&(null==w||w.onSearchDataReceived({campaignName:""}),le(""))}},Le=e=>{ae({...ee,...e})},Ae=()=>{var e;null==(e=document.getElementById("adv_search"))||e.focus()};return a.useEffect((()=>{const e=e=>{var a;null==(a=document.getElementById("adv_search"))||a.blur()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),a.useEffect((()=>{!0===(null==w?void 0:w.normal)&&H(!1)}),[null==w?void 0:w.normal]),a.useEffect((()=>{le(null==w?void 0:w.searchQuery)}),[null==w?void 0:w.searchQuery]),e.jsxs("div",{style:{width:J?w.fullWidth:Z?"350px":"33px"},className:`rsp-advanced-search-wrapper ${Z?"open-search":"close-search"} ${J?"open-megamenu":"close-megamenu"}`,children:[e.jsxs("div",{className:`rsp-advanced-search-container ${Z?"open-search":"close-search"} ${J?"open-megamenu":"close-megamenu"}`,children:[e.jsx("div",{className:`rsp-search-inner rsp-search-dropdown ${J&&"click-off"}`,children:e.jsx(S,{className:`${!0===(null==w?void 0:w.normal)&&"click-off"}`,data:[{text:"Communication name",id:1e3},{text:"Communication type",id:1001},{text:"Delivery type",id:1002}],icon:` ${s} icons-sm white`,onItemClick:e=>{re(e.item.text)}})}),J?e.jsxs("div",{className:"search-chips-container",style:{width:J?w.fullWidth:"100%"},children:[Object.keys(ee).map((a=>e.jsx("div",{className:"search-chips-box",children:""!==ee[a]&&e.jsxs(e.Fragment,{children:[e.jsx("label",{children:M[a]}),e.jsx("ul",{className:"chips-custom",children:e.jsxs("li",{children:["approvalStatus"===a?1===ee[a]?"Accepted":"Rejected":"createdBy"===a?(ee[a],(null==R?void 0:R.map((e=>e.firstName))).toString()):ee[a],"Â ",e.jsx(o,{color:"color-remove",icon:c,size:"sm",onClick:()=>{let e={...ee};delete e[a],ae(e)}})]})})]})}))),e.jsx(o,{mainClass:"ad-search",icon:d,size:"sm",color:"input-icon"})]}):e.jsxs("div",{className:"rsp-search-inner rsp-search-input",children:[!0===(null==w?void 0:w.normal)?e.jsx(j,{id:"adv_search",placeholder:"Template name",className:"marginB0",defaultValue:"fsdf",val:te,cb:e=>{let a=e.trimStart();le(a)},ob:e=>{Le({campaignName:e})}}):e.jsxs(e.Fragment,{children:["Communication name"===ne?e.jsx(j,{id:"adv_search",placeholder:"Communication name",className:"marginB0",defaultValue:"fsdf",val:te,cb:e=>{let a=e.trimStart();le(a)},ob:e=>{Le({campaignName:e})}}):null,"Communication type"===ne?e.jsx(e.Fragment,{children:e.jsx(v,{textField:"attributeName",dataItemKey:"campaignAttributeId",data:de,onBlur:e=>{let a=0;de.map((t=>{t.attributeName.toLowerCase()===e.target.value.toLowerCase()&&(a=t.campaignAttributeId)})),Le({campaignType:a})},placeholder:"Enter communication type"})}):null,"Delivery type"===ne?e.jsx(e.Fragment,{children:e.jsx(v,{data:he,placeholder:"Enter delivery type",onBlur:e=>{e.target.value.toLowerCase().includes("single")?Le({deliveryType:"S"}):e.target.value.toLowerCase().includes("trigger")?Le({deliveryType:"T"}):e.target.value.toLowerCase().includes("smartlink")&&Le({IsSmartUrlEnabled:"Y",deliveryType:"Smartlink"})}})}):null,"Product type"===ne?e.jsx(e.Fragment,{children:e.jsx(v,{textField:"categoryName",dataItemKey:"categoryId",data:ue,placeholder:"Enter product type",onBlur:e=>{let a=0;ue.map((t=>{t.categoryName.toLowerCase()===e.target.value.toLowerCase()&&(a=t.categoryId)})),Le({productType:a})}})}):null]}),e.jsx(o,{icon:d,size:"sm",color:"input-icon",onClick:()=>{Object.keys(ee).length&&Object.keys(ee).map((e=>{ee[e]&&(w.onSearchDataReceived(ee,!0),ae({}))}))}})]}),!0===(null==w?void 0:w.normal)?null:e.jsx("div",{className:"rsp-search-inner rsp-search-caret",children:e.jsx(o,{config:Fe})}),e.jsx("div",{className:"rsp-search-toggle",onClick:()=>{},children:e.jsx(o,{config:Re})})]}),e.jsxs("div",{className:"rsp-megamenu-container "+(J?"open-megamenu":"close-megamenu"),children:[e.jsxs(T,{children:[e.jsxs(D,{md:6,children:[e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Communication name",right:!0})}),e.jsx(D,{children:e.jsx("div",{style:{borderBottom:1,borderBottomColor:"gray",borderBottomStyle:"solid"},children:e.jsx(x,{noinput:!0,errorMessage:ye,label:"Communication name",placeholder:0===(null==(E=null==ee?void 0:ee.campaignName)?void 0:E.length)?"Type and enter":"Enter communication name",data:[],value:m((null==ee?void 0:ee.campaignName)||""),allowCustom:!0,onChange:e=>{if(e.target.value.length<=5){let a=e.target.value.toString();ce(a),Le({campaignName:a})}else ve("Maximum of 5 communication names are allowed"),setTimeout((()=>{ve("")}),2e3)}})})})]})}),B&&e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Created by",right:!0})}),e.jsx(D,{children:B&&e.jsx(x,{label:"Created by",errorMessage:je,placeholder:0===(null==R?void 0:R.length)?"Type and enter":"Select user",data:B,value:null===(null==ee?void 0:ee.createdBy)||void 0===(null==ee?void 0:ee.createdBy)?{userId:0,firstName:"-- Select created by --"}:null!==R?R:{userId:0,firstName:"-- Select Created by --"},allowCustom:!1,textField:"firstName",dataItemKey:"userId",defaultValue:{userId:0,firstName:"-- Select created by --"},onChange:e=>{if(e.target.value.length<=5){let a=e.target.value.map((e=>e.userId));Le({createdBy:a.toString()}),L(e.target.value)}else xe("Maximum of 5 users are allowed"),setTimeout((()=>{xe("")}),2e3)},onFilterChange:e=>{}})})]})}),e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Delivery type",right:!0})}),e.jsx(D,{children:he&&e.jsx(x,{inputProps:{className:"rrdisable-cursor"},label:"Delivery type",errorMessage:Se,placeholder:0===(null==R?void 0:R.length)?"Type and enter":"Select delivery type",data:["Smartlink communication","Single dimension","Event trigger"],value:ee.deliveryType?K:{userId:"288",firstName:"-- Select created by --"},allowCustom:!1,onChange:e=>{e.target.value.length<=5?(Le({deliveryType:e.target.value.toString()}),z(e.target.value)):(fe("Maximum of 5 delivery types are allowed"),setTimeout((()=>{fe("")}),2e3))},onFilterChange:e=>{}})})]})}),e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Status",right:!0})}),e.jsx(D,{children:De&&e.jsx(x,{label:"Status",errorMessage:Ie,placeholder:"Select status",data:(null==w?void 0:w.campListing)?["Draft","In progress","Completed"]:["In progress","Completed"],value:ee.campStatus?Y:{userId:"007",firstName:"-- Select Status --"},allowCustom:!1,onChange:e=>{var a;"Archive"===(null==e?void 0:e.value[0])&&Ee(!0),(null==(a=e.target.value)?void 0:a.length)<=2?(Le({campStatus:e.target.value.toString()}),_(e.target.value)):(Me("Maximum of 2 types are allowed"),setTimeout((()=>{Me("")}),2e3))},onFilterChange:e=>{}})})]})})]}),e.jsxs(D,{md:6,children:[e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Communication type",right:!0})}),e.jsx(D,{children:e.jsx(x,{label:"Communication type",errorMessage:Ce,data:de,textField:"attributeName",placeholder:"Select communication type",dataItemKey:"campaignAttributeId",allowCustom:!1,value:null===(null==ee?void 0:ee.campaignType)||void 0===(null==ee?void 0:ee.campaignType)?{campaignAttributeId:0,attributeName:"-- Select communication type --"}:null!==A?A:{campaignAttributeId:0,attributeName:"-- Select communication type --"},onChange:e=>{if(e.target.value.length<=5){let a=e.target.value.map((e=>e.attributeName));$(e.target.value),Le({campaignType:a.toString()})}else be("Maximum of 5 communication types are allowed"),setTimeout((()=>{be("")}),2e3)}})})]})}),e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"Channel type",right:!0})}),e.jsx(D,{children:e.jsx(x,{label:"Channel type",errorMessage:Ne,textField:"channelName",placeholder:"Select channel type",dataItemKey:"channelType",value:O||{channelType:0,channelName:"-- Select channel --"},data:k,allowCustom:!1,onChange:e=>{if(e.target.value.length<=5){let a=e.target.value.map((e=>e.channelType));P(e.target.value),Le({channelType:a.toString()})}else Te("Maximum of 5 communication names are allowed"),setTimeout((()=>{Te("")}),2e3)}})})]})}),e.jsx(C,{children:e.jsxs(T,{className:"marginB30",children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"From",right:!0})}),e.jsx(D,{children:e.jsx(N,{format:"MMM dd, yyyy",placeholder:"Start date",value:(null==ee?void 0:ee.startDate)?V:null,handleChange:e=>{Q(e.target.value);let a=new Date(e.target.value.toISOString().split("T")[0]);a=f(a).format("DD MMM yyyy"),G(null),Le({startDate:I(e.target.value),endDate:""})}})})]})}),e.jsx(C,{children:e.jsxs(T,{children:[e.jsx(D,{md:5,children:e.jsx(b,{label:"To",right:!0})}),e.jsx(D,{children:e.jsx(N,{format:"MMM dd, yyyy",placeholder:"End date",value:(null==ee?void 0:ee.endDate)?q:null==ee?void 0:ee.endDate,min:(null==ee?void 0:ee.startDate)?V:new Date,handleChange:e=>{G(e.target.value);let a=new Date(e.target.value.toISOString().split("T")[0]);a=f(a).format("DD MMM yyyy"),Le({endDate:I(e.target.value)})}})})]})})]})]}),e.jsxs("div",{className:"btn-container d-flex justify-content-end margin0 "+(J?"d-block":"d-none"),children:[e.jsx(u,{onClick:()=>{X(!1),w.onPeriyaMenuChange(!J),w.onSearchDataReceived(null)},children:"Cancel"}),e.jsx(p,{className:!1===(()=>{let e=!1;return Object.keys(ee).length&&Object.keys(ee).map((a=>{if(ee[a]){if(!0===e)return;e=!0}})),e})()?"click-off":"click-on",onClick:()=>{if(Object.keys(ee).length){X(!1),le("");{w.onPeriyaMenuChange(!J),ee.createdBy;let e=null==W?void 0:W.map((e=>e.categoryId)),a=null==O?void 0:O.map((e=>e.channelType));null==Y||Y.map((e=>{}));let t={campaignName:ee.campaignName||"",endDate:ee.endDate||null,startDate:ee.startDate||null,campaignType:null===A?null:A.map((e=>e.campaignAttributeId)).toString()||null,IsSmartUrlEnabled:null===K?"":K.toString(),deliveryType:null===K?"":K.join(",").replace("Single dimension","S").replace("Event trigger","T").replace("Smartlink communication","SL"),productType:null===W?null:null==e?void 0:e.join(","),channelType:null===O?null:null==a?void 0:a.join(","),createdBy:ee.createdBy||"",isArchived:ke,campaignStatus:Y.toString()};w.onSearchDataReceived(t,!0)}}else se("Filter any one value"),setTimeout((()=>{se(null)}),3e3)},children:"Search"})]})]})]})},I=e=>{var a=new Date(e),t=""+(a.getMonth()+1),l=""+a.getDate();return[a.getFullYear(),t,l].join("-")},M={campaignName:"Communication name",createdBy:"User",categoryName:"Category",productType:"Product type",deliveryType:"Delivery type",campaignType:"Communication type",channelType:"Channel type",startDate:"Start date",endDate:"End date",archive:"Archive",campStatus:"Status"},k=[{channelType:1,channelName:"Email"},{channelType:2,channelName:"SMS"},{channelType:8,channelName:"Web push notification"},{channelType:14,channelName:"Mobile push notification"},{channelType:5,channelName:"Social media"},{channelType:10,channelName:"Paid media"},{channelType:21,channelName:"WhatsApp"}];export{w as R};
